

			/* array_map_polyfill.js */
if(!Array.prototype.map){Array.prototype.map=function(callback){var T,A,k;if(this==null){throw new TypeError("this is null or not defined");}var O=Object(this);var len=O.length>>>0;if(typeof callback!=="function"){throw new TypeError(callback+" is not a function");}if(arguments.length>1){T=arguments[1];}A=new Array(len);k=0;while(k<len){var kValue,mappedValue;if(k in O){kValue=O[k];mappedValue=callback.call(T,kValue,k,O);A[k]=mappedValue;}k++;}return A;};}
			/* /array_map_polyfill.js */
			/* Array.includes.polyfill.js */
(function(){if(!Array.prototype.includes){Object.defineProperty(Array.prototype,"includes",{value:function(searchElement,fromIndex){if(this==null){throw new TypeError('"this" is null or not defined');}var o=Object(this);var len=o.length>>>0;if(len===0){return false;}var n=fromIndex|0;var k=Math.max(n>=0?n:len-Math.abs(n),0);function sameValueZero(x,y){return x===y||(typeof x==="number"&&typeof y==="number"&&isNaN(x)&&isNaN(y));}while(k<len){if(sameValueZero(o[k],searchElement)){return true;}k++;}return false;}});}})();
			/* /Array.includes.polyfill.js */
			/* object.assign.polyfill.js */
if(typeof Object.assign!="function"){"use strict";function assign(target,firstSource){if(target===undefined||target===null){throw new TypeError("Cannot convert first argument to object");}var to=Object(target);for(var i=1;i<arguments.length;i++){var nextSource=arguments[i];if(nextSource===undefined||nextSource===null){continue;}var keysArray=Object.keys(Object(nextSource));for(var nextIndex=0,len=keysArray.length;nextIndex<len;nextIndex++){var nextKey=keysArray[nextIndex];var desc=Object.getOwnPropertyDescriptor(nextSource,nextKey);if(desc!==undefined&&desc.enumerable){to[nextKey]=nextSource[nextKey];}}}return to;}function polyfill(){Object.defineProperty(Object,"assign",{enumerable:false,configurable:true,writable:true,value:assign});}polyfill();}
			/* /object.assign.polyfill.js */
			/* Array.includes.polyfill.js */
(function(){if(!Array.prototype.includes){Object.defineProperty(Array.prototype,"includes",{value:function(searchElement,fromIndex){if(this==null){throw new TypeError('"this" is null or not defined');}var o=Object(this);var len=o.length>>>0;if(len===0){return false;}var n=fromIndex|0;var k=Math.max(n>=0?n:len-Math.abs(n),0);function sameValueZero(x,y){return x===y||(typeof x==="number"&&typeof y==="number"&&isNaN(x)&&isNaN(y));}while(k<len){if(sameValueZero(o[k],searchElement)){return true;}k++;}return false;}});}})();
			/* /Array.includes.polyfill.js */
			/* jquery_js */

/*! jQuery v2.2.4 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="2.2.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isPlainObject:function(a){var b;if("object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;if(a.constructor&&!k.call(a,"constructor")&&!k.call(a.constructor.prototype||{},"isPrototypeOf"))return!1;for(b in a);return void 0===b||k.call(a,b)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=d.createElement("script"),b.text=a,d.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:h.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(d=e.call(arguments,2),f=function(){return a.apply(b||this,d.concat(e.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=R.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return h.call(b,a)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?void 0!==c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?h.call(n(a),this[0]):h.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||n.uniqueSort(e),D.test(a)&&e.reverse()),this.pushStack(e)}});var G=/\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.removeEventListener("DOMContentLoaded",J),a.removeEventListener("load",J),n.ready()}n.ready.promise=function(b){return I||(I=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(n.ready):(d.addEventListener("DOMContentLoaded",J),a.addEventListener("load",J))),I.promise(b)},n.ready.promise();var K=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)K(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},L=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function M(){this.expando=n.expando+M.uid++}M.uid=1,M.prototype={register:function(a,b){var c=b||{};return a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,writable:!0,configurable:!0}),a[this.expando]},cache:function(a){if(!L(a))return{};var b=a[this.expando];return b||(b={},L(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[b]=c;else for(d in b)e[d]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=a[this.expando];if(void 0!==f){if(void 0===b)this.register(a);else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in f?d=[b,e]:(d=e,d=d in f?[d]:d.match(G)||[])),c=d.length;while(c--)delete f[d[c]]}(void 0===b||n.isEmptyObject(f))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!n.isEmptyObject(b)}};var N=new M,O=new M,P=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function R(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Q,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:P.test(c)?n.parseJSON(c):c;
}catch(e){}O.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return O.hasData(a)||N.hasData(a)},data:function(a,b,c){return O.access(a,b,c)},removeData:function(a,b){O.remove(a,b)},_data:function(a,b,c){return N.access(a,b,c)},_removeData:function(a,b){N.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=O.get(f),1===f.nodeType&&!N.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),R(f,d,e[d])));N.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){O.set(this,a)}):K(this,function(b){var c,d;if(f&&void 0===b){if(c=O.get(f,a)||O.get(f,a.replace(Q,"-$&").toLowerCase()),void 0!==c)return c;if(d=n.camelCase(a),c=O.get(f,d),void 0!==c)return c;if(c=R(f,d,void 0),void 0!==c)return c}else d=n.camelCase(a),this.each(function(){var c=O.get(this,d);O.set(this,d,b),a.indexOf("-")>-1&&void 0!==c&&O.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){O.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=N.get(a,b),c&&(!d||n.isArray(c)?d=N.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return N.get(a,c)||N.access(a,c,{empty:n.Callbacks("once memory").add(function(){N.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=N.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function W(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&T.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var X=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,Z=/^$|\/(?:java|ecma)script/i,$={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$.optgroup=$.option,$.tbody=$.tfoot=$.colgroup=$.caption=$.thead,$.th=$.td;function _(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function aa(a,b){for(var c=0,d=a.length;d>c;c++)N.set(a[c],"globalEval",!b||N.get(b[c],"globalEval"))}var ba=/<|&#?\w+;/;function ca(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],o=0,p=a.length;p>o;o++)if(f=a[o],f||0===f)if("object"===n.type(f))n.merge(m,f.nodeType?[f]:f);else if(ba.test(f)){g=g||l.appendChild(b.createElement("div")),h=(Y.exec(f)||["",""])[1].toLowerCase(),i=$[h]||$._default,g.innerHTML=i[1]+n.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;n.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",o=0;while(f=m[o++])if(d&&n.inArray(f,d)>-1)e&&e.push(f);else if(j=n.contains(f.ownerDocument,f),g=_(l.appendChild(f),"script"),j&&aa(g),c){k=0;while(f=g[k++])Z.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var da=/^key/,ea=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,fa=/^([^.]*)(?:\.(.+)|)/;function ga(){return!0}function ha(){return!1}function ia(){try{return d.activeElement}catch(a){}}function ja(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ja(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=ha;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return"undefined"!=typeof n&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(G)||[""],j=b.length;while(j--)h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.hasData(a)&&N.get(a);if(r&&(i=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&N.remove(a,"handle events")}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(N.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())a.rnamespace&&!a.rnamespace.test(g.namespace)||(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||d,e=c.documentElement,f=c.body,a.pageX=b.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ea.test(f)?this.mouseHooks:da.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=d),3===a.target.nodeType&&(a.target=a.target.parentNode),h.filter?h.filter(a,g):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ia()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ia()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ga:ha):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:ha,isPropagationStopped:ha,isImmediatePropagationStopped:ha,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ga,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ga,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ga,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||n.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),n.fn.extend({on:function(a,b,c,d){return ja(this,a,b,c,d)},one:function(a,b,c,d){return ja(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=ha),this.each(function(){n.event.remove(this,a,c,b)})}});var ka=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,la=/<script|<style|<link/i,ma=/checked\s*(?:[^=]|=\s*.checked.)/i,na=/^true\/(.*)/,oa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function pa(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function qa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function ra(a){var b=na.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function sa(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(N.hasData(a)&&(f=N.access(a),g=N.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}O.hasData(a)&&(h=O.access(a),i=n.extend({},h),O.set(b,i))}}function ta(a,b){var c=b.nodeName.toLowerCase();"input"===c&&X.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function ua(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&ma.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),ua(f,b,c,d)});if(o&&(e=ca(b,a[0].ownerDocument,!1,a,d),g=e.firstChild,1===e.childNodes.length&&(e=g),g||d)){for(h=n.map(_(e,"script"),qa),i=h.length;o>m;m++)j=e,m!==p&&(j=n.clone(j,!0,!0),i&&n.merge(h,_(j,"script"))),c.call(a[m],j,m);if(i)for(k=h[h.length-1].ownerDocument,n.map(h,ra),m=0;i>m;m++)j=h[m],Z.test(j.type||"")&&!N.access(j,"globalEval")&&n.contains(k,j)&&(j.src?n._evalUrl&&n._evalUrl(j.src):n.globalEval(j.textContent.replace(oa,"")))}return a}function va(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(_(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&aa(_(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(ka,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=_(h),f=_(a),d=0,e=f.length;e>d;d++)ta(f[d],g[d]);if(b)if(c)for(f=f||_(a),g=g||_(h),d=0,e=f.length;e>d;d++)sa(f[d],g[d]);else sa(a,h);return g=_(h,"script"),g.length>0&&aa(g,!i&&_(a,"script")),h},cleanData:function(a){for(var b,c,d,e=n.event.special,f=0;void 0!==(c=a[f]);f++)if(L(c)){if(b=c[N.expando]){if(b.events)for(d in b.events)e[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);c[N.expando]=void 0}c[O.expando]&&(c[O.expando]=void 0)}}}),n.fn.extend({domManip:ua,detach:function(a){return va(this,a,!0)},remove:function(a){return va(this,a)},text:function(a){return K(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.appendChild(a)}})},prepend:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(_(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return K(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!la.test(a)&&!$[(Y.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(_(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return ua(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(_(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),f=e.length-1,h=0;f>=h;h++)c=h===f?this:this.clone(!0),n(e[h])[b](c),g.apply(d,c.get());return this.pushStack(d)}});var wa,xa={HTML:"block",BODY:"block"};function ya(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function za(a){var b=d,c=xa[a];return c||(c=ya(a,b),"none"!==c&&c||(wa=(wa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=wa[0].contentDocument,b.write(),b.close(),c=ya(a,b),wa.detach()),xa[a]=c),c}var Aa=/^margin/,Ba=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ca=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Ea=d.documentElement;!function(){var b,c,e,f,g=d.createElement("div"),h=d.createElement("div");if(h.style){h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h);function i(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Ea.appendChild(g);var d=a.getComputedStyle(h);b="1%"!==d.top,f="2px"===d.marginLeft,c="4px"===d.width,h.style.marginRight="50%",e="4px"===d.marginRight,Ea.removeChild(g)}n.extend(l,{pixelPosition:function(){return i(),b},boxSizingReliable:function(){return null==c&&i(),c},pixelMarginRight:function(){return null==c&&i(),e},reliableMarginLeft:function(){return null==c&&i(),f},reliableMarginRight:function(){var b,c=h.appendChild(d.createElement("div"));return c.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",h.style.width="1px",Ea.appendChild(g),b=!parseFloat(a.getComputedStyle(c).marginRight),Ea.removeChild(g),h.removeChild(c),b}})}}();function Fa(a,b,c){var d,e,f,g,h=a.style;return c=c||Ca(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Ba.test(g)&&Aa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0!==g?g+"":g}function Ga(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Ha=/^(none|table(?!-c[ea]).+)/,Ia={position:"absolute",visibility:"hidden",display:"block"},Ja={letterSpacing:"0",fontWeight:"400"},Ka=["Webkit","O","Moz","ms"],La=d.createElement("div").style;function Ma(a){if(a in La)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ka.length;while(c--)if(a=Ka[c]+b,a in La)return a}function Na(a,b,c){var d=T.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Oa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function Pa(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ca(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Fa(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ba.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Oa(a,b,c||(g?"border":"content"),d,f)+"px"}function Qa(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=N.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=N.access(d,"olddisplay",za(d.nodeName)))):(e=V(d),"none"===c&&e||N.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Fa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=T.exec(c))&&e[1]&&(c=W(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Fa(a,b,d)),"normal"===e&&b in Ja&&(e=Ja[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Ha.test(n.css(a,"display"))&&0===a.offsetWidth?Da(a,Ia,function(){return Pa(a,b,d)}):Pa(a,b,d):void 0},set:function(a,c,d){var e,f=d&&Ca(a),g=d&&Oa(a,b,d,"border-box"===n.css(a,"boxSizing",!1,f),f);return g&&(e=T.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=n.css(a,b)),Na(a,c,g)}}}),n.cssHooks.marginLeft=Ga(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Fa(a,"marginLeft"))||a.getBoundingClientRect().left-Da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0}),n.cssHooks.marginRight=Ga(l.reliableMarginRight,function(a,b){return b?Da(a,{display:"inline-block"},Fa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Aa.test(a)||(n.cssHooks[a+b].set=Na)}),n.fn.extend({css:function(a,b){return K(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ca(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Qa(this,!0)},hide:function(){return Qa(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function Ra(a,b,c,d,e){return new Ra.prototype.init(a,b,c,d,e)}n.Tween=Ra,Ra.prototype={constructor:Ra,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ra.propHooks[this.prop];return a&&a.get?a.get(this):Ra.propHooks._default.get(this)},run:function(a){var b,c=Ra.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ra.propHooks._default.set(this),this}},Ra.prototype.init.prototype=Ra.prototype,Ra.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},Ra.propHooks.scrollTop=Ra.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=Ra.prototype.init,n.fx.step={};var Sa,Ta,Ua=/^(?:toggle|show|hide)$/,Va=/queueHooks$/;function Wa(){return a.setTimeout(function(){Sa=void 0}),Sa=n.now()}function Xa(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=U[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ya(a,b,c){for(var d,e=(_a.tweeners[b]||[]).concat(_a.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Za(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&V(a),q=N.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?N.get(a,"olddisplay")||za(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Ua.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?za(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=N.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;N.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ya(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function $a(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function _a(a,b,c){var d,e,f=0,g=_a.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Sa||Wa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:Sa||Wa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for($a(k,j.opts.specialEasing);g>f;f++)if(d=_a.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,Ya,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(_a,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return W(c.elem,a,T.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],_a.tweeners[c]=_a.tweeners[c]||[],_a.tweeners[c].unshift(b)},prefilters:[Za],prefilter:function(a,b){b?_a.prefilters.unshift(a):_a.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=_a(this,n.extend({},a),f);(e||N.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=N.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Va.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=N.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Xa(b,!0),a,d,e)}}),n.each({slideDown:Xa("show"),slideUp:Xa("hide"),slideToggle:Xa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Sa=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Sa=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ta||(Ta=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(Ta),Ta=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",l.checkOn=""!==a.value,l.optSelected=c.selected,b.disabled=!0,l.optDisabled=!c.disabled,a=d.createElement("input"),a.value="t",a.type="radio",l.radioValue="t"===a.value}();var ab,bb=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return K(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ab:void 0)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)}}),ab={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=bb[b]||n.find.attr;bb[b]=function(a,b,d){var e,f;return d||(f=bb[b],bb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,bb[b]=f),e}});var cb=/^(?:input|select|textarea|button)$/i,db=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return K(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),
void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):cb.test(a.nodeName)||db.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var eb=/[\t\r\n\f]/g;function fb(a){return a.getAttribute&&a.getAttribute("class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,fb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,fb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,fb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=fb(this),b&&N.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":N.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+fb(c)+" ").replace(eb," ").indexOf(b)>-1)return!0;return!1}});var gb=/\r/g,hb=/[\x20\t\r\n\f]+/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(gb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a)).replace(hb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(n.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var ib=/^(?:focusinfocus|focusoutblur)$/;n.extend(n.event,{trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!ib.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),l=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},f||!o.trigger||o.trigger.apply(e,c)!==!1)){if(!f&&!o.noBubble&&!n.isWindow(e)){for(j=o.delegateType||q,ib.test(j+q)||(h=h.parentNode);h;h=h.parentNode)p.push(h),i=h;i===(e.ownerDocument||d)&&p.push(i.defaultView||i.parentWindow||a)}g=0;while((h=p[g++])&&!b.isPropagationStopped())b.type=g>1?j:o.bindType||q,m=(N.get(h,"events")||{})[b.type]&&N.get(h,"handle"),m&&m.apply(h,c),m=l&&h[l],m&&m.apply&&L(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=q,f||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!L(e)||l&&n.isFunction(e[q])&&!n.isWindow(e)&&(i=e[l],i&&(e[l]=null),n.event.triggered=q,e[q](),n.event.triggered=void 0,i&&(e[l]=i)),b.result}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b)}}),n.fn.extend({trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),l.focusin="onfocusin"in a,l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=N.access(d,b);e||d.addEventListener(a,c,!0),N.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=N.access(d,b)-1;e?N.access(d,b,e):(d.removeEventListener(a,c,!0),N.remove(d,b))}}});var jb=a.location,kb=n.now(),lb=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var mb=/#.*$/,nb=/([?&])_=[^&]*/,ob=/^(.*?):[ \t]*([^\r\n]*)$/gm,pb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qb=/^(?:GET|HEAD)$/,rb=/^\/\//,sb={},tb={},ub="*/".concat("*"),vb=d.createElement("a");vb.href=jb.href;function wb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function xb(a,b,c,d){var e={},f=a===tb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function yb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function zb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Ab(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:jb.href,type:"GET",isLocal:pb.test(jb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ub,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?yb(yb(a,n.ajaxSettings),b):yb(n.ajaxSettings,a)},ajaxPrefilter:wb(sb),ajaxTransport:wb(tb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m=n.ajaxSetup({},c),o=m.context||m,p=m.context&&(o.nodeType||o.jquery)?n(o):n.event,q=n.Deferred(),r=n.Callbacks("once memory"),s=m.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(2===v){if(!h){h={};while(b=ob.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===v?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return v||(a=u[c]=u[c]||a,t[a]=b),this},overrideMimeType:function(a){return v||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>v)for(b in a)s[b]=[s[b],a[b]];else x.always(a[x.status]);return this},abort:function(a){var b=a||w;return e&&e.abort(b),z(0,b),this}};if(q.promise(x).complete=r.add,x.success=x.done,x.error=x.fail,m.url=((b||m.url||jb.href)+"").replace(mb,"").replace(rb,jb.protocol+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=n.trim(m.dataType||"*").toLowerCase().match(G)||[""],null==m.crossDomain){j=d.createElement("a");try{j.href=m.url,j.href=j.href,m.crossDomain=vb.protocol+"//"+vb.host!=j.protocol+"//"+j.host}catch(y){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=n.param(m.data,m.traditional)),xb(sb,m,c,x),2===v)return x;k=n.event&&m.global,k&&0===n.active++&&n.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!qb.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(lb.test(f)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=nb.test(f)?f.replace(nb,"$1_="+kb++):f+(lb.test(f)?"&":"?")+"_="+kb++)),m.ifModified&&(n.lastModified[f]&&x.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&x.setRequestHeader("If-None-Match",n.etag[f])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+ub+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)x.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(o,x,m)===!1||2===v))return x.abort();w="abort";for(l in{success:1,error:1,complete:1})x[l](m[l]);if(e=xb(tb,m,c,x)){if(x.readyState=1,k&&p.trigger("ajaxSend",[x,m]),2===v)return x;m.async&&m.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},m.timeout));try{v=1,e.send(t,z)}catch(y){if(!(2>v))throw y;z(-1,y)}}else z(-1,"No Transport");function z(b,c,d,h){var j,l,t,u,w,y=c;2!==v&&(v=2,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&300>b||304===b,d&&(u=zb(m,x,d)),u=Ab(m,u,x,j),j?(m.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(n.lastModified[f]=w),w=x.getResponseHeader("etag"),w&&(n.etag[f]=w)),204===b||"HEAD"===m.type?y="nocontent":304===b?y="notmodified":(y=u.state,l=u.data,t=u.error,j=!t)):(t=y,!b&&y||(y="error",0>b&&(b=0))),x.status=b,x.statusText=(c||y)+"",j?q.resolveWith(o,[l,y,x]):q.rejectWith(o,[x,y,t]),x.statusCode(s),s=void 0,k&&p.trigger(j?"ajaxSuccess":"ajaxError",[x,m,j?l:t]),r.fireWith(o,[x,y]),k&&(p.trigger("ajaxComplete",[x,m]),--n.active||n.event.trigger("ajaxStop")))}return x},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return!n.expr.filters.visible(a)},n.expr.filters.visible=function(a){return a.offsetWidth>0||a.offsetHeight>0||a.getClientRects().length>0};var Bb=/%20/g,Cb=/\[\]$/,Db=/\r?\n/g,Eb=/^(?:submit|button|image|reset|file)$/i,Fb=/^(?:input|select|textarea|keygen)/i;function Gb(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||Cb.test(a)?d(a,e):Gb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Gb(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Gb(c,a[c],b,e);return d.join("&").replace(Bb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Fb.test(this.nodeName)&&!Eb.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Db,"\r\n")}}):{name:b.name,value:c.replace(Db,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Hb={0:200,1223:204},Ib=n.ajaxSettings.xhr();l.cors=!!Ib&&"withCredentials"in Ib,l.ajax=Ib=!!Ib,n.ajaxTransport(function(b){var c,d;return l.cors||Ib&&!b.crossDomain?{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Hb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=n("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Jb=[],Kb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Jb.pop()||n.expando+"_"+kb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Kb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Kb,"$1"+e):b.jsonp!==!1&&(b.url+=(lb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Jb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||d;var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ca([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var Lb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Lb)return Lb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function Mb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(e=d.getBoundingClientRect(),c=Mb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ea})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;n.fn[a]=function(d){return K(this,function(a,d,e){var f=Mb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ga(l.pixelPosition,function(a,c){return c?(c=Fa(a,b),Ba.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return K(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},size:function(){return this.length}}),n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Nb=a.jQuery,Ob=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Ob),b&&a.jQuery===n&&(a.jQuery=Nb),n},b||(a.jQuery=a.$=n),n});

			/* /jquery_js */
			/* jquery_ui.js */
/*! jQuery UI - v1.12.1 - 2018-06-26
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, keycode.js, scroll-parent.js, unique-id.js, widgets/draggable.js, widgets/droppable.js, widgets/mouse.js, widgets/slider.js, widgets/tooltip.js, effect.js, effects/effect-fade.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else{factory(jQuery);}}(function($){$.ui=$.ui||{};var version=$.ui.version="1.12.1";
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var widgetUuid=0;var widgetSlice=Array.prototype.slice;$.cleanData=(function(orig){return function(elems){var events,elem,i;for(i=0;(elem=elems[i])!=null;i++){try{events=$._data(elem,"events");if(events&&events.remove){$(elem).triggerHandler("remove");}}catch(e){}}orig(elems);};})($.cleanData);$.widget=function(name,base,prototype){var existingConstructor,constructor,basePrototype;var proxiedPrototype={};var namespace=name.split(".")[0];name=name.split(".")[1];var fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}if($.isArray(prototype)){prototype=$.extend.apply(null,[{}].concat(prototype));}$.expr[":"][fullName.toLowerCase()]=function(elem){return !!$.data(elem,fullName);};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element);}if(arguments.length){this._createWidget(options,element);}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base();basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return;}proxiedPrototype[prop]=(function(){function _super(){return base.prototype[prop].apply(this,arguments);}function _superApply(args){return base.prototype[prop].apply(this,args);}return function(){var __super=this._super;var __superApply=this._superApply;var returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue;};})();});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?(basePrototype.widgetEventPrefix||name):name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto);});delete existingConstructor._childConstructors;}else{base._childConstructors.push(constructor);}$.widget.bridge(name,constructor);return constructor;};$.widget.extend=function(target){var input=widgetSlice.call(arguments,1);var inputIndex=0;var inputLength=input.length;var key;var value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){if($.isPlainObject(value)){target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value);}else{target[key]=value;}}}}return target;};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string";var args=widgetSlice.call(arguments,1);var returnValue=this;if(isMethodCall){if(!this.length&&options==="instance"){returnValue=undefined;}else{this.each(function(){var methodValue;var instance=$.data(this,fullName);if(options==="instance"){returnValue=instance;return false;}if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'");}if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance");}methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false;}});}}else{if(args.length){options=$.widget.extend.apply(null,[options].concat(args));}this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{});if(instance._init){instance._init();}}else{$.data(this,fullName,new object(options,this));}});}return returnValue;};};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=widgetUuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=$();this.hoverable=$();this.focusable=$();this.classesElementLookup={};if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element){this.destroy();}}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);}this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this._create();if(this.options.disabled){this._setOptionDisabled(this.options.disabled);}this._trigger("create",null,this._getCreateEventData());this._init();},_getCreateOptions:function(){return{};},_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){var that=this;this._destroy();$.each(this.classesElementLookup,function(key,value){that._removeClass(value,key);});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace);},_destroy:$.noop,widget:function(){return this.element;},option:function(key,value){var options=key;var parts;var curOption;var i;if(arguments.length===0){return $.widget.extend({},this.options);}if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]];}key=parts.pop();if(arguments.length===1){return curOption[key]===undefined?null:curOption[key];}curOption[key]=value;}else{if(arguments.length===1){return this.options[key]===undefined?null:this.options[key];}options[key]=value;}}this._setOptions(options);return this;},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key]);}return this;},_setOption:function(key,value){if(key==="classes"){this._setOptionClasses(value);}this.options[key]=value;if(key==="disabled"){this._setOptionDisabled(value);}return this;},_setOptionClasses:function(value){var classKey,elements,currentElements;for(classKey in value){currentElements=this.classesElementLookup[classKey];if(value[classKey]===this.options.classes[classKey]||!currentElements||!currentElements.length){continue;}elements=$(currentElements.get());this._removeClass(currentElements,classKey);elements.addClass(this._classes({element:elements,keys:classKey,classes:value,add:true}));}},_setOptionDisabled:function(value){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!value);if(value){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus");}},enable:function(){return this._setOptions({disabled:false});},disable:function(){return this._setOptions({disabled:true});},_classes:function(options){var full=[];var that=this;options=$.extend({element:this.element,classes:this.options.classes||{}},options);function processClassString(classes,checkOption){var current,i;for(i=0;i<classes.length;i++){current=that.classesElementLookup[classes[i]]||$();if(options.add){current=$($.unique(current.get().concat(options.element.get())));}else{current=$(current.not(options.element).get());}that.classesElementLookup[classes[i]]=current;full.push(classes[i]);if(checkOption&&options.classes[classes[i]]){full.push(options.classes[classes[i]]);}}}this._on(options.element,{remove:"_untrackClassesElement"});if(options.keys){processClassString(options.keys.match(/\S+/g)||[],true);}if(options.extra){processClassString(options.extra.match(/\S+/g)||[]);}return full.join(" ");},_untrackClassesElement:function(event){var that=this;$.each(that.classesElementLookup,function(key,value){if($.inArray(event.target,value)!==-1){that.classesElementLookup[key]=$(value.not(event.target).get());}});},_removeClass:function(element,keys,extra){return this._toggleClass(element,keys,extra,false);},_addClass:function(element,keys,extra){return this._toggleClass(element,keys,extra,true);},_toggleClass:function(element,keys,extra,add){add=(typeof add==="boolean")?add:extra;var shift=(typeof element==="string"||element===null),options={extra:shift?keys:extra,keys:shift?element:keys,element:shift?this.element:element,add:add};options.element.toggleClass(this._classes(options),add);return this;},_on:function(suppressDisabledCheck,element,handlers){var delegateElement;var instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false;}if(!handlers){handlers=element;element=this.element;delegateElement=this.widget();}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element);}$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled"))){return;}return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++;}var match=event.match(/^([\w:-]*)\s*(.*)$/);var eventName=match[1]+instance.eventNamespace;var selector=match[2];if(selector){delegateElement.on(eventName,selector,handlerProxy);}else{element.on(eventName,handlerProxy);}});},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;element.off(eventName).off(eventName);this.bindings=$(this.bindings.not(element).get());this.focusable=$(this.focusable.not(element).get());this.hoverable=$(this.hoverable.not(element).get());},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}var instance=this;return setTimeout(handlerProxy,delay||0);},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){this._addClass($(event.currentTarget),null,"ui-state-hover");},mouseleave:function(event){this._removeClass($(event.currentTarget),null,"ui-state-hover");}});},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){this._addClass($(event.currentTarget),null,"ui-state-focus");},focusout:function(event){this._removeClass($(event.currentTarget),null,"ui-state-focus");}});},_trigger:function(type,event,data){var prop,orig;var callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop];}}}this.element.trigger(event,data);return !($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented());}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options};}var hasOptions;var effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options};}hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay);}if(hasOptions&&$.effects&&$.effects.effect[effectName]){element[method](options);}else{if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback);}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0]);}next();});}}};});var widget=$.widget;
/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
(function(){var cachedScrollbarWidth,max=Math.max,abs=Math.abs,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)];}function parseCss(element,property){return parseInt($.css(element,property),10)||0;}function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9){return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}};}if($.isWindow(raw)){return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};}if(raw.preventDefault){return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};}return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()};}$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined){return cachedScrollbarWidth;}var w1,w2,div=$("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2){w2=div[0].clientWidth;}div.remove();return(cachedScrollbarWidth=w1-w2);},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||(overflowX==="auto"&&within.width<within.element[0].scrollWidth),hasOverflowY=overflowY==="scroll"||(overflowY==="auto"&&within.height<within.element[0].scrollHeight);return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0};},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]),isDocument=!!withinElement[0]&&withinElement[0].nodeType===9,hasOffset=!isWindow&&!isDocument;return{element:withinElement,isWindow:isWindow,isDocument:isDocument,offset:hasOffset?$(element).offset():{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:withinElement.outerWidth(),height:withinElement.outerHeight()};}};$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments);}options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);if(target[0].preventDefault){options.at="left top";}targetWidth=dimensions.width;targetHeight=dimensions.height;targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1){pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"];}pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]];});if(collision.length===1){collision[1]=collision[0];}if(options.at[0]==="right"){basePosition.left+=targetWidth;}else{if(options.at[0]==="center"){basePosition.left+=targetWidth/2;}}if(options.at[1]==="bottom"){basePosition.top+=targetHeight;}else{if(options.at[1]==="center"){basePosition.top+=targetHeight/2;}}atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right"){position.left-=elemWidth;}else{if(options.my[0]==="center"){position.left-=elemWidth/2;}}if(options.my[1]==="bottom"){position.top-=elemHeight;}else{if(options.my[1]==="center"){position.top-=elemHeight/2;}}position.left+=myOffset[0];position.top+=myOffset[1];collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem});}});if(options.using){using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth){feedback.horizontal="center";}if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight){feedback.vertical="middle";}if(max(abs(left),abs(right))>max(abs(top),abs(bottom))){feedback.important="horizontal";}else{feedback.important="vertical";}options.using.call(this,props,feedback);};}elem.offset($.extend(position,{using:using}));});};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth){if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight;}else{if(overRight>0&&overLeft<=0){position.left=withinOffset;}else{if(overLeft>overRight){position.left=withinOffset+outerWidth-data.collisionWidth;}else{position.left=withinOffset;}}}}else{if(overLeft>0){position.left+=overLeft;}else{if(overRight>0){position.left-=overRight;}else{position.left=max(position.left-collisionPosLeft,position.left);}}}},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight){if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom;}else{if(overBottom>0&&overTop<=0){position.top=withinOffset;}else{if(overTop>overBottom){position.top=withinOffset+outerHeight-data.collisionHeight;}else{position.top=withinOffset;}}}}else{if(overTop>0){position.top+=overTop;}else{if(overBottom>0){position.top-=overBottom;}else{position.top=max(position.top-collisionPosTop,position.top);}}}}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft)){position.left+=myOffset+atOffset+offset;}}else{if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight){position.left+=myOffset+atOffset+offset;}}}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if(newOverBottom<0||newOverBottom<abs(overTop)){position.top+=myOffset+atOffset+offset;}}else{if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if(newOverTop>0||abs(newOverTop)<overBottom){position.top+=myOffset+atOffset+offset;}}}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments);},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments);}}};})();var position=$.ui.position;
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var data=$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return !!$.data(elem,dataName);};}):function(elem,i,match){return !!$.data(elem,match[3]);}});
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var keycode=$.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};
/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var scrollParent=$.fn.scrollParent=function(includeHidden){var position=this.css("position"),excludeStaticParent=position==="absolute",overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);if(excludeStaticParent&&parent.css("position")==="static"){return false;}return overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"));}).eq(0);return position==="fixed"||!scrollParent.length?$(this[0].ownerDocument||document):scrollParent;};
/*!
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var uniqueId=$.fn.extend({uniqueId:(function(){var uuid=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++uuid);}});};})(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){$(this).removeAttr("id");}});}});var ie=$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var mouseHandled=false;$(document).on("mouseup",function(){mouseHandled=false;});var widgetsMouse=$.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.on("mousedown."+this.widgetName,function(event){return that._mouseDown(event);}).on("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.off("."+this.widgetName);if(this._mouseMoveDelegate){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);}},_mouseDown:function(event){if(mouseHandled){return;}this._mouseMoved=false;(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var that=this,btnIsLeft=(event.which===1),elIsCancel=(typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true;},this.options.delay);}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}if(true===$.data(event.target,this.widgetName+".preventClickEvent")){$.removeData(event.target,this.widgetName+".preventClickEvent");}this._mouseMoveDelegate=function(event){return that._mouseMove(event);};this._mouseUpDelegate=function(event){return that._mouseUp(event);};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true;},_mouseMove:function(event){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button){return this._mouseUp(event);}else{if(!event.which){if(event.originalEvent.altKey||event.originalEvent.ctrlKey||event.originalEvent.metaKey||event.originalEvent.shiftKey){this.ignoreMissingWhich=true;}else{if(!this.ignoreMissingWhich){return this._mouseUp(event);}}}}}if(event.which||event.button){this._mouseMoved=true;}if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}return !this._mouseStarted;},_mouseUp:function(event){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target){$.data(event.target,this.widgetName+".preventClickEvent",true);}this._mouseStop(event);}if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer;}this.ignoreMissingWhich=false;mouseHandled=false;event.preventDefault();},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(){return this.mouseDelayMet;},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true;}});var plugin=$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(!set){return;}if(!allowDisconnected&&(!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11)){return;}for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}};var safeActiveElement=$.ui.safeActiveElement=function(document){var activeElement;try{activeElement=document.activeElement;}catch(error){activeElement=document.body;}if(!activeElement){activeElement=document.body;}if(!activeElement.nodeName){activeElement=document.body;}return activeElement;};var safeBlur=$.ui.safeBlur=function(element){if(element&&element.nodeName.toLowerCase()!=="body"){$(element).trigger("blur");}};
/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
$.widget("ui.draggable",$.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative();}if(this.options.addClasses){this._addClass("ui-draggable");}this._setHandleClassName();this._mouseInit();},_setOption:function(key,value){this._super(key,value);if(key==="handle"){this._removeHandleClassName();this._setHandleClassName();}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return;}this._removeHandleClassName();this._mouseDestroy();},_mouseCapture:function(event){var o=this.options;if(this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0){return false;}this.handle=this._getHandle(event);if(!this.handle){return false;}this._blurActiveElement(event);this._blockFrames(o.iframeFix===true?"iframe":o.iframeFix);return true;},_blockFrames:function(selector){this.iframeBlocks=this.document.find(selector).map(function(){var iframe=$(this);return $("<div>").css("position","absolute").appendTo(iframe.parent()).outerWidth(iframe.outerWidth()).outerHeight(iframe.outerHeight()).offset(iframe.offset())[0];});},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks;}},_blurActiveElement:function(event){var activeElement=$.ui.safeActiveElement(this.document[0]),target=$(event.target);if(target.closest(activeElement).length){return;}$.ui.safeBlur(activeElement);},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();if($.ui.ddmanager){$.ui.ddmanager.current=this;}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return $(this).css("position")==="fixed";}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(event);this.originalPosition=this.position=this._generatePosition(event,false);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this._setContainment();if(this._trigger("start",event)===false){this._clear();return false;}this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}this._mouseDrag(event,true);if($.ui.ddmanager){$.ui.ddmanager.dragStart(this,event);}return true;},_refreshOffsets:function(event){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:event.pageX-this.offset.left,top:event.pageY-this.offset.top};},_mouseDrag:function(event,noPropagation){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset();}this.position=this._generatePosition(event,true);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===false){this._mouseUp(new $.Event("mouseup",event));return false;}this.position=ui.position;}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}return false;},_mouseStop:function(event){var that=this,dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour){dropped=$.ui.ddmanager.drop(this,event);}if(this.dropped){dropped=this.dropped;this.dropped=false;}if((this.options.revert==="invalid"&&!dropped)||(this.options.revert==="valid"&&dropped)||this.options.revert===true||($.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped))){$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(that._trigger("stop",event)!==false){that._clear();}});}else{if(this._trigger("stop",event)!==false){this._clear();}}return false;},_mouseUp:function(event){this._unblockFrames();if($.ui.ddmanager){$.ui.ddmanager.dragStop(this,event);}if(this.handleElement.is(event.target)){this.element.trigger("focus");}return $.ui.mouse.prototype._mouseUp.call(this,event);},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp(new $.Event("mouseup",{target:this.element[0]}));}else{this._clear();}return this;},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:true;},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle");},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle");},_createHelper:function(event){var o=this.options,helperIsFunction=$.isFunction(o.helper),helper=helperIsFunction?$(o.helper.apply(this.element[0],[event])):(o.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!helper.parents("body").length){helper.appendTo((o.appendTo==="parent"?this.element[0].parentNode:o.appendTo));}if(helperIsFunction&&helper[0]===this.element[0]){this._setPositionRelative();}if(helper[0]!==this.element[0]&&!(/(fixed|absolute)/).test(helper.css("position"))){helper.css("position","absolute");}return helper;},_setPositionRelative:function(){if(!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative";}},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}if("left" in obj){this.offset.click.left=obj.left+this.margins.left;}if("right" in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}if("top" in obj){this.offset.click.top=obj.top+this.margins.top;}if("bottom" in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_isRootNode:function(element){return(/(html|body)/i).test(element.tagName)||element===this.document[0];},_getParentOffset:function(){var po=this.offsetParent.offset(),document=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}if(this._isRootNode(this.offsetParent[0])){po={top:0,left:0};}return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0};}var p=this.element.position(),scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+(!scrollIsRootNode?this.scrollParent.scrollTop():0),left:p.left-(parseInt(this.helper.css("left"),10)||0)+(!scrollIsRootNode?this.scrollParent.scrollLeft():0)};},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var isUserScrollable,c,ce,o=this.options,document=this.document[0];this.relativeContainer=null;if(!o.containment){this.containment=null;return;}if(o.containment==="window"){this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return;}if(o.containment==="document"){this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return;}if(o.containment.constructor===Array){this.containment=o.containment;return;}if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}c=$(o.containment);ce=c[0];if(!ce){return;}isUserScrollable=/(scroll|auto)/.test(c.css("overflow"));this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(isUserScrollable?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(isUserScrollable?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=c;},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}var mod=d==="absolute"?1:-1,scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:(pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-((this.cssPosition==="fixed"?-this.offset.scroll.top:(scrollIsRootNode?0:this.offset.scroll.top))*mod)),left:(pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-((this.cssPosition==="fixed"?-this.offset.scroll.left:(scrollIsRootNode?0:this.offset.scroll.left))*mod))};},_generatePosition:function(event,constrainPosition){var containment,co,top,left,o=this.options,scrollIsRootNode=this._isRootNode(this.scrollParent[0]),pageX=event.pageX,pageY=event.pageY;if(!scrollIsRootNode||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()};}if(constrainPosition){if(this.containment){if(this.relativeContainer){co=this.relativeContainer.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top];}else{containment=this.containment;}if(event.pageX-this.offset.click.left<containment[0]){pageX=containment[0]+this.offset.click.left;}if(event.pageY-this.offset.click.top<containment[1]){pageY=containment[1]+this.offset.click.top;}if(event.pageX-this.offset.click.left>containment[2]){pageX=containment[2]+this.offset.click.left;}if(event.pageY-this.offset.click.top>containment[3]){pageY=containment[3]+this.offset.click.top;}}if(o.grid){top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?((top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3])?top:((top-this.offset.click.top>=containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?((left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2])?left:((left-this.offset.click.left>=containment[0])?left-o.grid[0]:left+o.grid[0])):left;}if(o.axis==="y"){pageX=this.originalPageX;}if(o.axis==="x"){pageY=this.originalPageY;}}return{top:(pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:(scrollIsRootNode?0:this.offset.scroll.top))),left:(pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:(scrollIsRootNode?0:this.offset.scroll.left)))};},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove();}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy();}},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui,this],true);if(/^(drag|start|stop)/.test(type)){this.positionAbs=this._convertPositionTo("absolute");ui.offset=this.positionAbs;}return $.Widget.prototype._trigger.call(this,type,event,ui);},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.sortables=[];$(draggable.options.connectToSortable).each(function(){var sortable=$(this).sortable("instance");if(sortable&&!sortable.options.disabled){draggable.sortables.push(sortable);sortable.refreshPositions();sortable._trigger("activate",event,uiSortable);}});},stop:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.cancelHelperRemoval=false;$.each(draggable.sortables,function(){var sortable=this;if(sortable.isOver){sortable.isOver=0;draggable.cancelHelperRemoval=true;sortable.cancelHelperRemoval=false;sortable._storedCSS={position:sortable.placeholder.css("position"),top:sortable.placeholder.css("top"),left:sortable.placeholder.css("left")};sortable._mouseStop(event);sortable.options.helper=sortable.options._helper;}else{sortable.cancelHelperRemoval=true;sortable._trigger("deactivate",event,uiSortable);}});},drag:function(event,ui,draggable){$.each(draggable.sortables,function(){var innermostIntersecting=false,sortable=this;sortable.positionAbs=draggable.positionAbs;sortable.helperProportions=draggable.helperProportions;sortable.offset.click=draggable.offset.click;if(sortable._intersectsWith(sortable.containerCache)){innermostIntersecting=true;$.each(draggable.sortables,function(){this.positionAbs=draggable.positionAbs;this.helperProportions=draggable.helperProportions;this.offset.click=draggable.offset.click;if(this!==sortable&&this._intersectsWith(this.containerCache)&&$.contains(sortable.element[0],this.element[0])){innermostIntersecting=false;}return innermostIntersecting;});}if(innermostIntersecting){if(!sortable.isOver){sortable.isOver=1;draggable._parent=ui.helper.parent();sortable.currentItem=ui.helper.appendTo(sortable.element).data("ui-sortable-item",true);sortable.options._helper=sortable.options.helper;sortable.options.helper=function(){return ui.helper[0];};event.target=sortable.currentItem[0];sortable._mouseCapture(event,true);sortable._mouseStart(event,true,true);sortable.offset.click.top=draggable.offset.click.top;sortable.offset.click.left=draggable.offset.click.left;sortable.offset.parent.left-=draggable.offset.parent.left-sortable.offset.parent.left;sortable.offset.parent.top-=draggable.offset.parent.top-sortable.offset.parent.top;draggable._trigger("toSortable",event);draggable.dropped=sortable.element;$.each(draggable.sortables,function(){this.refreshPositions();});draggable.currentItem=draggable.element;sortable.fromOutside=draggable;}if(sortable.currentItem){sortable._mouseDrag(event);ui.position=sortable.position;}}else{if(sortable.isOver){sortable.isOver=0;sortable.cancelHelperRemoval=true;sortable.options._revert=sortable.options.revert;sortable.options.revert=false;sortable._trigger("out",event,sortable._uiHash(sortable));sortable._mouseStop(event,true);sortable.options.revert=sortable.options._revert;sortable.options.helper=sortable.options._helper;if(sortable.placeholder){sortable.placeholder.remove();}ui.helper.appendTo(draggable._parent);draggable._refreshOffsets(event);ui.position=draggable._generatePosition(event,true);draggable._trigger("fromSortable",event);draggable.dropped=false;$.each(draggable.sortables,function(){this.refreshPositions();});}}});}});$.ui.plugin.add("draggable","cursor",{start:function(event,ui,instance){var t=$("body"),o=instance.options;if(t.css("cursor")){o._cursor=t.css("cursor");}t.css("cursor",o.cursor);},stop:function(event,ui,instance){var o=instance.options;if(o._cursor){$("body").css("cursor",o._cursor);}}});$.ui.plugin.add("draggable","opacity",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;if(t.css("opacity")){o._opacity=t.css("opacity");}t.css("opacity",o.opacity);},stop:function(event,ui,instance){var o=instance.options;if(o._opacity){$(ui.helper).css("opacity",o._opacity);}}});$.ui.plugin.add("draggable","scroll",{start:function(event,ui,i){if(!i.scrollParentNotHidden){i.scrollParentNotHidden=i.helper.scrollParent(false);}if(i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"){i.overflowOffset=i.scrollParentNotHidden.offset();}},drag:function(event,ui,i){var o=i.options,scrolled=false,scrollParent=i.scrollParentNotHidden[0],document=i.document[0];if(scrollParent!==document&&scrollParent.tagName!=="HTML"){if(!o.axis||o.axis!=="x"){if((i.overflowOffset.top+scrollParent.offsetHeight)-event.pageY<o.scrollSensitivity){scrollParent.scrollTop=scrolled=scrollParent.scrollTop+o.scrollSpeed;}else{if(event.pageY-i.overflowOffset.top<o.scrollSensitivity){scrollParent.scrollTop=scrolled=scrollParent.scrollTop-o.scrollSpeed;}}}if(!o.axis||o.axis!=="y"){if((i.overflowOffset.left+scrollParent.offsetWidth)-event.pageX<o.scrollSensitivity){scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft+o.scrollSpeed;}else{if(event.pageX-i.overflowOffset.left<o.scrollSensitivity){scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft-o.scrollSpeed;}}}}else{if(!o.axis||o.axis!=="x"){if(event.pageY-$(document).scrollTop()<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);}else{if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);}}}if(!o.axis||o.axis!=="y"){if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);}else{if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}}}}if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(i,event);}}});$.ui.plugin.add("draggable","snap",{start:function(event,ui,i){var o=i.options;i.snapElements=[];$(o.snap.constructor!==String?(o.snap.items||":data(ui-draggable)"):o.snap).each(function(){var $t=$(this),$o=$t.offset();if(this!==i.element[0]){i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left});}});},drag:function(event,ui,inst){var ts,bs,ls,rs,l,r,t,b,i,first,o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--){l=inst.snapElements[i].left-inst.margins.left;r=l+inst.snapElements[i].width;t=inst.snapElements[i].top-inst.margins.top;b=t+inst.snapElements[i].height;if(x2<l-d||x1>r+d||y2<t-d||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)){if(inst.snapElements[i].snapping){(inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}inst.snapElements[i].snapping=false;continue;}if(o.snapMode!=="inner"){ts=Math.abs(t-y2)<=d;bs=Math.abs(b-y1)<=d;ls=Math.abs(l-x2)<=d;rs=Math.abs(r-x1)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top;}if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top;}if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left;}if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left;}}first=(ts||bs||ls||rs);if(o.snapMode!=="outer"){ts=Math.abs(t-y1)<=d;bs=Math.abs(b-y2)<=d;ls=Math.abs(l-x1)<=d;rs=Math.abs(r-x2)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top;}if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top;}if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left;}if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left;}}if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)){(inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}inst.snapElements[i].snapping=(ts||bs||ls||rs||first);}}});$.ui.plugin.add("draggable","stack",{start:function(event,ui,instance){var min,o=instance.options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0);});if(!group.length){return;}min=parseInt($(group[0]).css("zIndex"),10)||0;$(group).each(function(i){$(this).css("zIndex",min+i);});this.css("zIndex",(min+group.length));}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;if(t.css("zIndex")){o._zIndex=t.css("zIndex");}t.css("zIndex",o.zIndex);},stop:function(event,ui,instance){var o=instance.options;if(o._zIndex){$(ui.helper).css("zIndex",o._zIndex);}}});var widgetsDraggable=$.ui.draggable;
/*!
 * jQuery UI Droppable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
$.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:true,greedy:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var proportions,o=this.options,accept=o.accept;this.isover=false;this.isout=true;this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept);};this.proportions=function(){if(arguments.length){proportions=arguments[0];}else{return proportions?proportions:proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};}};this._addToManager(o.scope);o.addClasses&&this._addClass("ui-droppable");},_addToManager:function(scope){$.ui.ddmanager.droppables[scope]=$.ui.ddmanager.droppables[scope]||[];$.ui.ddmanager.droppables[scope].push(this);},_splice:function(drop){var i=0;for(;i<drop.length;i++){if(drop[i]===this){drop.splice(i,1);}}},_destroy:function(){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop);},_setOption:function(key,value){if(key==="accept"){this.accept=$.isFunction(value)?value:function(d){return d.is(value);};}else{if(key==="scope"){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop);this._addToManager(value);}}this._super(key,value);},_activate:function(event){var draggable=$.ui.ddmanager.current;this._addActiveClass();if(draggable){this._trigger("activate",event,this.ui(draggable));}},_deactivate:function(event){var draggable=$.ui.ddmanager.current;this._removeActiveClass();if(draggable){this._trigger("deactivate",event,this.ui(draggable));}},_over:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return;}if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this._addHoverClass();this._trigger("over",event,this.ui(draggable));}},_out:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return;}if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this._removeHoverClass();this._trigger("out",event,this.ui(draggable));}},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current,childrenIntersection=false;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return false;}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$(this).droppable("instance");if(inst.options.greedy&&!inst.options.disabled&&inst.options.scope===draggable.options.scope&&inst.accept.call(inst.element[0],(draggable.currentItem||draggable.element))&&intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance,event)){childrenIntersection=true;return false;}});if(childrenIntersection){return false;}if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this._removeActiveClass();this._removeHoverClass();this._trigger("drop",event,this.ui(draggable));return this.element;}return false;},ui:function(c){return{draggable:(c.currentItem||c.element),helper:c.helper,position:c.position,offset:c.positionAbs};},_addHoverClass:function(){this._addClass("ui-droppable-hover");},_removeHoverClass:function(){this._removeClass("ui-droppable-hover");},_addActiveClass:function(){this._addClass("ui-droppable-active");},_removeActiveClass:function(){this._removeClass("ui-droppable-active");}});var intersect=$.ui.intersect=(function(){function isOverAxis(x,reference,size){return(x>=reference)&&(x<(reference+size));}return function(draggable,droppable,toleranceMode,event){if(!droppable.offset){return false;}var x1=(draggable.positionAbs||draggable.position.absolute).left+draggable.margins.left,y1=(draggable.positionAbs||draggable.position.absolute).top+draggable.margins.top,x2=x1+draggable.helperProportions.width,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,t=droppable.offset.top,r=l+droppable.proportions().width,b=t+droppable.proportions().height;switch(toleranceMode){case"fit":return(l<=x1&&x2<=r&&t<=y1&&y2<=b);case"intersect":return(l<x1+(draggable.helperProportions.width/2)&&x2-(draggable.helperProportions.width/2)<r&&t<y1+(draggable.helperProportions.height/2)&&y2-(draggable.helperProportions.height/2)<b);case"pointer":return isOverAxis(event.pageY,t,droppable.proportions().height)&&isOverAxis(event.pageX,l,droppable.proportions().width);case"touch":return((y1>=t&&y1<=b)||(y2>=t&&y2<=b)||(y1<t&&y2>b))&&((x1>=l&&x1<=r)||(x2>=l&&x2<=r)||(x1<l&&x2>r));default:return false;}};})();$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var i,j,m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++){if(m[i].options.disabled||(t&&!m[i].accept.call(m[i].element[0],(t.currentItem||t.element)))){continue;}for(j=0;j<list.length;j++){if(list[j]===m[i].element[0]){m[i].proportions().height=0;continue droppablesLoop;}}m[i].visible=m[i].element.css("display")!=="none";if(!m[i].visible){continue;}if(type==="mousedown"){m[i]._activate.call(m[i],event);}m[i].offset=m[i].element.offset();m[i].proportions({width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight});}},drop:function(draggable,event){var dropped=false;$.each(($.ui.ddmanager.droppables[draggable.options.scope]||[]).slice(),function(){if(!this.options){return;}if(!this.options.disabled&&this.visible&&intersect(draggable,this,this.options.tolerance,event)){dropped=this._drop.call(this,event)||dropped;}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this.isout=true;this.isover=false;this._deactivate.call(this,event);}});return dropped;},dragStart:function(draggable,event){draggable.element.parentsUntil("body").on("scroll.droppable",function(){if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}});},drag:function(draggable,event){if(draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return;}var parentInstance,scope,parent,intersects=intersect(draggable,this,this.options.tolerance,event),c=!intersects&&this.isover?"isout":(intersects&&!this.isover?"isover":null);if(!c){return;}if(this.options.greedy){scope=this.options.scope;parent=this.element.parents(":data(ui-droppable)").filter(function(){return $(this).droppable("instance").options.scope===scope;});if(parent.length){parentInstance=$(parent[0]).droppable("instance");parentInstance.greedyChild=(c==="isover");}}if(parentInstance&&c==="isover"){parentInstance.isover=false;parentInstance.isout=true;parentInstance._out.call(parentInstance,event);}this[c]=true;this[c==="isout"?"isover":"isout"]=false;this[c==="isover"?"_over":"_out"].call(this,event);if(parentInstance&&c==="isout"){parentInstance.isout=false;parentInstance.isover=true;parentInstance._over.call(parentInstance,event);}});},dragStop:function(draggable,event){draggable.element.parentsUntil("body").off("scroll.droppable");if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}}};if($.uiBackCompat!==false){$.widget("ui.droppable",$.ui.droppable,{options:{hoverClass:false,activeClass:false},_addActiveClass:function(){this._super();if(this.options.activeClass){this.element.addClass(this.options.activeClass);}},_removeActiveClass:function(){this._super();if(this.options.activeClass){this.element.removeClass(this.options.activeClass);}},_addHoverClass:function(){this._super();if(this.options.hoverClass){this.element.addClass(this.options.hoverClass);}},_removeHoverClass:function(){this._super();if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass);}}});}var widgetsDroppable=$.ui.droppable;
/*!
 * jQuery UI Slider 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var widgetsSlider=$.widget("ui.slider",$.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:false,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=false;},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue();},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle"),handle="<span tabindex='0'></span>",handles=[];handleCount=(options.values&&options.values.length)||1;if(existingHandles.length>handleCount){existingHandles.slice(handleCount).remove();existingHandles=existingHandles.slice(0,handleCount);}for(i=existingHandles.length;i<handleCount;i++){handles.push(handle);}this.handles=existingHandles.add($(handles.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each(function(i){$(this).data("ui-slider-handle-index",i).attr("tabIndex",0);});},_createRange:function(){var options=this.options;if(options.range){if(options.range===true){if(!options.values){options.values=[this._valueMin(),this._valueMin()];}else{if(options.values.length&&options.values.length!==2){options.values=[options.values[0],options.values[0]];}else{if($.isArray(options.values)){options.values=options.values.slice(0);}}}}if(!this.range||!this.range.length){this.range=$("<div>").appendTo(this.element);this._addClass(this.range,"ui-slider-range");}else{this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max");this.range.css({left:"",bottom:""});}if(options.range==="min"||options.range==="max"){this._addClass(this.range,"ui-slider-range-"+options.range);}}else{if(this.range){this.range.remove();}this.range=null;}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles);},_destroy:function(){this.handles.remove();if(this.range){this.range.remove();}this._mouseDestroy();},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;if(o.disabled){return false;}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));if((distance>thisDistance)||(distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min))){distance=thisDistance;closestHandle=$(this);index=i;}});allowed=this._start(event,index);if(allowed===false){return false;}this._mouseSliding=true;this._handleIndex=index;this._addClass(closestHandle,null,"ui-state-active");closestHandle.trigger("focus");offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-(closestHandle.width()/2),top:event.pageY-offset.top-(closestHandle.height()/2)-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(event,index,normValue);}this._animateOff=true;return true;},_mouseStart:function(){return true;},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return false;},_mouseStop:function(event){this._removeClass(this.handles,null,"ui-state-active");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false;},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal";},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;if(this.orientation==="horizontal"){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0);}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);}percentMouse=(pixelMouse/pixelTotal);if(percentMouse>1){percentMouse=1;}if(percentMouse<0){percentMouse=0;}if(this.orientation==="vertical"){percentMouse=1-percentMouse;}valueTotal=this._valueMax()-this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse);},_uiHash:function(index,value,values){var uiHash={handle:this.handles[index],handleIndex:index,value:value!==undefined?value:this.value()};if(this._hasMultipleValues()){uiHash.value=value!==undefined?value:this.values(index);uiHash.values=values||this.values();}return uiHash;},_hasMultipleValues:function(){return this.options.values&&this.options.values.length;},_start:function(event,index){return this._trigger("start",event,this._uiHash(index));},_slide:function(event,index,newVal){var allowed,otherVal,currentValue=this.value(),newValues=this.values();if(this._hasMultipleValues()){otherVal=this.values(index?0:1);currentValue=this.values(index);if(this.options.values.length===2&&this.options.range===true){newVal=index===0?Math.min(otherVal,newVal):Math.max(otherVal,newVal);}newValues[index]=newVal;}if(newVal===currentValue){return;}allowed=this._trigger("slide",event,this._uiHash(index,newVal,newValues));if(allowed===false){return;}if(this._hasMultipleValues()){this.values(index,newVal);}else{this.value(newVal);}},_stop:function(event,index){this._trigger("stop",event,this._uiHash(index));},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){this._lastChangedValue=index;this._trigger("change",event,this._uiHash(index));}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0);return;}return this._value();},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index);return;}if(arguments.length){if($.isArray(arguments[0])){vals=this.options.values;newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i);}this._refreshValue();}else{if(this._hasMultipleValues()){return this._values(index);}else{return this.value();}}}else{return this._values();}},_setOption:function(key,value){var i,valsLength=0;if(key==="range"&&this.options.range===true){if(value==="min"){this.options.value=this._values(0);this.options.values=null;}else{if(value==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null;}}}if($.isArray(this.options.values)){valsLength=this.options.values.length;}this._super(key,value);switch(key){case"orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();if(this.options.range){this._refreshRange(value);}this.handles.css(value==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=valsLength-1;i>=0;i--){this._change(null,i);}this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break;}},_setOptionDisabled:function(value){this._super(value);this._toggleClass(null,"ui-state-disabled",!!value);},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val;},_values:function(index){var val,vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val;}else{if(this._hasMultipleValues()){vals=this.options.values.slice();for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(vals[i]);}return vals;}else{return[];}}},_trimAlignValue:function(val){if(val<=this._valueMin()){return this._valueMin();}if(val>=this._valueMax()){return this._valueMax();}var step=(this.options.step>0)?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;if(Math.abs(valModStep)*2>=step){alignValue+=(valModStep>0)?step:(-step);}return parseFloat(alignValue.toFixed(5));},_calculateNewMax:function(){var max=this.options.max,min=this._valueMin(),step=this.options.step,aboveMin=Math.round((max-min)/step)*step;max=aboveMin+min;if(max>this.options.max){max-=step;}this.max=parseFloat(max.toFixed(this._precision()));},_precision:function(){var precision=this._precisionOf(this.options.step);if(this.options.min!==null){precision=Math.max(precision,this._precisionOf(this.options.min));}return precision;},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1;},_valueMin:function(){return this.options.min;},_valueMax:function(){return this.max;},_refreshRange:function(orientation){if(orientation==="vertical"){this.range.css({width:"",left:""});}if(orientation==="horizontal"){this.range.css({height:"",bottom:""});}},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=(!this._animateOff)?o.animate:false,_set={};if(this._hasMultipleValues()){this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100;_set[that.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);if(that.options.range===true){if(that.orientation==="horizontal"){if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate);}if(i===1){that.range[animate?"animate":"css"]({width:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}else{if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({bottom:(valPercent)+"%"},o.animate);}if(i===1){that.range[animate?"animate":"css"]({height:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}}lastValPercent=valPercent;});}else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=(valueMax!==valueMin)?(value-valueMin)/(valueMax-valueMin)*100:0;_set[this.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);if(oRange==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate);}if(oRange==="max"&&this.orientation==="horizontal"){this.range.stop(1,1)[animate?"animate":"css"]({width:(100-valPercent)+"%"},o.animate);}if(oRange==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate);}if(oRange==="max"&&this.orientation==="vertical"){this.range.stop(1,1)[animate?"animate":"css"]({height:(100-valPercent)+"%"},o.animate);}}},_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();if(!this._keySliding){this._keySliding=true;this._addClass($(event.target),null,"ui-state-active");allowed=this._start(event,index);if(allowed===false){return;}}break;}step=this.options.step;if(this._hasMultipleValues()){curVal=newVal=this.values(index);}else{curVal=newVal=this.value();}switch(event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+((this._valueMax()-this._valueMin())/this.numPages));break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-((this._valueMax()-this._valueMin())/this.numPages));break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax()){return;}newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin()){return;}newVal=this._trimAlignValue(curVal-step);break;}this._slide(event,index,newVal);},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(event,index);this._change(event,index);this._removeClass($(event.target),null,"ui-state-active");}}}});
/*!
 * jQuery UI Tooltip 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
$.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var title=$(this).attr("title")||"";return $("<a>").text(title).html();},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,track:false,close:null,open:null},_addDescribedBy:function(elem,id){var describedby=(elem.attr("aria-describedby")||"").split(/\s+/);describedby.push(id);elem.data("ui-tooltip-id",id).attr("aria-describedby",$.trim(describedby.join(" ")));},_removeDescribedBy:function(elem){var id=elem.data("ui-tooltip-id"),describedby=(elem.attr("aria-describedby")||"").split(/\s+/),index=$.inArray(id,describedby);if(index!==-1){describedby.splice(index,1);}elem.removeData("ui-tooltip-id");describedby=$.trim(describedby.join(" "));if(describedby){elem.attr("aria-describedby",describedby);}else{elem.removeAttr("aria-describedby");}},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.liveRegion=$("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this.disabledTitles=$([]);},_setOption:function(key,value){var that=this;this._super(key,value);if(key==="content"){$.each(this.tooltips,function(id,tooltipData){that._updateContent(tooltipData.element);});}},_setOptionDisabled:function(value){this[value?"_disable":"_enable"]();},_disable:function(){var that=this;$.each(this.tooltips,function(id,tooltipData){var event=$.Event("blur");event.target=event.currentTarget=tooltipData.element[0];that.close(event,true);});this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var element=$(this);if(element.is("[title]")){return element.data("ui-tooltip-title",element.attr("title")).removeAttr("title");}}));},_enable:function(){this.disabledTitles.each(function(){var element=$(this);if(element.data("ui-tooltip-title")){element.attr("title",element.data("ui-tooltip-title"));}});this.disabledTitles=$([]);},open:function(event){var that=this,target=$(event?event.target:this.element).closest(this.options.items);if(!target.length||target.data("ui-tooltip-id")){return;}if(target.attr("title")){target.data("ui-tooltip-title",target.attr("title"));}target.data("ui-tooltip-open",true);if(event&&event.type==="mouseover"){target.parents().each(function(){var parent=$(this),blurEvent;if(parent.data("ui-tooltip-open")){blurEvent=$.Event("blur");blurEvent.target=blurEvent.currentTarget=this;that.close(blurEvent,true);}if(parent.attr("title")){parent.uniqueId();that.parents[this.id]={element:this,title:parent.attr("title")};parent.attr("title","");}});}this._registerCloseHandlers(event,target);this._updateContent(target,event);},_updateContent:function(target,event){var content,contentOption=this.options.content,that=this,eventType=event?event.type:null;if(typeof contentOption==="string"||contentOption.nodeType||contentOption.jquery){return this._open(event,target,contentOption);}content=contentOption.call(target[0],function(response){that._delay(function(){if(!target.data("ui-tooltip-open")){return;}if(event){event.type=eventType;}this._open(event,target,response);});});if(content){this._open(event,target,content);}},_open:function(event,target,content){var tooltipData,tooltip,delayedShow,a11yContent,positionOption=$.extend({},this.options.position);if(!content){return;}tooltipData=this._find(target);if(tooltipData){tooltipData.tooltip.find(".ui-tooltip-content").html(content);return;}if(target.is("[title]")){if(event&&event.type==="mouseover"){target.attr("title","");}else{target.removeAttr("title");}}tooltipData=this._tooltip(target);tooltip=tooltipData.tooltip;this._addDescribedBy(target,tooltip.attr("id"));tooltip.find(".ui-tooltip-content").html(content);this.liveRegion.children().hide();a11yContent=$("<div>").html(tooltip.find(".ui-tooltip-content").html());a11yContent.removeAttr("name").find("[name]").removeAttr("name");a11yContent.removeAttr("id").find("[id]").removeAttr("id");a11yContent.appendTo(this.liveRegion);function position(event){positionOption.of=event;if(tooltip.is(":hidden")){return;}tooltip.position(positionOption);}if(this.options.track&&event&&/^mouse/.test(event.type)){this._on(this.document,{mousemove:position});position(event);}else{tooltip.position($.extend({of:target},this.options.position));}tooltip.hide();this._show(tooltip,this.options.show);if(this.options.track&&this.options.show&&this.options.show.delay){delayedShow=this.delayedShow=setInterval(function(){if(tooltip.is(":visible")){position(positionOption.of);clearInterval(delayedShow);}},$.fx.interval);}this._trigger("open",event,{tooltip:tooltip});},_registerCloseHandlers:function(event,target){var events={keyup:function(event){if(event.keyCode===$.ui.keyCode.ESCAPE){var fakeEvent=$.Event(event);fakeEvent.currentTarget=target[0];this.close(fakeEvent,true);}}};if(target[0]!==this.element[0]){events.remove=function(){this._removeTooltip(this._find(target).tooltip);};}if(!event||event.type==="mouseover"){events.mouseleave="close";}if(!event||event.type==="focusin"){events.focusout="close";}this._on(true,target,events);},close:function(event){var tooltip,that=this,target=$(event?event.currentTarget:this.element),tooltipData=this._find(target);if(!tooltipData){target.removeData("ui-tooltip-open");return;}tooltip=tooltipData.tooltip;if(tooltipData.closing){return;}clearInterval(this.delayedShow);if(target.data("ui-tooltip-title")&&!target.attr("title")){target.attr("title",target.data("ui-tooltip-title"));}this._removeDescribedBy(target);tooltipData.hiding=true;tooltip.stop(true);this._hide(tooltip,this.options.hide,function(){that._removeTooltip($(this));});target.removeData("ui-tooltip-open");this._off(target,"mouseleave focusout keyup");if(target[0]!==this.element[0]){this._off(target,"remove");}this._off(this.document,"mousemove");if(event&&event.type==="mouseleave"){$.each(this.parents,function(id,parent){$(parent.element).attr("title",parent.title);delete that.parents[id];});}tooltipData.closing=true;this._trigger("close",event,{tooltip:tooltip});if(!tooltipData.hiding){tooltipData.closing=false;}},_tooltip:function(element){var tooltip=$("<div>").attr("role","tooltip"),content=$("<div>").appendTo(tooltip),id=tooltip.uniqueId().attr("id");this._addClass(content,"ui-tooltip-content");this._addClass(tooltip,"ui-tooltip","ui-widget ui-widget-content");tooltip.appendTo(this._appendTo(element));return this.tooltips[id]={element:element,tooltip:tooltip};},_find:function(target){var id=target.data("ui-tooltip-id");return id?this.tooltips[id]:null;},_removeTooltip:function(tooltip){tooltip.remove();delete this.tooltips[tooltip.attr("id")];},_appendTo:function(target){var element=target.closest(".ui-front, dialog");if(!element.length){element=this.document[0].body;}return element;},_destroy:function(){var that=this;$.each(this.tooltips,function(id,tooltipData){var event=$.Event("blur"),element=tooltipData.element;event.target=event.currentTarget=element[0];that.close(event,true);$("#"+id).remove();if(element.data("ui-tooltip-title")){if(!element.attr("title")){element.attr("title",element.data("ui-tooltip-title"));}element.removeData("ui-tooltip-title");}});this.liveRegion.remove();}});if($.uiBackCompat!==false){$.widget("ui.tooltip",$.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var tooltipData=this._superApply(arguments);if(this.options.tooltipClass){tooltipData.tooltip.addClass(this.options.tooltipClass);}return tooltipData;}});}var widgetsTooltip=$.ui.tooltip;
/*!
 * jQuery UI Effects 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var dataSpace="ui-effects-",dataSpaceStyle="ui-effects-style",dataSpaceAnimated="ui-effects-animated",jQuery=$;$.effects={effect:{}};
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
(function(jQuery,undefined){var stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]];}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1]*2.55,execResult[2]*2.55,execResult[3]*2.55,execResult[4]];}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)];}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)];}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/100,execResult[3]/100,execResult[4]];}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha);},spaces={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},propTypes={"byte":{floor:true,max:255},percent:{max:1},degrees:{mod:360,floor:true}},support=color.support={},supportElem=jQuery("<p>")[0],colors,each=jQuery.each;supportElem.style.cssText="background-color:rgba(1,1,1,.5)";support.rgba=supportElem.style.backgroundColor.indexOf("rgba")>-1;each(spaces,function(spaceName,space){space.cache="_"+spaceName;space.props.alpha={idx:3,type:"percent",def:1};});function clamp(value,prop,allowEmpty){var type=propTypes[prop.type]||{};if(value==null){return(allowEmpty||!prop.def)?null:prop.def;}value=type.floor?~~value:parseFloat(value);if(isNaN(value)){return prop.def;}if(type.mod){return(value+type.mod)%type.mod;}return 0>value?0:type.max<value?type.max:value;}function stringParse(string){var inst=color(),rgba=inst._rgba=[];string=string.toLowerCase();each(stringParsers,function(i,parser){var parsed,match=parser.re.exec(string),values=match&&parser.parse(match),spaceName=parser.space||"rgba";if(values){parsed=inst[spaceName](values);inst[spaces[spaceName].cache]=parsed[spaces[spaceName].cache];rgba=inst._rgba=parsed._rgba;return false;}});if(rgba.length){if(rgba.join()==="0,0,0,0"){jQuery.extend(rgba,colors.transparent);}return inst;}return colors[string];}color.fn=jQuery.extend(color.prototype,{parse:function(red,green,blue,alpha){if(red===undefined){this._rgba=[null,null,null,null];return this;}if(red.jquery||red.nodeType){red=jQuery(red).css(green);green=undefined;}var inst=this,type=jQuery.type(red),rgba=this._rgba=[];if(green!==undefined){red=[red,green,blue,alpha];type="array";}if(type==="string"){return this.parse(stringParse(red)||colors._default);}if(type==="array"){each(spaces.rgba.props,function(key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop);});return this;}if(type==="object"){if(red instanceof color){each(spaces,function(spaceName,space){if(red[space.cache]){inst[space.cache]=red[space.cache].slice();}});}else{each(spaces,function(spaceName,space){var cache=space.cache;each(space.props,function(key,prop){if(!inst[cache]&&space.to){if(key==="alpha"||red[key]==null){return;}inst[cache]=space.to(inst._rgba);}inst[cache][prop.idx]=clamp(red[key],prop,true);});if(inst[cache]&&jQuery.inArray(null,inst[cache].slice(0,3))<0){inst[cache][3]=1;if(space.from){inst._rgba=space.from(inst[cache]);}}});}return this;}},is:function(compare){var is=color(compare),same=true,inst=this;each(spaces,function(_,space){var localCache,isCache=is[space.cache];if(isCache){localCache=inst[space.cache]||space.to&&space.to(inst._rgba)||[];each(space.props,function(_,prop){if(isCache[prop.idx]!=null){same=(isCache[prop.idx]===localCache[prop.idx]);return same;}});}return same;});return same;},_space:function(){var used=[],inst=this;each(spaces,function(spaceName,space){if(inst[space.cache]){used.push(spaceName);}});return used.pop();},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],startColor=this.alpha()===0?color("transparent"):this,start=startColor[space.cache]||space.to(startColor._rgba),result=start.slice();end=end[space.cache];each(space.props,function(key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};if(endValue===null){return;}if(startValue===null){result[index]=endValue;}else{if(type.mod){if(endValue-startValue>type.mod/2){startValue+=type.mod;}else{if(startValue-endValue>type.mod/2){startValue-=type.mod;}}}result[index]=clamp((endValue-startValue)*distance+startValue,prop);}});return this[spaceName](result);},blend:function(opaque){if(this._rgba[3]===1){return this;}var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v;}));},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){return v==null?(i>2?1:0):v;});if(rgba[3]===1){rgba.pop();prefix="rgb(";}return prefix+rgba.join()+")";},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){if(v==null){v=i>2?1:0;}if(i&&i<3){v=Math.round(v*100)+"%";}return v;});if(hsla[3]===1){hsla.pop();prefix="hsl(";}return prefix+hsla.join()+")";},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();if(includeAlpha){rgba.push(~~(alpha*255));}return"#"+jQuery.map(rgba,function(v){v=(v||0).toString(16);return v.length===1?"0"+v:v;}).join("");},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString();}});color.fn.parse.prototype=color.fn;function hue2rgb(p,q,h){h=(h+1)%1;if(h*6<1){return p+(q-p)*h*6;}if(h*2<1){return q;}if(h*3<2){return p+(q-p)*((2/3)-h)*6;}return p;}spaces.hsla.to=function(rgba){if(rgba[0]==null||rgba[1]==null||rgba[2]==null){return[null,null,null,rgba[3]];}var r=rgba[0]/255,g=rgba[1]/255,b=rgba[2]/255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=add*0.5,h,s;if(min===max){h=0;}else{if(r===max){h=(60*(g-b)/diff)+360;}else{if(g===max){h=(60*(b-r)/diff)+120;}else{h=(60*(r-g)/diff)+240;}}}if(diff===0){s=0;}else{if(l<=0.5){s=diff/add;}else{s=diff/(2-add);}}return[Math.round(h)%360,s,l,a==null?1:a];};spaces.hsla.from=function(hsla){if(hsla[0]==null||hsla[1]==null||hsla[2]==null){return[null,null,null,hsla[3]];}var h=hsla[0]/360,s=hsla[1],l=hsla[2],a=hsla[3],q=l<=0.5?l*(1+s):l+s-l*s,p=2*l-q;return[Math.round(hue2rgb(p,q,h+(1/3))*255),Math.round(hue2rgb(p,q,h)*255),Math.round(hue2rgb(p,q,h-(1/3))*255),a];};each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){if(to&&!this[cache]){this[cache]=to(this._rgba);}if(value===undefined){return this[cache].slice();}var ret,type=jQuery.type(value),arr=(type==="array"||type==="object")?value:arguments,local=this[cache].slice();each(props,function(key,prop){var val=arr[type==="object"?key:prop.idx];if(val==null){val=local[prop.idx];}local[prop.idx]=clamp(val,prop);});if(from){ret=color(from(local));ret[cache]=local;return ret;}else{return color(local);}};each(props,function(key,prop){if(color.fn[key]){return;}color.fn[key]=function(value){var vtype=jQuery.type(value),fn=(key==="alpha"?(this._hsla?"hsla":"rgba"):spaceName),local=this[fn](),cur=local[prop.idx],match;if(vtype==="undefined"){return cur;}if(vtype==="function"){value=value.call(this,cur);vtype=jQuery.type(value);}if(value==null&&prop.empty){return this;}if(vtype==="string"){match=rplusequals.exec(value);if(match){value=cur+parseFloat(match[2])*(match[1]==="+"?1:-1);}}local[prop.idx]=value;return this[fn](local);};});});color.hook=function(hook){var hooks=hook.split(" ");each(hooks,function(i,hook){jQuery.cssHooks[hook]={set:function(elem,value){var parsed,curElem,backgroundColor="";if(value!=="transparent"&&(jQuery.type(value)!=="string"||(parsed=stringParse(value)))){value=color(parsed||value);if(!support.rgba&&value._rgba[3]!==1){curElem=hook==="backgroundColor"?elem.parentNode:elem;while((backgroundColor===""||backgroundColor==="transparent")&&curElem&&curElem.style){try{backgroundColor=jQuery.css(curElem,"backgroundColor");curElem=curElem.parentNode;}catch(e){}}value=value.blend(backgroundColor&&backgroundColor!=="transparent"?backgroundColor:"_default");}value=value.toRgbaString();}try{elem.style[hook]=value;}catch(e){}}};jQuery.fx.step[hook]=function(fx){if(!fx.colorInit){fx.start=color(fx.elem,hook);fx.end=color(fx.end);fx.colorInit=true;}jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos));};});};color.hook(stepHooks);jQuery.cssHooks.borderColor={expand:function(value){var expanded={};each(["Top","Right","Bottom","Left"],function(i,part){expanded["border"+part+"Color"]=value;});return expanded;}};colors=jQuery.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};})(jQuery);(function(){var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(_,prop){$.fx.step[prop]=function(fx){if(fx.end!=="none"&&!fx.setAttr||fx.pos===1&&!fx.setAttr){jQuery.style(fx.elem,prop,fx.end);fx.setAttr=true;}};});function getElementStyles(elem){var key,len,style=elem.ownerDocument.defaultView?elem.ownerDocument.defaultView.getComputedStyle(elem,null):elem.currentStyle,styles={};if(style&&style.length&&style[0]&&style[style[0]]){len=style.length;while(len--){key=style[len];if(typeof style[key]==="string"){styles[$.camelCase(key)]=style[key];}}}else{for(key in style){if(typeof style[key]==="string"){styles[key]=style[key];}}}return styles;}function styleDifference(oldStyle,newStyle){var diff={},name,value;for(name in newStyle){value=newStyle[name];if(oldStyle[name]!==value){if(!shorthandStyles[name]){if($.fx.step[name]||!isNaN(parseFloat(value))){diff[name]=value;}}}}return diff;}if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}$.effects.animateClass=function(value,duration,easing,callback){var o=$.speed(duration,easing,callback);return this.queue(function(){var animated=$(this),baseClass=animated.attr("class")||"",applyClassChange,allAnimations=o.children?animated.find("*").addBack():animated;allAnimations=allAnimations.map(function(){var el=$(this);return{el:el,start:getElementStyles(this)};});applyClassChange=function(){$.each(classAnimationActions,function(i,action){if(value[action]){animated[action+"Class"](value[action]);}});};applyClassChange();allAnimations=allAnimations.map(function(){this.end=getElementStyles(this.el[0]);this.diff=styleDifference(this.start,this.end);return this;});animated.attr("class",baseClass);allAnimations=allAnimations.map(function(){var styleInfo=this,dfd=$.Deferred(),opts=$.extend({},o,{queue:false,complete:function(){dfd.resolve(styleInfo);}});this.el.animate(this.diff,opts);return dfd.promise();});$.when.apply($,allAnimations.get()).done(function(){applyClassChange();$.each(arguments,function(){var el=this.el;$.each(this.diff,function(key){el.css(key,"");});});o.complete.call(animated[0]);});});};$.fn.extend({addClass:(function(orig){return function(classNames,speed,easing,callback){return speed?$.effects.animateClass.call(this,{add:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.addClass),removeClass:(function(orig){return function(classNames,speed,easing,callback){return arguments.length>1?$.effects.animateClass.call(this,{remove:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.removeClass),toggleClass:(function(orig){return function(classNames,force,speed,easing,callback){if(typeof force==="boolean"||force===undefined){if(!speed){return orig.apply(this,arguments);}else{return $.effects.animateClass.call(this,(force?{add:classNames}:{remove:classNames}),speed,easing,callback);}}else{return $.effects.animateClass.call(this,{toggle:classNames},force,speed,easing);}};})($.fn.toggleClass),switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.call(this,{add:add,remove:remove},speed,easing,callback);}});})();(function(){if($.expr&&$.expr.filters&&$.expr.filters.animated){$.expr.filters.animated=(function(orig){return function(elem){return !!$(elem).data(dataSpaceAnimated)||orig(elem);};})($.expr.filters.animated);}if($.uiBackCompat!==false){$.extend($.effects,{save:function(element,set){var i=0,length=set.length;for(;i<length;i++){if(set[i]!==null){element.data(dataSpace+set[i],element[0].style[set[i]]);}}},restore:function(element,set){var val,i=0,length=set.length;for(;i<length;i++){if(set[i]!==null){val=element.data(dataSpace+set[i]);element.css(set[i],val);}}},setMode:function(el,mode){if(mode==="toggle"){mode=el.is(":hidden")?"show":"hide";}return mode;},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper")){return element.parent();}var props={width:element.outerWidth(true),height:element.outerHeight(true),"float":element.css("float")},wrapper=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),size={width:element.width(),height:element.height()},active=document.activeElement;try{active.id;}catch(e){active=document.body;}element.wrap(wrapper);if(element[0]===active||$.contains(element[0],active)){$(active).trigger("focus");}wrapper=element.parent();if(element.css("position")==="static"){wrapper.css({position:"relative"});element.css({position:"relative"});}else{$.extend(props,{position:element.css("position"),zIndex:element.css("z-index")});$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos);if(isNaN(parseInt(props[pos],10))){props[pos]="auto";}});element.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"});}element.css(size);return wrapper.css(props).show();},removeWrapper:function(element){var active=document.activeElement;if(element.parent().is(".ui-effects-wrapper")){element.parent().replaceWith(element);if(element[0]===active||$.contains(element[0],active)){$(active).trigger("focus");}}return element;}});}$.extend($.effects,{version:"1.12.1",define:function(name,mode,effect){if(!effect){effect=mode;mode="effect";}$.effects.effect[name]=effect;$.effects.effect[name].mode=mode;return effect;},scaledDimensions:function(element,percent,direction){if(percent===0){return{height:0,width:0,outerHeight:0,outerWidth:0};}var x=direction!=="horizontal"?((percent||100)/100):1,y=direction!=="vertical"?((percent||100)/100):1;return{height:element.height()*y,width:element.width()*x,outerHeight:element.outerHeight()*y,outerWidth:element.outerWidth()*x};},clipToBox:function(animation){return{width:animation.clip.right-animation.clip.left,height:animation.clip.bottom-animation.clip.top,left:animation.clip.left,top:animation.clip.top};},unshift:function(element,queueLength,count){var queue=element.queue();if(queueLength>1){queue.splice.apply(queue,[1,0].concat(queue.splice(queueLength,count)));}element.dequeue();},saveStyle:function(element){element.data(dataSpaceStyle,element[0].style.cssText);},restoreStyle:function(element){element[0].style.cssText=element.data(dataSpaceStyle)||"";element.removeData(dataSpaceStyle);},mode:function(element,mode){var hidden=element.is(":hidden");if(mode==="toggle"){mode=hidden?"show":"hide";}if(hidden?mode==="hide":mode==="show"){mode="none";}return mode;},getBaseline:function(origin,original){var y,x;switch(origin[0]){case"top":y=0;break;case"middle":y=0.5;break;case"bottom":y=1;break;default:y=origin[0]/original.height;}switch(origin[1]){case"left":x=0;break;case"center":x=0.5;break;case"right":x=1;break;default:x=origin[1]/original.width;}return{x:x,y:y};},createPlaceholder:function(element){var placeholder,cssPosition=element.css("position"),position=element.position();element.css({marginTop:element.css("marginTop"),marginBottom:element.css("marginBottom"),marginLeft:element.css("marginLeft"),marginRight:element.css("marginRight")}).outerWidth(element.outerWidth()).outerHeight(element.outerHeight());if(/^(static|relative)/.test(cssPosition)){cssPosition="absolute";placeholder=$("<"+element[0].nodeName+">").insertAfter(element).css({display:/^(inline|ruby)/.test(element.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:element.css("marginTop"),marginBottom:element.css("marginBottom"),marginLeft:element.css("marginLeft"),marginRight:element.css("marginRight"),"float":element.css("float")}).outerWidth(element.outerWidth()).outerHeight(element.outerHeight()).addClass("ui-effects-placeholder");element.data(dataSpace+"placeholder",placeholder);}element.css({position:cssPosition,left:position.left,top:position.top});return placeholder;},removePlaceholder:function(element){var dataKey=dataSpace+"placeholder",placeholder=element.data(dataKey);if(placeholder){placeholder.remove();element.removeData(dataKey);}},cleanUp:function(element){$.effects.restoreStyle(element);$.effects.removePlaceholder(element);},setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){var unit=element.cssUnit(x);if(unit[0]>0){value[x]=unit[0]*factor+unit[1];}});return value;}});function _normalizeArguments(effect,options,speed,callback){if($.isPlainObject(effect)){options=effect;effect=effect.effect;}effect={effect:effect};if(options==null){options={};}if($.isFunction(options)){callback=options;speed=null;options={};}if(typeof options==="number"||$.fx.speeds[options]){callback=speed;speed=options;options={};}if($.isFunction(speed)){callback=speed;speed=null;}if(options){$.extend(effect,options);}speed=speed||options.duration;effect.duration=$.fx.off?0:typeof speed==="number"?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default;effect.complete=callback||options.complete;return effect;}function standardAnimationOption(option){if(!option||typeof option==="number"||$.fx.speeds[option]){return true;}if(typeof option==="string"&&!$.effects.effect[option]){return true;}if($.isFunction(option)){return true;}if(typeof option==="object"&&!option.effect){return true;}return false;}$.fn.extend({effect:function(){var args=_normalizeArguments.apply(this,arguments),effectMethod=$.effects.effect[args.effect],defaultMode=effectMethod.mode,queue=args.queue,queueName=queue||"fx",complete=args.complete,mode=args.mode,modes=[],prefilter=function(next){var el=$(this),normalizedMode=$.effects.mode(el,mode)||defaultMode;el.data(dataSpaceAnimated,true);modes.push(normalizedMode);if(defaultMode&&(normalizedMode==="show"||(normalizedMode===defaultMode&&normalizedMode==="hide"))){el.show();}if(!defaultMode||normalizedMode!=="none"){$.effects.saveStyle(el);}if($.isFunction(next)){next();}};if($.fx.off||!effectMethod){if(mode){return this[mode](args.duration,complete);}else{return this.each(function(){if(complete){complete.call(this);}});}}function run(next){var elem=$(this);function cleanup(){elem.removeData(dataSpaceAnimated);$.effects.cleanUp(elem);if(args.mode==="hide"){elem.hide();}done();}function done(){if($.isFunction(complete)){complete.call(elem[0]);}if($.isFunction(next)){next();}}args.mode=modes.shift();if($.uiBackCompat!==false&&!defaultMode){if(elem.is(":hidden")?mode==="hide":mode==="show"){elem[mode]();done();}else{effectMethod.call(elem[0],args,done);}}else{if(args.mode==="none"){elem[mode]();done();}else{effectMethod.call(elem[0],args,cleanup);}}}return queue===false?this.each(prefilter).each(run):this.queue(queueName,prefilter).queue(queueName,run);},show:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="show";return this.effect.call(this,args);}};})($.fn.show),hide:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="hide";return this.effect.call(this,args);}};})($.fn.hide),toggle:(function(orig){return function(option){if(standardAnimationOption(option)||typeof option==="boolean"){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="toggle";return this.effect.call(this,args);}};})($.fn.toggle),cssUnit:function(key){var style=this.css(key),val=[];$.each(["em","px","%","pt"],function(i,unit){if(style.indexOf(unit)>0){val=[parseFloat(style),unit];}});return val;},cssClip:function(clipObj){if(clipObj){return this.css("clip","rect("+clipObj.top+"px "+clipObj.right+"px "+clipObj.bottom+"px "+clipObj.left+"px)");}return parseClip(this.css("clip"),this);},transfer:function(options,done){var element=$(this),target=$(options.to),targetFixed=target.css("position")==="fixed",body=$("body"),fixTop=targetFixed?body.scrollTop():0,fixLeft=targetFixed?body.scrollLeft():0,endPosition=target.offset(),animation={top:endPosition.top-fixTop,left:endPosition.left-fixLeft,height:target.innerHeight(),width:target.innerWidth()},startPosition=element.offset(),transfer=$("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(options.className).css({top:startPosition.top-fixTop,left:startPosition.left-fixLeft,height:element.innerHeight(),width:element.innerWidth(),position:targetFixed?"fixed":"absolute"}).animate(animation,options.duration,options.easing,function(){transfer.remove();if($.isFunction(done)){done();}});}});function parseClip(str,element){var outerWidth=element.outerWidth(),outerHeight=element.outerHeight(),clipRegex=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,values=clipRegex.exec(str)||["",0,outerWidth,outerHeight,0];return{top:parseFloat(values[1])||0,right:values[2]==="auto"?outerWidth:parseFloat(values[2]),bottom:values[3]==="auto"?outerHeight:parseFloat(values[3]),left:parseFloat(values[4])||0};}$.fx.step.clip=function(fx){if(!fx.clipInit){fx.start=$(fx.elem).cssClip();if(typeof fx.end==="string"){fx.end=parseClip(fx.end,fx.elem);}fx.clipInit=true;}$(fx.elem).cssClip({top:fx.pos*(fx.end.top-fx.start.top)+fx.start.top,right:fx.pos*(fx.end.right-fx.start.right)+fx.start.right,bottom:fx.pos*(fx.end.bottom-fx.start.bottom)+fx.start.bottom,left:fx.pos*(fx.end.left-fx.start.left)+fx.start.left});};})();(function(){var baseEasings={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(i,name){baseEasings[name]=function(p){return Math.pow(p,i+2);};});$.extend(baseEasings,{Sine:function(p){return 1-Math.cos(p*Math.PI/2);},Circ:function(p){return 1-Math.sqrt(1-p*p);},Elastic:function(p){return p===0||p===1?p:-Math.pow(2,8*(p-1))*Math.sin(((p-1)*80-7.5)*Math.PI/15);},Back:function(p){return p*p*(3*p-2);},Bounce:function(p){var pow2,bounce=4;while(p<((pow2=Math.pow(2,--bounce))-1)/11){}return 1/Math.pow(4,3-bounce)-7.5625*Math.pow((pow2*3-2)/22-p,2);}});$.each(baseEasings,function(name,easeIn){$.easing["easeIn"+name]=easeIn;$.easing["easeOut"+name]=function(p){return 1-easeIn(1-p);};$.easing["easeInOut"+name]=function(p){return p<0.5?easeIn(p*2)/2:1-easeIn(p*-2+2)/2;};});})();var effect=$.effects;
/*!
 * jQuery UI Effects Fade 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var effectsEffectFade=$.effects.define("fade","toggle",function(options,done){var show=options.mode==="show";$(this).css("opacity",show?0:1).animate({opacity:show?1:0},{queue:false,duration:options.duration,easing:options.easing,complete:done});});}));
			/* /jquery_ui.js */
			/* jquery.cookie.js */
/*!
 * jQuery Cookie Plugin v1.2
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function(a,b,c){function e(a){return a}function f(a){return decodeURIComponent(a.replace(d," "))}var d=/\+/g;a.cookie=function(d,g,h){if(g!==c&&!/Object/.test(Object.prototype.toString.call(g))){if(h=a.extend({},a.cookie.defaults,h),null===g&&(h.expires=-1),"number"==typeof h.expires){var i=h.expires,j=h.expires=new Date;j.setDate(j.getDate()+i)}return g+="",b.cookie=[encodeURIComponent(d),"=",h.raw?g:encodeURIComponent(g),h.expires?"; expires="+h.expires.toUTCString():"",h.path?"; path="+h.path:"",h.domain?"; domain="+h.domain:"",h.secure?"; secure":""].join("")}h=g||a.cookie.defaults||{};for(var n,k=h.raw?e:f,l=b.cookie.split("; "),m=0;n=l[m]&&l[m].split("=");m++)if(k(n.shift())===d)return k(n.join("="));return null},a.cookie.defaults={},a.removeCookie=function(b,c){return null!==a.cookie(b,c)?(a.cookie(b,null,c),!0):!1}})(jQuery,document);
			/* /jquery.cookie.js */
			/* jquery_ui_js_tooltip_ftn.js */
(function($){$.widget("ui.tooltip",$.ui.tooltip,{options:{destroyOnRemove:true},_show:function(tooltip,show){this._super(tooltip,show);if(!this.options.destroyOnRemove){return;}var that=this,target=this.element;var destroyIntervalId=setInterval(function(){if(target.closest(document.documentElement).length<1){if(tooltip.closest(document.documentElement).length>0){that._destroy();}clearInterval(destroyIntervalId);}},500);tooltip.data("tooltipDestroyIntervalId",destroyIntervalId);},_removeTooltip:function(tooltip){if(!this.options.destroyOnRemove){return;}var destroyIntervalId=tooltip.data("tooltipDestroyIntervalId");if(destroyIntervalId!==null&&destroyIntervalId!==undefined){clearInterval(destroyIntervalId);}this._super(tooltip);}});})(jQuery);
			/* /jquery_ui_js_tooltip_ftn.js */
			/*  */
(function($,sr){var debounce=function(func,threshold,execAsap){var timeout;return function debounced(){var obj=this,args=arguments;function delayed(){if(!execAsap){func.apply(obj,args);}timeout=null;}if(timeout){clearTimeout(timeout);}else{if(execAsap){func.apply(obj,args);}}timeout=setTimeout(delayed,threshold||100);};};jQuery.fn[sr]=function(fn){return fn?this.bind("resize",debounce(fn)):this.trigger(sr);};})(jQuery,"smartresize");
			/* / */
			/* yuiloader_dom_event.js */
/*
 Copyright (c) 2010, Yahoo! Inc. All rights reserved.
 Code licensed under the BSD License:
 http://developer.yahoo.com/yui/license.html
 version: 2.8.2r1
 */
 /*Method setStyle contains fix for IE10+. Instead if (T) is if (T&&T<10), for correct opacity and float setting.*/
if(typeof YAHOO=="undefined"||!YAHOO){var YAHOO={};}YAHOO.namespace=function(){var A=arguments,E=null,C,B,D;for(C=0;C<A.length;C=C+1){D=(""+A[C]).split(".");E=YAHOO;for(B=(D[0]=="YAHOO")?1:0;B<D.length;B=B+1){E[D[B]]=E[D[B]]||{};E=E[D[B]];}}return E;};YAHOO.log=function(D,A,C){var B=YAHOO.widget.Logger;if(B&&B.log){return B.log(D,A,C);}else{return false;}};YAHOO.register=function(A,E,D){var I=YAHOO.env.modules,B,H,G,F,C;if(!I[A]){I[A]={versions:[],builds:[]};}B=I[A];H=D.version;G=D.build;F=YAHOO.env.listeners;B.name=A;B.version=H;B.build=G;B.versions.push(H);B.builds.push(G);B.mainClass=E;for(C=0;C<F.length;C=C+1){F[C](B);}if(E){E.VERSION=H;E.BUILD=G;}else{YAHOO.log("mainClass is undefined for module "+A,"warn");}};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(A){return YAHOO.env.modules[A]||null;};YAHOO.env.ua=function(){var D=function(H){var I=0;return parseFloat(H.replace(/\./g,function(){return(I++==1)?"":".";}));},G=navigator,F={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0,caja:G.cajaVersion,secure:false,os:null},C=navigator&&navigator.userAgent,E=window&&window.location,B=E&&E.href,A;F.secure=B&&(B.toLowerCase().indexOf("https")===0);if(C){if((/windows|win32/i).test(C)){F.os="windows";}else{if((/macintosh/i).test(C)){F.os="macintosh";}}if((/KHTML/).test(C)){F.webkit=1;}A=C.match(/AppleWebKit\/([^\s]*)/);if(A&&A[1]){F.webkit=D(A[1]);if(/ Mobile\//.test(C)){F.mobile="Apple";}else{A=C.match(/NokiaN[^\/]*/);if(A){F.mobile=A[0];}}A=C.match(/AdobeAIR\/([^\s]*)/);if(A){F.air=A[0];}}if(!F.webkit){A=C.match(/Opera[\s\/]([^\s]*)/);if(A&&A[1]){F.opera=D(A[1]);A=C.match(/Opera Mini[^;]*/);if(A){F.mobile=A[0];}}else{A=C.match(/MSIE\s([^;]*)/);if(A&&A[1]){F.ie=D(A[1]);}else{A=C.match(/Gecko\/([^\s]*)/);if(A){F.gecko=1;A=C.match(/rv:([^\s\)]*)/);if(A&&A[1]){F.gecko=D(A[1]);}}}}}}return F;}();(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var B=YAHOO_config.listener,A=YAHOO.env.listeners,D=true,C;if(B){for(C=0;C<A.length;C++){if(A[C]==B){D=false;break;}}if(D){A.push(B);}}}})();YAHOO.lang=YAHOO.lang||{};(function(){var B=YAHOO.lang,A=Object.prototype,H="[object Array]",C="[object Function]",G="[object Object]",E=[],F=["toString","valueOf"],D={isArray:function(I){return A.toString.apply(I)===H;},isBoolean:function(I){return typeof I==="boolean";},isFunction:function(I){return(typeof I==="function")||A.toString.apply(I)===C;},isNull:function(I){return I===null;},isNumber:function(I){return typeof I==="number"&&isFinite(I);},isObject:function(I){return(I&&(typeof I==="object"||B.isFunction(I)))||false;},isString:function(I){return typeof I==="string";},isUndefined:function(I){return typeof I==="undefined";},_IEEnumFix:(YAHOO.env.ua.ie)?function(K,J){var I,M,L;for(I=0;I<F.length;I=I+1){M=F[I];L=J[M];if(B.isFunction(L)&&L!=A[M]){K[M]=L;}}}:function(){},extend:function(L,M,K){if(!M||!L){throw new Error("extend failed, please check that "+"all dependencies are included.");}var J=function(){},I;J.prototype=M.prototype;L.prototype=new J();L.prototype.constructor=L;L.superclass=M.prototype;if(M.prototype.constructor==A.constructor){M.prototype.constructor=M;}if(K){for(I in K){if(B.hasOwnProperty(K,I)){L.prototype[I]=K[I];}}B._IEEnumFix(L.prototype,K);}},augmentObject:function(M,L){if(!L||!M){throw new Error("Absorb failed, verify dependencies.");}var I=arguments,K,N,J=I[2];if(J&&J!==true){for(K=2;K<I.length;K=K+1){M[I[K]]=L[I[K]];}}else{for(N in L){if(J||!(N in M)){M[N]=L[N];}}B._IEEnumFix(M,L);}},augmentProto:function(L,K){if(!K||!L){throw new Error("Augment failed, verify dependencies.");}var I=[L.prototype,K.prototype],J;for(J=2;J<arguments.length;J=J+1){I.push(arguments[J]);}B.augmentObject.apply(this,I);},dump:function(I,N){var K,M,P=[],Q="{...}",J="f(){...}",O=", ",L=" => ";if(!B.isObject(I)){return I+"";}else{if(I instanceof Date||("nodeType" in I&&"tagName" in I)){return I;}else{if(B.isFunction(I)){return J;}}}N=(B.isNumber(N))?N:3;if(B.isArray(I)){P.push("[");for(K=0,M=I.length;K<M;K=K+1){if(B.isObject(I[K])){P.push((N>0)?B.dump(I[K],N-1):Q);}else{P.push(I[K]);}P.push(O);}if(P.length>1){P.pop();}P.push("]");}else{P.push("{");for(K in I){if(B.hasOwnProperty(I,K)){P.push(K+L);if(B.isObject(I[K])){P.push((N>0)?B.dump(I[K],N-1):Q);}else{P.push(I[K]);}P.push(O);}}if(P.length>1){P.pop();}P.push("}");}return P.join("");},substitute:function(Y,J,R){var N,M,L,U,V,X,T=[],K,O="dump",S=" ",I="{",W="}",Q,P;for(;;){N=Y.lastIndexOf(I);if(N<0){break;}M=Y.indexOf(W,N);if(N+1>=M){break;}K=Y.substring(N+1,M);U=K;X=null;L=U.indexOf(S);if(L>-1){X=U.substring(L+1);U=U.substring(0,L);}V=J[U];if(R){V=R(U,V,X);}if(B.isObject(V)){if(B.isArray(V)){V=B.dump(V,parseInt(X,10));}else{X=X||"";Q=X.indexOf(O);if(Q>-1){X=X.substring(4);}P=V.toString();if(P===G||Q>-1){V=B.dump(V,parseInt(X,10));}else{V=P;}}}else{if(!B.isString(V)&&!B.isNumber(V)){V="~-"+T.length+"-~";T[T.length]=K;}}Y=Y.substring(0,N)+V+Y.substring(M+1);}for(N=T.length-1;N>=0;N=N-1){Y=Y.replace(new RegExp("~-"+N+"-~"),"{"+T[N]+"}","g");}return Y;},trim:function(I){try{return I.replace(/^\s+|\s+$/g,"");}catch(J){return I;}},merge:function(){var L={},J=arguments,I=J.length,K;for(K=0;K<I;K=K+1){B.augmentObject(L,J[K],true);}return L;},later:function(P,J,Q,L,M){P=P||0;J=J||{};var K=Q,O=L,N,I;if(B.isString(Q)){K=J[Q];}if(!K){throw new TypeError("method undefined");}if(O&&!B.isArray(O)){O=[L];}N=function(){K.apply(J,O||E);};I=(M)?setInterval(N,P):setTimeout(N,P);return{interval:M,cancel:function(){if(this.interval){clearInterval(I);}else{clearTimeout(I);}}};},isValue:function(I){return(B.isObject(I)||B.isString(I)||B.isNumber(I)||B.isBoolean(I));}};B.hasOwnProperty=(A.hasOwnProperty)?function(I,J){return I&&I.hasOwnProperty(J);}:function(I,J){return !B.isUndefined(I[J])&&I.constructor.prototype[J]!==I[J];};D.augmentObject(B,D,true);YAHOO.util.Lang=B;B.augment=B.augmentProto;YAHOO.augment=B.augmentProto;YAHOO.extend=B.extend;})();YAHOO.register("yahoo",YAHOO,{version:"2.8.2r1",build:"7"});
YAHOO.util.Get=function(){var M={},L=0,R=0,E=false,N=YAHOO.env.ua,S=YAHOO.lang;var J=function(W,T,X){var U=X||window,Y=U.document,Z=Y.createElement(W);for(var V in T){if(T[V]&&YAHOO.lang.hasOwnProperty(T,V)){Z.setAttribute(V,T[V]);}}return Z;};var I=function(U,V,T){var W={id:"yui__dyn_"+(R++),type:"text/css",rel:"stylesheet",href:U};if(T){S.augmentObject(W,T);}return J("link",W,V);};var P=function(U,V,T){var W={id:"yui__dyn_"+(R++),type:"text/javascript",src:U};if(T){S.augmentObject(W,T);}return J("script",W,V);};var A=function(T,U){return{tId:T.tId,win:T.win,data:T.data,nodes:T.nodes,msg:U,purge:function(){D(this.tId);}};};var B=function(T,W){var U=M[W],V=(S.isString(T))?U.win.document.getElementById(T):T;if(!V){Q(W,"target node not found: "+T);}return V;};var Q=function(W,V){var T=M[W];if(T.onFailure){var U=T.scope||T.win;T.onFailure.call(U,A(T,V));}};var C=function(W){var T=M[W];T.finished=true;if(T.aborted){var V="transaction "+W+" was aborted";Q(W,V);return;}if(T.onSuccess){var U=T.scope||T.win;T.onSuccess.call(U,A(T));}};var O=function(V){var T=M[V];if(T.onTimeout){var U=T.scope||T;T.onTimeout.call(U,A(T));}};var G=function(V,Z){var U=M[V];if(U.timer){U.timer.cancel();}if(U.aborted){var X="transaction "+V+" was aborted";Q(V,X);return;}if(Z){U.url.shift();if(U.varName){U.varName.shift();}}else{U.url=(S.isString(U.url))?[U.url]:U.url;if(U.varName){U.varName=(S.isString(U.varName))?[U.varName]:U.varName;}}var c=U.win,b=c.document,a=b.getElementsByTagName("head")[0],W;if(U.url.length===0){if(U.type==="script"&&N.webkit&&N.webkit<420&&!U.finalpass&&!U.varName){var Y=P(null,U.win,U.attributes);Y.innerHTML='YAHOO.util.Get._finalize("'+V+'");';U.nodes.push(Y);a.appendChild(Y);}else{C(V);}return;}var T=U.url[0];if(!T){U.url.shift();return G(V);}if(U.timeout){U.timer=S.later(U.timeout,U,O,V);}if(U.type==="script"){W=P(T,c,U.attributes);}else{W=I(T,c,U.attributes);}F(U.type,W,V,T,c,U.url.length);U.nodes.push(W);if(U.insertBefore){var e=B(U.insertBefore,V);if(e){e.parentNode.insertBefore(W,e);}}else{a.appendChild(W);}if((N.webkit||N.gecko)&&U.type==="css"){G(V,T);}};var K=function(){if(E){return;}E=true;for(var T in M){var U=M[T];if(U.autopurge&&U.finished){D(U.tId);delete M[T];}}E=false;};var D=function(Z){if(M[Z]){var T=M[Z],U=T.nodes,X=U.length,c=T.win.document,a=c.getElementsByTagName("head")[0],V,Y,W,b;if(T.insertBefore){V=B(T.insertBefore,Z);if(V){a=V.parentNode;}}for(Y=0;Y<X;Y=Y+1){W=U[Y];if(W.clearAttributes){W.clearAttributes();}else{for(b in W){delete W[b];}}a.removeChild(W);}T.nodes=[];}};var H=function(U,T,V){var X="q"+(L++);V=V||{};if(L%YAHOO.util.Get.PURGE_THRESH===0){K();}M[X]=S.merge(V,{tId:X,type:U,url:T,finished:false,aborted:false,nodes:[]});var W=M[X];W.win=W.win||window;W.scope=W.scope||W.win;W.autopurge=("autopurge" in W)?W.autopurge:(U==="script")?true:false;if(V.charset){W.attributes=W.attributes||{};W.attributes.charset=V.charset;}S.later(0,W,G,X);return{tId:X};};var F=function(c,X,W,U,Y,Z,b){var a=b||G;if(N.ie){X.onreadystatechange=function(){var d=this.readyState;if("loaded"===d||"complete"===d){X.onreadystatechange=null;a(W,U);}};}else{if(N.webkit){if(c==="script"){if(N.webkit>=420){X.addEventListener("load",function(){a(W,U);});}else{var T=M[W];if(T.varName){var V=YAHOO.util.Get.POLL_FREQ;T.maxattempts=YAHOO.util.Get.TIMEOUT/V;T.attempts=0;T._cache=T.varName[0].split(".");T.timer=S.later(V,T,function(j){var f=this._cache,e=f.length,d=this.win,g;for(g=0;g<e;g=g+1){d=d[f[g]];if(!d){this.attempts++;if(this.attempts++>this.maxattempts){var h="Over retry limit, giving up";T.timer.cancel();Q(W,h);}else{}return;}}T.timer.cancel();a(W,U);},null,true);}else{S.later(YAHOO.util.Get.POLL_FREQ,null,a,[W,U]);}}}}else{X.onload=function(){a(W,U);};}}};return{POLL_FREQ:10,PURGE_THRESH:20,TIMEOUT:2000,_finalize:function(T){S.later(0,null,C,T);},abort:function(U){var V=(S.isString(U))?U:U.tId;var T=M[V];if(T){T.aborted=true;}},script:function(T,U){return H("script",T,U);},css:function(T,U){return H("css",T,U);}};}();YAHOO.register("get",YAHOO.util.Get,{version:"2.8.2r1",build:"7"});(function(){var Y=YAHOO,util=Y.util,lang=Y.lang,env=Y.env,PROV="_provides",SUPER="_supersedes",REQ="expanded",AFTER="_after";var YUI={dupsAllowed:{"yahoo":true,"get":true},info:{"root":"2.8.2r1/build/","base":"http://yui.yahooapis.com/2.8.2r1/build/","comboBase":"http://yui.yahooapis.com/combo?","skin":{"defaultSkin":"sam","base":"assets/skins/","path":"skin.css","after":["reset","fonts","grids","base"],"rollup":3},dupsAllowed:["yahoo","get"],"moduleInfo":{"animation":{"type":"js","path":"animation/animation-min.js","requires":["dom","event"]},"autocomplete":{"type":"js","path":"autocomplete/autocomplete-min.js","requires":["dom","event","datasource"],"optional":["connection","animation"],"skinnable":true},"base":{"type":"css","path":"base/base-min.css","after":["reset","fonts","grids"]},"button":{"type":"js","path":"button/button-min.js","requires":["element"],"optional":["menu"],"skinnable":true},"calendar":{"type":"js","path":"calendar/calendar-min.js","requires":["event","dom"],supersedes:["datemeth"],"skinnable":true},"carousel":{"type":"js","path":"carousel/carousel-min.js","requires":["element"],"optional":["animation"],"skinnable":true},"charts":{"type":"js","path":"charts/charts-min.js","requires":["element","json","datasource","swf"]},"colorpicker":{"type":"js","path":"colorpicker/colorpicker-min.js","requires":["slider","element"],"optional":["animation"],"skinnable":true},"connection":{"type":"js","path":"connection/connection-min.js","requires":["event"],"supersedes":["connectioncore"]},"connectioncore":{"type":"js","path":"connection/connection_core-min.js","requires":["event"],"pkg":"connection"},"container":{"type":"js","path":"container/container-min.js","requires":["dom","event"],"optional":["dragdrop","animation","connection"],"supersedes":["containercore"],"skinnable":true},"containercore":{"type":"js","path":"container/container_core-min.js","requires":["dom","event"],"pkg":"container"},"cookie":{"type":"js","path":"cookie/cookie-min.js","requires":["yahoo"]},"datasource":{"type":"js","path":"datasource/datasource-min.js","requires":["event"],"optional":["connection"]},"datatable":{"type":"js","path":"datatable/datatable-min.js","requires":["element","datasource"],"optional":["calendar","dragdrop","paginator"],"skinnable":true},datemath:{"type":"js","path":"datemath/datemath-min.js","requires":["yahoo"]},"dom":{"type":"js","path":"dom/dom-min.js","requires":["yahoo"]},"dragdrop":{"type":"js","path":"dragdrop/dragdrop-min.js","requires":["dom","event"]},"editor":{"type":"js","path":"editor/editor-min.js","requires":["menu","element","button"],"optional":["animation","dragdrop"],"supersedes":["simpleeditor"],"skinnable":true},"element":{"type":"js","path":"element/element-min.js","requires":["dom","event"],"optional":["event-mouseenter","event-delegate"]},"element-delegate":{"type":"js","path":"element-delegate/element-delegate-min.js","requires":["element"]},"event":{"type":"js","path":"event/event-min.js","requires":["yahoo"]},"event-simulate":{"type":"js","path":"event-simulate/event-simulate-min.js","requires":["event"]},"event-delegate":{"type":"js","path":"event-delegate/event-delegate-min.js","requires":["event"],"optional":["selector"]},"event-mouseenter":{"type":"js","path":"event-mouseenter/event-mouseenter-min.js","requires":["dom","event"]},"fonts":{"type":"css","path":"fonts/fonts-min.css"},"get":{"type":"js","path":"get/get-min.js","requires":["yahoo"]},"grids":{"type":"css","path":"grids/grids-min.css","requires":["fonts"],"optional":["reset"]},"history":{"type":"js","path":"history/history-min.js","requires":["event"]},"imagecropper":{"type":"js","path":"imagecropper/imagecropper-min.js","requires":["dragdrop","element","resize"],"skinnable":true},"imageloader":{"type":"js","path":"imageloader/imageloader-min.js","requires":["event","dom"]},"json":{"type":"js","path":"json/json-min.js","requires":["yahoo"]},"layout":{"type":"js","path":"layout/layout-min.js","requires":["element"],"optional":["animation","dragdrop","resize","selector"],"skinnable":true},"logger":{"type":"js","path":"logger/logger-min.js","requires":["event","dom"],"optional":["dragdrop"],"skinnable":true},"menu":{"type":"js","path":"menu/menu-min.js","requires":["containercore"],"skinnable":true},"paginator":{"type":"js","path":"paginator/paginator-min.js","requires":["element"],"skinnable":true},"profiler":{"type":"js","path":"profiler/profiler-min.js","requires":["yahoo"]},"profilerviewer":{"type":"js","path":"profilerviewer/profilerviewer-min.js","requires":["profiler","yuiloader","element"],"skinnable":true},"progressbar":{"type":"js","path":"progressbar/progressbar-min.js","requires":["element"],"optional":["animation"],"skinnable":true},"reset":{"type":"css","path":"reset/reset-min.css"},"reset-fonts-grids":{"type":"css","path":"reset-fonts-grids/reset-fonts-grids.css","supersedes":["reset","fonts","grids","reset-fonts"],"rollup":4},"reset-fonts":{"type":"css","path":"reset-fonts/reset-fonts.css","supersedes":["reset","fonts"],"rollup":2},"resize":{"type":"js","path":"resize/resize-min.js","requires":["dragdrop","element"],"optional":["animation"],"skinnable":true},"selector":{"type":"js","path":"selector/selector-min.js","requires":["yahoo","dom"]},"simpleeditor":{"type":"js","path":"editor/simpleeditor-min.js","requires":["element"],"optional":["containercore","menu","button","animation","dragdrop"],"skinnable":true,"pkg":"editor"},"slider":{"type":"js","path":"slider/slider-min.js","requires":["dragdrop"],"optional":["animation"],"skinnable":true},"storage":{"type":"js","path":"storage/storage-min.js","requires":["yahoo","event","cookie"],"optional":["swfstore"]},"stylesheet":{"type":"js","path":"stylesheet/stylesheet-min.js","requires":["yahoo"]},"swf":{"type":"js","path":"swf/swf-min.js","requires":["element"],"supersedes":["swfdetect"]},"swfdetect":{"type":"js","path":"swfdetect/swfdetect-min.js","requires":["yahoo"]},"swfstore":{"type":"js","path":"swfstore/swfstore-min.js","requires":["element","cookie","swf"]},"tabview":{"type":"js","path":"tabview/tabview-min.js","requires":["element"],"optional":["connection"],"skinnable":true},"treeview":{"type":"js","path":"treeview/treeview-min.js","requires":["event","dom"],"optional":["json","animation","calendar"],"skinnable":true},"uploader":{"type":"js","path":"uploader/uploader-min.js","requires":["element"]},"utilities":{"type":"js","path":"utilities/utilities.js","supersedes":["yahoo","event","dragdrop","animation","dom","connection","element","yahoo-dom-event","get","yuiloader","yuiloader-dom-event"],"rollup":8},"yahoo":{"type":"js","path":"yahoo/yahoo-min.js"},"yahoo-dom-event":{"type":"js","path":"yahoo-dom-event/yahoo-dom-event.js","supersedes":["yahoo","event","dom"],"rollup":3},"yuiloader":{"type":"js","path":"yuiloader/yuiloader-min.js","supersedes":["yahoo","get"]},"yuiloader-dom-event":{"type":"js","path":"yuiloader-dom-event/yuiloader-dom-event.js","supersedes":["yahoo","dom","event","get","yuiloader","yahoo-dom-event"],"rollup":5},"yuitest":{"type":"js","path":"yuitest/yuitest-min.js","requires":["logger"],"optional":["event-simulate"],"skinnable":true}}},ObjectUtil:{appendArray:function(o,a){if(a){for(var i=0;
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																		 i<a.length;i=i+1){o[a[i]]=true;}}},keys:function(o,ordered){var a=[],i;for(i in o){if(lang.hasOwnProperty(o,i)){a.push(i);}}return a;}},ArrayUtil:{appendArray:function(a1,a2){Array.prototype.push.apply(a1,a2);},indexOf:function(a,val){for(var i=0;i<a.length;i=i+1){if(a[i]===val){return i;}}return -1;},toObject:function(a){var o={};for(var i=0;i<a.length;i=i+1){o[a[i]]=true;}return o;},uniq:function(a){return YUI.ObjectUtil.keys(YUI.ArrayUtil.toObject(a));}}};YAHOO.util.YUILoader=function(o){this._internalCallback=null;this._useYahooListener=false;this.onSuccess=null;this.onFailure=Y.log;this.onProgress=null;this.onTimeout=null;this.scope=this;this.data=null;this.insertBefore=null;this.charset=null;this.varName=null;this.base=YUI.info.base;this.comboBase=YUI.info.comboBase;this.combine=false;this.root=YUI.info.root;this.timeout=0;this.ignore=null;this.force=null;this.allowRollup=true;this.filter=null;this.required={};this.moduleInfo=lang.merge(YUI.info.moduleInfo);this.rollups=null;this.loadOptional=false;this.sorted=[];this.loaded={};this.dirty=true;this.inserted={};var self=this;env.listeners.push(function(m){if(self._useYahooListener){self.loadNext(m.name);}});this.skin=lang.merge(YUI.info.skin);this._config(o);};Y.util.YUILoader.prototype={FILTERS:{RAW:{"searchExp":"-min\\.js","replaceStr":".js"},DEBUG:{"searchExp":"-min\\.js","replaceStr":"-debug.js"}},SKIN_PREFIX:"skin-",_config:function(o){if(o){for(var i in o){if(lang.hasOwnProperty(o,i)){if(i=="require"){this.require(o[i]);}else{this[i]=o[i];}}}}var f=this.filter;if(lang.isString(f)){f=f.toUpperCase();if(f==="DEBUG"){this.require("logger");}if(!Y.widget.LogWriter){Y.widget.LogWriter=function(){return Y;};}this.filter=this.FILTERS[f];}},addModule:function(o){if(!o||!o.name||!o.type||(!o.path&&!o.fullpath)){return false;}o.ext=("ext" in o)?o.ext:true;o.requires=o.requires||[];this.moduleInfo[o.name]=o;this.dirty=true;return true;},require:function(what){var a=(typeof what==="string")?arguments:what;this.dirty=true;YUI.ObjectUtil.appendArray(this.required,a);},_addSkin:function(skin,mod){var name=this.formatSkin(skin),info=this.moduleInfo,sinf=this.skin,ext=info[mod]&&info[mod].ext;if(!info[name]){this.addModule({"name":name,"type":"css","path":sinf.base+skin+"/"+sinf.path,"after":sinf.after,"rollup":sinf.rollup,"ext":ext});}if(mod){name=this.formatSkin(skin,mod);if(!info[name]){var mdef=info[mod],pkg=mdef.pkg||mod;this.addModule({"name":name,"type":"css","after":sinf.after,"path":pkg+"/"+sinf.base+skin+"/"+mod+".css","ext":ext});}}return name;},getRequires:function(mod){if(!mod){return[];}if(!this.dirty&&mod.expanded){return mod.expanded;}mod.requires=mod.requires||[];var i,d=[],r=mod.requires,o=mod.optional,info=this.moduleInfo,m;for(i=0;i<r.length;i=i+1){d.push(r[i]);m=info[r[i]];YUI.ArrayUtil.appendArray(d,this.getRequires(m));}if(o&&this.loadOptional){for(i=0;i<o.length;i=i+1){d.push(o[i]);YUI.ArrayUtil.appendArray(d,this.getRequires(info[o[i]]));}}mod.expanded=YUI.ArrayUtil.uniq(d);return mod.expanded;},getProvides:function(name,notMe){var addMe=!(notMe),ckey=(addMe)?PROV:SUPER,m=this.moduleInfo[name],o={};if(!m){return o;}if(m[ckey]){return m[ckey];}var s=m.supersedes,done={},me=this;var add=function(mm){if(!done[mm]){done[mm]=true;lang.augmentObject(o,me.getProvides(mm));}};if(s){for(var i=0;i<s.length;i=i+1){add(s[i]);}}m[SUPER]=o;m[PROV]=lang.merge(o);m[PROV][name]=true;return m[ckey];},calculate:function(o){if(o||this.dirty){this._config(o);this._setup();this._explode();if(this.allowRollup){this._rollup();}this._reduce();this._sort();this.dirty=false;}},_setup:function(){var info=this.moduleInfo,name,i,j;for(name in info){if(lang.hasOwnProperty(info,name)){var m=info[name];if(m&&m.skinnable){var o=this.skin.overrides,smod;if(o&&o[name]){for(i=0;i<o[name].length;i=i+1){smod=this._addSkin(o[name][i],name);}}else{smod=this._addSkin(this.skin.defaultSkin,name);}m.requires.push(smod);}}}var l=lang.merge(this.inserted);if(!this._sandbox){l=lang.merge(l,env.modules);}if(this.ignore){YUI.ObjectUtil.appendArray(l,this.ignore);}if(this.force){for(i=0;i<this.force.length;i=i+1){if(this.force[i] in l){delete l[this.force[i]];}}}for(j in l){if(lang.hasOwnProperty(l,j)){lang.augmentObject(l,this.getProvides(j));}}this.loaded=l;},_explode:function(){var r=this.required,i,mod;for(i in r){if(lang.hasOwnProperty(r,i)){mod=this.moduleInfo[i];if(mod){var req=this.getRequires(mod);if(req){YUI.ObjectUtil.appendArray(r,req);}}}}},_skin:function(){},formatSkin:function(skin,mod){var s=this.SKIN_PREFIX+skin;if(mod){s=s+"-"+mod;}return s;},parseSkin:function(mod){if(mod.indexOf(this.SKIN_PREFIX)===0){var a=mod.split("-");return{skin:a[1],module:a[2]};}return null;},_rollup:function(){var i,j,m,s,rollups={},r=this.required,roll,info=this.moduleInfo;if(this.dirty||!this.rollups){for(i in info){if(lang.hasOwnProperty(info,i)){m=info[i];if(m&&m.rollup){rollups[i]=m;}}}this.rollups=rollups;}for(;;){var rolled=false;for(i in rollups){if(!r[i]&&!this.loaded[i]){m=info[i];s=m.supersedes;roll=false;if(!m.rollup){continue;}var skin=(m.ext)?false:this.parseSkin(i),c=0;if(skin){for(j in r){if(lang.hasOwnProperty(r,j)){if(i!==j&&this.parseSkin(j)){c++;roll=(c>=m.rollup);if(roll){break;}}}}}else{for(j=0;j<s.length;j=j+1){if(this.loaded[s[j]]&&(!YUI.dupsAllowed[s[j]])){roll=false;break;}else{if(r[s[j]]){c++;roll=(c>=m.rollup);if(roll){break;}}}}}if(roll){r[i]=true;rolled=true;this.getRequires(m);}}}if(!rolled){break;}}},_reduce:function(){var i,j,s,m,r=this.required;for(i in r){if(i in this.loaded){delete r[i];}else{var skinDef=this.parseSkin(i);if(skinDef){if(!skinDef.module){var skin_pre=this.SKIN_PREFIX+skinDef.skin;for(j in r){if(lang.hasOwnProperty(r,j)){m=this.moduleInfo[j];var ext=m&&m.ext;if(!ext&&j!==i&&j.indexOf(skin_pre)>-1){delete r[j];}}}}}else{m=this.moduleInfo[i];s=m&&m.supersedes;if(s){for(j=0;j<s.length;j=j+1){if(s[j] in r){delete r[s[j]];}}}}}}},_onFailure:function(msg){YAHOO.log("Failure","info","loader");var f=this.onFailure;if(f){f.call(this.scope,{msg:"failure: "+msg,data:this.data,success:false});
}},_onTimeout:function(){YAHOO.log("Timeout","info","loader");var f=this.onTimeout;if(f){f.call(this.scope,{msg:"timeout",data:this.data,success:false});}},_sort:function(){var s=[],info=this.moduleInfo,loaded=this.loaded,checkOptional=!this.loadOptional,me=this;var requires=function(aa,bb){var mm=info[aa];if(loaded[bb]||!mm){return false;}var ii,rr=mm.expanded,after=mm.after,other=info[bb],optional=mm.optional;if(rr&&YUI.ArrayUtil.indexOf(rr,bb)>-1){return true;}if(after&&YUI.ArrayUtil.indexOf(after,bb)>-1){return true;}if(checkOptional&&optional&&YUI.ArrayUtil.indexOf(optional,bb)>-1){return true;}var ss=info[bb]&&info[bb].supersedes;if(ss){for(ii=0;ii<ss.length;ii=ii+1){if(requires(aa,ss[ii])){return true;}}}if(mm.ext&&mm.type=="css"&&!other.ext&&other.type=="css"){return true;}return false;};for(var i in this.required){if(lang.hasOwnProperty(this.required,i)){s.push(i);}}var p=0;for(;;){var l=s.length,a,b,j,k,moved=false;for(j=p;j<l;j=j+1){a=s[j];for(k=j+1;k<l;k=k+1){if(requires(a,s[k])){b=s.splice(k,1);s.splice(j,0,b[0]);moved=true;break;}}if(moved){break;}else{p=p+1;}}if(!moved){break;}}this.sorted=s;},toString:function(){var o={type:"YUILoader",base:this.base,filter:this.filter,required:this.required,loaded:this.loaded,inserted:this.inserted};lang.dump(o,1);},_combine:function(){this._combining=[];var self=this,s=this.sorted,len=s.length,js=this.comboBase,css=this.comboBase,target,startLen=js.length,i,m,type=this.loadType;YAHOO.log("type "+type);for(i=0;i<len;i=i+1){m=this.moduleInfo[s[i]];if(m&&!m.ext&&(!type||type===m.type)){target=this.root+m.path;target+="&";if(m.type=="js"){js+=target;}else{css+=target;}this._combining.push(s[i]);}}if(this._combining.length){YAHOO.log("Attempting to combine: "+this._combining,"info","loader");var callback=function(o){var c=this._combining,len=c.length,i,m;for(i=0;i<len;i=i+1){this.inserted[c[i]]=true;}this.loadNext(o.data);},loadScript=function(){if(js.length>startLen){YAHOO.util.Get.script(self._filter(js),{data:self._loading,onSuccess:callback,onFailure:self._onFailure,onTimeout:self._onTimeout,insertBefore:self.insertBefore,charset:self.charset,timeout:self.timeout,scope:self});}};if(css.length>startLen){YAHOO.util.Get.css(this._filter(css),{data:this._loading,onSuccess:loadScript,onFailure:this._onFailure,onTimeout:this._onTimeout,insertBefore:this.insertBefore,charset:this.charset,timeout:this.timeout,scope:self});}else{loadScript();}return;}else{this.loadNext(this._loading);}},insert:function(o,type){this.calculate(o);this._loading=true;this.loadType=type;if(this.combine){return this._combine();}if(!type){var self=this;this._internalCallback=function(){self._internalCallback=null;self.insert(null,"js");};this.insert(null,"css");return;}this.loadNext();},sandbox:function(o,type){this._config(o);if(!this.onSuccess){throw new Error("You must supply an onSuccess handler for your sandbox");}this._sandbox=true;var self=this;if(!type||type!=="js"){this._internalCallback=function(){self._internalCallback=null;self.sandbox(null,"js");};this.insert(null,"css");return;}if(!util.Connect){var ld=new YAHOO.util.YUILoader();ld.insert({base:this.base,filter:this.filter,require:"connection",insertBefore:this.insertBefore,charset:this.charset,onSuccess:function(){this.sandbox(null,"js");},scope:this},"js");return;}this._scriptText=[];this._loadCount=0;this._stopCount=this.sorted.length;this._xhr=[];this.calculate();var s=this.sorted,l=s.length,i,m,url;for(i=0;i<l;i=i+1){m=this.moduleInfo[s[i]];if(!m){this._onFailure("undefined module "+m);for(var j=0;j<this._xhr.length;j=j+1){this._xhr[j].abort();}return;}if(m.type!=="js"){this._loadCount++;continue;}url=m.fullpath;url=(url)?this._filter(url):this._url(m.path);var xhrData={success:function(o){var idx=o.argument[0],name=o.argument[2];this._scriptText[idx]=o.responseText;if(this.onProgress){this.onProgress.call(this.scope,{name:name,scriptText:o.responseText,xhrResponse:o,data:this.data});}this._loadCount++;if(this._loadCount>=this._stopCount){var v=this.varName||"YAHOO";var t="(function() {\n";var b="\nreturn "+v+";\n})();";var ref=eval(t+this._scriptText.join("\n")+b);this._pushEvents(ref);if(ref){this.onSuccess.call(this.scope,{reference:ref,data:this.data});}else{this._onFailure.call(this.varName+" reference failure");}}},failure:function(o){this.onFailure.call(this.scope,{msg:"XHR failure",xhrResponse:o,data:this.data});},scope:this,argument:[i,url,s[i]]};this._xhr.push(util.Connect.asyncRequest("GET",url,xhrData));}},loadNext:function(mname){if(!this._loading){return;}if(mname){if(mname!==this._loading){return;}this.inserted[mname]=true;if(this.onProgress){this.onProgress.call(this.scope,{name:mname,data:this.data});}}var s=this.sorted,len=s.length,i,m;for(i=0;i<len;i=i+1){if(s[i] in this.inserted){continue;}if(s[i]===this._loading){return;}m=this.moduleInfo[s[i]];if(!m){this.onFailure.call(this.scope,{msg:"undefined module "+m,data:this.data});return;}if(!this.loadType||this.loadType===m.type){this._loading=s[i];var fn=(m.type==="css")?util.Get.css:util.Get.script,url=m.fullpath,self=this,c=function(o){self.loadNext(o.data);};url=(url)?this._filter(url):this._url(m.path);if(env.ua.webkit&&env.ua.webkit<420&&m.type==="js"&&!m.varName){c=null;this._useYahooListener=true;}fn(url,{data:s[i],onSuccess:c,onFailure:this._onFailure,onTimeout:this._onTimeout,insertBefore:this.insertBefore,charset:this.charset,timeout:this.timeout,varName:m.varName,scope:self});return;}}this._loading=null;if(this._internalCallback){var f=this._internalCallback;this._internalCallback=null;f.call(this);}else{if(this.onSuccess){this._pushEvents();this.onSuccess.call(this.scope,{data:this.data});}}},_pushEvents:function(ref){var r=ref||YAHOO;if(r.util&&r.util.Event){r.util.Event._load();}},_filter:function(str){var f=this.filter;return(f)?str.replace(new RegExp(f.searchExp,"g"),f.replaceStr):str;},_url:function(path){return this._filter((this.base||"")+path);}};})();YAHOO.register("yuiloader",YAHOO.util.YUILoader,{version:"2.8.2r1",build:"7"});
(function(){YAHOO.env._id_counter=YAHOO.env._id_counter||0;var E=YAHOO.util,L=YAHOO.lang,m=YAHOO.env.ua,A=YAHOO.lang.trim,d={},h={},N=/^t(?:able|d|h)$/i,X=/color$/i,K=window.document,W=K.documentElement,e="ownerDocument",n="defaultView",v="documentElement",t="compatMode",b="offsetLeft",P="offsetTop",u="offsetParent",Z="parentNode",l="nodeType",C="tagName",O="scrollLeft",i="scrollTop",Q="getBoundingClientRect",w="getComputedStyle",a="currentStyle",M="CSS1Compat",c="BackCompat",g="class",F="className",J="",B=" ",s="(?:^|\\s)",k="(?= |$)",U="g",p="position",f="fixed",V="relative",j="left",o="top",r="medium",q="borderLeftWidth",R="borderTopWidth",D=m.opera,I=m.webkit,H=m.gecko,T=m.ie;E.Dom={CUSTOM_ATTRIBUTES:(!W.hasAttribute)?{"for":"htmlFor","class":F}:{"htmlFor":"for","className":g},DOT_ATTRIBUTES:{},get:function(z){var AB,x,AA,y,Y,G;if(z){if(z[l]||z.item){return z;}if(typeof z==="string"){AB=z;z=K.getElementById(z);G=(z)?z.attributes:null;if(z&&G&&G.id&&G.id.value===AB){return z;}else{if(z&&K.all){z=null;x=K.all[AB];for(y=0,Y=x.length;y<Y;++y){if(x[y].id===AB){return x[y];}}}}return z;}if(YAHOO.util.Element&&z instanceof YAHOO.util.Element){z=z.get("element");}if("length" in z){AA=[];for(y=0,Y=z.length;y<Y;++y){AA[AA.length]=E.Dom.get(z[y]);}return AA;}return z;}return null;},getComputedStyle:function(G,Y){if(window[w]){return G[e][n][w](G,null)[Y];}else{if(G[a]){return E.Dom.IE_ComputedStyle.get(G,Y);}}},getStyle:function(G,Y){return E.Dom.batch(G,E.Dom._getStyle,Y);},_getStyle:function(){if(window[w]){return function(G,y){y=(y==="float")?y="cssFloat":E.Dom._toCamel(y);var x=G.style[y],Y;if(!x){Y=G[e][n][w](G,null);if(Y){x=Y[y];}}return x;};}else{if(W[a]){return function(G,y){var x;switch(y){case"opacity":x=100;try{x=G.filters["DXImageTransform.Microsoft.Alpha"].opacity;}catch(z){try{x=G.filters("alpha").opacity;}catch(Y){}}return x/100;case"float":y="styleFloat";default:y=E.Dom._toCamel(y);x=G[a]?G[a][y]:null;return(G.style[y]||x);}};}}}(),setStyle:function(G,Y,x){E.Dom.batch(G,E.Dom._setStyle,{prop:Y,val:x});},_setStyle:function(){if(T&&T<10){return function(Y,G){var x=E.Dom._toCamel(G.prop),y=G.val;if(Y){switch(x){case"opacity":if(L.isString(Y.style.filter)){Y.style.filter="alpha(opacity="+y*100+")";if(!Y[a]||!Y[a].hasLayout){Y.style.zoom=1;}}break;case"float":x="styleFloat";default:Y.style[x]=y;}}else{}};}else{return function(Y,G){var x=E.Dom._toCamel(G.prop),y=G.val;if(Y){if(x=="float"){x="cssFloat";}Y.style[x]=y;}else{}};}}(),getXY:function(G){return E.Dom.batch(G,E.Dom._getXY);},_canPosition:function(G){return(E.Dom._getStyle(G,"display")!=="none"&&E.Dom._inDoc(G));},_getXY:function(){if(K[v][Q]){return function(y){var z,Y,AA,AF,AE,AD,AC,G,x,AB=Math.floor,AG=false;if(E.Dom._canPosition(y)){AA=y[Q]();AF=y[e];z=E.Dom.getDocumentScrollLeft(AF);Y=E.Dom.getDocumentScrollTop(AF);AG=[AB(AA[j]),AB(AA[o])];if(T&&m.ie<8){AE=2;AD=2;AC=AF[t];if(m.ie===6){if(AC!==c){AE=0;AD=0;}}if((AC===c)){G=S(AF[v],q);x=S(AF[v],R);if(G!==r){AE=parseInt(G,10);}if(x!==r){AD=parseInt(x,10);}}AG[0]-=AE;AG[1]-=AD;}if((Y||z)){AG[0]+=z;AG[1]+=Y;}AG[0]=AB(AG[0]);AG[1]=AB(AG[1]);}else{}return AG;};}else{return function(y){var x,Y,AA,AB,AC,z=false,G=y;if(E.Dom._canPosition(y)){z=[y[b],y[P]];x=E.Dom.getDocumentScrollLeft(y[e]);Y=E.Dom.getDocumentScrollTop(y[e]);AC=((H||m.webkit>519)?true:false);while((G=G[u])){z[0]+=G[b];z[1]+=G[P];if(AC){z=E.Dom._calcBorders(G,z);}}if(E.Dom._getStyle(y,p)!==f){G=y;while((G=G[Z])&&G[C]){AA=G[i];AB=G[O];if(H&&(E.Dom._getStyle(G,"overflow")!=="visible")){z=E.Dom._calcBorders(G,z);}if(AA||AB){z[0]-=AB;z[1]-=AA;}}z[0]+=x;z[1]+=Y;}else{if(D){z[0]-=x;z[1]-=Y;}else{if(I||H){z[0]+=x;z[1]+=Y;}}}z[0]=Math.floor(z[0]);z[1]=Math.floor(z[1]);}else{}return z;};}}(),getX:function(G){var Y=function(x){return E.Dom.getXY(x)[0];};return E.Dom.batch(G,Y,E.Dom,true);},getY:function(G){var Y=function(x){return E.Dom.getXY(x)[1];};return E.Dom.batch(G,Y,E.Dom,true);},setXY:function(G,x,Y){E.Dom.batch(G,E.Dom._setXY,{pos:x,noRetry:Y});},_setXY:function(G,z){var AA=E.Dom._getStyle(G,p),y=E.Dom.setStyle,AD=z.pos,Y=z.noRetry,AB=[parseInt(E.Dom.getComputedStyle(G,j),10),parseInt(E.Dom.getComputedStyle(G,o),10)],AC,x;if(AA=="static"){AA=V;y(G,p,AA);}AC=E.Dom._getXY(G);if(!AD||AC===false){return false;}if(isNaN(AB[0])){AB[0]=(AA==V)?0:G[b];}if(isNaN(AB[1])){AB[1]=(AA==V)?0:G[P];}if(AD[0]!==null){y(G,j,AD[0]-AC[0]+AB[0]+"px");}if(AD[1]!==null){y(G,o,AD[1]-AC[1]+AB[1]+"px");}if(!Y){x=E.Dom._getXY(G);if((AD[0]!==null&&x[0]!=AD[0])||(AD[1]!==null&&x[1]!=AD[1])){E.Dom._setXY(G,{pos:AD,noRetry:true});}}},setX:function(Y,G){E.Dom.setXY(Y,[G,null]);},setY:function(G,Y){E.Dom.setXY(G,[null,Y]);},getRegion:function(G){var Y=function(x){var y=false;if(E.Dom._canPosition(x)){y=E.Region.getRegion(x);}else{}return y;};return E.Dom.batch(G,Y,E.Dom,true);},getClientWidth:function(){return E.Dom.getViewportWidth();},getClientHeight:function(){return E.Dom.getViewportHeight();},getElementsByClassName:function(AB,AF,AC,AE,x,AD){AF=AF||"*";AC=(AC)?E.Dom.get(AC):null||K;if(!AC){return[];}var Y=[],G=AC.getElementsByTagName(AF),z=E.Dom.hasClass;for(var y=0,AA=G.length;y<AA;++y){if(z(G[y],AB)){Y[Y.length]=G[y];}}if(AE){E.Dom.batch(Y,AE,x,AD);}return Y;},hasClass:function(Y,G){return E.Dom.batch(Y,E.Dom._hasClass,G);},_hasClass:function(x,Y){var G=false,y;if(x&&Y){y=E.Dom._getAttribute(x,F)||J;if(Y.exec){G=Y.test(y);}else{G=Y&&(B+y+B).indexOf(B+Y+B)>-1;}}else{}return G;},addClass:function(Y,G){return E.Dom.batch(Y,E.Dom._addClass,G);},_addClass:function(x,Y){var G=false,y;if(x&&Y){y=E.Dom._getAttribute(x,F)||J;if(!E.Dom._hasClass(x,Y)){E.Dom.setAttribute(x,F,A(y+B+Y));G=true;}}else{}return G;},removeClass:function(Y,G){return E.Dom.batch(Y,E.Dom._removeClass,G);},_removeClass:function(y,x){var Y=false,AA,z,G;if(y&&x){AA=E.Dom._getAttribute(y,F)||J;E.Dom.setAttribute(y,F,AA.replace(E.Dom._getClassRegex(x),J));z=E.Dom._getAttribute(y,F);if(AA!==z){E.Dom.setAttribute(y,F,A(z));Y=true;if(E.Dom._getAttribute(y,F)===""){G=(y.hasAttribute&&y.hasAttribute(g))?g:F;
	y.removeAttribute(G);}}}else{}return Y;},replaceClass:function(x,Y,G){return E.Dom.batch(x,E.Dom._replaceClass,{from:Y,to:G});},_replaceClass:function(y,x){var Y,AB,AA,G=false,z;if(y&&x){AB=x.from;AA=x.to;if(!AA){G=false;}else{if(!AB){G=E.Dom._addClass(y,x.to);}else{if(AB!==AA){z=E.Dom._getAttribute(y,F)||J;Y=(B+z.replace(E.Dom._getClassRegex(AB),B+AA)).split(E.Dom._getClassRegex(AA));Y.splice(1,0,B+AA);E.Dom.setAttribute(y,F,A(Y.join(J)));G=true;}}}}else{}return G;},generateId:function(G,x){x=x||"yui-gen";var Y=function(y){if(y&&y.id){return y.id;}var z=x+YAHOO.env._id_counter++;if(y){if(y[e]&&y[e].getElementById(z)){return E.Dom.generateId(y,z+x);}y.id=z;}return z;};return E.Dom.batch(G,Y,E.Dom,true)||Y.apply(E.Dom,arguments);},isAncestor:function(Y,x){Y=E.Dom.get(Y);x=E.Dom.get(x);var G=false;if((Y&&x)&&(Y[l]&&x[l])){if(Y.contains&&Y!==x){G=Y.contains(x);}else{if(Y.compareDocumentPosition){G=!!(Y.compareDocumentPosition(x)&16);}}}else{}return G;},inDocument:function(G,Y){return E.Dom._inDoc(E.Dom.get(G),Y);},_inDoc:function(Y,x){var G=false;if(Y&&Y[C]){x=x||Y[e];G=E.Dom.isAncestor(x[v],Y);}else{}return G;},getElementsBy:function(Y,AF,AB,AD,y,AC,AE){AF=AF||"*";AB=(AB)?E.Dom.get(AB):null||K;if(!AB){return[];}var x=[],G=AB.getElementsByTagName(AF);for(var z=0,AA=G.length;z<AA;++z){if(Y(G[z])){if(AE){x=G[z];break;}else{x[x.length]=G[z];}}}if(AD){E.Dom.batch(x,AD,y,AC);}return x;},getElementBy:function(x,G,Y){return E.Dom.getElementsBy(x,G,Y,null,null,null,true);},batch:function(x,AB,AA,z){var y=[],Y=(z)?AA:window;x=(x&&(x[C]||x.item))?x:E.Dom.get(x);if(x&&AB){if(x[C]||x.length===undefined){return AB.call(Y,x,AA);}for(var G=0;G<x.length;++G){y[y.length]=AB.call(Y,x[G],AA);}}else{return false;}return y;},getDocumentHeight:function(){var Y=(K[t]!=M||I)?K.body.scrollHeight:W.scrollHeight,G=Math.max(Y,E.Dom.getViewportHeight());return G;},getDocumentWidth:function(){var Y=(K[t]!=M||I)?K.body.scrollWidth:W.scrollWidth,G=Math.max(Y,E.Dom.getViewportWidth());return G;},getViewportHeight:function(){var G=self.innerHeight,Y=K[t];if((Y||T)&&!D){G=(Y==M)?W.clientHeight:K.body.clientHeight;}return G;},getViewportWidth:function(){var G=self.innerWidth,Y=K[t];if(Y||T){G=(Y==M)?W.clientWidth:K.body.clientWidth;}return G;},getAncestorBy:function(G,Y){while((G=G[Z])){if(E.Dom._testElement(G,Y)){return G;}}return null;},getAncestorByClassName:function(Y,G){Y=E.Dom.get(Y);if(!Y){return null;}var x=function(y){return E.Dom.hasClass(y,G);};return E.Dom.getAncestorBy(Y,x);},getAncestorByTagName:function(Y,G){Y=E.Dom.get(Y);if(!Y){return null;}var x=function(y){return y[C]&&y[C].toUpperCase()==G.toUpperCase();};return E.Dom.getAncestorBy(Y,x);},getPreviousSiblingBy:function(G,Y){while(G){G=G.previousSibling;if(E.Dom._testElement(G,Y)){return G;}}return null;},getPreviousSibling:function(G){G=E.Dom.get(G);if(!G){return null;}return E.Dom.getPreviousSiblingBy(G);},getNextSiblingBy:function(G,Y){while(G){G=G.nextSibling;if(E.Dom._testElement(G,Y)){return G;}}return null;},getNextSibling:function(G){G=E.Dom.get(G);if(!G){return null;}return E.Dom.getNextSiblingBy(G);},getFirstChildBy:function(G,x){var Y=(E.Dom._testElement(G.firstChild,x))?G.firstChild:null;return Y||E.Dom.getNextSiblingBy(G.firstChild,x);},getFirstChild:function(G,Y){G=E.Dom.get(G);if(!G){return null;}return E.Dom.getFirstChildBy(G);},getLastChildBy:function(G,x){if(!G){return null;}var Y=(E.Dom._testElement(G.lastChild,x))?G.lastChild:null;return Y||E.Dom.getPreviousSiblingBy(G.lastChild,x);},getLastChild:function(G){G=E.Dom.get(G);return E.Dom.getLastChildBy(G);},getChildrenBy:function(Y,y){var x=E.Dom.getFirstChildBy(Y,y),G=x?[x]:[];E.Dom.getNextSiblingBy(x,function(z){if(!y||y(z)){G[G.length]=z;}return false;});return G;},getChildren:function(G){G=E.Dom.get(G);if(!G){}return E.Dom.getChildrenBy(G);},getDocumentScrollLeft:function(G){G=G||K;return Math.max(G[v].scrollLeft,G.body.scrollLeft);},getDocumentScrollTop:function(G){G=G||K;return Math.max(G[v].scrollTop,G.body.scrollTop);},insertBefore:function(Y,G){Y=E.Dom.get(Y);G=E.Dom.get(G);if(!Y||!G||!G[Z]){return null;}return G[Z].insertBefore(Y,G);},insertAfter:function(Y,G){Y=E.Dom.get(Y);G=E.Dom.get(G);if(!Y||!G||!G[Z]){return null;}if(G.nextSibling){return G[Z].insertBefore(Y,G.nextSibling);}else{return G[Z].appendChild(Y);}},getClientRegion:function(){var x=E.Dom.getDocumentScrollTop(),Y=E.Dom.getDocumentScrollLeft(),y=E.Dom.getViewportWidth()+Y,G=E.Dom.getViewportHeight()+x;return new E.Region(x,y,G,Y);},setAttribute:function(Y,G,x){E.Dom.batch(Y,E.Dom._setAttribute,{attr:G,val:x});},_setAttribute:function(x,Y){var G=E.Dom._toCamel(Y.attr),y=Y.val;if(x&&x.setAttribute){if(E.Dom.DOT_ATTRIBUTES[G]){x[G]=y;}else{G=E.Dom.CUSTOM_ATTRIBUTES[G]||G;x.setAttribute(G,y);}}else{}},getAttribute:function(Y,G){return E.Dom.batch(Y,E.Dom._getAttribute,G);},_getAttribute:function(Y,G){var x;G=E.Dom.CUSTOM_ATTRIBUTES[G]||G;if(Y&&Y.getAttribute){x=Y.getAttribute(G,2);}else{}return x;},_toCamel:function(Y){var x=d;function G(y,z){return z.toUpperCase();}return x[Y]||(x[Y]=Y.indexOf("-")===-1?Y:Y.replace(/-([a-z])/gi,G));},_getClassRegex:function(Y){var G;if(Y!==undefined){if(Y.exec){G=Y;}else{G=h[Y];if(!G){Y=Y.replace(E.Dom._patterns.CLASS_RE_TOKENS,"\\$1");G=h[Y]=new RegExp(s+Y+k,U);}}}return G;},_patterns:{ROOT_TAG:/^body|html$/i,CLASS_RE_TOKENS:/([\.\(\)\^\$\*\+\?\|\[\]\{\}\\])/g},_testElement:function(G,Y){return G&&G[l]==1&&(!Y||Y(G));},_calcBorders:function(x,y){var Y=parseInt(E.Dom[w](x,R),10)||0,G=parseInt(E.Dom[w](x,q),10)||0;if(H){if(N.test(x[C])){Y=0;G=0;}}y[0]+=G;y[1]+=Y;return y;}};var S=E.Dom[w];if(m.opera){E.Dom[w]=function(Y,G){var x=S(Y,G);if(X.test(G)){x=E.Dom.Color.toRGB(x);}return x;};}if(m.webkit){E.Dom[w]=function(Y,G){var x=S(Y,G);if(x==="rgba(0, 0, 0, 0)"){x="transparent";}return x;};}if(m.ie&&m.ie>=8&&K.documentElement.hasAttribute){E.Dom.DOT_ATTRIBUTES.type=true;}})();YAHOO.util.Region=function(C,D,A,B){this.top=C;this.y=C;this[1]=C;this.right=D;this.bottom=A;this.left=B;this.x=B;this[0]=B;
	this.width=this.right-this.left;this.height=this.bottom-this.top;};YAHOO.util.Region.prototype.contains=function(A){return(A.left>=this.left&&A.right<=this.right&&A.top>=this.top&&A.bottom<=this.bottom);};YAHOO.util.Region.prototype.getArea=function(){return((this.bottom-this.top)*(this.right-this.left));};YAHOO.util.Region.prototype.intersect=function(E){var C=Math.max(this.top,E.top),D=Math.min(this.right,E.right),A=Math.min(this.bottom,E.bottom),B=Math.max(this.left,E.left);if(A>=C&&D>=B){return new YAHOO.util.Region(C,D,A,B);}else{return null;}};YAHOO.util.Region.prototype.union=function(E){var C=Math.min(this.top,E.top),D=Math.max(this.right,E.right),A=Math.max(this.bottom,E.bottom),B=Math.min(this.left,E.left);return new YAHOO.util.Region(C,D,A,B);};YAHOO.util.Region.prototype.toString=function(){return("Region {"+"top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+", height: "+this.height+", width: "+this.width+"}");};YAHOO.util.Region.getRegion=function(D){var F=YAHOO.util.Dom.getXY(D),C=F[1],E=F[0]+D.offsetWidth,A=F[1]+D.offsetHeight,B=F[0];return new YAHOO.util.Region(C,E,A,B);};YAHOO.util.Point=function(A,B){if(YAHOO.lang.isArray(A)){B=A[1];A=A[0];}YAHOO.util.Point.superclass.constructor.call(this,B,A,B,A);};YAHOO.extend(YAHOO.util.Point,YAHOO.util.Region);(function(){var B=YAHOO.util,A="clientTop",F="clientLeft",J="parentNode",K="right",W="hasLayout",I="px",U="opacity",L="auto",D="borderLeftWidth",G="borderTopWidth",P="borderRightWidth",V="borderBottomWidth",S="visible",Q="transparent",N="height",E="width",H="style",T="currentStyle",R=/^width|height$/,O=/^(\d[.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz|%){1}?/i,M={get:function(X,Z){var Y="",a=X[T][Z];if(Z===U){Y=B.Dom.getStyle(X,U);}else{if(!a||(a.indexOf&&a.indexOf(I)>-1)){Y=a;}else{if(B.Dom.IE_COMPUTED[Z]){Y=B.Dom.IE_COMPUTED[Z](X,Z);}else{if(O.test(a)){Y=B.Dom.IE.ComputedStyle.getPixel(X,Z);}else{Y=a;}}}}return Y;},getOffset:function(Z,e){var b=Z[T][e],X=e.charAt(0).toUpperCase()+e.substr(1),c="offset"+X,Y="pixel"+X,a="",d;if(b==L){d=Z[c];if(d===undefined){a=0;}a=d;if(R.test(e)){Z[H][e]=d;if(Z[c]>d){a=d-(Z[c]-d);}Z[H][e]=L;}}else{if(!Z[H][Y]&&!Z[H][e]){Z[H][e]=b;}a=Z[H][Y];}return a+I;},getBorderWidth:function(X,Z){var Y=null;if(!X[T][W]){X[H].zoom=1;}switch(Z){case G:Y=X[A];break;case V:Y=X.offsetHeight-X.clientHeight-X[A];break;case D:Y=X[F];break;case P:Y=X.offsetWidth-X.clientWidth-X[F];break;}return Y+I;},getPixel:function(Y,X){var a=null,b=Y[T][K],Z=Y[T][X];Y[H][K]=Z;a=Y[H].pixelRight;Y[H][K]=b;return a+I;},getMargin:function(Y,X){var Z;if(Y[T][X]==L){Z=0+I;}else{Z=B.Dom.IE.ComputedStyle.getPixel(Y,X);}return Z;},getVisibility:function(Y,X){var Z;while((Z=Y[T])&&Z[X]=="inherit"){Y=Y[J];}return(Z)?Z[X]:S;},getColor:function(Y,X){return B.Dom.Color.toRGB(Y[T][X])||Q;},getBorderColor:function(Y,X){var Z=Y[T],a=Z[X]||Z.color;return B.Dom.Color.toRGB(B.Dom.Color.toHex(a));}},C={};C.top=C.right=C.bottom=C.left=C[E]=C[N]=M.getOffset;C.color=M.getColor;C[G]=C[P]=C[V]=C[D]=M.getBorderWidth;C.marginTop=C.marginRight=C.marginBottom=C.marginLeft=M.getMargin;C.visibility=M.getVisibility;C.borderColor=C.borderTopColor=C.borderRightColor=C.borderBottomColor=C.borderLeftColor=M.getBorderColor;B.Dom.IE_COMPUTED=C;B.Dom.IE_ComputedStyle=M;})();(function(){var C="toString",A=parseInt,B=RegExp,D=YAHOO.util;D.Dom.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(E){if(!D.Dom.Color.re_RGB.test(E)){E=D.Dom.Color.toHex(E);}if(D.Dom.Color.re_hex.exec(E)){E="rgb("+[A(B.$1,16),A(B.$2,16),A(B.$3,16)].join(", ")+")";}return E;},toHex:function(H){H=D.Dom.Color.KEYWORDS[H]||H;if(D.Dom.Color.re_RGB.exec(H)){var G=(B.$1.length===1)?"0"+B.$1:Number(B.$1),F=(B.$2.length===1)?"0"+B.$2:Number(B.$2),E=(B.$3.length===1)?"0"+B.$3:Number(B.$3);H=[G[C](16),F[C](16),E[C](16)].join("");}if(H.length<6){H=H.replace(D.Dom.Color.re_hex3,"$1$1");}if(H!=="transparent"&&H.indexOf("#")<0){H="#"+H;}return H.toLowerCase();}};}());YAHOO.register("dom",YAHOO.util.Dom,{version:"2.8.2r1",build:"7"});YAHOO.util.CustomEvent=function(D,C,B,A,E){this.type=D;this.scope=C||window;this.silent=B;this.fireOnce=E;this.fired=false;this.firedWith=null;this.signature=A||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(!this.silent){}var F="_YUICEOnSubscribe";if(D!==F){this.subscribeEvent=new YAHOO.util.CustomEvent(F,this,true);}this.lastError=null;};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;YAHOO.util.CustomEvent.prototype={subscribe:function(B,C,D){if(!B){throw new Error("Invalid callback for subscriber to '"+this.type+"'");}if(this.subscribeEvent){this.subscribeEvent.fire(B,C,D);}var A=new YAHOO.util.Subscriber(B,C,D);if(this.fireOnce&&this.fired){this.notify(A,this.firedWith);}else{this.subscribers.push(A);}},unsubscribe:function(D,F){if(!D){return this.unsubscribeAll();}var E=false;for(var B=0,A=this.subscribers.length;B<A;++B){var C=this.subscribers[B];if(C&&C.contains(D,F)){this._delete(B);E=true;}}return E;},fire:function(){this.lastError=null;var H=[],A=this.subscribers.length;var D=[].slice.call(arguments,0),C=true,F,B=false;if(this.fireOnce){if(this.fired){return true;}else{this.firedWith=D;}}this.fired=true;if(!A&&this.silent){return true;}if(!this.silent){}var E=this.subscribers.slice();for(F=0;F<A;++F){var G=E[F];if(!G){B=true;}else{C=this.notify(G,D);if(false===C){if(!this.silent){}break;}}}return(C!==false);},notify:function(F,C){var B,H=null,E=F.getScope(this.scope),A=YAHOO.util.Event.throwErrors;if(!this.silent){}if(this.signature==YAHOO.util.CustomEvent.FLAT){if(C.length>0){H=C[0];}try{B=F.fn.call(E,H,F.obj);}catch(G){this.lastError=G;if(A){throw G;}}}else{try{B=F.fn.call(E,this.type,C,F.obj);}catch(D){this.lastError=D;if(A){throw D;}}}return B;},unsubscribeAll:function(){var A=this.subscribers.length,B;for(B=A-1;B>-1;B--){this._delete(B);}this.subscribers=[];return A;},_delete:function(A){var B=this.subscribers[A];if(B){delete B.fn;delete B.obj;}this.subscribers.splice(A,1);},toString:function(){return"CustomEvent: "+"'"+this.type+"', "+"context: "+this.scope;}};YAHOO.util.Subscriber=function(A,B,C){this.fn=A;this.obj=YAHOO.lang.isUndefined(B)?null:B;this.overrideContext=C;};YAHOO.util.Subscriber.prototype.getScope=function(A){if(this.overrideContext){if(this.overrideContext===true){return this.obj;}else{return this.overrideContext;}}return A;};YAHOO.util.Subscriber.prototype.contains=function(A,B){if(B){return(this.fn==A&&this.obj==B);}else{return(this.fn==A);}};YAHOO.util.Subscriber.prototype.toString=function(){return"Subscriber { obj: "+this.obj+", overrideContext: "+(this.overrideContext||"no")+" }";};if(!YAHOO.util.Event){YAHOO.util.Event=function(){var G=false,H=[],J=[],A=0,E=[],B=0,C={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9},D=YAHOO.env.ua.ie,F="focusin",I="focusout";return{POLL_RETRYS:500,POLL_INTERVAL:40,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,CAPTURE:7,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:D,_interval:null,_dri:null,_specialTypes:{focusin:(D?"focusin":"focus"),focusout:(D?"focusout":"blur")},DOMReady:false,throwErrors:false,startInterval:function(){if(!this._interval){this._interval=YAHOO.lang.later(this.POLL_INTERVAL,this,this._tryPreloadAttach,null,true);}},onAvailable:function(Q,M,O,P,N){var K=(YAHOO.lang.isString(Q))?[Q]:Q;for(var L=0;L<K.length;L=L+1){E.push({id:K[L],fn:M,obj:O,overrideContext:P,checkReady:N});}A=this.POLL_RETRYS;this.startInterval();},onContentReady:function(N,K,L,M){this.onAvailable(N,K,L,M,true);},onDOMReady:function(){this.DOMReadyEvent.subscribe.apply(this.DOMReadyEvent,arguments);},_addListener:function(M,K,V,P,T,Y){if(!V||!V.call){return false;}if(this._isValidCollection(M)){var W=true;for(var Q=0,S=M.length;Q<S;++Q){W=this.on(M[Q],K,V,P,T)&&W;}return W;}else{if(YAHOO.lang.isString(M)){var O=this.getEl(M);if(O){M=O;}else{this.onAvailable(M,function(){YAHOO.util.Event._addListener(M,K,V,P,T,Y);});return true;}}}if(!M){return false;}if("unload"==K&&P!==this){J[J.length]=[M,K,V,P,T];return true;}var L=M;if(T){if(T===true){L=P;}else{L=T;}}var N=function(Z){return V.call(L,YAHOO.util.Event.getEvent(Z,M),P);};var X=[M,K,V,N,L,P,T,Y];var R=H.length;H[R]=X;try{this._simpleAdd(M,K,N,Y);}catch(U){this.lastError=U;this.removeListener(M,K,V);return false;}return true;},_getType:function(K){return this._specialTypes[K]||K;},addListener:function(M,P,L,N,O){var K=((P==F||P==I)&&!YAHOO.env.ua.ie)?true:false;return this._addListener(M,this._getType(P),L,N,O,K);},addFocusListener:function(L,K,M,N){return this.on(L,F,K,M,N);},removeFocusListener:function(L,K){return this.removeListener(L,F,K);},addBlurListener:function(L,K,M,N){return this.on(L,I,K,M,N);},removeBlurListener:function(L,K){return this.removeListener(L,I,K);},removeListener:function(L,K,R){var M,P,U;K=this._getType(K);if(typeof L=="string"){L=this.getEl(L);}else{if(this._isValidCollection(L)){var S=true;for(M=L.length-1;M>-1;M--){S=(this.removeListener(L[M],K,R)&&S);}return S;}}if(!R||!R.call){return this.purgeElement(L,false,K);}if("unload"==K){for(M=J.length-1;M>-1;M--){U=J[M];if(U&&U[0]==L&&U[1]==K&&U[2]==R){J.splice(M,1);return true;}}return false;}var N=null;var O=arguments[3];if("undefined"===typeof O){O=this._getCacheIndex(H,L,K,R);}if(O>=0){N=H[O];}if(!L||!N){return false;}var T=N[this.CAPTURE]===true?true:false;try{this._simpleRemove(L,K,N[this.WFN],T);}catch(Q){this.lastError=Q;return false;}delete H[O][this.WFN];delete H[O][this.FN];H.splice(O,1);return true;},getTarget:function(M,L){var K=M.target||M.srcElement;return this.resolveTextNode(K);},resolveTextNode:function(L){try{if(L&&3==L.nodeType){return L.parentNode;}}catch(K){}return L;},getPageX:function(L){var K=L.pageX;if(!K&&0!==K){K=L.clientX||0;if(this.isIE){K+=this._getScrollLeft();}}return K;},getPageY:function(K){var L=K.pageY;if(!L&&0!==L){L=K.clientY||0;if(this.isIE){L+=this._getScrollTop();}}return L;},getXY:function(K){return[this.getPageX(K),this.getPageY(K)];},getRelatedTarget:function(L){var K=L.relatedTarget;if(!K){if(L.type=="mouseout"){K=L.toElement;
}else{if(L.type=="mouseover"){K=L.fromElement;}}}return this.resolveTextNode(K);},getTime:function(M){if(!M.time){var L=new Date().getTime();try{M.time=L;}catch(K){this.lastError=K;return L;}}return M.time;},stopEvent:function(K){this.stopPropagation(K);this.preventDefault(K);},stopPropagation:function(K){if(K.stopPropagation){K.stopPropagation();}else{K.cancelBubble=true;}},preventDefault:function(K){if(K.preventDefault){K.preventDefault();}else{K.returnValue=false;}},getEvent:function(M,K){var L=M||window.event;if(!L){var N=this.getEvent.caller;while(N){L=N.arguments[0];if(L&&Event==L.constructor){break;}N=N.caller;}}return L;},getCharCode:function(L){var K=L.keyCode||L.charCode||0;if(YAHOO.env.ua.webkit&&(K in C)){K=C[K];}return K;},_getCacheIndex:function(M,P,Q,O){for(var N=0,L=M.length;N<L;N=N+1){var K=M[N];if(K&&K[this.FN]==O&&K[this.EL]==P&&K[this.TYPE]==Q){return N;}}return -1;},generateId:function(K){var L=K.id;if(!L){L="yuievtautoid-"+B;++B;K.id=L;}return L;},_isValidCollection:function(L){try{return(L&&typeof L!=="string"&&L.length&&!L.tagName&&!L.alert&&typeof L[0]!=="undefined");}catch(K){return false;}},elCache:{},getEl:function(K){return(typeof K==="string")?document.getElementById(K):K;},clearCache:function(){},DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",YAHOO,0,0,1),_load:function(L){if(!G){G=true;var K=YAHOO.util.Event;K._ready();K._tryPreloadAttach();}},_ready:function(L){var K=YAHOO.util.Event;if(!K.DOMReady){K.DOMReady=true;K.DOMReadyEvent.fire();K._simpleRemove(document,"DOMContentLoaded",K._ready);}},_tryPreloadAttach:function(){if(E.length===0){A=0;if(this._interval){this._interval.cancel();this._interval=null;}return;}if(this.locked){return;}if(this.isIE){if(!this.DOMReady){this.startInterval();return;}}this.locked=true;var Q=!G;if(!Q){Q=(A>0&&E.length>0);}var P=[];var R=function(T,U){var S=T;if(U.overrideContext){if(U.overrideContext===true){S=U.obj;}else{S=U.overrideContext;}}U.fn.call(S,U.obj);};var L,K,O,N,M=[];for(L=0,K=E.length;L<K;L=L+1){O=E[L];if(O){N=this.getEl(O.id);if(N){if(O.checkReady){if(G||N.nextSibling||!Q){M.push(O);E[L]=null;}}else{R(N,O);E[L]=null;}}else{P.push(O);}}}for(L=0,K=M.length;L<K;L=L+1){O=M[L];R(this.getEl(O.id),O);}A--;if(Q){for(L=E.length-1;L>-1;L--){O=E[L];if(!O||!O.id){E.splice(L,1);}}this.startInterval();}else{if(this._interval){this._interval.cancel();this._interval=null;}}this.locked=false;},purgeElement:function(O,P,R){var M=(YAHOO.lang.isString(O))?this.getEl(O):O;var Q=this.getListeners(M,R),N,K;if(Q){for(N=Q.length-1;N>-1;N--){var L=Q[N];this.removeListener(M,L.type,L.fn);}}if(P&&M&&M.childNodes){for(N=0,K=M.childNodes.length;N<K;++N){this.purgeElement(M.childNodes[N],P,R);}}},getListeners:function(M,K){var P=[],L;if(!K){L=[H,J];}else{if(K==="unload"){L=[J];}else{K=this._getType(K);L=[H];}}var R=(YAHOO.lang.isString(M))?this.getEl(M):M;for(var O=0;O<L.length;O=O+1){var T=L[O];if(T){for(var Q=0,S=T.length;Q<S;++Q){var N=T[Q];if(N&&N[this.EL]===R&&(!K||K===N[this.TYPE])){P.push({type:N[this.TYPE],fn:N[this.FN],obj:N[this.OBJ],adjust:N[this.OVERRIDE],scope:N[this.ADJ_SCOPE],index:Q});}}}}return(P.length)?P:null;},_unload:function(R){var L=YAHOO.util.Event,O,N,M,Q,P,S=J.slice(),K;for(O=0,Q=J.length;O<Q;++O){M=S[O];if(M){K=window;if(M[L.ADJ_SCOPE]){if(M[L.ADJ_SCOPE]===true){K=M[L.UNLOAD_OBJ];}else{K=M[L.ADJ_SCOPE];}}M[L.FN].call(K,L.getEvent(R,M[L.EL]),M[L.UNLOAD_OBJ]);S[O]=null;}}M=null;K=null;J=null;if(H){for(N=H.length-1;N>-1;N--){M=H[N];if(M){L.removeListener(M[L.EL],M[L.TYPE],M[L.FN],N);}}M=null;}L._simpleRemove(window,"unload",L._unload);},_getScrollLeft:function(){return this._getScroll()[1];},_getScrollTop:function(){return this._getScroll()[0];},_getScroll:function(){var K=document.documentElement,L=document.body;if(K&&(K.scrollTop||K.scrollLeft)){return[K.scrollTop,K.scrollLeft];}else{if(L){return[L.scrollTop,L.scrollLeft];}else{return[0,0];}}},regCE:function(){},_simpleAdd:function(){if(window.addEventListener){return function(M,N,L,K){M.addEventListener(N,L,(K));};}else{if(window.attachEvent){return function(M,N,L,K){M.attachEvent("on"+N,L);};}else{return function(){};}}}(),_simpleRemove:function(){if(window.removeEventListener){return function(M,N,L,K){M.removeEventListener(N,L,(K));};}else{if(window.detachEvent){return function(L,M,K){L.detachEvent("on"+M,K);};}else{return function(){};}}}()};}();(function(){var EU=YAHOO.util.Event;EU.on=EU.addListener;EU.onFocus=EU.addFocusListener;EU.onBlur=EU.addBlurListener;
	/* DOMReady: based on work by: Dean Edwards/John Resig/Matthias Miller/Diego Perini */
	if(EU.isIE){if(self!==self.top){document.onreadystatechange=function(){if(document.readyState=="complete"){document.onreadystatechange=null;EU._ready();}};}else{YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var n=document.createElement("p");EU._dri=setInterval(function(){try{n.doScroll("left");clearInterval(EU._dri);EU._dri=null;EU._ready();n=null;}catch(ex){}},EU.POLL_INTERVAL);}}else{if(EU.webkit&&EU.webkit<525){EU._dri=setInterval(function(){var rs=document.readyState;if("loaded"==rs||"complete"==rs){clearInterval(EU._dri);EU._dri=null;EU._ready();}},EU.POLL_INTERVAL);}else{EU._simpleAdd(document,"DOMContentLoaded",EU._ready);}}EU._simpleAdd(window,"load",EU._load);EU._simpleAdd(window,"unload",EU._unload);EU._tryPreloadAttach();})();}YAHOO.util.EventProvider=function(){};YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(A,C,F,E){this.__yui_events=this.__yui_events||{};var D=this.__yui_events[A];if(D){D.subscribe(C,F,E);}else{this.__yui_subscribers=this.__yui_subscribers||{};var B=this.__yui_subscribers;if(!B[A]){B[A]=[];}B[A].push({fn:C,obj:F,overrideContext:E});}},unsubscribe:function(C,E,G){this.__yui_events=this.__yui_events||{};var A=this.__yui_events;if(C){var F=A[C];if(F){return F.unsubscribe(E,G);}}else{var B=true;for(var D in A){if(YAHOO.lang.hasOwnProperty(A,D)){B=B&&A[D].unsubscribe(E,G);}}return B;}return false;},unsubscribeAll:function(A){return this.unsubscribe(A);
},createEvent:function(B,G){this.__yui_events=this.__yui_events||{};var E=G||{},D=this.__yui_events,F;if(D[B]){}else{F=new YAHOO.util.CustomEvent(B,E.scope||this,E.silent,YAHOO.util.CustomEvent.FLAT,E.fireOnce);D[B]=F;if(E.onSubscribeCallback){F.subscribeEvent.subscribe(E.onSubscribeCallback);}this.__yui_subscribers=this.__yui_subscribers||{};var A=this.__yui_subscribers[B];if(A){for(var C=0;C<A.length;++C){F.subscribe(A[C].fn,A[C].obj,A[C].overrideContext);}}}return D[B];},fireEvent:function(B){this.__yui_events=this.__yui_events||{};var D=this.__yui_events[B];if(!D){return null;}var A=[];for(var C=1;C<arguments.length;++C){A.push(arguments[C]);}return D.fire.apply(D,A);},hasEvent:function(A){if(this.__yui_events){if(this.__yui_events[A]){return true;}}return false;}};(function(){var A=YAHOO.util.Event,C=YAHOO.lang;YAHOO.util.KeyListener=function(D,I,E,F){if(!D){}else{if(!I){}else{if(!E){}}}if(!F){F=YAHOO.util.KeyListener.KEYDOWN;}var G=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(C.isString(D)){D=document.getElementById(D);}if(C.isFunction(E)){G.subscribe(E);}else{G.subscribe(E.fn,E.scope,E.correctScope);}function H(O,N){if(!I.shift){I.shift=false;}if(!I.alt){I.alt=false;}if(!I.ctrl){I.ctrl=false;}if(O.shiftKey==I.shift&&O.altKey==I.alt&&O.ctrlKey==I.ctrl){var J,M=I.keys,L;if(YAHOO.lang.isArray(M)){for(var K=0;K<M.length;K++){J=M[K];L=A.getCharCode(O);if(J==L){G.fire(L,O);break;}}}else{L=A.getCharCode(O);if(M==L){G.fire(L,O);}}}}this.enable=function(){if(!this.enabled){A.on(D,F,H);this.enabledEvent.fire(I);}this.enabled=true;};this.disable=function(){if(this.enabled){A.removeListener(D,F,H);this.disabledEvent.fire(I);}this.enabled=false;};this.toString=function(){return"KeyListener ["+I.keys+"] "+D.tagName+(D.id?"["+D.id+"]":"");};};var B=YAHOO.util.KeyListener;B.KEYDOWN="keydown";B.KEYUP="keyup";B.KEY={ALT:18,BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38};})();YAHOO.register("event",YAHOO.util.Event,{version:"2.8.2r1",build:"7"});YAHOO.register("yuiloader-dom-event", YAHOO, {version: "2.8.2r1", build: "7"});
			/* /yuiloader_dom_event.js */
			/* yui_selector.js */
var Y=YAHOO,Y_DOM=YAHOO.util.Dom,EMPTY_ARRAY=[],Y_UA=Y.env.ua,Y_Lang=Y.lang,Y_DOC=document,Y_DOCUMENT_ELEMENT=Y_DOC.documentElement,Y_DOM_inDoc=Y_DOM.inDocument,Y_mix=Y_Lang.augmentObject,Y_guid=Y_DOM.generateId,Y_getDoc=function(element){var doc=Y_DOC;if(element){doc=(element.nodeType===9)?element:element.ownerDocument||element.document||Y_DOC;}return doc;},Y_Array=function(o,startIdx){var l,a,start=startIdx||0;try{return Array.prototype.slice.call(o,start);}catch(e){a=[];l=o.length;for(;start<l;start++){a.push(o[start]);}return a;}},Y_DOM_allById=function(id,root){root=root||Y_DOC;var nodes=[],ret=[],i,node;if(root.querySelectorAll){ret=root.querySelectorAll('[id="'+id+'"]');}else{if(root.all){nodes=root.all(id);if(nodes){if(nodes.nodeName){if(nodes.id===id){ret.push(nodes);nodes=EMPTY_ARRAY;}else{nodes=[nodes];}}if(nodes.length){for(i=0;node=nodes[i++];){if(node.id===id||(node.attributes&&node.attributes.id&&node.attributes.id.value===id)){ret.push(node);}}}}}else{ret=[Y_getDoc(root).getElementById(id)];}}return ret;};var COMPARE_DOCUMENT_POSITION="compareDocumentPosition",OWNER_DOCUMENT="ownerDocument",Selector={_foundCache:[],useNative:true,_compare:("sourceIndex" in Y_DOCUMENT_ELEMENT)?function(nodeA,nodeB){var a=nodeA.sourceIndex,b=nodeB.sourceIndex;if(a===b){return 0;}else{if(a>b){return 1;}}return -1;}:(Y_DOCUMENT_ELEMENT[COMPARE_DOCUMENT_POSITION]?function(nodeA,nodeB){if(nodeA[COMPARE_DOCUMENT_POSITION](nodeB)&4){return -1;}else{return 1;}}:function(nodeA,nodeB){var rangeA,rangeB,compare;if(nodeA&&nodeB){rangeA=nodeA[OWNER_DOCUMENT].createRange();rangeA.setStart(nodeA,0);rangeB=nodeB[OWNER_DOCUMENT].createRange();rangeB.setStart(nodeB,0);compare=rangeA.compareBoundaryPoints(1,rangeB);}return compare;}),_sort:function(nodes){if(nodes){nodes=Y_Array(nodes,0,true);if(nodes.sort){nodes.sort(Selector._compare);}}return nodes;},_deDupe:function(nodes){var ret=[],i,node;for(i=0;(node=nodes[i++]);){if(!node._found){ret[ret.length]=node;node._found=true;}}for(i=0;(node=ret[i++]);){node._found=null;node.removeAttribute("_found");}return ret;},query:function(selector,root,firstOnly,skipNative){if(root&&typeof root=="string"){root=Y_DOM.get(root);if(!root){return(firstOnly)?null:[];}}else{root=root||Y_DOC;}var ret=[],useNative=(Selector.useNative&&Y_DOC.querySelector&&!skipNative),queries=[[selector,root]],query,result,i,fn=(useNative)?Selector._nativeQuery:Selector._bruteQuery;if(selector&&fn){if(!skipNative&&(!useNative||root.tagName)){queries=Selector._splitQueries(selector,root);}for(i=0;(query=queries[i++]);){result=fn(query[0],query[1],firstOnly);if(!firstOnly){result=Y_Array(result,0,true);}if(result){ret=ret.concat(result);}}if(queries.length>1){ret=Selector._sort(Selector._deDupe(ret));}}return(firstOnly)?(ret[0]||null):ret;},_splitQueries:function(selector,node){var groups=selector.split(","),queries=[],prefix="",i,len;if(node){if(node.tagName){node.id=node.id||Y_guid();prefix='[id="'+node.id+'"] ';}for(i=0,len=groups.length;i<len;++i){selector=prefix+groups[i];queries.push([selector,node]);}}return queries;},_nativeQuery:function(selector,root,one){if(Y_UA.webkit&&selector.indexOf(":checked")>-1&&(Selector.pseudos&&Selector.pseudos.checked)){return Selector.query(selector,root,one,true);}try{return root["querySelector"+(one?"":"All")](selector);}catch(e){return Selector.query(selector,root,one,true);}},filter:function(nodes,selector){var ret=[],i,node;if(nodes&&selector){for(i=0;(node=nodes[i++]);){if(Selector.test(node,selector)){ret[ret.length]=node;}}}else{}return ret;},test:function(node,selector,root){var ret=false,groups=selector.split(","),useFrag=false,parent,item,items,frag,i,j,group;if(node&&node.tagName){if(!root&&!Y_DOM_inDoc(node)){parent=node.parentNode;if(parent){root=parent;}else{frag=node[OWNER_DOCUMENT].createDocumentFragment();frag.appendChild(node);root=frag;useFrag=true;}}root=root||node[OWNER_DOCUMENT];if(!node.id){node.id=Y_guid();}for(i=0;(group=groups[i++]);){group+='[id="'+node.id+'"]';items=Selector.query(group,root);for(j=0;item=items[j++];){if(item===node){ret=true;break;}}if(ret){break;}}if(useFrag){frag.removeChild(node);}}return ret;}};YAHOO.util.Selector=Selector;var PARENT_NODE="parentNode",TAG_NAME="tagName",ATTRIBUTES="attributes",COMBINATOR="combinator",PSEUDOS="pseudos",SelectorCSS2={_reRegExpTokens:/([\^\$\?\[\]\*\+\-\.\(\)\|\\])/,SORT_RESULTS:true,_children:function(node,tag){var ret=node.children,i,children=[],childNodes,child;if(node.children&&tag&&node.children.tags){children=node.children.tags(tag);}else{if((!ret&&node[TAG_NAME])||(ret&&tag)){childNodes=ret||node.childNodes;ret=[];for(i=0;(child=childNodes[i++]);){if(child.tagName){if(!tag||tag===child.tagName){ret.push(child);}}}}}return ret||[];},_re:{attr:/(\[[^\]]*\])/g,esc:/\\[:\[\]\(\)#\.\'\>+~"]/gi,pseudos:/(\([^\)]*\))/g},shorthand:{"\\#(-?[_a-z]+[-\\w\\uE000]*)":"[id=$1]","\\.(-?[_a-z]+[-\\w\\uE000]*)":"[className~=$1]"},operators:{"":function(node,attr){return !!node.getAttribute(attr);},"~=":"(?:^|\\s+){val}(?:\\s+|$)","|=":"^{val}(?:-|$)"},pseudos:{"first-child":function(node){return Selector._children(node[PARENT_NODE])[0]===node;}},_bruteQuery:function(selector,root,firstOnly){var ret=[],nodes=[],tokens=Selector._tokenize(selector),token=tokens[tokens.length-1],rootDoc=Y_getDoc(root),child,id,className,tagName;if(token){id=token.id;className=token.className;tagName=token.tagName||"*";if(root.getElementsByTagName){if(id&&(root.all||(root.nodeType===9||Y_DOM_inDoc(root)))){nodes=Y_DOM_allById(id,root);}else{if(className){nodes=root.getElementsByClassName(className);}else{nodes=root.getElementsByTagName(tagName);}}}else{child=root.firstChild;while(child){if(child.tagName){nodes.push(child);}child=child.nextSilbing||child.firstChild;}}if(nodes.length){ret=Selector._filterNodes(nodes,tokens,firstOnly);}}return ret;},_filterNodes:function(nodes,tokens,firstOnly){var i=0,j,len=tokens.length,n=len-1,result=[],node=nodes[0],tmpNode=node,getters=Selector.getters,operator,combinator,token,path,pass,value,tests,test;for(i=0;(tmpNode=node=nodes[i++]);){n=len-1;path=null;testLoop:while(tmpNode&&tmpNode.tagName){token=tokens[n];tests=token.tests;j=tests.length;if(j&&!pass){while((test=tests[--j])){operator=test[1];if(getters[test[0]]){value=getters[test[0]](tmpNode,test[0]);}else{value=tmpNode[test[0]];if(value===undefined&&tmpNode.getAttribute){value=tmpNode.getAttribute(test[0]);}}if((operator==="="&&value!==test[2])||(typeof operator!=="string"&&operator.test&&!operator.test(value))||(!operator.test&&typeof operator==="function"&&!operator(tmpNode,test[0],test[2]))){if((tmpNode=tmpNode[path])){while(tmpNode&&(!tmpNode.tagName||(token.tagName&&token.tagName!==tmpNode.tagName))){tmpNode=tmpNode[path];}}continue testLoop;}}}n--;if(!pass&&(combinator=token.combinator)){path=combinator.axis;tmpNode=tmpNode[path];while(tmpNode&&!tmpNode.tagName){tmpNode=tmpNode[path];}if(combinator.direct){path=null;}}else{result.push(node);if(firstOnly){return result;}break;}}}node=tmpNode=null;return result;},combinators:{" ":{axis:"parentNode"},">":{axis:"parentNode",direct:true},"+":{axis:"previousSibling",direct:true}},_parsers:[{name:ATTRIBUTES,re:/^\uE003(-?[a-z]+[\w\-]*)+([~\|\^\$\*!=]=?)?['"]?([^\uE004'"]*)['"]?\uE004/i,fn:function(match,token){var operator=match[2]||"",operators=Selector.operators,escVal=(match[3])?match[3].replace(/\\/g,""):"",test;if((match[1]==="id"&&operator==="=")||(match[1]==="className"&&Y_DOCUMENT_ELEMENT.getElementsByClassName&&(operator==="~="||operator==="="))){token.prefilter=match[1];match[3]=escVal;token[match[1]]=(match[1]==="id")?match[3]:escVal;}if(operator in operators){test=operators[operator];if(typeof test==="string"){match[3]=escVal.replace(Selector._reRegExpTokens,"\\$1");test=new RegExp(test.replace("{val}",match[3]));}match[2]=test;}if(!token.last||token.prefilter!==match[1]){return match.slice(1);}}},{name:TAG_NAME,re:/^((?:-?[_a-z]+[\w-]*)|\*)/i,fn:function(match,token){var tag=match[1].toUpperCase();token.tagName=tag;if(tag!=="*"&&(!token.last||token.prefilter)){return[TAG_NAME,"=",tag];}if(!token.prefilter){token.prefilter="tagName";}}},{name:COMBINATOR,re:/^\s*([>+~]|\s)\s*/,fn:function(match,token){}},{name:PSEUDOS,re:/^:([\-\w]+)(?:\uE005['"]?([^\uE005]*)['"]?\uE006)*/i,fn:function(match,token){var test=Selector[PSEUDOS][match[1]];if(test){if(match[2]){match[2]=match[2].replace(/\\/g,"");}return[match[2],test];}else{return false;}}}],_getToken:function(token){return{tagName:null,id:null,className:null,attributes:{},combinator:null,tests:[]};},_tokenize:function(selector){selector=selector||"";selector=Selector._replaceShorthand(Y_Lang.trim(selector));var token=Selector._getToken(),query=selector,tokens=[],found=false,match,test,i,parser;outer:do{found=false;for(i=0;(parser=Selector._parsers[i++]);){if((match=parser.re.exec(selector))){if(parser.name!==COMBINATOR){token.selector=selector;}selector=selector.replace(match[0],"");if(!selector.length){token.last=true;}if(Selector._attrFilters[match[1]]){match[1]=Selector._attrFilters[match[1]];}test=parser.fn(match,token);if(test===false){found=false;break outer;}else{if(test){token.tests.push(test);}}if(!selector.length||parser.name===COMBINATOR){tokens.push(token);token=Selector._getToken(token);if(parser.name===COMBINATOR){token.combinator=Selector.combinators[match[1]];}}found=true;}}}while(found&&selector.length);if(!found||selector.length){tokens=[];}return tokens;},_replaceShorthand:function(selector){var shorthand=Selector.shorthand,esc=selector.match(Selector._re.esc),attrs,pseudos,re,i,len;if(esc){selector=selector.replace(Selector._re.esc,"\uE000");}attrs=selector.match(Selector._re.attr);pseudos=selector.match(Selector._re.pseudos);if(attrs){selector=selector.replace(Selector._re.attr,"\uE001");}if(pseudos){selector=selector.replace(Selector._re.pseudos,"\uE002");}for(re in shorthand){if(shorthand.hasOwnProperty(re)){selector=selector.replace(new RegExp(re,"gi"),shorthand[re]);}}if(attrs){for(i=0,len=attrs.length;i<len;++i){selector=selector.replace(/\uE001/,attrs[i]);}}if(pseudos){for(i=0,len=pseudos.length;i<len;++i){selector=selector.replace(/\uE002/,pseudos[i]);}}selector=selector.replace(/\[/g,"\uE003");selector=selector.replace(/\]/g,"\uE004");selector=selector.replace(/\(/g,"\uE005");selector=selector.replace(/\)/g,"\uE006");if(esc){for(i=0,len=esc.length;i<len;++i){selector=selector.replace("\uE000",esc[i]);}}return selector;},_attrFilters:{"class":"className","for":"htmlFor"},getters:{href:function(node,attr){return Y_DOM.getAttribute(node,attr);}}};Y_mix(Selector,SelectorCSS2,true);Selector.getters.src=Selector.getters.rel=Selector.getters.href;if(Selector.useNative&&Y_DOC.querySelector){Selector.shorthand["\\.([^\\s\\\\(\\[:]*)"]="[class~=$1]";}Selector._reNth=/^(?:([\-]?\d*)(n){1}|(odd|even)$)*([\-+]?\d*)$/;Selector._getNth=function(node,expr,tag,reverse){Selector._reNth.test(expr);var a=parseInt(RegExp.$1,10),n=RegExp.$2,oddeven=RegExp.$3,b=parseInt(RegExp.$4,10)||0,result=[],siblings=Selector._children(node.parentNode,tag),op;if(oddeven){a=2;op="+";n="n";b=(oddeven==="odd")?1:0;}else{if(isNaN(a)){a=(n)?1:0;}}if(a===0){if(reverse){b=siblings.length-b+1;}if(siblings[b-1]===node){return true;}else{return false;}}else{if(a<0){reverse=!!reverse;a=Math.abs(a);}}if(!reverse){for(var i=b-1,len=siblings.length;i<len;i+=a){if(i>=0&&siblings[i]===node){return true;}}}else{for(var i=siblings.length-b,len=siblings.length;i>=0;i-=a){if(i<len&&siblings[i]===node){return true;}}}return false;};Y_mix(Selector.pseudos,{root:function(node){return node===node.ownerDocument.documentElement;},"nth-child":function(node,expr){return Selector._getNth(node,expr);},"nth-last-child":function(node,expr){return Selector._getNth(node,expr,null,true);},"nth-of-type":function(node,expr){return Selector._getNth(node,expr,node.tagName);},"nth-last-of-type":function(node,expr){return Selector._getNth(node,expr,node.tagName,true);},"last-child":function(node){var children=Selector._children(node.parentNode);return children[children.length-1]===node;},"first-of-type":function(node){return Selector._children(node.parentNode,node.tagName)[0]===node;},"last-of-type":function(node){var children=Selector._children(node.parentNode,node.tagName);return children[children.length-1]===node;},"only-child":function(node){var children=Selector._children(node.parentNode);return children.length===1&&children[0]===node;},"only-of-type":function(node){var children=Selector._children(node.parentNode,node.tagName);return children.length===1&&children[0]===node;},empty:function(node){return node.childNodes.length===0;},not:function(node,expr){return !Selector.test(node,expr);},contains:function(node,expr){var text=node.innerText||node.textContent||"";return text.indexOf(expr)>-1;},checked:function(node){return(node.checked===true||node.selected===true);},enabled:function(node){return(node.disabled!==undefined&&!node.disabled);},disabled:function(node){return(node.disabled);}});Y_mix(Selector.operators,{"^=":"^{val}","!=":function(node,attr,val){return node[attr]!==val;},"$=":"{val}$","*=":"{val}"});Selector.combinators["~"]={axis:"previousSibling"};YAHOO.register("selector",YAHOO.util.Selector,{version:"2.9.0",build:"2800"});
			/* /yui_selector.js */
			/* yui_event_delegate.js */
(function(){var Event=YAHOO.util.Event,Lang=YAHOO.lang,delegates=[],getMatch=function(el,selector,container){var returnVal;if(!el||el===container){returnVal=false;}else{returnVal=YAHOO.util.Selector.test(el,selector)?el:getMatch(el.parentNode,selector,container);}return returnVal;};Lang.augmentObject(Event,{_createDelegate:function(fn,filter,obj,overrideContext){return function(event){var container=this,target=Event.getTarget(event),selector=filter,bDocument=(container.nodeType===9),matchedEl,context,sID,sIDSelector;if(Lang.isFunction(filter)){matchedEl=filter(target);}else{if(Lang.isString(filter)){if(!bDocument){sID=container.id;if(!sID){sID=Event.generateId(container);}sIDSelector=("#"+sID+" ");selector=(sIDSelector+filter).replace(/,/gi,(","+sIDSelector));}if(YAHOO.util.Selector.test(target,selector)){matchedEl=target;}else{if(YAHOO.util.Selector.test(target,((selector.replace(/,/gi," *,"))+" *"))){matchedEl=getMatch(target,selector,container);}}}}if(matchedEl){context=matchedEl;if(overrideContext){if(overrideContext===true){context=obj;}else{context=overrideContext;}}return fn.call(context,event,matchedEl,container,obj);}};},delegate:function(container,type,fn,filter,obj,overrideContext){var sType=type,fnMouseDelegate,fnDelegate;if(Lang.isString(filter)&&!YAHOO.util.Selector){return false;}if(type=="mouseenter"||type=="mouseleave"){if(!Event._createMouseDelegate){return false;}sType=Event._getType(type);fnMouseDelegate=Event._createMouseDelegate(fn,obj,overrideContext);fnDelegate=Event._createDelegate(function(event,matchedEl,container){return fnMouseDelegate.call(matchedEl,event,container);},filter,obj,overrideContext);}else{fnDelegate=Event._createDelegate(fn,filter,obj,overrideContext);}delegates.push([container,sType,fn,fnDelegate]);return Event.on(container,sType,fnDelegate);},removeDelegate:function(container,type,fn){var sType=type,returnVal=false,index,cacheItem;if(type=="mouseenter"||type=="mouseleave"){sType=Event._getType(type);}index=Event._getCacheIndex(delegates,container,sType,fn);if(index>=0){cacheItem=delegates[index];}if(container&&cacheItem){returnVal=Event.removeListener(cacheItem[0],cacheItem[1],cacheItem[3]);if(returnVal){delete delegates[index][2];delete delegates[index][3];delegates.splice(index,1);}}return returnVal;}});}());YAHOO.register("event-delegate",YAHOO.util.Event,{version:"2.9.0",build:"2800"});
			/* /yui_event_delegate.js */
			/* yui_element.js */
YAHOO.util.Attribute=function(hash,owner){if(owner){this.owner=owner;this.configure(hash,true);}};YAHOO.util.Attribute.INVALID_VALUE={};YAHOO.util.Attribute.prototype={name:undefined,value:null,owner:null,readOnly:false,writeOnce:false,_initialConfig:null,_written:false,method:null,setter:null,getter:null,validator:null,getValue:function(){var val=this.value;if(this.getter){val=this.getter.call(this.owner,this.name,val);}return val;},setValue:function(value,silent){var beforeRetVal,owner=this.owner,name=this.name,invalidValue=YAHOO.util.Attribute.INVALID_VALUE,event={type:name,prevValue:this.getValue(),newValue:value};if(this.readOnly||(this.writeOnce&&this._written)){return false;}if(this.validator&&!this.validator.call(owner,value)){return false;}if(!silent){beforeRetVal=owner.fireBeforeChangeEvent(event);if(beforeRetVal===false){return false;}}if(this.setter){value=this.setter.call(owner,value,this.name);if(value===undefined){}if(value===invalidValue){return false;}}if(this.method){if(this.method.call(owner,value,this.name)===invalidValue){return false;}}this.value=value;this._written=true;event.type=name;if(!silent){this.owner.fireChangeEvent(event);}return true;},configure:function(map,init){map=map||{};if(init){this._written=false;}this._initialConfig=this._initialConfig||{};for(var key in map){if(map.hasOwnProperty(key)){this[key]=map[key];if(init){this._initialConfig[key]=map[key];}}}},resetValue:function(){return this.setValue(this._initialConfig.value);},resetConfig:function(){this.configure(this._initialConfig,true);},refresh:function(silent){this.setValue(this.value,silent);}};(function(){var Lang=YAHOO.util.Lang;YAHOO.util.AttributeProvider=function(){};YAHOO.util.AttributeProvider.prototype={_configs:null,get:function(key){this._configs=this._configs||{};var config=this._configs[key];if(!config||!this._configs.hasOwnProperty(key)){return null;}return config.getValue();},set:function(key,value,silent){this._configs=this._configs||{};var config=this._configs[key];if(!config){return false;}return config.setValue(value,silent);},getAttributeKeys:function(){this._configs=this._configs;var keys=[],key;for(key in this._configs){if(Lang.hasOwnProperty(this._configs,key)&&!Lang.isUndefined(this._configs[key])){keys[keys.length]=key;}}return keys;},setAttributes:function(map,silent){for(var key in map){if(Lang.hasOwnProperty(map,key)){this.set(key,map[key],silent);}}},resetValue:function(key,silent){this._configs=this._configs||{};if(this._configs[key]){this.set(key,this._configs[key]._initialConfig.value,silent);return true;}return false;},refresh:function(key,silent){this._configs=this._configs||{};var configs=this._configs;key=((Lang.isString(key))?[key]:key)||this.getAttributeKeys();for(var i=0,len=key.length;i<len;++i){if(configs.hasOwnProperty(key[i])){this._configs[key[i]].refresh(silent);}}},register:function(key,map){this.setAttributeConfig(key,map);},getAttributeConfig:function(key){this._configs=this._configs||{};var config=this._configs[key]||{};var map={};for(key in config){if(Lang.hasOwnProperty(config,key)){map[key]=config[key];}}return map;},setAttributeConfig:function(key,map,init){this._configs=this._configs||{};map=map||{};if(!this._configs[key]){map.name=key;this._configs[key]=this.createAttribute(map);}else{this._configs[key].configure(map,init);}},configureAttribute:function(key,map,init){this.setAttributeConfig(key,map,init);},resetAttributeConfig:function(key){this._configs=this._configs||{};this._configs[key].resetConfig();},subscribe:function(type,callback){this._events=this._events||{};if(!(type in this._events)){this._events[type]=this.createEvent(type);}YAHOO.util.EventProvider.prototype.subscribe.apply(this,arguments);},on:function(){this.subscribe.apply(this,arguments);},addListener:function(){this.subscribe.apply(this,arguments);},fireBeforeChangeEvent:function(e){var type="before";type+=e.type.charAt(0).toUpperCase()+e.type.substr(1)+"Change";e.type=type;return this.fireEvent(e.type,e);},fireChangeEvent:function(e){e.type+="Change";return this.fireEvent(e.type,e);},createAttribute:function(map){return new YAHOO.util.Attribute(map,this);}};YAHOO.augment(YAHOO.util.AttributeProvider,YAHOO.util.EventProvider);})();(function(){var Dom=YAHOO.util.Dom,AttributeProvider=YAHOO.util.AttributeProvider,specialTypes={mouseenter:true,mouseleave:true};var Element=function(el,map){this.init.apply(this,arguments);};Element.DOM_EVENTS={click:true,dblclick:true,keydown:true,keypress:true,keyup:true,mousedown:true,mousemove:true,mouseout:true,mouseover:true,mouseup:true,mouseenter:true,mouseleave:true,focus:true,blur:true,submit:true,change:true};Element.prototype={DOM_EVENTS:null,DEFAULT_HTML_SETTER:function(value,key){var el=this.get("element");if(el){el[key]=value;}return value;},DEFAULT_HTML_GETTER:function(key){var el=this.get("element"),val;if(el){val=el[key];}return val;},appendChild:function(child){child=child.get?child.get("element"):child;return this.get("element").appendChild(child);},getElementsByTagName:function(tag){return this.get("element").getElementsByTagName(tag);},hasChildNodes:function(){return this.get("element").hasChildNodes();},insertBefore:function(element,before){element=element.get?element.get("element"):element;before=(before&&before.get)?before.get("element"):before;return this.get("element").insertBefore(element,before);},removeChild:function(child){child=child.get?child.get("element"):child;return this.get("element").removeChild(child);},replaceChild:function(newNode,oldNode){newNode=newNode.get?newNode.get("element"):newNode;oldNode=oldNode.get?oldNode.get("element"):oldNode;return this.get("element").replaceChild(newNode,oldNode);},initAttributes:function(map){},addListener:function(type,fn,obj,scope){scope=scope||this;var Event=YAHOO.util.Event,el=this.get("element")||this.get("id"),self=this;if(specialTypes[type]&&!Event._createMouseDelegate){return false;}if(!this._events[type]){if(el&&this.DOM_EVENTS[type]){Event.on(el,type,function(e,matchedEl){if(e.srcElement&&!e.target){e.target=e.srcElement;}if((e.toElement&&!e.relatedTarget)||(e.fromElement&&!e.relatedTarget)){e.relatedTarget=Event.getRelatedTarget(e);}if(!e.currentTarget){e.currentTarget=el;}self.fireEvent(type,e,matchedEl);},obj,scope);}this.createEvent(type,{scope:this});}return YAHOO.util.EventProvider.prototype.subscribe.apply(this,arguments);},on:function(){return this.addListener.apply(this,arguments);},subscribe:function(){return this.addListener.apply(this,arguments);},removeListener:function(type,fn){return this.unsubscribe.apply(this,arguments);},addClass:function(className){Dom.addClass(this.get("element"),className);},getElementsByClassName:function(className,tag){return Dom.getElementsByClassName(className,tag,this.get("element"));},hasClass:function(className){return Dom.hasClass(this.get("element"),className);},removeClass:function(className){return Dom.removeClass(this.get("element"),className);},replaceClass:function(oldClassName,newClassName){return Dom.replaceClass(this.get("element"),oldClassName,newClassName);},setStyle:function(property,value){return Dom.setStyle(this.get("element"),property,value);},getStyle:function(property){return Dom.getStyle(this.get("element"),property);},fireQueue:function(){var queue=this._queue;for(var i=0,len=queue.length;i<len;++i){this[queue[i][0]].apply(this,queue[i][1]);}},appendTo:function(parent,before){parent=(parent.get)?parent.get("element"):Dom.get(parent);this.fireEvent("beforeAppendTo",{type:"beforeAppendTo",target:parent});before=(before&&before.get)?before.get("element"):Dom.get(before);var element=this.get("element");if(!element){return false;}if(!parent){return false;}if(element.parent!=parent){if(before){parent.insertBefore(element,before);}else{parent.appendChild(element);}}this.fireEvent("appendTo",{type:"appendTo",target:parent});return element;},get:function(key){var configs=this._configs||{},el=configs.element;if(el&&!configs[key]&&!YAHOO.lang.isUndefined(el.value[key])){this._setHTMLAttrConfig(key);}return AttributeProvider.prototype.get.call(this,key);},setAttributes:function(map,silent){var done={},configOrder=this._configOrder;for(var i=0,len=configOrder.length;i<len;++i){if(map[configOrder[i]]!==undefined){done[configOrder[i]]=true;this.set(configOrder[i],map[configOrder[i]],silent);}}for(var att in map){if(map.hasOwnProperty(att)&&!done[att]){this.set(att,map[att],silent);}}},set:function(key,value,silent){var el=this.get("element");if(!el){this._queue[this._queue.length]=["set",arguments];if(this._configs[key]){this._configs[key].value=value;}return;}if(!this._configs[key]&&!YAHOO.lang.isUndefined(el[key])){this._setHTMLAttrConfig(key);}return AttributeProvider.prototype.set.apply(this,arguments);},setAttributeConfig:function(key,map,init){this._configOrder.push(key);AttributeProvider.prototype.setAttributeConfig.apply(this,arguments);},createEvent:function(type,config){this._events[type]=true;return AttributeProvider.prototype.createEvent.apply(this,arguments);},init:function(el,attr){this._initElement(el,attr);},destroy:function(){var el=this.get("element");YAHOO.util.Event.purgeElement(el,true);this.unsubscribeAll();if(el&&el.parentNode){el.parentNode.removeChild(el);}this._queue=[];this._events={};this._configs={};this._configOrder=[];},_initElement:function(el,attr){this._queue=this._queue||[];this._events=this._events||{};this._configs=this._configs||{};this._configOrder=[];attr=attr||{};attr.element=attr.element||el||null;var isReady=false;var DOM_EVENTS=Element.DOM_EVENTS;this.DOM_EVENTS=this.DOM_EVENTS||{};for(var event in DOM_EVENTS){if(DOM_EVENTS.hasOwnProperty(event)){this.DOM_EVENTS[event]=DOM_EVENTS[event];}}if(typeof attr.element==="string"){this._setHTMLAttrConfig("id",{value:attr.element});}if(Dom.get(attr.element)){isReady=true;this._initHTMLElement(attr);this._initContent(attr);}YAHOO.util.Event.onAvailable(attr.element,function(){if(!isReady){this._initHTMLElement(attr);}this.fireEvent("available",{type:"available",target:Dom.get(attr.element)});},this,true);YAHOO.util.Event.onContentReady(attr.element,function(){if(!isReady){this._initContent(attr);}this.fireEvent("contentReady",{type:"contentReady",target:Dom.get(attr.element)});},this,true);},_initHTMLElement:function(attr){this.setAttributeConfig("element",{value:Dom.get(attr.element),readOnly:true});},_initContent:function(attr){this.initAttributes(attr);this.setAttributes(attr,true);this.fireQueue();},_setHTMLAttrConfig:function(key,map){var el=this.get("element");map=map||{};map.name=key;map.setter=map.setter||this.DEFAULT_HTML_SETTER;map.getter=map.getter||this.DEFAULT_HTML_GETTER;map.value=map.value||el[key];this._configs[key]=new YAHOO.util.Attribute(map,this);}};YAHOO.augment(Element,AttributeProvider);YAHOO.util.Element=Element;})();YAHOO.register("element",YAHOO.util.Element,{version:"2.9.0",build:"2800"});
			/* /yui_element.js */
			/* yui_cookie.js */
YAHOO.namespace("util");YAHOO.util.Cookie={_createCookieString:function(name,value,encodeValue,options){var lang=YAHOO.lang,text=encodeURIComponent(name)+"="+(encodeValue?encodeURIComponent(value):value);if(lang.isObject(options)){if(options.expires instanceof Date){text+="; expires="+options.expires.toUTCString();}if(lang.isString(options.path)&&options.path!==""){text+="; path="+options.path;}if(lang.isString(options.domain)&&options.domain!==""){text+="; domain="+options.domain;}if(options.secure===true){text+="; secure";}}return text;},_createCookieHashString:function(hash){var lang=YAHOO.lang;if(!lang.isObject(hash)){throw new TypeError("Cookie._createCookieHashString(): Argument must be an object.");}var text=[];for(var key in hash){if(lang.hasOwnProperty(hash,key)&&!lang.isFunction(hash[key])&&!lang.isUndefined(hash[key])){text.push(encodeURIComponent(key)+"="+encodeURIComponent(String(hash[key])));}}return text.join("&");},_parseCookieHash:function(text){var hashParts=text.split("&"),hashPart=null,hash={};if(text.length>0){for(var i=0,len=hashParts.length;i<len;i++){hashPart=hashParts[i].split("=");hash[decodeURIComponent(hashPart[0])]=decodeURIComponent(hashPart[1]);}}return hash;},_parseCookieString:function(text,decode){var cookies={};if(YAHOO.lang.isString(text)&&text.length>0){var decodeValue=(decode===false?function(s){return s;}:decodeURIComponent);var cookieParts=text.split(/;\s/g),cookieName=null,cookieValue=null,cookieNameValue=null;for(var i=0,len=cookieParts.length;i<len;i++){cookieNameValue=cookieParts[i].match(/([^=]+)=/i);if(cookieNameValue instanceof Array){try{cookieName=decodeURIComponent(cookieNameValue[1]);cookieValue=decodeValue(cookieParts[i].substring(cookieNameValue[1].length+1));}catch(ex){}}else{cookieName=decodeURIComponent(cookieParts[i]);cookieValue="";}cookies[cookieName]=cookieValue;}}return cookies;},exists:function(name){if(!YAHOO.lang.isString(name)||name===""){throw new TypeError("Cookie.exists(): Cookie name must be a non-empty string.");}var cookies=this._parseCookieString(document.cookie,true);return cookies.hasOwnProperty(name);},get:function(name,options){var lang=YAHOO.lang,converter;if(lang.isFunction(options)){converter=options;options={};}else{if(lang.isObject(options)){converter=options.converter;}else{options={};}}var cookies=this._parseCookieString(document.cookie,!options.raw);if(!lang.isString(name)||name===""){throw new TypeError("Cookie.get(): Cookie name must be a non-empty string.");}if(lang.isUndefined(cookies[name])){return null;}if(!lang.isFunction(converter)){return cookies[name];}else{return converter(cookies[name]);}},getSub:function(name,subName,converter){var lang=YAHOO.lang,hash=this.getSubs(name);if(hash!==null){if(!lang.isString(subName)||subName===""){throw new TypeError("Cookie.getSub(): Subcookie name must be a non-empty string.");}if(lang.isUndefined(hash[subName])){return null;}if(!lang.isFunction(converter)){return hash[subName];}else{return converter(hash[subName]);}}else{return null;}},getSubs:function(name){var isString=YAHOO.lang.isString;if(!isString(name)||name===""){throw new TypeError("Cookie.getSubs(): Cookie name must be a non-empty string.");}var cookies=this._parseCookieString(document.cookie,false);if(isString(cookies[name])){return this._parseCookieHash(cookies[name]);}return null;},remove:function(name,options){if(!YAHOO.lang.isString(name)||name===""){throw new TypeError("Cookie.remove(): Cookie name must be a non-empty string.");}options=YAHOO.lang.merge(options||{},{expires:new Date(0)});return this.set(name,"",options);},removeSub:function(name,subName,options){var lang=YAHOO.lang;options=options||{};if(!lang.isString(name)||name===""){throw new TypeError("Cookie.removeSub(): Cookie name must be a non-empty string.");}if(!lang.isString(subName)||subName===""){throw new TypeError("Cookie.removeSub(): Subcookie name must be a non-empty string.");}var subs=this.getSubs(name);if(lang.isObject(subs)&&lang.hasOwnProperty(subs,subName)){delete subs[subName];if(!options.removeIfEmpty){return this.setSubs(name,subs,options);}else{for(var key in subs){if(lang.hasOwnProperty(subs,key)&&!lang.isFunction(subs[key])&&!lang.isUndefined(subs[key])){return this.setSubs(name,subs,options);}}return this.remove(name,options);}}else{return"";}},set:function(name,value,options){var lang=YAHOO.lang;options=options||{};if(!lang.isString(name)){throw new TypeError("Cookie.set(): Cookie name must be a string.");}if(lang.isUndefined(value)){throw new TypeError("Cookie.set(): Value cannot be undefined.");}var text=this._createCookieString(name,value,!options.raw,options);document.cookie=text;return text;},setSub:function(name,subName,value,options){var lang=YAHOO.lang;if(!lang.isString(name)||name===""){throw new TypeError("Cookie.setSub(): Cookie name must be a non-empty string.");}if(!lang.isString(subName)||subName===""){throw new TypeError("Cookie.setSub(): Subcookie name must be a non-empty string.");}if(lang.isUndefined(value)){throw new TypeError("Cookie.setSub(): Subcookie value cannot be undefined.");}var hash=this.getSubs(name);if(!lang.isObject(hash)){hash={};}hash[subName]=value;return this.setSubs(name,hash,options);},setSubs:function(name,value,options){var lang=YAHOO.lang;if(!lang.isString(name)){throw new TypeError("Cookie.setSubs(): Cookie name must be a string.");}if(!lang.isObject(value)){throw new TypeError("Cookie.setSubs(): Cookie value must be an object.");}var text=this._createCookieString(name,this._createCookieHashString(value),false,options);document.cookie=text;return text;}};YAHOO.register("cookie",YAHOO.util.Cookie,{version:"2.9.0",build:"2800"});
			/* /yui_cookie.js */
			/* yui_json.js */
(function(){var l=YAHOO.lang,isFunction=l.isFunction,isObject=l.isObject,isArray=l.isArray,_toStr=Object.prototype.toString,Native=(YAHOO.env.ua.caja?window:this).JSON,_UNICODE_EXCEPTIONS=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_ESCAPES=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,_VALUES=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_BRACKETS=/(?:^|:|,)(?:\s*\[)+/g,_UNSAFE=/[^\],:{}\s]/,_SPECIAL_CHARS=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_CHARS={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},UNDEFINED="undefined",OBJECT="object",NULL="null",STRING="string",NUMBER="number",BOOLEAN="boolean",DATE="date",_allowable={"undefined":UNDEFINED,string:STRING,"[object String]":STRING,number:NUMBER,"[object Number]":NUMBER,"boolean":BOOLEAN,"[object Boolean]":BOOLEAN,"[object Date]":DATE,"[object RegExp]":OBJECT},EMPTY="",OPEN_O="{",CLOSE_O="}",OPEN_A="[",CLOSE_A="]",COMMA=",",COMMA_CR=",\n",CR="\n",COLON=":",COLON_SP=": ",QUOTE='"';Native=_toStr.call(Native)==="[object JSON]"&&Native;function _char(c){if(!_CHARS[c]){_CHARS[c]="\\u"+("0000"+(+(c.charCodeAt(0))).toString(16)).slice(-4);}return _CHARS[c];}function _revive(data,reviver){var walk=function(o,key){var k,v,value=o[key];if(value&&typeof value==="object"){for(k in value){if(l.hasOwnProperty(value,k)){v=walk(value,k);if(v===undefined){delete value[k];}else{value[k]=v;}}}}return reviver.call(o,key,value);};return typeof reviver==="function"?walk({"":data},""):data;}function _prepare(s){return s.replace(_UNICODE_EXCEPTIONS,_char);}function _isSafe(str){return l.isString(str)&&!_UNSAFE.test(str.replace(_ESCAPES,"@").replace(_VALUES,"]").replace(_BRACKETS,""));}function _parse(s,reviver){s=_prepare(s);if(_isSafe(s)){return _revive(eval("("+s+")"),reviver);}throw new SyntaxError("JSON.parse");}function _type(o){var t=typeof o;return _allowable[t]||_allowable[_toStr.call(o)]||(t===OBJECT?(o?OBJECT:NULL):UNDEFINED);}function _string(s){return QUOTE+s.replace(_SPECIAL_CHARS,_char)+QUOTE;}function _indent(s,space){return s.replace(/^/gm,space);}function _stringify(o,w,space){if(o===undefined){return undefined;}var replacer=isFunction(w)?w:null,format=_toStr.call(space).match(/String|Number/)||[],_date=YAHOO.lang.JSON.dateToString,stack=[],tmp,i,len;if(replacer||!isArray(w)){w=undefined;}if(w){tmp={};for(i=0,len=w.length;i<len;++i){tmp[w[i]]=true;}w=tmp;}space=format[0]==="Number"?new Array(Math.min(Math.max(0,space),10)+1).join(" "):(space||EMPTY).slice(0,10);function _serialize(h,key){var value=h[key],t=_type(value),a=[],colon=space?COLON_SP:COLON,arr,i,keys,k,v;if(isObject(value)&&isFunction(value.toJSON)){value=value.toJSON(key);}else{if(t===DATE){value=_date(value);}}if(isFunction(replacer)){value=replacer.call(h,key,value);}if(value!==h[key]){t=_type(value);}switch(t){case DATE:case OBJECT:break;case STRING:return _string(value);case NUMBER:return isFinite(value)?value+EMPTY:NULL;case BOOLEAN:return value+EMPTY;case NULL:return NULL;default:return undefined;}for(i=stack.length-1;i>=0;--i){if(stack[i]===value){throw new Error("JSON.stringify. Cyclical reference");}}arr=isArray(value);stack.push(value);if(arr){for(i=value.length-1;i>=0;--i){a[i]=_serialize(value,i)||NULL;}}else{keys=w||value;i=0;for(k in keys){if(l.hasOwnProperty(keys,k)){v=_serialize(value,k);if(v){a[i++]=_string(k)+colon+v;}}}}stack.pop();if(space&&a.length){return arr?OPEN_A+CR+_indent(a.join(COMMA_CR),space)+CR+CLOSE_A:OPEN_O+CR+_indent(a.join(COMMA_CR),space)+CR+CLOSE_O;}else{return arr?OPEN_A+a.join(COMMA)+CLOSE_A:OPEN_O+a.join(COMMA)+CLOSE_O;}}return _serialize({"":o},"");}YAHOO.lang.JSON={useNativeParse:!!Native,useNativeStringify:!!Native,isSafe:function(s){return _isSafe(_prepare(s));},parse:function(s,reviver){if(typeof s!=="string"){s+="";}return Native&&YAHOO.lang.JSON.useNativeParse?Native.parse(s,reviver):_parse(s,reviver);},stringify:function(o,w,space){return Native&&YAHOO.lang.JSON.useNativeStringify?Native.stringify(o,w,space):_stringify(o,w,space);},dateToString:function(d){function _zeroPad(v){return v<10?"0"+v:v;}return d.getUTCFullYear()+"-"+_zeroPad(d.getUTCMonth()+1)+"-"+_zeroPad(d.getUTCDate())+"T"+_zeroPad(d.getUTCHours())+COLON+_zeroPad(d.getUTCMinutes())+COLON+_zeroPad(d.getUTCSeconds())+"Z";},stringToDate:function(str){var m=str.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?Z$/);if(m){var d=new Date();d.setUTCFullYear(m[1],m[2]-1,m[3]);d.setUTCHours(m[4],m[5],m[6],(m[7]||0));return d;}return str;}};YAHOO.lang.JSON.isValid=YAHOO.lang.JSON.isSafe;})();YAHOO.register("json",YAHOO.lang.JSON,{version:"2.9.0",build:"2800"});
			/* /yui_json.js */
			/* yui_connection.js */
YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_isFormSubmit:false,_default_headers:{},_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,startEvent:new YAHOO.util.CustomEvent("start"),completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(id){this._msxml_progid.unshift(id);},setDefaultPostHeader:function(b){if(typeof b=="string"){this._default_post_header=b;this._use_default_post_header=true;}else{if(typeof b=="boolean"){this._use_default_post_header=b;}}},setDefaultXhrHeader:function(b){if(typeof b=="string"){this._default_xhr_header=b;}else{this._use_default_xhr_header=b;}},setPollingInterval:function(i){if(typeof i=="number"&&isFinite(i)){this._polling_interval=i;}},createXhrObject:function(transactionId){var obj,http,i;try{http=new XMLHttpRequest();obj={conn:http,tId:transactionId,xhr:true};}catch(e){for(i=0;i<this._msxml_progid.length;++i){try{http=new ActiveXObject(this._msxml_progid[i]);obj={conn:http,tId:transactionId,xhr:true};break;}catch(e1){}}}finally{return obj;}},getConnectionObject:function(t){var o,tId=this._transaction_id;try{if(!t){o=this.createXhrObject(tId);}else{o={tId:tId};if(t==="xdr"){o.conn=this._transport;o.xdr=true;}else{if(t==="upload"){o.upload=true;}}}if(o){this._transaction_id++;}}catch(e){}return o;},asyncRequest:function(method,uri,callback,postData){var args=callback&&callback.argument?callback.argument:null,YCM=this,o,t;if(this._isFileUpload){t="upload";}else{if(callback&&callback.xdr){t="xdr";}}o=this.getConnectionObject(t);if(!o){return null;}else{if(callback&&callback.customevents){this.initCustomEvents(o,callback);}if(this._isFormSubmit){if(this._isFileUpload){window.setTimeout(function(){YCM.uploadFile(o,callback,uri,postData);},10);return o;}if(method.toUpperCase()=="GET"){if(this._sFormData.length!==0){uri+=((uri.indexOf("?")==-1)?"?":"&")+this._sFormData;}}else{if(method.toUpperCase()=="POST"){postData=postData?this._sFormData+"&"+postData:this._sFormData;}}}if(method.toUpperCase()=="GET"&&(callback&&callback.cache===false)){uri+=((uri.indexOf("?")==-1)?"?":"&")+"rnd="+new Date().valueOf().toString();}if(this._use_default_xhr_header){if(!this._default_headers["X-Requested-With"]){this.initHeader("X-Requested-With",this._default_xhr_header,true);}}if((method.toUpperCase()==="POST"&&this._use_default_post_header)&&this._isFormSubmit===false){this.initHeader("Content-Type",this._default_post_header);}if(o.xdr){this.xdr(o,method,uri,callback,postData);return o;}o.conn.open(method,uri,true);if(this._has_default_headers||this._has_http_headers){this.setHeader(o);}this.handleReadyState(o,callback);o.conn.send(postData||"");if(this._isFormSubmit===true){this.resetFormState();}this.startEvent.fire(o,args);if(o.startEvent){o.startEvent.fire(o,args);}return o;}},initCustomEvents:function(o,callback){var prop;for(prop in callback.customevents){if(this._customEvents[prop][0]){o[this._customEvents[prop][0]]=new YAHOO.util.CustomEvent(this._customEvents[prop][1],(callback.scope)?callback.scope:null);o[this._customEvents[prop][0]].subscribe(callback.customevents[prop]);}}},handleReadyState:function(o,callback){var oConn=this,args=(callback&&callback.argument)?callback.argument:null;if(callback&&callback.timeout){this._timeOut[o.tId]=window.setTimeout(function(){oConn.abort(o,callback,true);},callback.timeout);}this._poll[o.tId]=window.setInterval(function(){if(o.conn&&o.conn.readyState===4){window.clearInterval(oConn._poll[o.tId]);delete oConn._poll[o.tId];if(callback&&callback.timeout){window.clearTimeout(oConn._timeOut[o.tId]);delete oConn._timeOut[o.tId];}oConn.completeEvent.fire(o,args);if(o.completeEvent){o.completeEvent.fire(o,args);}oConn.handleTransactionResponse(o,callback);}},this._polling_interval);},handleTransactionResponse:function(o,callback,isAbort){var httpStatus,responseObject,args=(callback&&callback.argument)?callback.argument:null,xdrS=(o.r&&o.r.statusText==="xdr:success")?true:false,xdrF=(o.r&&o.r.statusText==="xdr:failure")?true:false,xdrA=isAbort;try{if((o.conn.status!==undefined&&o.conn.status!==0)||xdrS){httpStatus=o.conn.status;}else{if(xdrF&&!xdrA){httpStatus=0;}else{httpStatus=13030;}}}catch(e){httpStatus=13030;}if((httpStatus>=200&&httpStatus<300)||httpStatus===1223||xdrS){responseObject=o.xdr?o.r:this.createResponseObject(o,args);if(callback&&callback.success){if(!callback.scope){callback.success(responseObject);}else{callback.success.apply(callback.scope,[responseObject]);}}this.successEvent.fire(responseObject);if(o.successEvent){o.successEvent.fire(responseObject);}}else{switch(httpStatus){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:responseObject=this.createExceptionObject(o.tId,args,(isAbort?isAbort:false));if(callback&&callback.failure){if(!callback.scope){callback.failure(responseObject);}else{callback.failure.apply(callback.scope,[responseObject]);}}break;default:responseObject=(o.xdr)?o.response:this.createResponseObject(o,args);if(callback&&callback.failure){if(!callback.scope){callback.failure(responseObject);}else{callback.failure.apply(callback.scope,[responseObject]);}}}this.failureEvent.fire(responseObject);if(o.failureEvent){o.failureEvent.fire(responseObject);}}this.releaseObject(o);responseObject=null;},createResponseObject:function(o,callbackArg){var obj={},headerObj={},i,headerStr,header,delimitPos;try{headerStr=o.conn.getAllResponseHeaders();header=headerStr.split("\n");for(i=0;i<header.length;i++){delimitPos=header[i].indexOf(":");if(delimitPos!=-1){headerObj[header[i].substring(0,delimitPos)]=YAHOO.lang.trim(header[i].substring(delimitPos+2));}}}catch(e){}obj.tId=o.tId;obj.status=(o.conn.status==1223)?204:o.conn.status;obj.statusText=(o.conn.status==1223)?"No Content":o.conn.statusText;obj.getResponseHeader=headerObj;obj.getAllResponseHeaders=headerStr;obj.responseText=o.conn.responseText;obj.responseXML=o.conn.responseXML;if(callbackArg){obj.argument=callbackArg;}return obj;},createExceptionObject:function(tId,callbackArg,isAbort){var COMM_CODE=0,COMM_ERROR="communication failure",ABORT_CODE=-1,ABORT_ERROR="transaction aborted",obj={};obj.tId=tId;if(isAbort){obj.status=ABORT_CODE;obj.statusText=ABORT_ERROR;}else{obj.status=COMM_CODE;obj.statusText=COMM_ERROR;}if(callbackArg){obj.argument=callbackArg;}return obj;},initHeader:function(label,value,isDefault){var headerObj=(isDefault)?this._default_headers:this._http_headers;headerObj[label]=value;if(isDefault){this._has_default_headers=true;}else{this._has_http_headers=true;}},setHeader:function(o){var prop;if(this._has_default_headers){for(prop in this._default_headers){if(YAHOO.lang.hasOwnProperty(this._default_headers,prop)){o.conn.setRequestHeader(prop,this._default_headers[prop]);}}}if(this._has_http_headers){for(prop in this._http_headers){if(YAHOO.lang.hasOwnProperty(this._http_headers,prop)){o.conn.setRequestHeader(prop,this._http_headers[prop]);}}this._http_headers={};this._has_http_headers=false;}},resetDefaultHeaders:function(){this._default_headers={};this._has_default_headers=false;},abort:function(o,callback,isTimeout){var abortStatus,args=(callback&&callback.argument)?callback.argument:null;o=o||{};if(o.conn){if(o.xhr){if(this.isCallInProgress(o)){o.conn.abort();window.clearInterval(this._poll[o.tId]);delete this._poll[o.tId];if(isTimeout){window.clearTimeout(this._timeOut[o.tId]);delete this._timeOut[o.tId];}abortStatus=true;}}else{if(o.xdr){o.conn.abort(o.tId);abortStatus=true;}}}else{if(o.upload){var frameId="yuiIO"+o.tId;var io=document.getElementById(frameId);if(io){YAHOO.util.Event.removeListener(io,"load");document.body.removeChild(io);if(isTimeout){window.clearTimeout(this._timeOut[o.tId]);delete this._timeOut[o.tId];}abortStatus=true;}}else{abortStatus=false;}}if(abortStatus===true){this.abortEvent.fire(o,args);if(o.abortEvent){o.abortEvent.fire(o,args);}this.handleTransactionResponse(o,callback,true);}return abortStatus;},isCallInProgress:function(o){o=o||{};if(o.xhr&&o.conn){return o.conn.readyState!==4&&o.conn.readyState!==0;}else{if(o.xdr&&o.conn){return o.conn.isCallInProgress(o.tId);}else{if(o.upload===true){return document.getElementById("yuiIO"+o.tId)?true:false;}else{return false;}}}},releaseObject:function(o){if(o&&o.conn){o.conn=null;o=null;}}};(function(){var YCM=YAHOO.util.Connect,_fn={};function _swf(uri){var o='<object id="YUIConnectionSwf" type="application/x-shockwave-flash" data="'+uri+'" width="0" height="0"><param name="movie" value="'+uri+'"><param name="allowScriptAccess" value="always"></object>',c=document.createElement("div");document.body.appendChild(c);c.innerHTML=o;}function _xdr(o,m,u,c,d){_fn[parseInt(o.tId)]={o:o,c:c};if(d){c.method=m;c.data=d;}o.conn.send(u,c,o.tId);}function _init(uri){_swf(uri);YCM._transport=document.getElementById("YUIConnectionSwf");}function _xdrReady(){YCM.xdrReadyEvent.fire();}function _xdrStart(o,cb){if(o){YCM.startEvent.fire(o,cb.argument);if(o.startEvent){o.startEvent.fire(o,cb.argument);}}}function _handleXdrResponse(r){var o=_fn[r.tId].o,cb=_fn[r.tId].c;if(r.statusText==="xdr:start"){_xdrStart(o,cb);return;}r.responseText=decodeURI(r.responseText);o.r=r;if(cb.argument){o.r.argument=cb.argument;}this.handleTransactionResponse(o,cb,r.statusText==="xdr:abort"?true:false);delete _fn[r.tId];}YCM.xdr=_xdr;YCM.swf=_swf;YCM.transport=_init;YCM.xdrReadyEvent=new YAHOO.util.CustomEvent("xdrReady");YCM.xdrReady=_xdrReady;YCM.handleXdrResponse=_handleXdrResponse;})();(function(){var YCM=YAHOO.util.Connect,YE=YAHOO.util.Event,dM=document.documentMode?document.documentMode:false;YCM._isFileUpload=false;YCM._formNode=null;YCM._sFormData=null;YCM._submitElementValue=null;YCM.uploadEvent=new YAHOO.util.CustomEvent("upload");YCM._hasSubmitListener=function(){if(YE){YE.addListener(document,"click",function(e){var obj=YE.getTarget(e),name=obj.nodeName.toLowerCase();if((name==="input"||name==="button")&&(obj.type&&obj.type.toLowerCase()=="submit")){YCM._submitElementValue=encodeURIComponent(obj.name)+"="+encodeURIComponent(obj.value);}});return true;}return false;}();function _setForm(formId,isUpload,secureUri){var oForm,oElement,oName,oValue,oDisabled,hasSubmit=false,data=[],item=0,i,len,j,jlen,opt;this.resetFormState();if(typeof formId=="string"){oForm=(document.getElementById(formId)||document.forms[formId]);}else{if(typeof formId=="object"){oForm=formId;}else{return;}}if(isUpload){this.createFrame(secureUri?secureUri:null);this._isFormSubmit=true;this._isFileUpload=true;this._formNode=oForm;return;}for(i=0,len=oForm.elements.length;i<len;++i){oElement=oForm.elements[i];oDisabled=oElement.disabled;oName=oElement.name;if(!oDisabled&&oName){oName=encodeURIComponent(oName)+"=";oValue=encodeURIComponent(oElement.value);switch(oElement.type){case"select-one":if(oElement.selectedIndex>-1){opt=oElement.options[oElement.selectedIndex];data[item++]=oName+encodeURIComponent((opt.attributes.value&&opt.attributes.value.specified)?opt.value:opt.text);}break;case"select-multiple":if(oElement.selectedIndex>-1){for(j=oElement.selectedIndex,jlen=oElement.options.length;j<jlen;++j){opt=oElement.options[j];if(opt.selected){data[item++]=oName+encodeURIComponent((opt.attributes.value&&opt.attributes.value.specified)?opt.value:opt.text);}}}break;case"radio":case"checkbox":if(oElement.checked){data[item++]=oName+oValue;}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(hasSubmit===false){if(this._hasSubmitListener&&this._submitElementValue){data[item++]=this._submitElementValue;}hasSubmit=true;}break;default:data[item++]=oName+oValue;}}}this._isFormSubmit=true;this._sFormData=data.join("&");this.initHeader("Content-Type",this._default_form_header);return this._sFormData;}function _resetFormState(){this._isFormSubmit=false;this._isFileUpload=false;this._formNode=null;this._sFormData="";}function _createFrame(secureUri){var frameId="yuiIO"+this._transaction_id,ie9=(dM===9)?true:false,io;if(YAHOO.env.ua.ie&&!ie9){io=document.createElement('<iframe id="'+frameId+'" name="'+frameId+'" />');if(typeof secureUri=="boolean"){io.src="javascript:false";}}else{io=document.createElement("iframe");io.id=frameId;io.name=frameId;}io.style.position="absolute";io.style.top="-1000px";io.style.left="-1000px";document.body.appendChild(io);}function _appendPostData(postData){var formElements=[],postMessage=postData.split("&"),i,delimitPos;for(i=0;i<postMessage.length;i++){delimitPos=postMessage[i].indexOf("=");if(delimitPos!=-1){formElements[i]=document.createElement("input");formElements[i].type="hidden";formElements[i].name=decodeURIComponent(postMessage[i].substring(0,delimitPos));formElements[i].value=decodeURIComponent(postMessage[i].substring(delimitPos+1));this._formNode.appendChild(formElements[i]);}}return formElements;}function _uploadFile(o,callback,uri,postData){var frameId="yuiIO"+o.tId,uploadEncoding="multipart/form-data",io=document.getElementById(frameId),ie8=(dM>=8)?true:false,oConn=this,args=(callback&&callback.argument)?callback.argument:null,oElements,i,prop,obj,rawFormAttributes,uploadCallback;rawFormAttributes={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",uri);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",frameId);if(YAHOO.env.ua.ie&&!ie8){this._formNode.setAttribute("encoding",uploadEncoding);}else{this._formNode.setAttribute("enctype",uploadEncoding);}if(postData){oElements=this.appendPostData(postData);}this._formNode.submit();this.startEvent.fire(o,args);if(o.startEvent){o.startEvent.fire(o,args);}if(callback&&callback.timeout){this._timeOut[o.tId]=window.setTimeout(function(){oConn.abort(o,callback,true);},callback.timeout);}if(oElements&&oElements.length>0){for(i=0;i<oElements.length;i++){this._formNode.removeChild(oElements[i]);}}for(prop in rawFormAttributes){if(YAHOO.lang.hasOwnProperty(rawFormAttributes,prop)){if(rawFormAttributes[prop]){this._formNode.setAttribute(prop,rawFormAttributes[prop]);}else{this._formNode.removeAttribute(prop);}}}this.resetFormState();uploadCallback=function(){var body,pre,text;if(callback&&callback.timeout){window.clearTimeout(oConn._timeOut[o.tId]);delete oConn._timeOut[o.tId];}oConn.completeEvent.fire(o,args);if(o.completeEvent){o.completeEvent.fire(o,args);}obj={tId:o.tId,argument:args};try{body=io.contentWindow.document.getElementsByTagName("body")[0];pre=io.contentWindow.document.getElementsByTagName("pre")[0];if(body){if(pre){text=pre.textContent?pre.textContent:pre.innerText;}else{text=body.textContent?body.textContent:body.innerText;}}obj.responseText=text;obj.responseXML=io.contentWindow.document.XMLDocument?io.contentWindow.document.XMLDocument:io.contentWindow.document;}catch(e){}if(callback&&callback.upload){if(!callback.scope){callback.upload(obj);}else{callback.upload.apply(callback.scope,[obj]);}}oConn.uploadEvent.fire(obj);if(o.uploadEvent){o.uploadEvent.fire(obj);}YE.removeListener(io,"load",uploadCallback);setTimeout(function(){document.body.removeChild(io);oConn.releaseObject(o);},100);};YE.addListener(io,"load",uploadCallback);}YCM.setForm=_setForm;YCM.resetFormState=_resetFormState;YCM.createFrame=_createFrame;YCM.appendPostData=_appendPostData;YCM.uploadFile=_uploadFile;})();YAHOO.register("connection",YAHOO.util.Connect,{version:"2.9.0",build:"2800"});
			/* /yui_connection.js */
			/* yui_get.js */
YAHOO.util.Get=function(){var queues={},qidx=0,nidx=0,_purging=false,ua=YAHOO.env.ua,lang=YAHOO.lang,_fail,_purge,_track,_node=function(type,attr,win){var w=win||window,d=w.document,n=d.createElement(type),i;for(i in attr){if(attr.hasOwnProperty(i)){n.setAttribute(i,attr[i]);}}return n;},_linkNode=function(url,win,attributes){var o={id:"yui__dyn_"+(nidx++),type:"text/css",rel:"stylesheet",href:url};if(attributes){lang.augmentObject(o,attributes);}return _node("link",o,win);},_scriptNode=function(url,win,attributes){var o={id:"yui__dyn_"+(nidx++),type:"text/javascript",src:url};if(attributes){lang.augmentObject(o,attributes);}return _node("script",o,win);},_returnData=function(q,msg){return{tId:q.tId,win:q.win,data:q.data,nodes:q.nodes,msg:msg,purge:function(){_purge(this.tId);}};},_get=function(nId,tId){var q=queues[tId],n=(lang.isString(nId))?q.win.document.getElementById(nId):nId;if(!n){_fail(tId,"target node not found: "+nId);}return n;},_finish=function(id){var q=queues[id],msg,context;q.finished=true;if(q.aborted){msg="transaction "+id+" was aborted";_fail(id,msg);return;}if(q.onSuccess){context=q.scope||q.win;q.onSuccess.call(context,_returnData(q));}},_timeout=function(id){var q=queues[id],context;if(q.onTimeout){context=q.scope||q;q.onTimeout.call(context,_returnData(q));}},_next=function(id,loaded){var q=queues[id],w=q.win,d=w.document,h=d.getElementsByTagName("head")[0],n,msg,url,s,extra;if(q.timer){q.timer.cancel();}if(q.aborted){msg="transaction "+id+" was aborted";_fail(id,msg);return;}if(loaded){q.url.shift();if(q.varName){q.varName.shift();}}else{q.url=(lang.isString(q.url))?[q.url]:q.url;if(q.varName){q.varName=(lang.isString(q.varName))?[q.varName]:q.varName;}}if(q.url.length===0){if(q.type==="script"&&ua.webkit&&ua.webkit<420&&!q.finalpass&&!q.varName){extra=_scriptNode(null,q.win,q.attributes);extra.innerHTML='YAHOO.util.Get._finalize("'+id+'");';q.nodes.push(extra);h.appendChild(extra);}else{_finish(id);}return;}url=q.url[0];if(!url){q.url.shift();return _next(id);}if(q.timeout){q.timer=lang.later(q.timeout,q,_timeout,id);}if(q.type==="script"){n=_scriptNode(url,w,q.attributes);}else{n=_linkNode(url,w,q.attributes);}_track(q.type,n,id,url,w,q.url.length);q.nodes.push(n);if(q.insertBefore){s=_get(q.insertBefore,id);if(s){s.parentNode.insertBefore(n,s);}}else{h.appendChild(n);}if((ua.webkit||ua.gecko)&&q.type==="css"){_next(id,url);}},_autoPurge=function(){if(_purging){return;}_purging=true;var i,q;for(i in queues){if(queues.hasOwnProperty(i)){q=queues[i];if(q.autopurge&&q.finished){_purge(q.tId);delete queues[i];}}}_purging=false;},_queue=function(type,url,opts){var id="q"+(qidx++),q;opts=opts||{};if(qidx%YAHOO.util.Get.PURGE_THRESH===0){_autoPurge();}queues[id]=lang.merge(opts,{tId:id,type:type,url:url,finished:false,aborted:false,nodes:[]});q=queues[id];q.win=q.win||window;q.scope=q.scope||q.win;q.autopurge=("autopurge" in q)?q.autopurge:(type==="script")?true:false;q.attributes=q.attributes||{};q.attributes.charset=opts.charset||q.attributes.charset||"utf-8";lang.later(0,q,_next,id);return{tId:id};};_track=function(type,n,id,url,win,qlength,trackfn){var f=trackfn||_next,rs,q,a,freq,w,l,i,msg;if(ua.ie){n.onreadystatechange=function(){rs=this.readyState;if("loaded"===rs||"complete"===rs){n.onreadystatechange=null;f(id,url);}};}else{if(ua.webkit){if(type==="script"){if(ua.webkit>=420){n.addEventListener("load",function(){f(id,url);});}else{q=queues[id];if(q.varName){freq=YAHOO.util.Get.POLL_FREQ;q.maxattempts=YAHOO.util.Get.TIMEOUT/freq;q.attempts=0;q._cache=q.varName[0].split(".");q.timer=lang.later(freq,q,function(o){a=this._cache;l=a.length;w=this.win;for(i=0;i<l;i=i+1){w=w[a[i]];if(!w){this.attempts++;if(this.attempts++>this.maxattempts){msg="Over retry limit, giving up";q.timer.cancel();_fail(id,msg);}else{}return;}}q.timer.cancel();f(id,url);},null,true);}else{lang.later(YAHOO.util.Get.POLL_FREQ,null,f,[id,url]);}}}}else{n.onload=function(){f(id,url);};}}};_fail=function(id,msg){var q=queues[id],context;if(q.onFailure){context=q.scope||q.win;q.onFailure.call(context,_returnData(q,msg));}};_purge=function(tId){if(queues[tId]){var q=queues[tId],nodes=q.nodes,l=nodes.length,d=q.win.document,h=d.getElementsByTagName("head")[0],sib,i,node,attr;if(q.insertBefore){sib=_get(q.insertBefore,tId);if(sib){h=sib.parentNode;}}for(i=0;i<l;i=i+1){node=nodes[i];if(node.clearAttributes){node.clearAttributes();}else{for(attr in node){if(node.hasOwnProperty(attr)){delete node[attr];}}}h.removeChild(node);}q.nodes=[];}};return{POLL_FREQ:10,PURGE_THRESH:20,TIMEOUT:2000,_finalize:function(id){lang.later(0,null,_finish,id);},abort:function(o){var id=(lang.isString(o))?o:o.tId,q=queues[id];if(q){q.aborted=true;}},script:function(url,opts){return _queue("script",url,opts);},css:function(url,opts){return _queue("css",url,opts);}};}();YAHOO.register("get",YAHOO.util.Get,{version:"2.9.0",build:"2800"});
			/* /yui_get.js */
			/* yui_animation.js */
(function(){var Y=YAHOO.util;var Anim=function(el,attributes,duration,method){if(!el){}this.init(el,attributes,duration,method);};Anim.NAME="Anim";Anim.prototype={toString:function(){var el=this.getEl()||{};var id=el.id||el.tagName;return(this.constructor.NAME+": "+id);},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(attr,start,end){return this.method(this.currentFrame,start,end-start,this.totalFrames);},setAttribute:function(attr,val,unit){var el=this.getEl();if(this.patterns.noNegatives.test(attr)){val=(val>0)?val:0;}if(attr in el&&!("style" in el&&attr in el.style)){el[attr]=val;}else{Y.Dom.setStyle(el,attr,val+unit);}},getAttribute:function(attr){var el=this.getEl();var val=Y.Dom.getStyle(el,attr);if(val!=="auto"&&!this.patterns.offsetUnit.test(val)){return parseFloat(val);}var a=this.patterns.offsetAttribute.exec(attr)||[];var pos=!!(a[3]);var box=!!(a[2]);if("style" in el){if(box||(Y.Dom.getStyle(el,"position")=="absolute"&&pos)){val=el["offset"+a[0].charAt(0).toUpperCase()+a[0].substr(1)];}else{val=0;}}else{if(attr in el){val=el[attr];}}return val;},getDefaultUnit:function(attr){if(this.patterns.defaultUnit.test(attr)){return"px";}return"";},setRuntimeAttribute:function(attr){var start;var end;var attributes=this.attributes;this.runtimeAttributes[attr]={};var isset=function(prop){return(typeof prop!=="undefined");};if(!isset(attributes[attr]["to"])&&!isset(attributes[attr]["by"])){return false;}start=(isset(attributes[attr]["from"]))?attributes[attr]["from"]:this.getAttribute(attr);if(isset(attributes[attr]["to"])){end=attributes[attr]["to"];}else{if(isset(attributes[attr]["by"])){if(start.constructor==Array){end=[];for(var i=0,len=start.length;i<len;++i){end[i]=start[i]+attributes[attr]["by"][i]*1;}}else{end=start+attributes[attr]["by"]*1;}}}this.runtimeAttributes[attr].start=start;this.runtimeAttributes[attr].end=end;this.runtimeAttributes[attr].unit=(isset(attributes[attr].unit))?attributes[attr]["unit"]:this.getDefaultUnit(attr);return true;},init:function(el,attributes,duration,method){var isAnimated=false;var startTime=null;var actualFrames=0;el=Y.Dom.get(el);this.attributes=attributes||{};this.duration=!YAHOO.lang.isUndefined(duration)?duration:1;this.method=method||Y.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=Y.AnimMgr.fps;this.setEl=function(element){el=Y.Dom.get(element);};this.getEl=function(){return el;};this.isAnimated=function(){return isAnimated;};this.getStartTime=function(){return startTime;};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated()){return false;}this.currentFrame=0;this.totalFrames=(this.useSeconds)?Math.ceil(Y.AnimMgr.fps*this.duration):this.duration;if(this.duration===0&&this.useSeconds){this.totalFrames=1;}Y.AnimMgr.registerElement(this);return true;};this.stop=function(finish){if(!this.isAnimated()){return false;}if(finish){this.currentFrame=this.totalFrames;this._onTween.fire();}Y.AnimMgr.stop(this);};this._handleStart=function(){this.onStart.fire();this.runtimeAttributes={};for(var attr in this.attributes){if(this.attributes.hasOwnProperty(attr)){this.setRuntimeAttribute(attr);}}isAnimated=true;actualFrames=0;startTime=new Date();};this._handleTween=function(){var data={duration:new Date()-this.getStartTime(),currentFrame:this.currentFrame};data.toString=function(){return("duration: "+data.duration+", currentFrame: "+data.currentFrame);};this.onTween.fire(data);var runtimeAttributes=this.runtimeAttributes;for(var attr in runtimeAttributes){if(runtimeAttributes.hasOwnProperty(attr)){this.setAttribute(attr,this.doMethod(attr,runtimeAttributes[attr].start,runtimeAttributes[attr].end),runtimeAttributes[attr].unit);}}this.afterTween.fire(data);actualFrames+=1;};this._handleComplete=function(){var actual_duration=(new Date()-startTime)/1000;var data={duration:actual_duration,frames:actualFrames,fps:actualFrames/actual_duration};data.toString=function(){return("duration: "+data.duration+", frames: "+data.frames+", fps: "+data.fps);};isAnimated=false;actualFrames=0;this.onComplete.fire(data);};this._onStart=new Y.CustomEvent("_start",this,true);this.onStart=new Y.CustomEvent("start",this);this.onTween=new Y.CustomEvent("tween",this);this.afterTween=new Y.CustomEvent("afterTween",this);this._onTween=new Y.CustomEvent("_tween",this,true);this.onComplete=new Y.CustomEvent("complete",this);this._onComplete=new Y.CustomEvent("_complete",this,true);this._onStart.subscribe(this._handleStart);this._onTween.subscribe(this._handleTween);this._onComplete.subscribe(this._handleComplete);}};Y.Anim=Anim;})();YAHOO.util.AnimMgr=new function(){var thread=null;var queue=[];var tweenCount=0;this.fps=1000;this.delay=20;this.registerElement=function(tween){queue[queue.length]=tween;tweenCount+=1;tween._onStart.fire();this.start();};var _unregisterQueue=[];var _unregistering=false;var doUnregister=function(){var next_args=_unregisterQueue.shift();unRegister.apply(YAHOO.util.AnimMgr,next_args);if(_unregisterQueue.length){arguments.callee();}};var unRegister=function(tween,index){index=index||getIndex(tween);if(!tween.isAnimated()||index===-1){return false;}tween._onComplete.fire();queue.splice(index,1);tweenCount-=1;if(tweenCount<=0){this.stop();}return true;};this.unRegister=function(){_unregisterQueue.push(arguments);if(!_unregistering){_unregistering=true;doUnregister();_unregistering=false;}};this.start=function(){if(thread===null){thread=setInterval(this.run,this.delay);}};this.stop=function(tween){if(!tween){clearInterval(thread);for(var i=0,len=queue.length;i<len;++i){this.unRegister(queue[0],0);}queue=[];thread=null;tweenCount=0;}else{this.unRegister(tween);}};this.run=function(){for(var i=0,len=queue.length;i<len;++i){var tween=queue[i];if(!tween||!tween.isAnimated()){continue;}if(tween.currentFrame<tween.totalFrames||tween.totalFrames===null){tween.currentFrame+=1;if(tween.useSeconds){correctFrame(tween);}tween._onTween.fire();}else{YAHOO.util.AnimMgr.stop(tween,i);}}};var getIndex=function(anim){for(var i=0,len=queue.length;i<len;++i){if(queue[i]===anim){return i;}}return -1;};var correctFrame=function(tween){var frames=tween.totalFrames;var frame=tween.currentFrame;var expected=(tween.currentFrame*tween.duration*1000/tween.totalFrames);var elapsed=(new Date()-tween.getStartTime());var tweak=0;if(elapsed<tween.duration*1000){tweak=Math.round((elapsed/expected-1)*tween.currentFrame);}else{tweak=frames-(frame+1);}if(tweak>0&&isFinite(tweak)){if(tween.currentFrame+tweak>=frames){tweak=frames-(frame+1);}tween.currentFrame+=tweak;}};this._queue=queue;this._getIndex=getIndex;};YAHOO.util.Bezier=new function(){this.getPosition=function(points,t){var n=points.length;var tmp=[];for(var i=0;i<n;++i){tmp[i]=[points[i][0],points[i][1]];}for(var j=1;j<n;++j){for(i=0;i<n-j;++i){tmp[i][0]=(1-t)*tmp[i][0]+t*tmp[parseInt(i+1,10)][0];tmp[i][1]=(1-t)*tmp[i][1]+t*tmp[parseInt(i+1,10)][1];}}return[tmp[0][0],tmp[0][1]];};};(function(){var ColorAnim=function(el,attributes,duration,method){ColorAnim.superclass.constructor.call(this,el,attributes,duration,method);};ColorAnim.NAME="ColorAnim";ColorAnim.DEFAULT_BGCOLOR="#fff";var Y=YAHOO.util;YAHOO.extend(ColorAnim,Y.Anim);var superclass=ColorAnim.superclass;var proto=ColorAnim.prototype;proto.patterns.color=/color$/i;proto.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i;proto.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;proto.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;proto.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/;proto.parseColor=function(s){if(s.length==3){return s;}var c=this.patterns.hex.exec(s);if(c&&c.length==4){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)];}c=this.patterns.rgb.exec(s);if(c&&c.length==4){return[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)];}c=this.patterns.hex3.exec(s);if(c&&c.length==4){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)];}return null;};proto.getAttribute=function(attr){var el=this.getEl();if(this.patterns.color.test(attr)){var val=YAHOO.util.Dom.getStyle(el,attr);var that=this;if(this.patterns.transparent.test(val)){var parent=YAHOO.util.Dom.getAncestorBy(el,function(node){return !that.patterns.transparent.test(val);});if(parent){val=Y.Dom.getStyle(parent,attr);}else{val=ColorAnim.DEFAULT_BGCOLOR;}}}else{val=superclass.getAttribute.call(this,attr);}return val;};proto.doMethod=function(attr,start,end){var val;if(this.patterns.color.test(attr)){val=[];for(var i=0,len=start.length;i<len;++i){val[i]=superclass.doMethod.call(this,attr,start[i],end[i]);}val="rgb("+Math.floor(val[0])+","+Math.floor(val[1])+","+Math.floor(val[2])+")";}else{val=superclass.doMethod.call(this,attr,start,end);}return val;};proto.setRuntimeAttribute=function(attr){superclass.setRuntimeAttribute.call(this,attr);if(this.patterns.color.test(attr)){var attributes=this.attributes;var start=this.parseColor(this.runtimeAttributes[attr].start);var end=this.parseColor(this.runtimeAttributes[attr].end);if(typeof attributes[attr]["to"]==="undefined"&&typeof attributes[attr]["by"]!=="undefined"){end=this.parseColor(attributes[attr].by);for(var i=0,len=start.length;i<len;++i){end[i]=start[i]+end[i];}}this.runtimeAttributes[attr].start=start;this.runtimeAttributes[attr].end=end;}};Y.ColorAnim=ColorAnim;})();
/*!
TERMS OF USE - EASING EQUATIONS
Open source under the BSD License.
Copyright 2001 Robert Penner All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

 * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
 * Neither the name of the author nor the names of contributors may be used to endorse or promote products derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
YAHOO.util.Easing={easeNone:function(t,b,c,d){return c*t/d+b;},easeIn:function(t,b,c,d){return c*(t/=d)*t+b;},easeOut:function(t,b,c,d){return -c*(t/=d)*(t-2)+b;},easeBoth:function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b;}return -c/2*((--t)*(t-2)-1)+b;},easeInStrong:function(t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutStrong:function(t,b,c,d){return -c*((t=t/d-1)*t*t*t-1)+b;},easeBothStrong:function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t+b;}return -c/2*((t-=2)*t*t*t-2)+b;},elasticIn:function(t,b,c,d,a,p){if(t==0){return b;}if((t/=d)==1){return b+c;}if(!p){p=d*0.3;}if(!a||a<Math.abs(c)){a=c;var s=p/4;}else{var s=p/(2*Math.PI)*Math.asin(c/a);}return -(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},elasticOut:function(t,b,c,d,a,p){if(t==0){return b;}if((t/=d)==1){return b+c;}if(!p){p=d*0.3;}if(!a||a<Math.abs(c)){a=c;var s=p/4;}else{var s=p/(2*Math.PI)*Math.asin(c/a);}return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},elasticBoth:function(t,b,c,d,a,p){if(t==0){return b;}if((t/=d/2)==2){return b+c;}if(!p){p=d*(0.3*1.5);}if(!a||a<Math.abs(c)){a=c;var s=p/4;}else{var s=p/(2*Math.PI)*Math.asin(c/a);}if(t<1){return -0.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;}return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*0.5+c+b;},backIn:function(t,b,c,d,s){if(typeof s=="undefined"){s=1.70158;}return c*(t/=d)*t*((s+1)*t-s)+b;},backOut:function(t,b,c,d,s){if(typeof s=="undefined"){s=1.70158;}return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},backBoth:function(t,b,c,d,s){if(typeof s=="undefined"){s=1.70158;}if((t/=d/2)<1){return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;}return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},bounceIn:function(t,b,c,d){return c-YAHOO.util.Easing.bounceOut(d-t,0,c,d)+b;},bounceOut:function(t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else{if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+0.75)+b;}else{if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+0.9375)+b;}}}return c*(7.5625*(t-=(2.625/2.75))*t+0.984375)+b;},bounceBoth:function(t,b,c,d){if(t<d/2){return YAHOO.util.Easing.bounceIn(t*2,0,c,d)*0.5+b;}return YAHOO.util.Easing.bounceOut(t*2-d,0,c,d)*0.5+c*0.5+b;}};(function(){var Motion=function(el,attributes,duration,method){if(el){Motion.superclass.constructor.call(this,el,attributes,duration,method);}};Motion.NAME="Motion";var Y=YAHOO.util;YAHOO.extend(Motion,Y.ColorAnim);var superclass=Motion.superclass;var proto=Motion.prototype;proto.patterns.points=/^points$/i;proto.setAttribute=function(attr,val,unit){if(this.patterns.points.test(attr)){unit=unit||"px";superclass.setAttribute.call(this,"left",val[0],unit);superclass.setAttribute.call(this,"top",val[1],unit);}else{superclass.setAttribute.call(this,attr,val,unit);}};proto.getAttribute=function(attr){if(this.patterns.points.test(attr)){var val=[superclass.getAttribute.call(this,"left"),superclass.getAttribute.call(this,"top")];}else{val=superclass.getAttribute.call(this,attr);}return val;};proto.doMethod=function(attr,start,end){var val=null;if(this.patterns.points.test(attr)){var t=this.method(this.currentFrame,0,100,this.totalFrames)/100;val=Y.Bezier.getPosition(this.runtimeAttributes[attr],t);}else{val=superclass.doMethod.call(this,attr,start,end);}return val;};proto.setRuntimeAttribute=function(attr){if(this.patterns.points.test(attr)){var el=this.getEl();var attributes=this.attributes;var start;var control=attributes.points["control"]||[];var end;var i,len;if(control.length>0&&!(control[0] instanceof Array)){control=[control];}else{var tmp=[];for(i=0,len=control.length;i<len;++i){tmp[i]=control[i];}control=tmp;}if(Y.Dom.getStyle(el,"position")=="static"){Y.Dom.setStyle(el,"position","relative");}if(isset(attributes.points["from"])){Y.Dom.setXY(el,attributes.points["from"]);}else{Y.Dom.setXY(el,Y.Dom.getXY(el));}start=this.getAttribute("points");if(isset(attributes.points["to"])){end=translateValues.call(this,attributes.points["to"],start);var pageXY=Y.Dom.getXY(this.getEl());for(i=0,len=control.length;i<len;++i){control[i]=translateValues.call(this,control[i],start);}}else{if(isset(attributes.points["by"])){end=[start[0]+attributes.points["by"][0],start[1]+attributes.points["by"][1]];for(i=0,len=control.length;i<len;++i){control[i]=[start[0]+control[i][0],start[1]+control[i][1]];}}}this.runtimeAttributes[attr]=[start];if(control.length>0){this.runtimeAttributes[attr]=this.runtimeAttributes[attr].concat(control);}this.runtimeAttributes[attr][this.runtimeAttributes[attr].length]=end;}else{superclass.setRuntimeAttribute.call(this,attr);}};var translateValues=function(val,start){var pageXY=Y.Dom.getXY(this.getEl());val=[val[0]-pageXY[0]+start[0],val[1]-pageXY[1]+start[1]];return val;};var isset=function(prop){return(typeof prop!=="undefined");};Y.Motion=Motion;})();(function(){var Scroll=function(el,attributes,duration,method){if(el){Scroll.superclass.constructor.call(this,el,attributes,duration,method);}};Scroll.NAME="Scroll";var Y=YAHOO.util;YAHOO.extend(Scroll,Y.ColorAnim);var superclass=Scroll.superclass;var proto=Scroll.prototype;proto.doMethod=function(attr,start,end){var val=null;if(attr=="scroll"){val=[this.method(this.currentFrame,start[0],end[0]-start[0],this.totalFrames),this.method(this.currentFrame,start[1],end[1]-start[1],this.totalFrames)];}else{val=superclass.doMethod.call(this,attr,start,end);}return val;};proto.getAttribute=function(attr){var val=null;var el=this.getEl();if(attr=="scroll"){val=[el.scrollLeft,el.scrollTop];}else{val=superclass.getAttribute.call(this,attr);}return val;};proto.setAttribute=function(attr,val,unit){var el=this.getEl();if(attr=="scroll"){el.scrollLeft=val[0];el.scrollTop=val[1];}else{superclass.setAttribute.call(this,attr,val,unit);}};Y.Scroll=Scroll;})();YAHOO.register("animation",YAHOO.util.Anim,{version:"2.9.0",build:"2800"});
			/* /yui_animation.js */
			/* yui_container */
(function(){YAHOO.util.Config=function(owner){if(owner){this.init(owner);}};var Lang=YAHOO.lang,CustomEvent=YAHOO.util.CustomEvent,Config=YAHOO.util.Config;Config.CONFIG_CHANGED_EVENT="configChanged";Config.BOOLEAN_TYPE="boolean";Config.prototype={owner:null,queueInProgress:false,config:null,initialConfig:null,eventQueue:null,configChangedEvent:null,init:function(owner){this.owner=owner;this.configChangedEvent=this.createEvent(Config.CONFIG_CHANGED_EVENT);this.configChangedEvent.signature=CustomEvent.LIST;this.queueInProgress=false;this.config={};this.initialConfig={};this.eventQueue=[];},checkBoolean:function(val){return(typeof val==Config.BOOLEAN_TYPE);},checkNumber:function(val){return(!isNaN(val));},fireEvent:function(key,value){var property=this.config[key];if(property&&property.event){property.event.fire(value);}},addProperty:function(key,propertyObject){key=key.toLowerCase();this.config[key]=propertyObject;propertyObject.event=this.createEvent(key,{scope:this.owner});propertyObject.event.signature=CustomEvent.LIST;propertyObject.key=key;if(propertyObject.handler){propertyObject.event.subscribe(propertyObject.handler,this.owner);}this.setProperty(key,propertyObject.value,true);if(!propertyObject.suppressEvent){this.queueProperty(key,propertyObject.value);}},getConfig:function(){var cfg={},currCfg=this.config,prop,property;for(prop in currCfg){if(Lang.hasOwnProperty(currCfg,prop)){property=currCfg[prop];if(property&&property.event){cfg[prop]=property.value;}}}return cfg;},getProperty:function(key){var property=this.config[key.toLowerCase()];if(property&&property.event){return property.value;}else{return undefined;}},resetProperty:function(key){key=key.toLowerCase();var property=this.config[key];if(property&&property.event){if(key in this.initialConfig){this.setProperty(key,this.initialConfig[key]);return true;}}else{return false;}},setProperty:function(key,value,silent){var property;key=key.toLowerCase();if(this.queueInProgress&&!silent){this.queueProperty(key,value);return true;}else{property=this.config[key];if(property&&property.event){if(property.validator&&!property.validator(value)){return false;}else{property.value=value;if(!silent){this.fireEvent(key,value);this.configChangedEvent.fire([key,value]);}return true;}}else{return false;}}},queueProperty:function(key,value){key=key.toLowerCase();var property=this.config[key],foundDuplicate=false,iLen,queueItem,queueItemKey,queueItemValue,sLen,supercedesCheck,qLen,queueItemCheck,queueItemCheckKey,queueItemCheckValue,i,s,q;if(property&&property.event){if(!Lang.isUndefined(value)&&property.validator&&!property.validator(value)){return false;}else{if(!Lang.isUndefined(value)){property.value=value;}else{value=property.value;}foundDuplicate=false;iLen=this.eventQueue.length;for(i=0;i<iLen;i++){queueItem=this.eventQueue[i];if(queueItem){queueItemKey=queueItem[0];queueItemValue=queueItem[1];if(queueItemKey==key){this.eventQueue[i]=null;this.eventQueue.push([key,(!Lang.isUndefined(value)?value:queueItemValue)]);foundDuplicate=true;break;}}}if(!foundDuplicate&&!Lang.isUndefined(value)){this.eventQueue.push([key,value]);}}if(property.supercedes){sLen=property.supercedes.length;for(s=0;s<sLen;s++){supercedesCheck=property.supercedes[s];qLen=this.eventQueue.length;for(q=0;q<qLen;q++){queueItemCheck=this.eventQueue[q];if(queueItemCheck){queueItemCheckKey=queueItemCheck[0];queueItemCheckValue=queueItemCheck[1];if(queueItemCheckKey==supercedesCheck.toLowerCase()){this.eventQueue.push([queueItemCheckKey,queueItemCheckValue]);this.eventQueue[q]=null;break;}}}}}return true;}else{return false;}},refireEvent:function(key){key=key.toLowerCase();var property=this.config[key];if(property&&property.event&&!Lang.isUndefined(property.value)){if(this.queueInProgress){this.queueProperty(key);}else{this.fireEvent(key,property.value);}}},applyConfig:function(userConfig,init){var sKey,oConfig;if(init){oConfig={};for(sKey in userConfig){if(Lang.hasOwnProperty(userConfig,sKey)){oConfig[sKey.toLowerCase()]=userConfig[sKey];}}this.initialConfig=oConfig;}for(sKey in userConfig){if(Lang.hasOwnProperty(userConfig,sKey)){this.queueProperty(sKey,userConfig[sKey]);}}},refresh:function(){var prop;for(prop in this.config){if(Lang.hasOwnProperty(this.config,prop)){this.refireEvent(prop);}}},fireQueue:function(){var i,queueItem,key,value,property;this.queueInProgress=true;for(i=0;i<this.eventQueue.length;i++){queueItem=this.eventQueue[i];if(queueItem){key=queueItem[0];value=queueItem[1];property=this.config[key];property.value=value;this.eventQueue[i]=null;this.fireEvent(key,value);}}this.queueInProgress=false;this.eventQueue=[];},subscribeToConfigEvent:function(key,handler,obj,overrideContext){var property=this.config[key.toLowerCase()];if(property&&property.event){if(!Config.alreadySubscribed(property.event,handler,obj)){property.event.subscribe(handler,obj,overrideContext);}return true;}else{return false;}},unsubscribeFromConfigEvent:function(key,handler,obj){var property=this.config[key.toLowerCase()];if(property&&property.event){return property.event.unsubscribe(handler,obj);}else{return false;}},toString:function(){var output="Config";if(this.owner){output+=" ["+this.owner.toString()+"]";}return output;},outputEventQueue:function(){var output="",queueItem,q,nQueue=this.eventQueue.length;for(q=0;q<nQueue;q++){queueItem=this.eventQueue[q];if(queueItem){output+=queueItem[0]+"="+queueItem[1]+", ";}}return output;},destroy:function(){var oConfig=this.config,sProperty,oProperty;for(sProperty in oConfig){if(Lang.hasOwnProperty(oConfig,sProperty)){oProperty=oConfig[sProperty];oProperty.event.unsubscribeAll();oProperty.event=null;}}this.configChangedEvent.unsubscribeAll();this.configChangedEvent=null;this.owner=null;this.config=null;this.initialConfig=null;this.eventQueue=null;}};Config.alreadySubscribed=function(evt,fn,obj){var nSubscribers=evt.subscribers.length,subsc,i;if(nSubscribers>0){i=nSubscribers-1;do{subsc=evt.subscribers[i];if(subsc&&subsc.obj==obj&&subsc.fn==fn){return true;}}while(i--);}return false;};YAHOO.lang.augmentProto(Config,YAHOO.util.EventProvider);}());(function(){YAHOO.widget.Module=function(el,userConfig){if(el){this.init(el,userConfig);}else{}};var Dom=YAHOO.util.Dom,Config=YAHOO.util.Config,Event=YAHOO.util.Event,CustomEvent=YAHOO.util.CustomEvent,Module=YAHOO.widget.Module,UA=YAHOO.env.ua,m_oModuleTemplate,m_oHeaderTemplate,m_oBodyTemplate,m_oFooterTemplate,EVENT_TYPES={BEFORE_INIT:"beforeInit",INIT:"init",APPEND:"append",BEFORE_RENDER:"beforeRender",RENDER:"render",CHANGE_HEADER:"changeHeader",CHANGE_BODY:"changeBody",CHANGE_FOOTER:"changeFooter",CHANGE_CONTENT:"changeContent",DESTROY:"destroy",BEFORE_SHOW:"beforeShow",SHOW:"show",BEFORE_HIDE:"beforeHide",HIDE:"hide"},DEFAULT_CONFIG={VISIBLE:{key:"visible",value:true,validator:YAHOO.lang.isBoolean},EFFECT:{key:"effect",suppressEvent:true,supercedes:["visible"]},MONITOR_RESIZE:{key:"monitorresize",value:true},APPEND_TO_DOCUMENT_BODY:{key:"appendtodocumentbody",value:false}};Module.IMG_ROOT=null;Module.IMG_ROOT_SSL=null;Module.CSS_MODULE="yui-module";Module.CSS_HEADER="hd";Module.CSS_BODY="bd";Module.CSS_FOOTER="ft";Module.RESIZE_MONITOR_SECURE_URL="javascript:false;";Module.RESIZE_MONITOR_BUFFER=1;Module.textResizeEvent=new CustomEvent("textResize");Module.forceDocumentRedraw=function(){var docEl=document.documentElement;if(docEl){docEl.className+=" ";docEl.className=YAHOO.lang.trim(docEl.className);}};function createModuleTemplate(){if(!m_oModuleTemplate){m_oModuleTemplate=document.createElement("div");m_oModuleTemplate.innerHTML=('<div class="'+Module.CSS_HEADER+'"></div><div class="'+Module.CSS_BODY+'"></div><div class="'+Module.CSS_FOOTER+'"></div>');m_oHeaderTemplate=m_oModuleTemplate.firstChild;m_oBodyTemplate=m_oHeaderTemplate.nextSibling;m_oFooterTemplate=m_oBodyTemplate.nextSibling;}return m_oModuleTemplate;}function createHeader(){if(!m_oHeaderTemplate){createModuleTemplate();}return(m_oHeaderTemplate.cloneNode(false));}function createBody(){if(!m_oBodyTemplate){createModuleTemplate();}return(m_oBodyTemplate.cloneNode(false));}function createFooter(){if(!m_oFooterTemplate){createModuleTemplate();}return(m_oFooterTemplate.cloneNode(false));}Module.prototype={constructor:Module,element:null,header:null,body:null,footer:null,id:null,imageRoot:Module.IMG_ROOT,initEvents:function(){var SIGNATURE=CustomEvent.LIST;this.beforeInitEvent=this.createEvent(EVENT_TYPES.BEFORE_INIT);this.beforeInitEvent.signature=SIGNATURE;this.initEvent=this.createEvent(EVENT_TYPES.INIT);this.initEvent.signature=SIGNATURE;this.appendEvent=this.createEvent(EVENT_TYPES.APPEND);this.appendEvent.signature=SIGNATURE;this.beforeRenderEvent=this.createEvent(EVENT_TYPES.BEFORE_RENDER);this.beforeRenderEvent.signature=SIGNATURE;this.renderEvent=this.createEvent(EVENT_TYPES.RENDER);this.renderEvent.signature=SIGNATURE;this.changeHeaderEvent=this.createEvent(EVENT_TYPES.CHANGE_HEADER);this.changeHeaderEvent.signature=SIGNATURE;this.changeBodyEvent=this.createEvent(EVENT_TYPES.CHANGE_BODY);this.changeBodyEvent.signature=SIGNATURE;this.changeFooterEvent=this.createEvent(EVENT_TYPES.CHANGE_FOOTER);this.changeFooterEvent.signature=SIGNATURE;this.changeContentEvent=this.createEvent(EVENT_TYPES.CHANGE_CONTENT);this.changeContentEvent.signature=SIGNATURE;this.destroyEvent=this.createEvent(EVENT_TYPES.DESTROY);this.destroyEvent.signature=SIGNATURE;this.beforeShowEvent=this.createEvent(EVENT_TYPES.BEFORE_SHOW);this.beforeShowEvent.signature=SIGNATURE;this.showEvent=this.createEvent(EVENT_TYPES.SHOW);this.showEvent.signature=SIGNATURE;this.beforeHideEvent=this.createEvent(EVENT_TYPES.BEFORE_HIDE);this.beforeHideEvent.signature=SIGNATURE;this.hideEvent=this.createEvent(EVENT_TYPES.HIDE);this.hideEvent.signature=SIGNATURE;},platform:function(){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("windows")!=-1||ua.indexOf("win32")!=-1){return"windows";}else{if(ua.indexOf("macintosh")!=-1){return"mac";}else{return false;}}}(),browser:function(){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("opera")!=-1){return"opera";}else{if(ua.indexOf("msie 7")!=-1){return"ie7";}else{if(ua.indexOf("msie")!=-1){return"ie";}else{if(ua.indexOf("safari")!=-1){return"safari";}else{if(ua.indexOf("gecko")!=-1){return"gecko";}else{return false;}}}}}}(),isSecure:function(){if(window.location.href.toLowerCase().indexOf("https")===0){return true;}else{return false;}}(),initDefaultConfig:function(){this.cfg.addProperty(DEFAULT_CONFIG.VISIBLE.key,{handler:this.configVisible,value:DEFAULT_CONFIG.VISIBLE.value,validator:DEFAULT_CONFIG.VISIBLE.validator});this.cfg.addProperty(DEFAULT_CONFIG.EFFECT.key,{handler:this.configEffect,suppressEvent:DEFAULT_CONFIG.EFFECT.suppressEvent,supercedes:DEFAULT_CONFIG.EFFECT.supercedes});this.cfg.addProperty(DEFAULT_CONFIG.MONITOR_RESIZE.key,{handler:this.configMonitorResize,value:DEFAULT_CONFIG.MONITOR_RESIZE.value});this.cfg.addProperty(DEFAULT_CONFIG.APPEND_TO_DOCUMENT_BODY.key,{value:DEFAULT_CONFIG.APPEND_TO_DOCUMENT_BODY.value});},init:function(el,userConfig){var elId,child;this.initEvents();this.beforeInitEvent.fire(Module);this.cfg=new Config(this);if(this.isSecure){this.imageRoot=Module.IMG_ROOT_SSL;}if(typeof el=="string"){elId=el;el=document.getElementById(el);if(!el){el=(createModuleTemplate()).cloneNode(false);el.id=elId;}}this.id=Dom.generateId(el);this.element=el;child=this.element.firstChild;if(child){var fndHd=false,fndBd=false,fndFt=false;do{if(1==child.nodeType){if(!fndHd&&Dom.hasClass(child,Module.CSS_HEADER)){this.header=child;fndHd=true;}else{if(!fndBd&&Dom.hasClass(child,Module.CSS_BODY)){this.body=child;fndBd=true;}else{if(!fndFt&&Dom.hasClass(child,Module.CSS_FOOTER)){this.footer=child;fndFt=true;}}}}}while((child=child.nextSibling));}this.initDefaultConfig();Dom.addClass(this.element,Module.CSS_MODULE);if(userConfig){this.cfg.applyConfig(userConfig,true);}if(!Config.alreadySubscribed(this.renderEvent,this.cfg.fireQueue,this.cfg)){this.renderEvent.subscribe(this.cfg.fireQueue,this.cfg,true);}this.initEvent.fire(Module);},initResizeMonitor:function(){var isGeckoWin=(UA.gecko&&this.platform=="windows");if(isGeckoWin){var self=this;setTimeout(function(){self._initResizeMonitor();},0);}else{this._initResizeMonitor();}},_initResizeMonitor:function(){var oDoc,oIFrame,sHTML;function fireTextResize(){Module.textResizeEvent.fire();}if(!UA.opera){oIFrame=Dom.get("_yuiResizeMonitor");var supportsCWResize=this._supportsCWResize();if(!oIFrame){oIFrame=document.createElement("iframe");if(this.isSecure&&Module.RESIZE_MONITOR_SECURE_URL&&UA.ie){oIFrame.src=Module.RESIZE_MONITOR_SECURE_URL;}if(!supportsCWResize){sHTML=["<html><head><script ",'type="text/javascript">',"window.onresize=function(){window.parent.","YAHOO.widget.Module.textResizeEvent.","fire();};<","/script></head>","<body></body></html>"].join("");oIFrame.src="data:text/html;charset=utf-8,"+encodeURIComponent(sHTML);}oIFrame.id="_yuiResizeMonitor";oIFrame.title="Text Resize Monitor";oIFrame.tabIndex=-1;oIFrame.setAttribute("role","presentation");oIFrame.style.position="absolute";oIFrame.style.visibility="hidden";var db=document.body,fc=db.firstChild;if(fc){db.insertBefore(oIFrame,fc);}else{db.appendChild(oIFrame);}oIFrame.style.backgroundColor="transparent";oIFrame.style.borderWidth="0";oIFrame.style.width="2em";oIFrame.style.height="2em";oIFrame.style.left="0";oIFrame.style.top=(-1*(oIFrame.offsetHeight+Module.RESIZE_MONITOR_BUFFER))+"px";oIFrame.style.visibility="visible";if(UA.webkit){oDoc=oIFrame.contentWindow.document;oDoc.open();oDoc.close();}}if(oIFrame&&oIFrame.contentWindow){Module.textResizeEvent.subscribe(this.onDomResize,this,true);if(!Module.textResizeInitialized){if(supportsCWResize){if(!Event.on(oIFrame.contentWindow,"resize",fireTextResize)){Event.on(oIFrame,"resize",fireTextResize);}}Module.textResizeInitialized=true;}this.resizeMonitor=oIFrame;}}},_supportsCWResize:function(){var bSupported=true;if(UA.gecko&&UA.gecko<=1.8){bSupported=false;}return bSupported;},onDomResize:function(e,obj){var nTop=-1*(this.resizeMonitor.offsetHeight+Module.RESIZE_MONITOR_BUFFER);this.resizeMonitor.style.top=nTop+"px";this.resizeMonitor.style.left="0";},setHeader:function(headerContent){var oHeader=this.header||(this.header=createHeader());if(headerContent.nodeName){oHeader.innerHTML="";oHeader.appendChild(headerContent);}else{oHeader.innerHTML=headerContent;}if(this._rendered){this._renderHeader();}this.changeHeaderEvent.fire(headerContent);this.changeContentEvent.fire();},appendToHeader:function(element){var oHeader=this.header||(this.header=createHeader());oHeader.appendChild(element);this.changeHeaderEvent.fire(element);this.changeContentEvent.fire();},setBody:function(bodyContent){var oBody=this.body||(this.body=createBody());if(bodyContent.nodeName){oBody.innerHTML="";oBody.appendChild(bodyContent);}else{oBody.innerHTML=bodyContent;}if(this._rendered){this._renderBody();}this.changeBodyEvent.fire(bodyContent);this.changeContentEvent.fire();},appendToBody:function(element){var oBody=this.body||(this.body=createBody());oBody.appendChild(element);this.changeBodyEvent.fire(element);this.changeContentEvent.fire();},setFooter:function(footerContent){var oFooter=this.footer||(this.footer=createFooter());if(footerContent.nodeName){oFooter.innerHTML="";oFooter.appendChild(footerContent);}else{oFooter.innerHTML=footerContent;}if(this._rendered){this._renderFooter();}this.changeFooterEvent.fire(footerContent);this.changeContentEvent.fire();},appendToFooter:function(element){var oFooter=this.footer||(this.footer=createFooter());oFooter.appendChild(element);this.changeFooterEvent.fire(element);this.changeContentEvent.fire();},render:function(appendToNode,moduleElement){var me=this;function appendTo(parentNode){if(typeof parentNode=="string"){parentNode=document.getElementById(parentNode);}if(parentNode){me._addToParent(parentNode,me.element);me.appendEvent.fire();}}this.beforeRenderEvent.fire();if(!moduleElement){moduleElement=this.element;}if(appendToNode){appendTo(appendToNode);}else{if(!Dom.inDocument(this.element)){return false;}}this._renderHeader(moduleElement);this._renderBody(moduleElement);this._renderFooter(moduleElement);this._rendered=true;this.renderEvent.fire();return true;},_renderHeader:function(moduleElement){moduleElement=moduleElement||this.element;if(this.header&&!Dom.inDocument(this.header)){var firstChild=moduleElement.firstChild;if(firstChild){moduleElement.insertBefore(this.header,firstChild);}else{moduleElement.appendChild(this.header);}}},_renderBody:function(moduleElement){moduleElement=moduleElement||this.element;if(this.body&&!Dom.inDocument(this.body)){if(this.footer&&Dom.isAncestor(moduleElement,this.footer)){moduleElement.insertBefore(this.body,this.footer);}else{moduleElement.appendChild(this.body);}}},_renderFooter:function(moduleElement){moduleElement=moduleElement||this.element;if(this.footer&&!Dom.inDocument(this.footer)){moduleElement.appendChild(this.footer);}},destroy:function(shallowPurge){var parent,purgeChildren=!(shallowPurge);if(this.element){Event.purgeElement(this.element,purgeChildren);parent=this.element.parentNode;}if(parent){parent.removeChild(this.element);}this.element=null;this.header=null;this.body=null;this.footer=null;Module.textResizeEvent.unsubscribe(this.onDomResize,this);this.cfg.destroy();this.cfg=null;this.destroyEvent.fire();},show:function(){this.cfg.setProperty("visible",true);},hide:function(){this.cfg.setProperty("visible",false);},configVisible:function(type,args,obj){var visible=args[0];if(visible){if(this.beforeShowEvent.fire()){Dom.setStyle(this.element,"display","block");this.showEvent.fire();}}else{if(this.beforeHideEvent.fire()){Dom.setStyle(this.element,"display","none");this.hideEvent.fire();}}},configEffect:function(type,args,obj){this._cachedEffects=(this.cacheEffects)?this._createEffects(args[0]):null;},cacheEffects:true,_createEffects:function(effectCfg){var effectInstances=null,n,i,eff;if(effectCfg){if(effectCfg instanceof Array){effectInstances=[];n=effectCfg.length;for(i=0;i<n;i++){eff=effectCfg[i];if(eff.effect){effectInstances[effectInstances.length]=eff.effect(this,eff.duration);}}}else{if(effectCfg.effect){effectInstances=[effectCfg.effect(this,effectCfg.duration)];}}}return effectInstances;},configMonitorResize:function(type,args,obj){var monitor=args[0];if(monitor){this.initResizeMonitor();}else{Module.textResizeEvent.unsubscribe(this.onDomResize,this,true);this.resizeMonitor=null;}},_addToParent:function(parentNode,element){if(!this.cfg.getProperty("appendtodocumentbody")&&parentNode===document.body&&parentNode.firstChild){parentNode.insertBefore(element,parentNode.firstChild);}else{parentNode.appendChild(element);}},toString:function(){return"Module "+this.id;}};YAHOO.lang.augmentProto(Module,YAHOO.util.EventProvider);}());(function(){YAHOO.widget.Overlay=function(el,userConfig){YAHOO.widget.Overlay.superclass.constructor.call(this,el,userConfig);};var Lang=YAHOO.lang,CustomEvent=YAHOO.util.CustomEvent,Module=YAHOO.widget.Module,Event=YAHOO.util.Event,Dom=YAHOO.util.Dom,Config=YAHOO.util.Config,UA=YAHOO.env.ua,Overlay=YAHOO.widget.Overlay,_SUBSCRIBE="subscribe",_UNSUBSCRIBE="unsubscribe",_CONTAINED="contained",m_oIFrameTemplate,EVENT_TYPES={BEFORE_MOVE:"beforeMove",MOVE:"move"},DEFAULT_CONFIG={X:{key:"x",validator:Lang.isNumber,suppressEvent:true,supercedes:["iframe"]},Y:{key:"y",validator:Lang.isNumber,suppressEvent:true,supercedes:["iframe"]},XY:{key:"xy",suppressEvent:true,supercedes:["iframe"]},CONTEXT:{key:"context",suppressEvent:true,supercedes:["iframe"]},FIXED_CENTER:{key:"fixedcenter",value:false,supercedes:["iframe","visible"]},WIDTH:{key:"width",suppressEvent:true,supercedes:["context","fixedcenter","iframe"]},HEIGHT:{key:"height",suppressEvent:true,supercedes:["context","fixedcenter","iframe"]},AUTO_FILL_HEIGHT:{key:"autofillheight",supercedes:["height"],value:"body"},ZINDEX:{key:"zindex",value:null},CONSTRAIN_TO_VIEWPORT:{key:"constraintoviewport",value:false,validator:Lang.isBoolean,supercedes:["iframe","x","y","xy"]},IFRAME:{key:"iframe",value:(UA.ie==6?true:false),validator:Lang.isBoolean,supercedes:["zindex"]},PREVENT_CONTEXT_OVERLAP:{key:"preventcontextoverlap",value:false,validator:Lang.isBoolean,supercedes:["constraintoviewport"]}};Overlay.IFRAME_SRC="javascript:false;";Overlay.IFRAME_OFFSET=3;Overlay.VIEWPORT_OFFSET=10;Overlay.TOP_LEFT="tl";Overlay.TOP_RIGHT="tr";Overlay.BOTTOM_LEFT="bl";Overlay.BOTTOM_RIGHT="br";Overlay.PREVENT_OVERLAP_X={tltr:true,blbr:true,brbl:true,trtl:true};Overlay.PREVENT_OVERLAP_Y={trbr:true,tlbl:true,bltl:true,brtr:true};Overlay.CSS_OVERLAY="yui-overlay";Overlay.CSS_HIDDEN="yui-overlay-hidden";Overlay.CSS_IFRAME="yui-overlay-iframe";Overlay.STD_MOD_RE=/^\s*?(body|footer|header)\s*?$/i;Overlay.windowScrollEvent=new CustomEvent("windowScroll");Overlay.windowResizeEvent=new CustomEvent("windowResize");Overlay.windowScrollHandler=function(e){var t=Event.getTarget(e);if(!t||t===window||t===window.document){if(UA.ie){if(!window.scrollEnd){window.scrollEnd=-1;}clearTimeout(window.scrollEnd);window.scrollEnd=setTimeout(function(){Overlay.windowScrollEvent.fire();},1);}else{Overlay.windowScrollEvent.fire();}}};Overlay.windowResizeHandler=function(e){if(UA.ie){if(!window.resizeEnd){window.resizeEnd=-1;}clearTimeout(window.resizeEnd);window.resizeEnd=setTimeout(function(){Overlay.windowResizeEvent.fire();},100);}else{Overlay.windowResizeEvent.fire();}};Overlay._initialized=null;if(Overlay._initialized===null){Event.on(window,"scroll",Overlay.windowScrollHandler);Event.on(window,"resize",Overlay.windowResizeHandler);Overlay._initialized=true;}Overlay._TRIGGER_MAP={windowScroll:Overlay.windowScrollEvent,windowResize:Overlay.windowResizeEvent,textResize:Module.textResizeEvent};YAHOO.extend(Overlay,Module,{CONTEXT_TRIGGERS:[],init:function(el,userConfig){Overlay.superclass.init.call(this,el);this.beforeInitEvent.fire(Overlay);Dom.addClass(this.element,Overlay.CSS_OVERLAY);if(userConfig){this.cfg.applyConfig(userConfig,true);}if(this.platform=="mac"&&UA.gecko){if(!Config.alreadySubscribed(this.showEvent,this.showMacGeckoScrollbars,this)){this.showEvent.subscribe(this.showMacGeckoScrollbars,this,true);}if(!Config.alreadySubscribed(this.hideEvent,this.hideMacGeckoScrollbars,this)){this.hideEvent.subscribe(this.hideMacGeckoScrollbars,this,true);}}this.initEvent.fire(Overlay);},initEvents:function(){Overlay.superclass.initEvents.call(this);var SIGNATURE=CustomEvent.LIST;this.beforeMoveEvent=this.createEvent(EVENT_TYPES.BEFORE_MOVE);this.beforeMoveEvent.signature=SIGNATURE;this.moveEvent=this.createEvent(EVENT_TYPES.MOVE);this.moveEvent.signature=SIGNATURE;},initDefaultConfig:function(){Overlay.superclass.initDefaultConfig.call(this);var cfg=this.cfg;cfg.addProperty(DEFAULT_CONFIG.X.key,{handler:this.configX,validator:DEFAULT_CONFIG.X.validator,suppressEvent:DEFAULT_CONFIG.X.suppressEvent,supercedes:DEFAULT_CONFIG.X.supercedes});cfg.addProperty(DEFAULT_CONFIG.Y.key,{handler:this.configY,validator:DEFAULT_CONFIG.Y.validator,suppressEvent:DEFAULT_CONFIG.Y.suppressEvent,supercedes:DEFAULT_CONFIG.Y.supercedes});cfg.addProperty(DEFAULT_CONFIG.XY.key,{handler:this.configXY,suppressEvent:DEFAULT_CONFIG.XY.suppressEvent,supercedes:DEFAULT_CONFIG.XY.supercedes});cfg.addProperty(DEFAULT_CONFIG.CONTEXT.key,{handler:this.configContext,suppressEvent:DEFAULT_CONFIG.CONTEXT.suppressEvent,supercedes:DEFAULT_CONFIG.CONTEXT.supercedes});cfg.addProperty(DEFAULT_CONFIG.FIXED_CENTER.key,{handler:this.configFixedCenter,value:DEFAULT_CONFIG.FIXED_CENTER.value,validator:DEFAULT_CONFIG.FIXED_CENTER.validator,supercedes:DEFAULT_CONFIG.FIXED_CENTER.supercedes});cfg.addProperty(DEFAULT_CONFIG.WIDTH.key,{handler:this.configWidth,suppressEvent:DEFAULT_CONFIG.WIDTH.suppressEvent,supercedes:DEFAULT_CONFIG.WIDTH.supercedes});cfg.addProperty(DEFAULT_CONFIG.HEIGHT.key,{handler:this.configHeight,suppressEvent:DEFAULT_CONFIG.HEIGHT.suppressEvent,supercedes:DEFAULT_CONFIG.HEIGHT.supercedes});cfg.addProperty(DEFAULT_CONFIG.AUTO_FILL_HEIGHT.key,{handler:this.configAutoFillHeight,value:DEFAULT_CONFIG.AUTO_FILL_HEIGHT.value,validator:this._validateAutoFill,supercedes:DEFAULT_CONFIG.AUTO_FILL_HEIGHT.supercedes});cfg.addProperty(DEFAULT_CONFIG.ZINDEX.key,{handler:this.configzIndex,value:DEFAULT_CONFIG.ZINDEX.value});cfg.addProperty(DEFAULT_CONFIG.CONSTRAIN_TO_VIEWPORT.key,{handler:this.configConstrainToViewport,value:DEFAULT_CONFIG.CONSTRAIN_TO_VIEWPORT.value,validator:DEFAULT_CONFIG.CONSTRAIN_TO_VIEWPORT.validator,supercedes:DEFAULT_CONFIG.CONSTRAIN_TO_VIEWPORT.supercedes});cfg.addProperty(DEFAULT_CONFIG.IFRAME.key,{handler:this.configIframe,value:DEFAULT_CONFIG.IFRAME.value,validator:DEFAULT_CONFIG.IFRAME.validator,supercedes:DEFAULT_CONFIG.IFRAME.supercedes});cfg.addProperty(DEFAULT_CONFIG.PREVENT_CONTEXT_OVERLAP.key,{value:DEFAULT_CONFIG.PREVENT_CONTEXT_OVERLAP.value,validator:DEFAULT_CONFIG.PREVENT_CONTEXT_OVERLAP.validator,supercedes:DEFAULT_CONFIG.PREVENT_CONTEXT_OVERLAP.supercedes});},moveTo:function(x,y){this.cfg.setProperty("xy",[x,y]);},hideMacGeckoScrollbars:function(){Dom.replaceClass(this.element,"show-scrollbars","hide-scrollbars");},showMacGeckoScrollbars:function(){Dom.replaceClass(this.element,"hide-scrollbars","show-scrollbars");},_setDomVisibility:function(show){Dom.setStyle(this.element,"visibility",(show)?"visible":"hidden");var hiddenClass=Overlay.CSS_HIDDEN;if(show){Dom.removeClass(this.element,hiddenClass);}else{Dom.addClass(this.element,hiddenClass);}},configVisible:function(type,args,obj){var visible=args[0],currentVis=Dom.getStyle(this.element,"visibility"),effects=this._cachedEffects||this._createEffects(this.cfg.getProperty("effect")),isMacGecko=(this.platform=="mac"&&UA.gecko),alreadySubscribed=Config.alreadySubscribed,ei,e,j,k,h,nEffectInstances;if(currentVis=="inherit"){e=this.element.parentNode;while(e.nodeType!=9&&e.nodeType!=11){currentVis=Dom.getStyle(e,"visibility");if(currentVis!="inherit"){break;}e=e.parentNode;}if(currentVis=="inherit"){currentVis="visible";}}if(visible){if(isMacGecko){this.showMacGeckoScrollbars();}if(effects){if(visible){if(currentVis!="visible"||currentVis===""||this._fadingOut){if(this.beforeShowEvent.fire()){nEffectInstances=effects.length;for(j=0;j<nEffectInstances;j++){ei=effects[j];if(j===0&&!alreadySubscribed(ei.animateInCompleteEvent,this.showEvent.fire,this.showEvent)){ei.animateInCompleteEvent.subscribe(this.showEvent.fire,this.showEvent,true);}ei.animateIn();}}}}}else{if(currentVis!="visible"||currentVis===""){if(this.beforeShowEvent.fire()){this._setDomVisibility(true);this.cfg.refireEvent("iframe");this.showEvent.fire();}}else{this._setDomVisibility(true);}}}else{if(isMacGecko){this.hideMacGeckoScrollbars();}if(effects){if(currentVis=="visible"||this._fadingIn){if(this.beforeHideEvent.fire()){nEffectInstances=effects.length;for(k=0;k<nEffectInstances;k++){h=effects[k];if(k===0&&!alreadySubscribed(h.animateOutCompleteEvent,this.hideEvent.fire,this.hideEvent)){h.animateOutCompleteEvent.subscribe(this.hideEvent.fire,this.hideEvent,true);}h.animateOut();}}}else{if(currentVis===""){this._setDomVisibility(false);}}}else{if(currentVis=="visible"||currentVis===""){if(this.beforeHideEvent.fire()){this._setDomVisibility(false);this.hideEvent.fire();}}else{this._setDomVisibility(false);}}}},doCenterOnDOMEvent:function(){var cfg=this.cfg,fc=cfg.getProperty("fixedcenter");if(cfg.getProperty("visible")){if(fc&&(fc!==_CONTAINED||this.fitsInViewport())){this.center();}}},fitsInViewport:function(){var nViewportOffset=Overlay.VIEWPORT_OFFSET,element=this.element,elementWidth=element.offsetWidth,elementHeight=element.offsetHeight,viewportWidth=Dom.getViewportWidth(),viewportHeight=Dom.getViewportHeight();return((elementWidth+nViewportOffset<viewportWidth)&&(elementHeight+nViewportOffset<viewportHeight));},configFixedCenter:function(type,args,obj){var val=args[0],alreadySubscribed=Config.alreadySubscribed,windowResizeEvent=Overlay.windowResizeEvent,windowScrollEvent=Overlay.windowScrollEvent;if(val){this.center();if(!alreadySubscribed(this.beforeShowEvent,this.center)){this.beforeShowEvent.subscribe(this.center);}if(!alreadySubscribed(windowResizeEvent,this.doCenterOnDOMEvent,this)){windowResizeEvent.subscribe(this.doCenterOnDOMEvent,this,true);}if(!alreadySubscribed(windowScrollEvent,this.doCenterOnDOMEvent,this)){windowScrollEvent.subscribe(this.doCenterOnDOMEvent,this,true);}}else{this.beforeShowEvent.unsubscribe(this.center);windowResizeEvent.unsubscribe(this.doCenterOnDOMEvent,this);windowScrollEvent.unsubscribe(this.doCenterOnDOMEvent,this);}},configHeight:function(type,args,obj){var height=args[0],el=this.element;Dom.setStyle(el,"height",height);this.cfg.refireEvent("iframe");},configAutoFillHeight:function(type,args,obj){var fillEl=args[0],cfg=this.cfg,autoFillHeight="autofillheight",height="height",currEl=cfg.getProperty(autoFillHeight),autoFill=this._autoFillOnHeightChange;cfg.unsubscribeFromConfigEvent(height,autoFill);Module.textResizeEvent.unsubscribe(autoFill);this.changeContentEvent.unsubscribe(autoFill);if(currEl&&fillEl!==currEl&&this[currEl]){Dom.setStyle(this[currEl],height,"");}if(fillEl){fillEl=Lang.trim(fillEl.toLowerCase());cfg.subscribeToConfigEvent(height,autoFill,this[fillEl],this);Module.textResizeEvent.subscribe(autoFill,this[fillEl],this);this.changeContentEvent.subscribe(autoFill,this[fillEl],this);cfg.setProperty(autoFillHeight,fillEl,true);}},configWidth:function(type,args,obj){var width=args[0],el=this.element;Dom.setStyle(el,"width",width);this.cfg.refireEvent("iframe");},configzIndex:function(type,args,obj){var zIndex=args[0],el=this.element;if(!zIndex){zIndex=Dom.getStyle(el,"zIndex");if(!zIndex||isNaN(zIndex)){zIndex=0;}}if(this.iframe||this.cfg.getProperty("iframe")===true){if(zIndex<=0){zIndex=1;}}Dom.setStyle(el,"zIndex",zIndex);this.cfg.setProperty("zIndex",zIndex,true);if(this.iframe){this.stackIframe();}},configXY:function(type,args,obj){var pos=args[0],x=pos[0],y=pos[1];this.cfg.setProperty("x",x);this.cfg.setProperty("y",y);this.beforeMoveEvent.fire([x,y]);x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");this.cfg.refireEvent("iframe");this.moveEvent.fire([x,y]);},configX:function(type,args,obj){var x=args[0],y=this.cfg.getProperty("y");this.cfg.setProperty("x",x,true);this.cfg.setProperty("y",y,true);this.beforeMoveEvent.fire([x,y]);x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");Dom.setX(this.element,x,true);this.cfg.setProperty("xy",[x,y],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([x,y]);},configY:function(type,args,obj){var x=this.cfg.getProperty("x"),y=args[0];this.cfg.setProperty("x",x,true);this.cfg.setProperty("y",y,true);this.beforeMoveEvent.fire([x,y]);x=this.cfg.getProperty("x");y=this.cfg.getProperty("y");Dom.setY(this.element,y,true);this.cfg.setProperty("xy",[x,y],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([x,y]);},showIframe:function(){var oIFrame=this.iframe,oParentNode;if(oIFrame){oParentNode=this.element.parentNode;if(oParentNode!=oIFrame.parentNode){this._addToParent(oParentNode,oIFrame);}oIFrame.style.display="block";}},hideIframe:function(){if(this.iframe){this.iframe.style.display="none";}},syncIframe:function(){var oIFrame=this.iframe,oElement=this.element,nOffset=Overlay.IFRAME_OFFSET,nDimensionOffset=(nOffset*2),aXY;if(oIFrame){oIFrame.style.width=(oElement.offsetWidth+nDimensionOffset+"px");oIFrame.style.height=(oElement.offsetHeight+nDimensionOffset+"px");aXY=this.cfg.getProperty("xy");if(!Lang.isArray(aXY)||(isNaN(aXY[0])||isNaN(aXY[1]))){this.syncPosition();aXY=this.cfg.getProperty("xy");}Dom.setXY(oIFrame,[(aXY[0]-nOffset),(aXY[1]-nOffset)]);}},stackIframe:function(){if(this.iframe){var overlayZ=Dom.getStyle(this.element,"zIndex");if(!YAHOO.lang.isUndefined(overlayZ)&&!isNaN(overlayZ)){Dom.setStyle(this.iframe,"zIndex",(overlayZ-1));}}},configIframe:function(type,args,obj){var bIFrame=args[0];function createIFrame(){var oIFrame=this.iframe,oElement=this.element,oParent;if(!oIFrame){if(!m_oIFrameTemplate){m_oIFrameTemplate=document.createElement("iframe");if(this.isSecure){m_oIFrameTemplate.src=Overlay.IFRAME_SRC;}if(UA.ie){m_oIFrameTemplate.style.filter="alpha(opacity=0)";m_oIFrameTemplate.frameBorder=0;}else{m_oIFrameTemplate.style.opacity="0";}m_oIFrameTemplate.style.position="absolute";m_oIFrameTemplate.style.border="none";m_oIFrameTemplate.style.margin="0";m_oIFrameTemplate.style.padding="0";m_oIFrameTemplate.style.display="none";m_oIFrameTemplate.tabIndex=-1;m_oIFrameTemplate.className=Overlay.CSS_IFRAME;}oIFrame=m_oIFrameTemplate.cloneNode(false);oIFrame.id=this.id+"_f";oParent=oElement.parentNode;var parentNode=oParent||document.body;this._addToParent(parentNode,oIFrame);this.iframe=oIFrame;}this.showIframe();this.syncIframe();this.stackIframe();if(!this._hasIframeEventListeners){this.showEvent.subscribe(this.showIframe);this.hideEvent.subscribe(this.hideIframe);this.changeContentEvent.subscribe(this.syncIframe);this._hasIframeEventListeners=true;}}function onBeforeShow(){createIFrame.call(this);this.beforeShowEvent.unsubscribe(onBeforeShow);this._iframeDeferred=false;}if(bIFrame){if(this.cfg.getProperty("visible")){createIFrame.call(this);}else{if(!this._iframeDeferred){this.beforeShowEvent.subscribe(onBeforeShow);this._iframeDeferred=true;}}}else{this.hideIframe();if(this._hasIframeEventListeners){this.showEvent.unsubscribe(this.showIframe);this.hideEvent.unsubscribe(this.hideIframe);this.changeContentEvent.unsubscribe(this.syncIframe);this._hasIframeEventListeners=false;}}},_primeXYFromDOM:function(){if(YAHOO.lang.isUndefined(this.cfg.getProperty("xy"))){this.syncPosition();this.cfg.refireEvent("xy");this.beforeShowEvent.unsubscribe(this._primeXYFromDOM);}},configConstrainToViewport:function(type,args,obj){var val=args[0];if(val){if(!Config.alreadySubscribed(this.beforeMoveEvent,this.enforceConstraints,this)){this.beforeMoveEvent.subscribe(this.enforceConstraints,this,true);}if(!Config.alreadySubscribed(this.beforeShowEvent,this._primeXYFromDOM)){this.beforeShowEvent.subscribe(this._primeXYFromDOM);}}else{this.beforeShowEvent.unsubscribe(this._primeXYFromDOM);this.beforeMoveEvent.unsubscribe(this.enforceConstraints,this);}},configContext:function(type,args,obj){var contextArgs=args[0],contextEl,elementMagnetCorner,contextMagnetCorner,triggers,offset,defTriggers=this.CONTEXT_TRIGGERS;if(contextArgs){contextEl=contextArgs[0];elementMagnetCorner=contextArgs[1];contextMagnetCorner=contextArgs[2];triggers=contextArgs[3];offset=contextArgs[4];if(defTriggers&&defTriggers.length>0){triggers=(triggers||[]).concat(defTriggers);}if(contextEl){if(typeof contextEl=="string"){this.cfg.setProperty("context",[document.getElementById(contextEl),elementMagnetCorner,contextMagnetCorner,triggers,offset],true);}if(elementMagnetCorner&&contextMagnetCorner){this.align(elementMagnetCorner,contextMagnetCorner,offset);}if(this._contextTriggers){this._processTriggers(this._contextTriggers,_UNSUBSCRIBE,this._alignOnTrigger);}if(triggers){this._processTriggers(triggers,_SUBSCRIBE,this._alignOnTrigger);this._contextTriggers=triggers;}}}},_alignOnTrigger:function(type,args){this.align();},_findTriggerCE:function(t){var tce=null;if(t instanceof CustomEvent){tce=t;}else{if(Overlay._TRIGGER_MAP[t]){tce=Overlay._TRIGGER_MAP[t];}}return tce;},_processTriggers:function(triggers,mode,fn){var t,tce;for(var i=0,l=triggers.length;i<l;++i){t=triggers[i];tce=this._findTriggerCE(t);if(tce){tce[mode](fn,this,true);}else{this[mode](t,fn);}}},align:function(elementAlign,contextAlign,xyOffset){var contextArgs=this.cfg.getProperty("context"),me=this,context,element,contextRegion;function doAlign(v,h){var alignX=null,alignY=null;switch(elementAlign){case Overlay.TOP_LEFT:alignX=h;alignY=v;break;case Overlay.TOP_RIGHT:alignX=h-element.offsetWidth;alignY=v;break;case Overlay.BOTTOM_LEFT:alignX=h;alignY=v-element.offsetHeight;break;case Overlay.BOTTOM_RIGHT:alignX=h-element.offsetWidth;alignY=v-element.offsetHeight;break;}if(alignX!==null&&alignY!==null){if(xyOffset){alignX+=xyOffset[0];alignY+=xyOffset[1];}me.moveTo(alignX,alignY);}}if(contextArgs){context=contextArgs[0];element=this.element;me=this;if(!elementAlign){elementAlign=contextArgs[1];}if(!contextAlign){contextAlign=contextArgs[2];}if(!xyOffset&&contextArgs[4]){xyOffset=contextArgs[4];}if(element&&context){contextRegion=Dom.getRegion(context);switch(contextAlign){case Overlay.TOP_LEFT:doAlign(contextRegion.top,contextRegion.left);break;case Overlay.TOP_RIGHT:doAlign(contextRegion.top,contextRegion.right);break;case Overlay.BOTTOM_LEFT:doAlign(contextRegion.bottom,contextRegion.left);break;case Overlay.BOTTOM_RIGHT:doAlign(contextRegion.bottom,contextRegion.right);break;}}}},enforceConstraints:function(type,args,obj){var pos=args[0];var cXY=this.getConstrainedXY(pos[0],pos[1]);this.cfg.setProperty("x",cXY[0],true);this.cfg.setProperty("y",cXY[1],true);this.cfg.setProperty("xy",cXY,true);},_getConstrainedPos:function(pos,val){var overlayEl=this.element,buffer=Overlay.VIEWPORT_OFFSET,x=(pos=="x"),overlaySize=(x)?overlayEl.offsetWidth:overlayEl.offsetHeight,viewportSize=(x)?Dom.getViewportWidth():Dom.getViewportHeight(),docScroll=(x)?Dom.getDocumentScrollLeft():Dom.getDocumentScrollTop(),overlapPositions=(x)?Overlay.PREVENT_OVERLAP_X:Overlay.PREVENT_OVERLAP_Y,context=this.cfg.getProperty("context"),bOverlayFitsInViewport=(overlaySize+buffer<viewportSize),bPreventContextOverlap=this.cfg.getProperty("preventcontextoverlap")&&context&&overlapPositions[(context[1]+context[2])],minConstraint=docScroll+buffer,maxConstraint=docScroll+viewportSize-overlaySize-buffer,constrainedVal=val;if(val<minConstraint||val>maxConstraint){if(bPreventContextOverlap){constrainedVal=this._preventOverlap(pos,context[0],overlaySize,viewportSize,docScroll);}else{if(bOverlayFitsInViewport){if(val<minConstraint){constrainedVal=minConstraint;}else{if(val>maxConstraint){constrainedVal=maxConstraint;}}}else{constrainedVal=minConstraint;}}}return constrainedVal;},_preventOverlap:function(pos,contextEl,overlaySize,viewportSize,docScroll){var x=(pos=="x"),buffer=Overlay.VIEWPORT_OFFSET,overlay=this,contextElPos=((x)?Dom.getX(contextEl):Dom.getY(contextEl))-docScroll,contextElSize=(x)?contextEl.offsetWidth:contextEl.offsetHeight,minRegionSize=contextElPos-buffer,maxRegionSize=(viewportSize-(contextElPos+contextElSize))-buffer,bFlipped=false,flip=function(){var flippedVal;if((overlay.cfg.getProperty(pos)-docScroll)>contextElPos){flippedVal=(contextElPos-overlaySize);}else{flippedVal=(contextElPos+contextElSize);}overlay.cfg.setProperty(pos,(flippedVal+docScroll),true);return flippedVal;},setPosition=function(){var displayRegionSize=((overlay.cfg.getProperty(pos)-docScroll)>contextElPos)?maxRegionSize:minRegionSize,position;if(overlaySize>displayRegionSize){if(bFlipped){flip();}else{flip();bFlipped=true;position=setPosition();}}return position;};setPosition();return this.cfg.getProperty(pos);},getConstrainedX:function(x){return this._getConstrainedPos("x",x);},getConstrainedY:function(y){return this._getConstrainedPos("y",y);},getConstrainedXY:function(x,y){return[this.getConstrainedX(x),this.getConstrainedY(y)];},center:function(){var nViewportOffset=Overlay.VIEWPORT_OFFSET,elementWidth=this.element.offsetWidth,elementHeight=this.element.offsetHeight,viewPortWidth=Dom.getViewportWidth(),viewPortHeight=Dom.getViewportHeight(),x,y;if(elementWidth<viewPortWidth){x=(viewPortWidth/2)-(elementWidth/2)+Dom.getDocumentScrollLeft();}else{x=nViewportOffset+Dom.getDocumentScrollLeft();}if(elementHeight<viewPortHeight){y=(viewPortHeight/2)-(elementHeight/2)+Dom.getDocumentScrollTop();}else{y=nViewportOffset+Dom.getDocumentScrollTop();}this.cfg.setProperty("xy",[parseInt(x,10),parseInt(y,10)]);this.cfg.refireEvent("iframe");if(UA.webkit){this.forceContainerRedraw();}},syncPosition:function(){var pos=Dom.getXY(this.element);this.cfg.setProperty("x",pos[0],true);this.cfg.setProperty("y",pos[1],true);this.cfg.setProperty("xy",pos,true);},onDomResize:function(e,obj){var me=this;Overlay.superclass.onDomResize.call(this,e,obj);setTimeout(function(){me.syncPosition();me.cfg.refireEvent("iframe");me.cfg.refireEvent("context");},0);},_getComputedHeight:(function(){if(document.defaultView&&document.defaultView.getComputedStyle){return function(el){var height=null;if(el.ownerDocument&&el.ownerDocument.defaultView){var computed=el.ownerDocument.defaultView.getComputedStyle(el,"");if(computed){height=parseInt(computed.height,10);}}return(Lang.isNumber(height))?height:null;};}else{return function(el){var height=null;if(el.style.pixelHeight){height=el.style.pixelHeight;}return(Lang.isNumber(height))?height:null;};}})(),_validateAutoFillHeight:function(val){return(!val)||(Lang.isString(val)&&Overlay.STD_MOD_RE.test(val));},_autoFillOnHeightChange:function(type,args,el){var height=this.cfg.getProperty("height");if((height&&height!=="auto")||(height===0)){this.fillHeight(el);}},_getPreciseHeight:function(el){var height=el.offsetHeight;if(el.getBoundingClientRect){var rect=el.getBoundingClientRect();height=rect.bottom-rect.top;}return height;},fillHeight:function(el){if(el){var container=this.innerElement||this.element,containerEls=[this.header,this.body,this.footer],containerEl,total=0,filled=0,remaining=0,validEl=false;for(var i=0,l=containerEls.length;i<l;i++){containerEl=containerEls[i];if(containerEl){if(el!==containerEl){filled+=this._getPreciseHeight(containerEl);}else{validEl=true;}}}if(validEl){if(UA.ie||UA.opera){Dom.setStyle(el,"height",0+"px");}total=this._getComputedHeight(container);if(total===null){Dom.addClass(container,"yui-override-padding");total=container.clientHeight;Dom.removeClass(container,"yui-override-padding");}remaining=Math.max(total-filled,0);Dom.setStyle(el,"height",remaining+"px");if(el.offsetHeight!=remaining){remaining=Math.max(remaining-(el.offsetHeight-remaining),0);}Dom.setStyle(el,"height",remaining+"px");}}},bringToTop:function(){var aOverlays=[],oElement=this.element;function compareZIndexDesc(p_oOverlay1,p_oOverlay2){var sZIndex1=Dom.getStyle(p_oOverlay1,"zIndex"),sZIndex2=Dom.getStyle(p_oOverlay2,"zIndex"),nZIndex1=(!sZIndex1||isNaN(sZIndex1))?0:parseInt(sZIndex1,10),nZIndex2=(!sZIndex2||isNaN(sZIndex2))?0:parseInt(sZIndex2,10);if(nZIndex1>nZIndex2){return -1;}else{if(nZIndex1<nZIndex2){return 1;}else{return 0;}}}function isOverlayElement(p_oElement){var isOverlay=Dom.hasClass(p_oElement,Overlay.CSS_OVERLAY),Panel=YAHOO.widget.Panel;if(isOverlay&&!Dom.isAncestor(oElement,p_oElement)){if(Panel&&Dom.hasClass(p_oElement,Panel.CSS_PANEL)){aOverlays[aOverlays.length]=p_oElement.parentNode;}else{aOverlays[aOverlays.length]=p_oElement;}}}Dom.getElementsBy(isOverlayElement,"div",document.body);aOverlays.sort(compareZIndexDesc);var oTopOverlay=aOverlays[0],nTopZIndex;if(oTopOverlay){nTopZIndex=Dom.getStyle(oTopOverlay,"zIndex");if(!isNaN(nTopZIndex)){var bRequiresBump=false;if(oTopOverlay!=oElement){bRequiresBump=true;}else{if(aOverlays.length>1){var nNextZIndex=Dom.getStyle(aOverlays[1],"zIndex");if(!isNaN(nNextZIndex)&&(nTopZIndex==nNextZIndex)){bRequiresBump=true;}}}if(bRequiresBump){this.cfg.setProperty("zindex",(parseInt(nTopZIndex,10)+2));}}}},destroy:function(shallowPurge){if(this.iframe){this.iframe.parentNode.removeChild(this.iframe);}this.iframe=null;Overlay.windowResizeEvent.unsubscribe(this.doCenterOnDOMEvent,this);Overlay.windowScrollEvent.unsubscribe(this.doCenterOnDOMEvent,this);Module.textResizeEvent.unsubscribe(this._autoFillOnHeightChange);if(this._contextTriggers){this._processTriggers(this._contextTriggers,_UNSUBSCRIBE,this._alignOnTrigger);}Overlay.superclass.destroy.call(this,shallowPurge);},forceContainerRedraw:function(){var c=this;Dom.addClass(c.element,"yui-force-redraw");setTimeout(function(){Dom.removeClass(c.element,"yui-force-redraw");},0);},toString:function(){return"Overlay "+this.id;}});}());(function(){YAHOO.widget.OverlayManager=function(userConfig){this.init(userConfig);};var Overlay=YAHOO.widget.Overlay,Event=YAHOO.util.Event,Dom=YAHOO.util.Dom,Config=YAHOO.util.Config,CustomEvent=YAHOO.util.CustomEvent,OverlayManager=YAHOO.widget.OverlayManager;OverlayManager.CSS_FOCUSED="focused";OverlayManager.prototype={constructor:OverlayManager,overlays:null,initDefaultConfig:function(){this.cfg.addProperty("overlays",{suppressEvent:true});this.cfg.addProperty("focusevent",{value:"mousedown"});},init:function(userConfig){this.cfg=new Config(this);this.initDefaultConfig();if(userConfig){this.cfg.applyConfig(userConfig,true);}this.cfg.fireQueue();var activeOverlay=null;this.getActive=function(){return activeOverlay;};this.focus=function(overlay){var o=this.find(overlay);if(o){o.focus();}};this.remove=function(overlay){var o=this.find(overlay),originalZ;if(o){if(activeOverlay==o){activeOverlay=null;}var bDestroyed=(o.element===null&&o.cfg===null)?true:false;if(!bDestroyed){originalZ=Dom.getStyle(o.element,"zIndex");o.cfg.setProperty("zIndex",-1000,true);}this.overlays.sort(this.compareZIndexDesc);this.overlays=this.overlays.slice(0,(this.overlays.length-1));o.hideEvent.unsubscribe(o.blur);o.destroyEvent.unsubscribe(this._onOverlayDestroy,o);o.focusEvent.unsubscribe(this._onOverlayFocusHandler,o);o.blurEvent.unsubscribe(this._onOverlayBlurHandler,o);if(!bDestroyed){Event.removeListener(o.element,this.cfg.getProperty("focusevent"),this._onOverlayElementFocus);o.cfg.setProperty("zIndex",originalZ,true);o.cfg.setProperty("manager",null);}if(o.focusEvent._managed){o.focusEvent=null;}if(o.blurEvent._managed){o.blurEvent=null;}if(o.focus._managed){o.focus=null;}if(o.blur._managed){o.blur=null;}}};this.blurAll=function(){var nOverlays=this.overlays.length,i;if(nOverlays>0){i=nOverlays-1;do{this.overlays[i].blur();}while(i--);}};this._manageBlur=function(overlay){var changed=false;if(activeOverlay==overlay){Dom.removeClass(activeOverlay.element,OverlayManager.CSS_FOCUSED);activeOverlay=null;changed=true;}return changed;};this._manageFocus=function(overlay){var changed=false;if(activeOverlay!=overlay){if(activeOverlay){activeOverlay.blur();}activeOverlay=overlay;this.bringToTop(activeOverlay);Dom.addClass(activeOverlay.element,OverlayManager.CSS_FOCUSED);changed=true;}return changed;};var overlays=this.cfg.getProperty("overlays");if(!this.overlays){this.overlays=[];}if(overlays){this.register(overlays);this.overlays.sort(this.compareZIndexDesc);}},_onOverlayElementFocus:function(p_oEvent){var oTarget=Event.getTarget(p_oEvent),oClose=this.close;if(oClose&&(oTarget==oClose||Dom.isAncestor(oClose,oTarget))){this.blur();}else{this.focus();}},_onOverlayDestroy:function(p_sType,p_aArgs,p_oOverlay){this.remove(p_oOverlay);},_onOverlayFocusHandler:function(p_sType,p_aArgs,p_oOverlay){this._manageFocus(p_oOverlay);},_onOverlayBlurHandler:function(p_sType,p_aArgs,p_oOverlay){this._manageBlur(p_oOverlay);},_bindFocus:function(overlay){var mgr=this;if(!overlay.focusEvent){overlay.focusEvent=overlay.createEvent("focus");overlay.focusEvent.signature=CustomEvent.LIST;overlay.focusEvent._managed=true;}else{overlay.focusEvent.subscribe(mgr._onOverlayFocusHandler,overlay,mgr);}if(!overlay.focus){Event.on(overlay.element,mgr.cfg.getProperty("focusevent"),mgr._onOverlayElementFocus,null,overlay);overlay.focus=function(){if(mgr._manageFocus(this)){if(this.cfg.getProperty("visible")&&this.focusFirst){this.focusFirst();}this.focusEvent.fire();}};overlay.focus._managed=true;}},_bindBlur:function(overlay){var mgr=this;if(!overlay.blurEvent){overlay.blurEvent=overlay.createEvent("blur");overlay.blurEvent.signature=CustomEvent.LIST;overlay.focusEvent._managed=true;}else{overlay.blurEvent.subscribe(mgr._onOverlayBlurHandler,overlay,mgr);}if(!overlay.blur){overlay.blur=function(){if(mgr._manageBlur(this)){this.blurEvent.fire();}};overlay.blur._managed=true;}overlay.hideEvent.subscribe(overlay.blur);},_bindDestroy:function(overlay){var mgr=this;overlay.destroyEvent.subscribe(mgr._onOverlayDestroy,overlay,mgr);},_syncZIndex:function(overlay){var zIndex=Dom.getStyle(overlay.element,"zIndex");if(!isNaN(zIndex)){overlay.cfg.setProperty("zIndex",parseInt(zIndex,10));}else{overlay.cfg.setProperty("zIndex",0);}},register:function(overlay){var registered=false,i,n;if(overlay instanceof Overlay){overlay.cfg.addProperty("manager",{value:this});this._bindFocus(overlay);this._bindBlur(overlay);this._bindDestroy(overlay);this._syncZIndex(overlay);this.overlays.push(overlay);this.bringToTop(overlay);registered=true;}else{if(overlay instanceof Array){for(i=0,n=overlay.length;i<n;i++){registered=this.register(overlay[i])||registered;}}}return registered;},bringToTop:function(p_oOverlay){var oOverlay=this.find(p_oOverlay),nTopZIndex,oTopOverlay,aOverlays;if(oOverlay){aOverlays=this.overlays;aOverlays.sort(this.compareZIndexDesc);oTopOverlay=aOverlays[0];if(oTopOverlay){nTopZIndex=Dom.getStyle(oTopOverlay.element,"zIndex");if(!isNaN(nTopZIndex)){var bRequiresBump=false;if(oTopOverlay!==oOverlay){bRequiresBump=true;}else{if(aOverlays.length>1){var nNextZIndex=Dom.getStyle(aOverlays[1].element,"zIndex");if(!isNaN(nNextZIndex)&&(nTopZIndex==nNextZIndex)){bRequiresBump=true;}}}if(bRequiresBump){oOverlay.cfg.setProperty("zindex",(parseInt(nTopZIndex,10)+2));}}aOverlays.sort(this.compareZIndexDesc);}}},find:function(overlay){var isInstance=overlay instanceof Overlay,overlays=this.overlays,n=overlays.length,found=null,o,i;if(isInstance||typeof overlay=="string"){for(i=n-1;i>=0;i--){o=overlays[i];if((isInstance&&(o===overlay))||(o.id==overlay)){found=o;break;}}}return found;},compareZIndexDesc:function(o1,o2){var zIndex1=(o1.cfg)?o1.cfg.getProperty("zIndex"):null,zIndex2=(o2.cfg)?o2.cfg.getProperty("zIndex"):null;if(zIndex1===null&&zIndex2===null){return 0;}else{if(zIndex1===null){return 1;}else{if(zIndex2===null){return -1;}else{if(zIndex1>zIndex2){return -1;}else{if(zIndex1<zIndex2){return 1;}else{return 0;}}}}}},showAll:function(){var overlays=this.overlays,n=overlays.length,i;for(i=n-1;i>=0;i--){overlays[i].show();}},hideAll:function(){var overlays=this.overlays,n=overlays.length,i;for(i=n-1;i>=0;i--){overlays[i].hide();}},toString:function(){return"OverlayManager";}};}());(function(){YAHOO.widget.Tooltip=function(el,userConfig){YAHOO.widget.Tooltip.superclass.constructor.call(this,el,userConfig);};var Lang=YAHOO.lang,Event=YAHOO.util.Event,CustomEvent=YAHOO.util.CustomEvent,Dom=YAHOO.util.Dom,Tooltip=YAHOO.widget.Tooltip,UA=YAHOO.env.ua,bIEQuirks=(UA.ie&&(UA.ie<=6||document.compatMode=="BackCompat")),m_oShadowTemplate,DEFAULT_CONFIG={PREVENT_OVERLAP:{key:"preventoverlap",value:true,validator:Lang.isBoolean,supercedes:["x","y","xy"]},SHOW_DELAY:{key:"showdelay",value:200,validator:Lang.isNumber},AUTO_DISMISS_DELAY:{key:"autodismissdelay",value:5000,validator:Lang.isNumber},HIDE_DELAY:{key:"hidedelay",value:250,validator:Lang.isNumber},TEXT:{key:"text",suppressEvent:true},CONTAINER:{key:"container"},DISABLED:{key:"disabled",value:false,suppressEvent:true},XY_OFFSET:{key:"xyoffset",value:[0,25],suppressEvent:true}},EVENT_TYPES={CONTEXT_MOUSE_OVER:"contextMouseOver",CONTEXT_MOUSE_OUT:"contextMouseOut",CONTEXT_TRIGGER:"contextTrigger"};Tooltip.CSS_TOOLTIP="yui-tt";function restoreOriginalWidth(sOriginalWidth,sForcedWidth){var oConfig=this.cfg,sCurrentWidth=oConfig.getProperty("width");if(sCurrentWidth==sForcedWidth){oConfig.setProperty("width",sOriginalWidth);}}function setWidthToOffsetWidth(p_sType,p_aArgs){if("_originalWidth" in this){restoreOriginalWidth.call(this,this._originalWidth,this._forcedWidth);}var oBody=document.body,oConfig=this.cfg,sOriginalWidth=oConfig.getProperty("width"),sNewWidth,oClone;if((!sOriginalWidth||sOriginalWidth=="auto")&&(oConfig.getProperty("container")!=oBody||oConfig.getProperty("x")>=Dom.getViewportWidth()||oConfig.getProperty("y")>=Dom.getViewportHeight())){oClone=this.element.cloneNode(true);oClone.style.visibility="hidden";oClone.style.top="0px";oClone.style.left="0px";oBody.appendChild(oClone);sNewWidth=(oClone.offsetWidth+"px");oBody.removeChild(oClone);oClone=null;oConfig.setProperty("width",sNewWidth);oConfig.refireEvent("xy");this._originalWidth=sOriginalWidth||"";this._forcedWidth=sNewWidth;}}function onDOMReady(p_sType,p_aArgs,p_oObject){this.render(p_oObject);}function onInit(){Event.onDOMReady(onDOMReady,this.cfg.getProperty("container"),this);}YAHOO.extend(Tooltip,YAHOO.widget.Overlay,{init:function(el,userConfig){Tooltip.superclass.init.call(this,el);this.beforeInitEvent.fire(Tooltip);Dom.addClass(this.element,Tooltip.CSS_TOOLTIP);if(userConfig){this.cfg.applyConfig(userConfig,true);}this.cfg.queueProperty("visible",false);this.cfg.queueProperty("constraintoviewport",true);this.setBody("");this.subscribe("changeContent",setWidthToOffsetWidth);this.subscribe("init",onInit);this.subscribe("render",this.onRender);this.initEvent.fire(Tooltip);},initEvents:function(){Tooltip.superclass.initEvents.call(this);var SIGNATURE=CustomEvent.LIST;this.contextMouseOverEvent=this.createEvent(EVENT_TYPES.CONTEXT_MOUSE_OVER);this.contextMouseOverEvent.signature=SIGNATURE;this.contextMouseOutEvent=this.createEvent(EVENT_TYPES.CONTEXT_MOUSE_OUT);this.contextMouseOutEvent.signature=SIGNATURE;this.contextTriggerEvent=this.createEvent(EVENT_TYPES.CONTEXT_TRIGGER);this.contextTriggerEvent.signature=SIGNATURE;},initDefaultConfig:function(){Tooltip.superclass.initDefaultConfig.call(this);this.cfg.addProperty(DEFAULT_CONFIG.PREVENT_OVERLAP.key,{value:DEFAULT_CONFIG.PREVENT_OVERLAP.value,validator:DEFAULT_CONFIG.PREVENT_OVERLAP.validator,supercedes:DEFAULT_CONFIG.PREVENT_OVERLAP.supercedes});this.cfg.addProperty(DEFAULT_CONFIG.SHOW_DELAY.key,{handler:this.configShowDelay,value:200,validator:DEFAULT_CONFIG.SHOW_DELAY.validator});this.cfg.addProperty(DEFAULT_CONFIG.AUTO_DISMISS_DELAY.key,{handler:this.configAutoDismissDelay,value:DEFAULT_CONFIG.AUTO_DISMISS_DELAY.value,validator:DEFAULT_CONFIG.AUTO_DISMISS_DELAY.validator});this.cfg.addProperty(DEFAULT_CONFIG.HIDE_DELAY.key,{handler:this.configHideDelay,value:DEFAULT_CONFIG.HIDE_DELAY.value,validator:DEFAULT_CONFIG.HIDE_DELAY.validator});this.cfg.addProperty(DEFAULT_CONFIG.TEXT.key,{handler:this.configText,suppressEvent:DEFAULT_CONFIG.TEXT.suppressEvent});this.cfg.addProperty(DEFAULT_CONFIG.CONTAINER.key,{handler:this.configContainer,value:document.body});this.cfg.addProperty(DEFAULT_CONFIG.DISABLED.key,{handler:this.configContainer,value:DEFAULT_CONFIG.DISABLED.value,supressEvent:DEFAULT_CONFIG.DISABLED.suppressEvent});this.cfg.addProperty(DEFAULT_CONFIG.XY_OFFSET.key,{value:DEFAULT_CONFIG.XY_OFFSET.value.concat(),supressEvent:DEFAULT_CONFIG.XY_OFFSET.suppressEvent});},configText:function(type,args,obj){var text=args[0];if(text){this.setBody(text);}},configContainer:function(type,args,obj){var container=args[0];if(typeof container=="string"){this.cfg.setProperty("container",document.getElementById(container),true);}},_removeEventListeners:function(){var aElements=this._context,nElements,oElement,i;if(aElements){nElements=aElements.length;if(nElements>0){i=nElements-1;do{oElement=aElements[i];Event.removeListener(oElement,"mouseover",this.onContextMouseOver);Event.removeListener(oElement,"mousemove",this.onContextMouseMove);Event.removeListener(oElement,"mouseout",this.onContextMouseOut);}while(i--);}}},configContext:function(type,args,obj){var context=args[0],aElements,nElements,oElement,i;if(context){if(!(context instanceof Array)){if(typeof context=="string"){this.cfg.setProperty("context",[document.getElementById(context)],true);}else{this.cfg.setProperty("context",[context],true);}context=this.cfg.getProperty("context");}this._removeEventListeners();this._context=context;aElements=this._context;if(aElements){nElements=aElements.length;if(nElements>0){i=nElements-1;do{oElement=aElements[i];Event.on(oElement,"mouseover",this.onContextMouseOver,this);Event.on(oElement,"mousemove",this.onContextMouseMove,this);Event.on(oElement,"mouseout",this.onContextMouseOut,this);}while(i--);}}}},onContextMouseMove:function(e,obj){obj.pageX=Event.getPageX(e);obj.pageY=Event.getPageY(e);},onContextMouseOver:function(e,obj){var context=this;if(context.title){obj._tempTitle=context.title;context.title="";}if(obj.fireEvent("contextMouseOver",context,e)!==false&&!obj.cfg.getProperty("disabled")){if(obj.hideProcId){clearTimeout(obj.hideProcId);obj.hideProcId=null;}Event.on(context,"mousemove",obj.onContextMouseMove,obj);obj.showProcId=obj.doShow(e,context);}},onContextMouseOut:function(e,obj){var el=this;if(obj._tempTitle){el.title=obj._tempTitle;obj._tempTitle=null;}if(obj.showProcId){clearTimeout(obj.showProcId);obj.showProcId=null;}if(obj.hideProcId){clearTimeout(obj.hideProcId);obj.hideProcId=null;}obj.fireEvent("contextMouseOut",el,e);obj.hideProcId=setTimeout(function(){obj.hide();},obj.cfg.getProperty("hidedelay"));},doShow:function(e,context){var offset=this.cfg.getProperty("xyoffset"),xOffset=offset[0],yOffset=offset[1],me=this;if(UA.opera&&context.tagName&&context.tagName.toUpperCase()=="A"){yOffset+=12;}return setTimeout(function(){var txt=me.cfg.getProperty("text");if(me._tempTitle&&(txt===""||YAHOO.lang.isUndefined(txt)||YAHOO.lang.isNull(txt))){me.setBody(me._tempTitle);}else{me.cfg.refireEvent("text");}me.moveTo(me.pageX+xOffset,me.pageY+yOffset);if(me.cfg.getProperty("preventoverlap")){me.preventOverlap(me.pageX,me.pageY);}Event.removeListener(context,"mousemove",me.onContextMouseMove);me.contextTriggerEvent.fire(context);me.show();me.hideProcId=me.doHide();},this.cfg.getProperty("showdelay"));},doHide:function(){var me=this;return setTimeout(function(){me.hide();},this.cfg.getProperty("autodismissdelay"));},preventOverlap:function(pageX,pageY){var height=this.element.offsetHeight,mousePoint=new YAHOO.util.Point(pageX,pageY),elementRegion=Dom.getRegion(this.element);elementRegion.top-=5;elementRegion.left-=5;elementRegion.right+=5;elementRegion.bottom+=5;if(elementRegion.contains(mousePoint)){this.cfg.setProperty("y",(pageY-height-5));}},onRender:function(p_sType,p_aArgs){function sizeShadow(){var oElement=this.element,oShadow=this.underlay;if(oShadow){oShadow.style.width=(oElement.offsetWidth+6)+"px";oShadow.style.height=(oElement.offsetHeight+1)+"px";}}function addShadowVisibleClass(){Dom.addClass(this.underlay,"yui-tt-shadow-visible");if(UA.ie){this.forceUnderlayRedraw();}}function removeShadowVisibleClass(){Dom.removeClass(this.underlay,"yui-tt-shadow-visible");}function createShadow(){var oShadow=this.underlay,oElement,Module,nIE,me;if(!oShadow){oElement=this.element;Module=YAHOO.widget.Module;nIE=UA.ie;me=this;if(!m_oShadowTemplate){m_oShadowTemplate=document.createElement("div");m_oShadowTemplate.className="yui-tt-shadow";}oShadow=m_oShadowTemplate.cloneNode(false);oElement.appendChild(oShadow);this.underlay=oShadow;this._shadow=this.underlay;addShadowVisibleClass.call(this);this.subscribe("beforeShow",addShadowVisibleClass);this.subscribe("hide",removeShadowVisibleClass);if(bIEQuirks){window.setTimeout(function(){sizeShadow.call(me);},0);this.cfg.subscribeToConfigEvent("width",sizeShadow);this.cfg.subscribeToConfigEvent("height",sizeShadow);this.subscribe("changeContent",sizeShadow);Module.textResizeEvent.subscribe(sizeShadow,this,true);this.subscribe("destroy",function(){Module.textResizeEvent.unsubscribe(sizeShadow,this);});}}}function onBeforeShow(){createShadow.call(this);this.unsubscribe("beforeShow",onBeforeShow);}if(this.cfg.getProperty("visible")){createShadow.call(this);}else{this.subscribe("beforeShow",onBeforeShow);}},forceUnderlayRedraw:function(){var tt=this;Dom.addClass(tt.underlay,"yui-force-redraw");setTimeout(function(){Dom.removeClass(tt.underlay,"yui-force-redraw");},0);},destroy:function(){this._removeEventListeners();Tooltip.superclass.destroy.call(this);},toString:function(){return"Tooltip "+this.id;}});}());(function(){YAHOO.widget.Panel=function(el,userConfig){YAHOO.widget.Panel.superclass.constructor.call(this,el,userConfig);};var _currentModal=null;var Lang=YAHOO.lang,Util=YAHOO.util,Dom=Util.Dom,Event=Util.Event,CustomEvent=Util.CustomEvent,KeyListener=YAHOO.util.KeyListener,Config=Util.Config,Overlay=YAHOO.widget.Overlay,Panel=YAHOO.widget.Panel,UA=YAHOO.env.ua,bIEQuirks=(UA.ie&&(UA.ie<=6||document.compatMode=="BackCompat")),m_oMaskTemplate,m_oUnderlayTemplate,m_oCloseIconTemplate,EVENT_TYPES={BEFORE_SHOW_MASK:"beforeShowMask",BEFORE_HIDE_MASK:"beforeHideMask",SHOW_MASK:"showMask",HIDE_MASK:"hideMask",DRAG:"drag"},DEFAULT_CONFIG={CLOSE:{key:"close",value:true,validator:Lang.isBoolean,supercedes:["visible"]},DRAGGABLE:{key:"draggable",value:(Util.DD?true:false),validator:Lang.isBoolean,supercedes:["visible"]},DRAG_ONLY:{key:"dragonly",value:false,validator:Lang.isBoolean,supercedes:["draggable"]},UNDERLAY:{key:"underlay",value:"shadow",supercedes:["visible"]},MODAL:{key:"modal",value:false,validator:Lang.isBoolean,supercedes:["visible","zindex"]},KEY_LISTENERS:{key:"keylisteners",suppressEvent:true,supercedes:["visible"]},STRINGS:{key:"strings",supercedes:["close"],validator:Lang.isObject,value:{close:"Close"}}};Panel.CSS_PANEL="yui-panel";Panel.CSS_PANEL_CONTAINER="yui-panel-container";Panel.FOCUSABLE=["a","button","select","textarea","input","iframe"];function createHeader(p_sType,p_aArgs){if(!this.header&&this.cfg.getProperty("draggable")){this.setHeader("&#160;");}}function restoreOriginalWidth(p_sType,p_aArgs,p_oObject){var sOriginalWidth=p_oObject[0],sNewWidth=p_oObject[1],oConfig=this.cfg,sCurrentWidth=oConfig.getProperty("width");if(sCurrentWidth==sNewWidth){oConfig.setProperty("width",sOriginalWidth);}this.unsubscribe("hide",restoreOriginalWidth,p_oObject);}function setWidthToOffsetWidth(p_sType,p_aArgs){var oConfig,sOriginalWidth,sNewWidth;if(bIEQuirks){oConfig=this.cfg;sOriginalWidth=oConfig.getProperty("width");if(!sOriginalWidth||sOriginalWidth=="auto"){sNewWidth=(this.element.offsetWidth+"px");oConfig.setProperty("width",sNewWidth);this.subscribe("hide",restoreOriginalWidth,[(sOriginalWidth||""),sNewWidth]);}}}YAHOO.extend(Panel,Overlay,{init:function(el,userConfig){Panel.superclass.init.call(this,el);this.beforeInitEvent.fire(Panel);Dom.addClass(this.element,Panel.CSS_PANEL);this.buildWrapper();if(userConfig){this.cfg.applyConfig(userConfig,true);}this.subscribe("showMask",this._addFocusHandlers);this.subscribe("hideMask",this._removeFocusHandlers);this.subscribe("beforeRender",createHeader);this.subscribe("render",function(){this.setFirstLastFocusable();this.subscribe("changeContent",this.setFirstLastFocusable);});this.subscribe("show",this._focusOnShow);this.initEvent.fire(Panel);},_onElementFocus:function(e){if(_currentModal===this){var target=Event.getTarget(e),doc=document.documentElement,insideDoc=(target!==doc&&target!==window);if(insideDoc&&target!==this.element&&target!==this.mask&&!Dom.isAncestor(this.element,target)){try{this._focusFirstModal();}catch(err){try{if(insideDoc&&target!==document.body){target.blur();}}catch(err2){}}}}},_focusFirstModal:function(){var el=this.firstElement;if(el){el.focus();}else{if(this._modalFocus){this._modalFocus.focus();}else{this.innerElement.focus();}}},_addFocusHandlers:function(p_sType,p_aArgs){if(!this.firstElement){if(UA.webkit||UA.opera){if(!this._modalFocus){this._createHiddenFocusElement();}}else{this.innerElement.tabIndex=0;}}this._setTabLoop(this.firstElement,this.lastElement);Event.onFocus(document.documentElement,this._onElementFocus,this,true);_currentModal=this;},_createHiddenFocusElement:function(){var e=document.createElement("button");e.style.height="1px";e.style.width="1px";e.style.position="absolute";e.style.left="-10000em";e.style.opacity=0;e.tabIndex=-1;this.innerElement.appendChild(e);this._modalFocus=e;},_removeFocusHandlers:function(p_sType,p_aArgs){Event.removeFocusListener(document.documentElement,this._onElementFocus,this);if(_currentModal==this){_currentModal=null;}},_focusOnShow:function(type,args,obj){if(args&&args[1]){Event.stopEvent(args[1]);}if(!this.focusFirst(type,args,obj)){if(this.cfg.getProperty("modal")){this._focusFirstModal();}}},focusFirst:function(type,args,obj){var el=this.firstElement,focused=false;if(args&&args[1]){Event.stopEvent(args[1]);}if(el){try{el.focus();focused=true;}catch(err){}}return focused;},focusLast:function(type,args,obj){var el=this.lastElement,focused=false;if(args&&args[1]){Event.stopEvent(args[1]);}if(el){try{el.focus();focused=true;}catch(err){}}return focused;},_setTabLoop:function(firstElement,lastElement){this.setTabLoop(firstElement,lastElement);},setTabLoop:function(firstElement,lastElement){var backTab=this.preventBackTab,tab=this.preventTabOut,showEvent=this.showEvent,hideEvent=this.hideEvent;if(backTab){backTab.disable();showEvent.unsubscribe(backTab.enable,backTab);hideEvent.unsubscribe(backTab.disable,backTab);backTab=this.preventBackTab=null;}if(tab){tab.disable();showEvent.unsubscribe(tab.enable,tab);hideEvent.unsubscribe(tab.disable,tab);tab=this.preventTabOut=null;}if(firstElement){this.preventBackTab=new KeyListener(firstElement,{shift:true,keys:9},{fn:this.focusLast,scope:this,correctScope:true});backTab=this.preventBackTab;showEvent.subscribe(backTab.enable,backTab,true);hideEvent.subscribe(backTab.disable,backTab,true);}if(lastElement){this.preventTabOut=new KeyListener(lastElement,{shift:false,keys:9},{fn:this.focusFirst,scope:this,correctScope:true});tab=this.preventTabOut;showEvent.subscribe(tab.enable,tab,true);hideEvent.subscribe(tab.disable,tab,true);}},getFocusableElements:function(root){root=root||this.innerElement;var focusable={},panel=this;for(var i=0;i<Panel.FOCUSABLE.length;i++){focusable[Panel.FOCUSABLE[i]]=true;}return Dom.getElementsBy(function(el){return panel._testIfFocusable(el,focusable);},null,root);},_testIfFocusable:function(el,focusable){if(el.focus&&el.type!=="hidden"&&!el.disabled&&focusable[el.tagName.toLowerCase()]){return true;}return false;},setFirstLastFocusable:function(){this.firstElement=null;this.lastElement=null;var elements=this.getFocusableElements();this.focusableElements=elements;if(elements.length>0){this.firstElement=elements[0];this.lastElement=elements[elements.length-1];}if(this.cfg.getProperty("modal")){this._setTabLoop(this.firstElement,this.lastElement);}},initEvents:function(){Panel.superclass.initEvents.call(this);var SIGNATURE=CustomEvent.LIST;this.showMaskEvent=this.createEvent(EVENT_TYPES.SHOW_MASK);this.showMaskEvent.signature=SIGNATURE;this.beforeShowMaskEvent=this.createEvent(EVENT_TYPES.BEFORE_SHOW_MASK);this.beforeShowMaskEvent.signature=SIGNATURE;this.hideMaskEvent=this.createEvent(EVENT_TYPES.HIDE_MASK);this.hideMaskEvent.signature=SIGNATURE;this.beforeHideMaskEvent=this.createEvent(EVENT_TYPES.BEFORE_HIDE_MASK);this.beforeHideMaskEvent.signature=SIGNATURE;this.dragEvent=this.createEvent(EVENT_TYPES.DRAG);this.dragEvent.signature=SIGNATURE;},initDefaultConfig:function(){Panel.superclass.initDefaultConfig.call(this);this.cfg.addProperty(DEFAULT_CONFIG.CLOSE.key,{handler:this.configClose,value:DEFAULT_CONFIG.CLOSE.value,validator:DEFAULT_CONFIG.CLOSE.validator,supercedes:DEFAULT_CONFIG.CLOSE.supercedes});this.cfg.addProperty(DEFAULT_CONFIG.DRAGGABLE.key,{handler:this.configDraggable,value:(Util.DD)?true:false,validator:DEFAULT_CONFIG.DRAGGABLE.validator,supercedes:DEFAULT_CONFIG.DRAGGABLE.supercedes});this.cfg.addProperty(DEFAULT_CONFIG.DRAG_ONLY.key,{value:DEFAULT_CONFIG.DRAG_ONLY.value,validator:DEFAULT_CONFIG.DRAG_ONLY.validator,supercedes:DEFAULT_CONFIG.DRAG_ONLY.supercedes});this.cfg.addProperty(DEFAULT_CONFIG.UNDERLAY.key,{handler:this.configUnderlay,value:DEFAULT_CONFIG.UNDERLAY.value,supercedes:DEFAULT_CONFIG.UNDERLAY.supercedes});this.cfg.addProperty(DEFAULT_CONFIG.MODAL.key,{handler:this.configModal,value:DEFAULT_CONFIG.MODAL.value,validator:DEFAULT_CONFIG.MODAL.validator,supercedes:DEFAULT_CONFIG.MODAL.supercedes});this.cfg.addProperty(DEFAULT_CONFIG.KEY_LISTENERS.key,{handler:this.configKeyListeners,suppressEvent:DEFAULT_CONFIG.KEY_LISTENERS.suppressEvent,supercedes:DEFAULT_CONFIG.KEY_LISTENERS.supercedes});this.cfg.addProperty(DEFAULT_CONFIG.STRINGS.key,{value:DEFAULT_CONFIG.STRINGS.value,handler:this.configStrings,validator:DEFAULT_CONFIG.STRINGS.validator,supercedes:DEFAULT_CONFIG.STRINGS.supercedes});},configClose:function(type,args,obj){var val=args[0],oClose=this.close,strings=this.cfg.getProperty("strings"),fc;if(val){if(!oClose){if(!m_oCloseIconTemplate){m_oCloseIconTemplate=document.createElement("a");m_oCloseIconTemplate.className="container-close";m_oCloseIconTemplate.href="#";}oClose=m_oCloseIconTemplate.cloneNode(true);fc=this.innerElement.firstChild;if(fc){this.innerElement.insertBefore(oClose,fc);}else{this.innerElement.appendChild(oClose);}oClose.innerHTML=(strings&&strings.close)?strings.close:"&#160;";Event.on(oClose,"click",this._doClose,this,true);this.close=oClose;}else{oClose.style.display="block";}}else{if(oClose){oClose.style.display="none";}}},_doClose:function(e){Event.preventDefault(e);this.hide();},configDraggable:function(type,args,obj){var val=args[0];if(val){if(!Util.DD){this.cfg.setProperty("draggable",false);return;}if(this.header){Dom.setStyle(this.header,"cursor","move");this.registerDragDrop();}this.subscribe("beforeShow",setWidthToOffsetWidth);}else{if(this.dd){this.dd.unreg();}if(this.header){Dom.setStyle(this.header,"cursor","auto");}this.unsubscribe("beforeShow",setWidthToOffsetWidth);}},configUnderlay:function(type,args,obj){var bMacGecko=(this.platform=="mac"&&UA.gecko),sUnderlay=args[0].toLowerCase(),oUnderlay=this.underlay,oElement=this.element;function createUnderlay(){var bNew=false;if(!oUnderlay){if(!m_oUnderlayTemplate){m_oUnderlayTemplate=document.createElement("div");m_oUnderlayTemplate.className="underlay";}oUnderlay=m_oUnderlayTemplate.cloneNode(false);this.element.appendChild(oUnderlay);this.underlay=oUnderlay;if(bIEQuirks){this.sizeUnderlay();this.cfg.subscribeToConfigEvent("width",this.sizeUnderlay);this.cfg.subscribeToConfigEvent("height",this.sizeUnderlay);this.changeContentEvent.subscribe(this.sizeUnderlay);YAHOO.widget.Module.textResizeEvent.subscribe(this.sizeUnderlay,this,true);}if(UA.webkit&&UA.webkit<420){this.changeContentEvent.subscribe(this.forceUnderlayRedraw);}bNew=true;}}function onBeforeShow(){var bNew=createUnderlay.call(this);if(!bNew&&bIEQuirks){this.sizeUnderlay();}this._underlayDeferred=false;this.beforeShowEvent.unsubscribe(onBeforeShow);}function destroyUnderlay(){if(this._underlayDeferred){this.beforeShowEvent.unsubscribe(onBeforeShow);this._underlayDeferred=false;}if(oUnderlay){this.cfg.unsubscribeFromConfigEvent("width",this.sizeUnderlay);this.cfg.unsubscribeFromConfigEvent("height",this.sizeUnderlay);this.changeContentEvent.unsubscribe(this.sizeUnderlay);this.changeContentEvent.unsubscribe(this.forceUnderlayRedraw);YAHOO.widget.Module.textResizeEvent.unsubscribe(this.sizeUnderlay,this,true);this.element.removeChild(oUnderlay);this.underlay=null;}}switch(sUnderlay){case"shadow":Dom.removeClass(oElement,"matte");Dom.addClass(oElement,"shadow");break;case"matte":if(!bMacGecko){destroyUnderlay.call(this);}Dom.removeClass(oElement,"shadow");Dom.addClass(oElement,"matte");break;default:if(!bMacGecko){destroyUnderlay.call(this);}Dom.removeClass(oElement,"shadow");Dom.removeClass(oElement,"matte");break;}if((sUnderlay=="shadow")||(bMacGecko&&!oUnderlay)){if(this.cfg.getProperty("visible")){var bNew=createUnderlay.call(this);if(!bNew&&bIEQuirks){this.sizeUnderlay();}}else{if(!this._underlayDeferred){this.beforeShowEvent.subscribe(onBeforeShow);this._underlayDeferred=true;}}}},configModal:function(type,args,obj){var modal=args[0];if(modal){if(!this._hasModalityEventListeners){this.subscribe("beforeShow",this.buildMask);this.subscribe("beforeShow",this.bringToTop);this.subscribe("beforeShow",this.showMask);this.subscribe("hide",this.hideMask);Overlay.windowResizeEvent.subscribe(this.sizeMask,this,true);this._hasModalityEventListeners=true;}}else{if(this._hasModalityEventListeners){if(this.cfg.getProperty("visible")){this.hideMask();this.removeMask();}this.unsubscribe("beforeShow",this.buildMask);this.unsubscribe("beforeShow",this.bringToTop);this.unsubscribe("beforeShow",this.showMask);this.unsubscribe("hide",this.hideMask);Overlay.windowResizeEvent.unsubscribe(this.sizeMask,this);this._hasModalityEventListeners=false;}}},removeMask:function(){var oMask=this.mask,oParentNode;if(oMask){this.hideMask();oParentNode=oMask.parentNode;if(oParentNode){oParentNode.removeChild(oMask);}this.mask=null;}},configKeyListeners:function(type,args,obj){var listeners=args[0],listener,nListeners,i;if(listeners){if(listeners instanceof Array){nListeners=listeners.length;for(i=0;i<nListeners;i++){listener=listeners[i];if(!Config.alreadySubscribed(this.showEvent,listener.enable,listener)){this.showEvent.subscribe(listener.enable,listener,true);}if(!Config.alreadySubscribed(this.hideEvent,listener.disable,listener)){this.hideEvent.subscribe(listener.disable,listener,true);this.destroyEvent.subscribe(listener.disable,listener,true);}}}else{if(!Config.alreadySubscribed(this.showEvent,listeners.enable,listeners)){this.showEvent.subscribe(listeners.enable,listeners,true);}if(!Config.alreadySubscribed(this.hideEvent,listeners.disable,listeners)){this.hideEvent.subscribe(listeners.disable,listeners,true);this.destroyEvent.subscribe(listeners.disable,listeners,true);}}}},configStrings:function(type,args,obj){var val=Lang.merge(DEFAULT_CONFIG.STRINGS.value,args[0]);this.cfg.setProperty(DEFAULT_CONFIG.STRINGS.key,val,true);},configHeight:function(type,args,obj){var height=args[0],el=this.innerElement;Dom.setStyle(el,"height",height);this.cfg.refireEvent("iframe");},_autoFillOnHeightChange:function(type,args,el){Panel.superclass._autoFillOnHeightChange.apply(this,arguments);if(bIEQuirks){var panel=this;setTimeout(function(){panel.sizeUnderlay();},0);}},configWidth:function(type,args,obj){var width=args[0],el=this.innerElement;Dom.setStyle(el,"width",width);this.cfg.refireEvent("iframe");},configzIndex:function(type,args,obj){Panel.superclass.configzIndex.call(this,type,args,obj);if(this.mask||this.cfg.getProperty("modal")===true){var panelZ=Dom.getStyle(this.element,"zIndex");if(!panelZ||isNaN(panelZ)){panelZ=0;}if(panelZ===0){this.cfg.setProperty("zIndex",1);}else{this.stackMask();}}},buildWrapper:function(){var elementParent=this.element.parentNode,originalElement=this.element,wrapper=document.createElement("div");wrapper.className=Panel.CSS_PANEL_CONTAINER;wrapper.id=originalElement.id+"_c";if(elementParent){elementParent.insertBefore(wrapper,originalElement);}wrapper.appendChild(originalElement);this.element=wrapper;this.innerElement=originalElement;Dom.setStyle(this.innerElement,"visibility","inherit");},sizeUnderlay:function(){var oUnderlay=this.underlay,oElement;if(oUnderlay){oElement=this.element;oUnderlay.style.width=oElement.offsetWidth+"px";oUnderlay.style.height=oElement.offsetHeight+"px";}},registerDragDrop:function(){var me=this;if(this.header){if(!Util.DD){return;}var bDragOnly=(this.cfg.getProperty("dragonly")===true);this.dd=new Util.DD(this.element.id,this.id,{dragOnly:bDragOnly});if(!this.header.id){this.header.id=this.id+"_h";}this.dd.startDrag=function(){var offsetHeight,offsetWidth,viewPortWidth,viewPortHeight,scrollX,scrollY;if(YAHOO.env.ua.ie==6){Dom.addClass(me.element,"drag");}if(me.cfg.getProperty("constraintoviewport")){var nViewportOffset=Overlay.VIEWPORT_OFFSET;offsetHeight=me.element.offsetHeight;offsetWidth=me.element.offsetWidth;viewPortWidth=Dom.getViewportWidth();viewPortHeight=Dom.getViewportHeight();scrollX=Dom.getDocumentScrollLeft();scrollY=Dom.getDocumentScrollTop();if(offsetHeight+nViewportOffset<viewPortHeight){this.minY=scrollY+nViewportOffset;this.maxY=scrollY+viewPortHeight-offsetHeight-nViewportOffset;}else{this.minY=scrollY+nViewportOffset;this.maxY=scrollY+nViewportOffset;}if(offsetWidth+nViewportOffset<viewPortWidth){this.minX=scrollX+nViewportOffset;this.maxX=scrollX+viewPortWidth-offsetWidth-nViewportOffset;}else{this.minX=scrollX+nViewportOffset;this.maxX=scrollX+nViewportOffset;}this.constrainX=true;this.constrainY=true;}else{this.constrainX=false;this.constrainY=false;}me.dragEvent.fire("startDrag",arguments);};this.dd.onDrag=function(){me.syncPosition();me.cfg.refireEvent("iframe");if(this.platform=="mac"&&YAHOO.env.ua.gecko){this.showMacGeckoScrollbars();}me.dragEvent.fire("onDrag",arguments);};this.dd.endDrag=function(){if(YAHOO.env.ua.ie==6){Dom.removeClass(me.element,"drag");}me.dragEvent.fire("endDrag",arguments);me.moveEvent.fire(me.cfg.getProperty("xy"));};this.dd.setHandleElId(this.header.id);this.dd.addInvalidHandleType("INPUT");this.dd.addInvalidHandleType("SELECT");this.dd.addInvalidHandleType("TEXTAREA");}},buildMask:function(){var oMask=this.mask;if(!oMask){if(!m_oMaskTemplate){m_oMaskTemplate=document.createElement("div");m_oMaskTemplate.className="mask";m_oMaskTemplate.innerHTML="&#160;";}oMask=m_oMaskTemplate.cloneNode(true);oMask.id=this.id+"_mask";document.body.insertBefore(oMask,document.body.firstChild);this.mask=oMask;if(YAHOO.env.ua.gecko&&this.platform=="mac"){Dom.addClass(this.mask,"block-scrollbars");}this.stackMask();}},hideMask:function(){if(this.cfg.getProperty("modal")&&this.mask&&this.beforeHideMaskEvent.fire()){this.mask.style.display="none";Dom.removeClass(document.body,"masked");this.hideMaskEvent.fire();}},showMask:function(){if(this.cfg.getProperty("modal")&&this.mask&&this.beforeShowMaskEvent.fire()){Dom.addClass(document.body,"masked");this.sizeMask();this.mask.style.display="block";this.showMaskEvent.fire();}},sizeMask:function(){if(this.mask){var mask=this.mask,viewWidth=Dom.getViewportWidth(),viewHeight=Dom.getViewportHeight();if(mask.offsetHeight>viewHeight){mask.style.height=viewHeight+"px";}if(mask.offsetWidth>viewWidth){mask.style.width=viewWidth+"px";}mask.style.height=Dom.getDocumentHeight()+"px";mask.style.width=Dom.getDocumentWidth()+"px";}},stackMask:function(){if(this.mask){var panelZ=Dom.getStyle(this.element,"zIndex");if(!YAHOO.lang.isUndefined(panelZ)&&!isNaN(panelZ)){Dom.setStyle(this.mask,"zIndex",panelZ-1);}}},render:function(appendToNode){return Panel.superclass.render.call(this,appendToNode,this.innerElement);},_renderHeader:function(moduleElement){moduleElement=moduleElement||this.innerElement;Panel.superclass._renderHeader.call(this,moduleElement);},_renderBody:function(moduleElement){moduleElement=moduleElement||this.innerElement;Panel.superclass._renderBody.call(this,moduleElement);},_renderFooter:function(moduleElement){moduleElement=moduleElement||this.innerElement;Panel.superclass._renderFooter.call(this,moduleElement);},destroy:function(shallowPurge){Overlay.windowResizeEvent.unsubscribe(this.sizeMask,this);this.removeMask();if(this.close){Event.purgeElement(this.close);}Panel.superclass.destroy.call(this,shallowPurge);},forceUnderlayRedraw:function(){var u=this.underlay;Dom.addClass(u,"yui-force-redraw");setTimeout(function(){Dom.removeClass(u,"yui-force-redraw");},0);},toString:function(){return"Panel "+this.id;}});}());(function(){YAHOO.widget.Dialog=function(el,userConfig){YAHOO.widget.Dialog.superclass.constructor.call(this,el,userConfig);};var Event=YAHOO.util.Event,CustomEvent=YAHOO.util.CustomEvent,Dom=YAHOO.util.Dom,Dialog=YAHOO.widget.Dialog,Lang=YAHOO.lang,EVENT_TYPES={BEFORE_SUBMIT:"beforeSubmit",SUBMIT:"submit",MANUAL_SUBMIT:"manualSubmit",ASYNC_SUBMIT:"asyncSubmit",FORM_SUBMIT:"formSubmit",CANCEL:"cancel"},DEFAULT_CONFIG={POST_METHOD:{key:"postmethod",value:"async"},POST_DATA:{key:"postdata",value:null},BUTTONS:{key:"buttons",value:"none",supercedes:["visible"]},HIDEAFTERSUBMIT:{key:"hideaftersubmit",value:true}};Dialog.CSS_DIALOG="yui-dialog";function removeButtonEventHandlers(){var aButtons=this._aButtons,nButtons,oButton,i;if(Lang.isArray(aButtons)){nButtons=aButtons.length;if(nButtons>0){i=nButtons-1;do{oButton=aButtons[i];if(YAHOO.widget.Button&&oButton instanceof YAHOO.widget.Button){oButton.destroy();}else{if(oButton.tagName.toUpperCase()=="BUTTON"){Event.purgeElement(oButton);Event.purgeElement(oButton,false);}}}while(i--);}}}YAHOO.extend(Dialog,YAHOO.widget.Panel,{form:null,initDefaultConfig:function(){Dialog.superclass.initDefaultConfig.call(this);this.callback={success:null,failure:null,argument:null};this.cfg.addProperty(DEFAULT_CONFIG.POST_METHOD.key,{handler:this.configPostMethod,value:DEFAULT_CONFIG.POST_METHOD.value,validator:function(val){if(val!="form"&&val!="async"&&val!="none"&&val!="manual"){return false;}else{return true;}}});this.cfg.addProperty(DEFAULT_CONFIG.POST_DATA.key,{value:DEFAULT_CONFIG.POST_DATA.value});this.cfg.addProperty(DEFAULT_CONFIG.HIDEAFTERSUBMIT.key,{value:DEFAULT_CONFIG.HIDEAFTERSUBMIT.value});this.cfg.addProperty(DEFAULT_CONFIG.BUTTONS.key,{handler:this.configButtons,value:DEFAULT_CONFIG.BUTTONS.value,supercedes:DEFAULT_CONFIG.BUTTONS.supercedes});},initEvents:function(){Dialog.superclass.initEvents.call(this);var SIGNATURE=CustomEvent.LIST;this.beforeSubmitEvent=this.createEvent(EVENT_TYPES.BEFORE_SUBMIT);this.beforeSubmitEvent.signature=SIGNATURE;this.submitEvent=this.createEvent(EVENT_TYPES.SUBMIT);this.submitEvent.signature=SIGNATURE;this.manualSubmitEvent=this.createEvent(EVENT_TYPES.MANUAL_SUBMIT);this.manualSubmitEvent.signature=SIGNATURE;this.asyncSubmitEvent=this.createEvent(EVENT_TYPES.ASYNC_SUBMIT);this.asyncSubmitEvent.signature=SIGNATURE;this.formSubmitEvent=this.createEvent(EVENT_TYPES.FORM_SUBMIT);this.formSubmitEvent.signature=SIGNATURE;this.cancelEvent=this.createEvent(EVENT_TYPES.CANCEL);this.cancelEvent.signature=SIGNATURE;},init:function(el,userConfig){Dialog.superclass.init.call(this,el);this.beforeInitEvent.fire(Dialog);Dom.addClass(this.element,Dialog.CSS_DIALOG);this.cfg.setProperty("visible",false);if(userConfig){this.cfg.applyConfig(userConfig,true);}this.beforeHideEvent.subscribe(this.blurButtons,this,true);this.subscribe("changeBody",this.registerForm);this.initEvent.fire(Dialog);},doSubmit:function(){var Connect=YAHOO.util.Connect,oForm=this.form,bUseFileUpload=false,bUseSecureFileUpload=false,aElements,nElements,i,formAttrs;switch(this.cfg.getProperty("postmethod")){case"async":aElements=oForm.elements;nElements=aElements.length;if(nElements>0){i=nElements-1;do{if(aElements[i].type=="file"){bUseFileUpload=true;break;}}while(i--);}if(bUseFileUpload&&YAHOO.env.ua.ie&&this.isSecure){bUseSecureFileUpload=true;}formAttrs=this._getFormAttributes(oForm);Connect.setForm(oForm,bUseFileUpload,bUseSecureFileUpload);var postData=this.cfg.getProperty("postdata");var c=Connect.asyncRequest(formAttrs.method,formAttrs.action,this.callback,postData);this.asyncSubmitEvent.fire(c);break;case"form":oForm.submit();this.formSubmitEvent.fire();break;case"none":case"manual":this.manualSubmitEvent.fire();break;}},_getFormAttributes:function(oForm){var attrs={method:null,action:null};if(oForm){if(oForm.getAttributeNode){var action=oForm.getAttributeNode("action");var method=oForm.getAttributeNode("method");if(action){attrs.action=action.value;}if(method){attrs.method=method.value;}}else{attrs.action=oForm.getAttribute("action");attrs.method=oForm.getAttribute("method");}}attrs.method=(Lang.isString(attrs.method)?attrs.method:"POST").toUpperCase();attrs.action=Lang.isString(attrs.action)?attrs.action:"";return attrs;},registerForm:function(){var form=this.element.getElementsByTagName("form")[0];if(this.form){if(this.form==form&&Dom.isAncestor(this.element,this.form)){return;}else{Event.purgeElement(this.form);this.form=null;}}if(!form){form=document.createElement("form");form.name="frm_"+this.id;this.body.appendChild(form);}if(form){this.form=form;Event.on(form,"submit",this._submitHandler,this,true);}},_submitHandler:function(e){Event.stopEvent(e);this.submit();this.form.blur();},setTabLoop:function(firstElement,lastElement){firstElement=firstElement||this.firstButton;lastElement=lastElement||this.lastButton;Dialog.superclass.setTabLoop.call(this,firstElement,lastElement);},_setTabLoop:function(firstElement,lastElement){firstElement=firstElement||this.firstButton;lastElement=this.lastButton||lastElement;this.setTabLoop(firstElement,lastElement);},setFirstLastFocusable:function(){Dialog.superclass.setFirstLastFocusable.call(this);var i,l,el,elements=this.focusableElements;this.firstFormElement=null;this.lastFormElement=null;if(this.form&&elements&&elements.length>0){l=elements.length;for(i=0;i<l;++i){el=elements[i];if(this.form===el.form){this.firstFormElement=el;break;}}for(i=l-1;i>=0;--i){el=elements[i];if(this.form===el.form){this.lastFormElement=el;break;}}}},configClose:function(type,args,obj){Dialog.superclass.configClose.apply(this,arguments);},_doClose:function(e){Event.preventDefault(e);this.cancel();},configButtons:function(type,args,obj){var Button=YAHOO.widget.Button,aButtons=args[0],oInnerElement=this.innerElement,oButton,oButtonEl,oYUIButton,nButtons,oSpan,oFooter,i;removeButtonEventHandlers.call(this);this._aButtons=null;if(Lang.isArray(aButtons)){oSpan=document.createElement("span");oSpan.className="button-group";nButtons=aButtons.length;this._aButtons=[];this.defaultHtmlButton=null;for(i=0;i<nButtons;i++){oButton=aButtons[i];if(Button){oYUIButton=new Button({label:oButton.text,type:oButton.type});oYUIButton.appendTo(oSpan);oButtonEl=oYUIButton.get("element");if(oButton.isDefault){oYUIButton.addClass("default");this.defaultHtmlButton=oButtonEl;}if(Lang.isFunction(oButton.handler)){oYUIButton.set("onclick",{fn:oButton.handler,obj:this,scope:this});}else{if(Lang.isObject(oButton.handler)&&Lang.isFunction(oButton.handler.fn)){oYUIButton.set("onclick",{fn:oButton.handler.fn,obj:((!Lang.isUndefined(oButton.handler.obj))?oButton.handler.obj:this),scope:(oButton.handler.scope||this)});}}this._aButtons[this._aButtons.length]=oYUIButton;}else{oButtonEl=document.createElement("button");oButtonEl.setAttribute("type","button");if(oButton.isDefault){oButtonEl.className="default";this.defaultHtmlButton=oButtonEl;}oButtonEl.innerHTML=oButton.text;if(Lang.isFunction(oButton.handler)){Event.on(oButtonEl,"click",oButton.handler,this,true);}else{if(Lang.isObject(oButton.handler)&&Lang.isFunction(oButton.handler.fn)){Event.on(oButtonEl,"click",oButton.handler.fn,((!Lang.isUndefined(oButton.handler.obj))?oButton.handler.obj:this),(oButton.handler.scope||this));}}oSpan.appendChild(oButtonEl);this._aButtons[this._aButtons.length]=oButtonEl;}oButton.htmlButton=oButtonEl;if(i===0){this.firstButton=oButtonEl;}if(i==(nButtons-1)){this.lastButton=oButtonEl;}}this.setFooter(oSpan);oFooter=this.footer;if(Dom.inDocument(this.element)&&!Dom.isAncestor(oInnerElement,oFooter)){oInnerElement.appendChild(oFooter);}this.buttonSpan=oSpan;}else{oSpan=this.buttonSpan;oFooter=this.footer;if(oSpan&&oFooter){oFooter.removeChild(oSpan);this.buttonSpan=null;this.firstButton=null;this.lastButton=null;this.defaultHtmlButton=null;}}this.changeContentEvent.fire();},getButtons:function(){return this._aButtons||null;},focusFirst:function(type,args,obj){var el=this.firstFormElement,focused=false;if(args&&args[1]){Event.stopEvent(args[1]);if(args[0]===9&&this.firstElement){el=this.firstElement;}}if(el){try{el.focus();focused=true;}catch(oException){}}else{if(this.defaultHtmlButton){focused=this.focusDefaultButton();}else{focused=this.focusFirstButton();}}return focused;},focusLast:function(type,args,obj){var aButtons=this.cfg.getProperty("buttons"),el=this.lastFormElement,focused=false;if(args&&args[1]){Event.stopEvent(args[1]);if(args[0]===9&&this.lastElement){el=this.lastElement;}}if(aButtons&&Lang.isArray(aButtons)){focused=this.focusLastButton();}else{if(el){try{el.focus();focused=true;}catch(oException){}}}return focused;},_getButton:function(button){var Button=YAHOO.widget.Button;if(Button&&button&&button.nodeName&&button.id){button=Button.getButton(button.id)||button;}return button;},focusDefaultButton:function(){var button=this._getButton(this.defaultHtmlButton),focused=false;if(button){try{button.focus();focused=true;}catch(oException){}}return focused;},blurButtons:function(){var aButtons=this.cfg.getProperty("buttons"),nButtons,oButton,oElement,i;if(aButtons&&Lang.isArray(aButtons)){nButtons=aButtons.length;if(nButtons>0){i=(nButtons-1);do{oButton=aButtons[i];if(oButton){oElement=this._getButton(oButton.htmlButton);if(oElement){try{oElement.blur();}catch(oException){}}}}while(i--);}}},focusFirstButton:function(){var aButtons=this.cfg.getProperty("buttons"),oButton,oElement,focused=false;if(aButtons&&Lang.isArray(aButtons)){oButton=aButtons[0];if(oButton){oElement=this._getButton(oButton.htmlButton);if(oElement){try{oElement.focus();focused=true;}catch(oException){}}}}return focused;},focusLastButton:function(){var aButtons=this.cfg.getProperty("buttons"),nButtons,oButton,oElement,focused=false;if(aButtons&&Lang.isArray(aButtons)){nButtons=aButtons.length;if(nButtons>0){oButton=aButtons[(nButtons-1)];if(oButton){oElement=this._getButton(oButton.htmlButton);if(oElement){try{oElement.focus();focused=true;}catch(oException){}}}}}return focused;},configPostMethod:function(type,args,obj){this.registerForm();},validate:function(){return true;},submit:function(){if(this.validate()){if(this.beforeSubmitEvent.fire()){this.doSubmit();this.submitEvent.fire();if(this.cfg.getProperty("hideaftersubmit")){this.hide();}return true;}else{return false;}}else{return false;}},cancel:function(){this.cancelEvent.fire();this.hide();},getData:function(){var oForm=this.form,aElements,nTotalElements,oData,sName,oElement,nElements,sType,sTagName,aOptions,nOptions,aValues,oOption,oRadio,oCheckbox,valueAttr,i,n;function isFormElement(p_oElement){var sTag=p_oElement.tagName.toUpperCase();return((sTag=="INPUT"||sTag=="TEXTAREA"||sTag=="SELECT")&&p_oElement.name==sName);}if(oForm){aElements=oForm.elements;nTotalElements=aElements.length;oData={};for(i=0;i<nTotalElements;i++){sName=aElements[i].name;oElement=Dom.getElementsBy(isFormElement,"*",oForm);nElements=oElement.length;if(nElements>0){if(nElements==1){oElement=oElement[0];sType=oElement.type;sTagName=oElement.tagName.toUpperCase();switch(sTagName){case"INPUT":if(sType=="checkbox"){oData[sName]=oElement.checked;}else{if(sType!="radio"){oData[sName]=oElement.value;}}break;case"TEXTAREA":oData[sName]=oElement.value;break;case"SELECT":aOptions=oElement.options;nOptions=aOptions.length;aValues=[];for(n=0;n<nOptions;n++){oOption=aOptions[n];if(oOption.selected){valueAttr=oOption.attributes.value;aValues[aValues.length]=(valueAttr&&valueAttr.specified)?oOption.value:oOption.text;}}oData[sName]=aValues;break;}}else{sType=oElement[0].type;switch(sType){case"radio":for(n=0;n<nElements;n++){oRadio=oElement[n];if(oRadio.checked){oData[sName]=oRadio.value;break;}}break;case"checkbox":aValues=[];for(n=0;n<nElements;n++){oCheckbox=oElement[n];if(oCheckbox.checked){aValues[aValues.length]=oCheckbox.value;}}oData[sName]=aValues;break;}}}}}return oData;},destroy:function(shallowPurge){removeButtonEventHandlers.call(this);this._aButtons=null;var aForms=this.element.getElementsByTagName("form"),oForm;if(aForms.length>0){oForm=aForms[0];if(oForm){Event.purgeElement(oForm);if(oForm.parentNode){oForm.parentNode.removeChild(oForm);}this.form=null;}}Dialog.superclass.destroy.call(this,shallowPurge);},toString:function(){return"Dialog "+this.id;}});}());(function(){YAHOO.widget.SimpleDialog=function(el,userConfig){YAHOO.widget.SimpleDialog.superclass.constructor.call(this,el,userConfig);};var Dom=YAHOO.util.Dom,SimpleDialog=YAHOO.widget.SimpleDialog,DEFAULT_CONFIG={ICON:{key:"icon",value:"none",suppressEvent:true},TEXT:{key:"text",value:"",suppressEvent:true,supercedes:["icon"]}};SimpleDialog.ICON_BLOCK="blckicon";SimpleDialog.ICON_ALARM="alrticon";SimpleDialog.ICON_HELP="hlpicon";SimpleDialog.ICON_INFO="infoicon";SimpleDialog.ICON_WARN="warnicon";SimpleDialog.ICON_TIP="tipicon";SimpleDialog.ICON_CSS_CLASSNAME="yui-icon";SimpleDialog.CSS_SIMPLEDIALOG="yui-simple-dialog";YAHOO.extend(SimpleDialog,YAHOO.widget.Dialog,{initDefaultConfig:function(){SimpleDialog.superclass.initDefaultConfig.call(this);this.cfg.addProperty(DEFAULT_CONFIG.ICON.key,{handler:this.configIcon,value:DEFAULT_CONFIG.ICON.value,suppressEvent:DEFAULT_CONFIG.ICON.suppressEvent});this.cfg.addProperty(DEFAULT_CONFIG.TEXT.key,{handler:this.configText,value:DEFAULT_CONFIG.TEXT.value,suppressEvent:DEFAULT_CONFIG.TEXT.suppressEvent,supercedes:DEFAULT_CONFIG.TEXT.supercedes});},init:function(el,userConfig){SimpleDialog.superclass.init.call(this,el);this.beforeInitEvent.fire(SimpleDialog);Dom.addClass(this.element,SimpleDialog.CSS_SIMPLEDIALOG);this.cfg.queueProperty("postmethod","manual");if(userConfig){this.cfg.applyConfig(userConfig,true);}this.beforeRenderEvent.subscribe(function(){if(!this.body){this.setBody("");}},this,true);this.initEvent.fire(SimpleDialog);},registerForm:function(){SimpleDialog.superclass.registerForm.call(this);var doc=this.form.ownerDocument,input=doc.createElement("input");input.type="hidden";input.name=this.id;input.value="";this.form.appendChild(input);},configIcon:function(type,args,obj){var sIcon=args[0],oBody=this.body,sCSSClass=SimpleDialog.ICON_CSS_CLASSNAME,aElements,oIcon,oIconParent;if(sIcon&&sIcon!="none"){aElements=Dom.getElementsByClassName(sCSSClass,"*",oBody);if(aElements.length===1){oIcon=aElements[0];oIconParent=oIcon.parentNode;if(oIconParent){oIconParent.removeChild(oIcon);oIcon=null;}}if(sIcon.indexOf(".")==-1){oIcon=document.createElement("span");oIcon.className=(sCSSClass+" "+sIcon);oIcon.innerHTML="&#160;";}else{oIcon=document.createElement("img");oIcon.src=(this.imageRoot+sIcon);oIcon.className=sCSSClass;}if(oIcon){oBody.insertBefore(oIcon,oBody.firstChild);}}},configText:function(type,args,obj){var text=args[0];if(text){this.setBody(text);this.cfg.refireEvent("icon");}},toString:function(){return"SimpleDialog "+this.id;}});}());(function(){YAHOO.widget.ContainerEffect=function(overlay,attrIn,attrOut,targetElement,animClass){if(!animClass){animClass=YAHOO.util.Anim;}this.overlay=overlay;this.attrIn=attrIn;this.attrOut=attrOut;this.targetElement=targetElement||overlay.element;this.animClass=animClass;};var Dom=YAHOO.util.Dom,CustomEvent=YAHOO.util.CustomEvent,ContainerEffect=YAHOO.widget.ContainerEffect;ContainerEffect.FADE=function(overlay,dur){var Easing=YAHOO.util.Easing,fin={attributes:{opacity:{from:0,to:1}},duration:dur,method:Easing.easeIn},fout={attributes:{opacity:{to:0}},duration:dur,method:Easing.easeOut},fade=new ContainerEffect(overlay,fin,fout,overlay.element);fade.handleUnderlayStart=function(){var underlay=this.overlay.underlay;if(underlay&&YAHOO.env.ua.ie){var hasFilters=(underlay.filters&&underlay.filters.length>0);if(hasFilters){Dom.addClass(overlay.element,"yui-effect-fade");}}};fade.handleUnderlayComplete=function(){var underlay=this.overlay.underlay;if(underlay&&YAHOO.env.ua.ie){Dom.removeClass(overlay.element,"yui-effect-fade");}};fade.handleStartAnimateIn=function(type,args,obj){obj.overlay._fadingIn=true;Dom.addClass(obj.overlay.element,"hide-select");if(!obj.overlay.underlay){obj.overlay.cfg.refireEvent("underlay");}obj.handleUnderlayStart();obj.overlay._setDomVisibility(true);Dom.setStyle(obj.overlay.element,"opacity",0);};fade.handleCompleteAnimateIn=function(type,args,obj){obj.overlay._fadingIn=false;Dom.removeClass(obj.overlay.element,"hide-select");if(obj.overlay.element.style.filter){obj.overlay.element.style.filter=null;}obj.handleUnderlayComplete();obj.overlay.cfg.refireEvent("iframe");obj.animateInCompleteEvent.fire();};fade.handleStartAnimateOut=function(type,args,obj){obj.overlay._fadingOut=true;Dom.addClass(obj.overlay.element,"hide-select");obj.handleUnderlayStart();};fade.handleCompleteAnimateOut=function(type,args,obj){obj.overlay._fadingOut=false;Dom.removeClass(obj.overlay.element,"hide-select");if(obj.overlay.element.style.filter){obj.overlay.element.style.filter=null;}obj.overlay._setDomVisibility(false);Dom.setStyle(obj.overlay.element,"opacity",1);obj.handleUnderlayComplete();obj.overlay.cfg.refireEvent("iframe");obj.animateOutCompleteEvent.fire();};fade.init();return fade;};ContainerEffect.SLIDE=function(overlay,dur){var Easing=YAHOO.util.Easing,x=overlay.cfg.getProperty("x")||Dom.getX(overlay.element),y=overlay.cfg.getProperty("y")||Dom.getY(overlay.element),clientWidth=Dom.getClientWidth(),offsetWidth=overlay.element.offsetWidth,sin={attributes:{points:{to:[x,y]}},duration:dur,method:Easing.easeIn},sout={attributes:{points:{to:[(clientWidth+25),y]}},duration:dur,method:Easing.easeOut},slide=new ContainerEffect(overlay,sin,sout,overlay.element,YAHOO.util.Motion);slide.handleStartAnimateIn=function(type,args,obj){obj.overlay.element.style.left=((-25)-offsetWidth)+"px";obj.overlay.element.style.top=y+"px";};slide.handleTweenAnimateIn=function(type,args,obj){var pos=Dom.getXY(obj.overlay.element),currentX=pos[0],currentY=pos[1];if(Dom.getStyle(obj.overlay.element,"visibility")=="hidden"&&currentX<x){obj.overlay._setDomVisibility(true);}obj.overlay.cfg.setProperty("xy",[currentX,currentY],true);obj.overlay.cfg.refireEvent("iframe");};slide.handleCompleteAnimateIn=function(type,args,obj){obj.overlay.cfg.setProperty("xy",[x,y],true);obj.startX=x;obj.startY=y;obj.overlay.cfg.refireEvent("iframe");obj.animateInCompleteEvent.fire();};slide.handleStartAnimateOut=function(type,args,obj){var vw=Dom.getViewportWidth(),pos=Dom.getXY(obj.overlay.element),yso=pos[1];obj.animOut.attributes.points.to=[(vw+25),yso];};slide.handleTweenAnimateOut=function(type,args,obj){var pos=Dom.getXY(obj.overlay.element),xto=pos[0],yto=pos[1];obj.overlay.cfg.setProperty("xy",[xto,yto],true);obj.overlay.cfg.refireEvent("iframe");};slide.handleCompleteAnimateOut=function(type,args,obj){obj.overlay._setDomVisibility(false);obj.overlay.cfg.setProperty("xy",[x,y]);obj.animateOutCompleteEvent.fire();};slide.init();return slide;};ContainerEffect.prototype={init:function(){this.beforeAnimateInEvent=this.createEvent("beforeAnimateIn");this.beforeAnimateInEvent.signature=CustomEvent.LIST;this.beforeAnimateOutEvent=this.createEvent("beforeAnimateOut");this.beforeAnimateOutEvent.signature=CustomEvent.LIST;this.animateInCompleteEvent=this.createEvent("animateInComplete");this.animateInCompleteEvent.signature=CustomEvent.LIST;this.animateOutCompleteEvent=this.createEvent("animateOutComplete");this.animateOutCompleteEvent.signature=CustomEvent.LIST;this.animIn=new this.animClass(this.targetElement,this.attrIn.attributes,this.attrIn.duration,this.attrIn.method);this.animIn.onStart.subscribe(this.handleStartAnimateIn,this);this.animIn.onTween.subscribe(this.handleTweenAnimateIn,this);this.animIn.onComplete.subscribe(this.handleCompleteAnimateIn,this);this.animOut=new this.animClass(this.targetElement,this.attrOut.attributes,this.attrOut.duration,this.attrOut.method);this.animOut.onStart.subscribe(this.handleStartAnimateOut,this);this.animOut.onTween.subscribe(this.handleTweenAnimateOut,this);this.animOut.onComplete.subscribe(this.handleCompleteAnimateOut,this);},animateIn:function(){this._stopAnims(this.lastFrameOnStop);this.beforeAnimateInEvent.fire();this.animIn.animate();},animateOut:function(){this._stopAnims(this.lastFrameOnStop);this.beforeAnimateOutEvent.fire();this.animOut.animate();},lastFrameOnStop:true,_stopAnims:function(finish){if(this.animOut&&this.animOut.isAnimated()){this.animOut.stop(finish);}if(this.animIn&&this.animIn.isAnimated()){this.animIn.stop(finish);}},handleStartAnimateIn:function(type,args,obj){},handleTweenAnimateIn:function(type,args,obj){},handleCompleteAnimateIn:function(type,args,obj){},handleStartAnimateOut:function(type,args,obj){},handleTweenAnimateOut:function(type,args,obj){},handleCompleteAnimateOut:function(type,args,obj){},toString:function(){var output="ContainerEffect";if(this.overlay){output+=" ["+this.overlay.toString()+"]";}return output;}};YAHOO.lang.augmentProto(ContainerEffect,YAHOO.util.EventProvider);})();YAHOO.register("container",YAHOO.widget.Module,{version:"2.9.0",build:"2800"});
			/* /yui_container */

			/* bluebird.promise.js */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=e();}else{if("function"==typeof define&&define.amd){define([],e);}else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.Promise=e();}}}(function(){var define,module,exports;return(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_=="function"&&_dereq_;if(!u&&a){return a(o,!0);}if(i){return i(o,!0);}var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f;}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e);},l,l.exports,e,t,n,r);}return n[o].exports;}var i=typeof _dereq_=="function"&&_dereq_;for(var o=0;o<r.length;o++){s(r[o]);}return s;})({1:[function(_dereq_,module,exports){module.exports=function(Promise){var SomePromiseArray=Promise._SomePromiseArray;function any(promises){var ret=new SomePromiseArray(promises);var promise=ret.promise();ret.setHowMany(1);ret.setUnwrap();ret.init();return promise;}Promise.any=function(promises){return any(promises);};Promise.prototype.any=function(){return any(this);};};},{}],2:[function(_dereq_,module,exports){var firstLineError;try{throw new Error();}catch(e){firstLineError=e;}var schedule=_dereq_("./schedule");var Queue=_dereq_("./queue");var util=_dereq_("./util");function Async(){this._customScheduler=false;this._isTickUsed=false;this._lateQueue=new Queue(16);this._normalQueue=new Queue(16);this._haveDrainedQueues=false;this._trampolineEnabled=true;var self=this;this.drainQueues=function(){self._drainQueues();};this._schedule=schedule;}Async.prototype.setScheduler=function(fn){var prev=this._schedule;this._schedule=fn;this._customScheduler=true;return prev;};Async.prototype.hasCustomScheduler=function(){return this._customScheduler;};Async.prototype.enableTrampoline=function(){this._trampolineEnabled=true;};Async.prototype.disableTrampolineIfNecessary=function(){if(util.hasDevTools){this._trampolineEnabled=false;}};Async.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues;};Async.prototype.fatalError=function(e,isNode){if(isNode){process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n");process.exit(2);}else{this.throwLater(e);}};Async.prototype.throwLater=function(fn,arg){if(arguments.length===1){arg=fn;fn=function(){throw arg;};}if(typeof setTimeout!=="undefined"){setTimeout(function(){fn(arg);},0);}else{try{this._schedule(function(){fn(arg);});}catch(e){throw new Error("No async scheduler available\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}}};function AsyncInvokeLater(fn,receiver,arg){this._lateQueue.push(fn,receiver,arg);this._queueTick();}function AsyncInvoke(fn,receiver,arg){this._normalQueue.push(fn,receiver,arg);this._queueTick();}function AsyncSettlePromises(promise){this._normalQueue._pushOne(promise);this._queueTick();}if(!util.hasDevTools){Async.prototype.invokeLater=AsyncInvokeLater;Async.prototype.invoke=AsyncInvoke;Async.prototype.settlePromises=AsyncSettlePromises;}else{Async.prototype.invokeLater=function(fn,receiver,arg){if(this._trampolineEnabled){AsyncInvokeLater.call(this,fn,receiver,arg);}else{this._schedule(function(){setTimeout(function(){fn.call(receiver,arg);},100);});}};Async.prototype.invoke=function(fn,receiver,arg){if(this._trampolineEnabled){AsyncInvoke.call(this,fn,receiver,arg);}else{this._schedule(function(){fn.call(receiver,arg);});}};Async.prototype.settlePromises=function(promise){if(this._trampolineEnabled){AsyncSettlePromises.call(this,promise);}else{this._schedule(function(){promise._settlePromises();});}};}function _drainQueue(queue){while(queue.length()>0){_drainQueueStep(queue);}}function _drainQueueStep(queue){var fn=queue.shift();if(typeof fn!=="function"){fn._settlePromises();}else{var receiver=queue.shift();var arg=queue.shift();fn.call(receiver,arg);}}Async.prototype._drainQueues=function(){_drainQueue(this._normalQueue);this._reset();this._haveDrainedQueues=true;_drainQueue(this._lateQueue);};Async.prototype._queueTick=function(){if(!this._isTickUsed){this._isTickUsed=true;this._schedule(this.drainQueues);}};Async.prototype._reset=function(){this._isTickUsed=false;};module.exports=Async;module.exports.firstLineError=firstLineError;},{"./queue":26,"./schedule":29,"./util":36}],3:[function(_dereq_,module,exports){module.exports=function(Promise,INTERNAL,tryConvertToPromise,debug){var calledBind=false;var rejectThis=function(_,e){this._reject(e);};var targetRejected=function(e,context){context.promiseRejectionQueued=true;context.bindingPromise._then(rejectThis,rejectThis,null,this,e);};var bindingResolved=function(thisArg,context){if(((this._bitField&50397184)===0)){this._resolveCallback(context.target);}};var bindingRejected=function(e,context){if(!context.promiseRejectionQueued){this._reject(e);}};Promise.prototype.bind=function(thisArg){if(!calledBind){calledBind=true;Promise.prototype._propagateFrom=debug.propagateFromFunction();Promise.prototype._boundValue=debug.boundValueFunction();}var maybePromise=tryConvertToPromise(thisArg);var ret=new Promise(INTERNAL);ret._propagateFrom(this,1);var target=this._target();ret._setBoundTo(maybePromise);if(maybePromise instanceof Promise){var context={promiseRejectionQueued:false,promise:ret,target:target,bindingPromise:maybePromise};target._then(INTERNAL,targetRejected,undefined,ret,context);maybePromise._then(bindingResolved,bindingRejected,undefined,ret,context);ret._setOnCancel(maybePromise);}else{ret._resolveCallback(target);}return ret;};Promise.prototype._setBoundTo=function(obj){if(obj!==undefined){this._bitField=this._bitField|2097152;this._boundTo=obj;}else{this._bitField=this._bitField&(~2097152);}};Promise.prototype._isBound=function(){return(this._bitField&2097152)===2097152;};Promise.bind=function(thisArg,value){return Promise.resolve(value).bind(thisArg);};};},{}],4:[function(_dereq_,module,exports){var old;if(typeof Promise!=="undefined"){old=Promise;}function noConflict(){try{if(Promise===bluebird){Promise=old;}}catch(e){}return bluebird;}var bluebird=_dereq_("./promise")();bluebird.noConflict=noConflict;module.exports=bluebird;},{"./promise":22}],5:[function(_dereq_,module,exports){var cr=Object.create;if(cr){var callerCache=cr(null);var getterCache=cr(null);callerCache[" size"]=getterCache[" size"]=0;}module.exports=function(Promise){var util=_dereq_("./util");var canEvaluate=util.canEvaluate;var isIdentifier=util.isIdentifier;var getMethodCaller;var getGetter;if(!true){var makeMethodCaller=function(methodName){return new Function("ensureMethod","                                    \n        return function(obj) {                                               \n            'use strict'                                                     \n            var len = this.length;                                           \n            ensureMethod(obj, 'methodName');                                 \n            switch(len) {                                                    \n                case 1: return obj.methodName(this[0]);                      \n                case 2: return obj.methodName(this[0], this[1]);             \n                case 3: return obj.methodName(this[0], this[1], this[2]);    \n                case 0: return obj.methodName();                             \n                default:                                                     \n                    return obj.methodName.apply(obj, this);                  \n            }                                                                \n        };                                                                   \n        ".replace(/methodName/g,methodName))(ensureMethod);};var makeGetter=function(propertyName){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",propertyName));};var getCompiled=function(name,compiler,cache){var ret=cache[name];if(typeof ret!=="function"){if(!isIdentifier(name)){return null;}ret=compiler(name);cache[name]=ret;cache[" size"]++;if(cache[" size"]>512){var keys=Object.keys(cache);for(var i=0;i<256;++i){delete cache[keys[i]];}cache[" size"]=keys.length-256;}}return ret;};getMethodCaller=function(name){return getCompiled(name,makeMethodCaller,callerCache);};getGetter=function(name){return getCompiled(name,makeGetter,getterCache);};}function ensureMethod(obj,methodName){var fn;if(obj!=null){fn=obj[methodName];}if(typeof fn!=="function"){var message="Object "+util.classString(obj)+" has no method '"+util.toString(methodName)+"'";throw new Promise.TypeError(message);}return fn;}function caller(obj){var methodName=this.pop();var fn=ensureMethod(obj,methodName);return fn.apply(obj,this);}Promise.prototype.call=function(methodName){var args=[].slice.call(arguments,1);if(!true){if(canEvaluate){var maybeCaller=getMethodCaller(methodName);if(maybeCaller!==null){return this._then(maybeCaller,undefined,undefined,args,undefined);}}}args.push(methodName);return this._then(caller,undefined,undefined,args,undefined);};function namedGetter(obj){return obj[this];}function indexedGetter(obj){var index=+this;if(index<0){index=Math.max(0,index+obj.length);}return obj[index];}Promise.prototype.get=function(propertyName){var isIndex=(typeof propertyName==="number");var getter;if(!isIndex){if(canEvaluate){var maybeGetter=getGetter(propertyName);getter=maybeGetter!==null?maybeGetter:namedGetter;}else{getter=namedGetter;}}else{getter=indexedGetter;}return this._then(getter,undefined,undefined,propertyName,undefined);};};},{"./util":36}],6:[function(_dereq_,module,exports){module.exports=function(Promise,PromiseArray,apiRejection,debug){var util=_dereq_("./util");var tryCatch=util.tryCatch;var errorObj=util.errorObj;var async=Promise._async;Promise.prototype["break"]=Promise.prototype.cancel=function(){if(!debug.cancellation()){return this._warn("cancellation is disabled");}var promise=this;var child=promise;while(promise._isCancellable()){if(!promise._cancelBy(child)){if(child._isFollowing()){child._followee().cancel();}else{child._cancelBranched();}break;}var parent=promise._cancellationParent;if(parent==null||!parent._isCancellable()){if(promise._isFollowing()){promise._followee().cancel();}else{promise._cancelBranched();}break;}else{if(promise._isFollowing()){promise._followee().cancel();}promise._setWillBeCancelled();child=promise;promise=parent;}}};Promise.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--;};Promise.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===undefined||this._branchesRemainingToCancel<=0;};Promise.prototype._cancelBy=function(canceller){if(canceller===this){this._branchesRemainingToCancel=0;this._invokeOnCancel();return true;}else{this._branchHasCancelled();if(this._enoughBranchesHaveCancelled()){this._invokeOnCancel();return true;}}return false;};Promise.prototype._cancelBranched=function(){if(this._enoughBranchesHaveCancelled()){this._cancel();}};Promise.prototype._cancel=function(){if(!this._isCancellable()){return;}this._setCancelled();async.invoke(this._cancelPromises,this,undefined);};Promise.prototype._cancelPromises=function(){if(this._length()>0){this._settlePromises();}};Promise.prototype._unsetOnCancel=function(){this._onCancelField=undefined;};Promise.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled();};Promise.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled();};Promise.prototype._doInvokeOnCancel=function(onCancelCallback,internalOnly){if(util.isArray(onCancelCallback)){for(var i=0;i<onCancelCallback.length;++i){this._doInvokeOnCancel(onCancelCallback[i],internalOnly);}}else{if(onCancelCallback!==undefined){if(typeof onCancelCallback==="function"){if(!internalOnly){var e=tryCatch(onCancelCallback).call(this._boundValue());if(e===errorObj){this._attachExtraTrace(e.e);async.throwLater(e.e);}}}else{onCancelCallback._resultCancelled(this);}}}};Promise.prototype._invokeOnCancel=function(){var onCancelCallback=this._onCancel();this._unsetOnCancel();async.invoke(this._doInvokeOnCancel,this,onCancelCallback);};Promise.prototype._invokeInternalOnCancel=function(){if(this._isCancellable()){this._doInvokeOnCancel(this._onCancel(),true);this._unsetOnCancel();}};Promise.prototype._resultCancelled=function(){this.cancel();};};},{"./util":36}],7:[function(_dereq_,module,exports){module.exports=function(NEXT_FILTER){var util=_dereq_("./util");var getKeys=_dereq_("./es5").keys;var tryCatch=util.tryCatch;var errorObj=util.errorObj;function catchFilter(instances,cb,promise){return function(e){var boundTo=promise._boundValue();predicateLoop:for(var i=0;i<instances.length;++i){var item=instances[i];if(item===Error||(item!=null&&item.prototype instanceof Error)){if(e instanceof item){return tryCatch(cb).call(boundTo,e);}}else{if(typeof item==="function"){var matchesPredicate=tryCatch(item).call(boundTo,e);if(matchesPredicate===errorObj){return matchesPredicate;}else{if(matchesPredicate){return tryCatch(cb).call(boundTo,e);}}}else{if(util.isObject(e)){var keys=getKeys(item);for(var j=0;j<keys.length;++j){var key=keys[j];if(item[key]!=e[key]){continue predicateLoop;}}return tryCatch(cb).call(boundTo,e);}}}}return NEXT_FILTER;};}return catchFilter;};},{"./es5":13,"./util":36}],8:[function(_dereq_,module,exports){module.exports=function(Promise){var longStackTraces=false;var contextStack=[];Promise.prototype._promiseCreated=function(){};Promise.prototype._pushContext=function(){};Promise.prototype._popContext=function(){return null;};Promise._peekContext=Promise.prototype._peekContext=function(){};function Context(){this._trace=new Context.CapturedTrace(peekContext());}Context.prototype._pushContext=function(){if(this._trace!==undefined){this._trace._promiseCreated=null;contextStack.push(this._trace);}};Context.prototype._popContext=function(){if(this._trace!==undefined){var trace=contextStack.pop();var ret=trace._promiseCreated;trace._promiseCreated=null;return ret;}return null;};function createContext(){if(longStackTraces){return new Context();}}function peekContext(){var lastIndex=contextStack.length-1;if(lastIndex>=0){return contextStack[lastIndex];}return undefined;}Context.CapturedTrace=null;Context.create=createContext;Context.deactivateLongStackTraces=function(){};Context.activateLongStackTraces=function(){var Promise_pushContext=Promise.prototype._pushContext;var Promise_popContext=Promise.prototype._popContext;var Promise_PeekContext=Promise._peekContext;var Promise_peekContext=Promise.prototype._peekContext;var Promise_promiseCreated=Promise.prototype._promiseCreated;Context.deactivateLongStackTraces=function(){Promise.prototype._pushContext=Promise_pushContext;Promise.prototype._popContext=Promise_popContext;Promise._peekContext=Promise_PeekContext;Promise.prototype._peekContext=Promise_peekContext;Promise.prototype._promiseCreated=Promise_promiseCreated;longStackTraces=false;};longStackTraces=true;Promise.prototype._pushContext=Context.prototype._pushContext;Promise.prototype._popContext=Context.prototype._popContext;Promise._peekContext=Promise.prototype._peekContext=peekContext;Promise.prototype._promiseCreated=function(){var ctx=this._peekContext();if(ctx&&ctx._promiseCreated==null){ctx._promiseCreated=this;}};};return Context;};},{}],9:[function(_dereq_,module,exports){module.exports=function(Promise,Context){var getDomain=Promise._getDomain;var async=Promise._async;var Warning=_dereq_("./errors").Warning;var util=_dereq_("./util");var es5=_dereq_("./es5");var canAttachTrace=util.canAttachTrace;var unhandledRejectionHandled;var possiblyUnhandledRejection;var bluebirdFramePattern=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/;var nodeFramePattern=/\((?:timers\.js):\d+:\d+\)/;var parseLinePattern=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/;var stackFramePattern=null;var formatStack=null;var indentStackFrames=false;var printWarning;var debugging=!!(util.env("BLUEBIRD_DEBUG")!=0&&(true||util.env("BLUEBIRD_DEBUG")||util.env("NODE_ENV")==="development"));var warnings=!!(util.env("BLUEBIRD_WARNINGS")!=0&&(debugging||util.env("BLUEBIRD_WARNINGS")));var longStackTraces=!!(util.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(debugging||util.env("BLUEBIRD_LONG_STACK_TRACES")));var wForgottenReturn=util.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(warnings||!!util.env("BLUEBIRD_W_FORGOTTEN_RETURN"));Promise.prototype.suppressUnhandledRejections=function(){var target=this._target();target._bitField=((target._bitField&(~1048576))|524288);};Promise.prototype._ensurePossibleRejectionHandled=function(){if((this._bitField&524288)!==0){return;}this._setRejectionIsUnhandled();var self=this;setTimeout(function(){self._notifyUnhandledRejection();},1);};Promise.prototype._notifyUnhandledRejectionIsHandled=function(){fireRejectionEvent("rejectionHandled",unhandledRejectionHandled,undefined,this);};Promise.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456;};Promise.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0;};Promise.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var reason=this._settledValue();this._setUnhandledRejectionIsNotified();fireRejectionEvent("unhandledRejection",possiblyUnhandledRejection,reason,this);}};Promise.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144;};Promise.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&(~262144);};Promise.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0;};Promise.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576;};Promise.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&(~1048576);if(this._isUnhandledRejectionNotified()){this._unsetUnhandledRejectionIsNotified();this._notifyUnhandledRejectionIsHandled();}};Promise.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0;};Promise.prototype._warn=function(message,shouldUseOwnTrace,promise){return warn(message,shouldUseOwnTrace,promise||this);};Promise.onPossiblyUnhandledRejection=function(fn){var domain=getDomain();possiblyUnhandledRejection=typeof fn==="function"?(domain===null?fn:util.domainBind(domain,fn)):undefined;};Promise.onUnhandledRejectionHandled=function(fn){var domain=getDomain();unhandledRejectionHandled=typeof fn==="function"?(domain===null?fn:util.domainBind(domain,fn)):undefined;};var disableLongStackTraces=function(){};Promise.longStackTraces=function(){if(async.haveItemsQueued()&&!config.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}if(!config.longStackTraces&&longStackTracesIsSupported()){var Promise_captureStackTrace=Promise.prototype._captureStackTrace;var Promise_attachExtraTrace=Promise.prototype._attachExtraTrace;var Promise_dereferenceTrace=Promise.prototype._dereferenceTrace;config.longStackTraces=true;disableLongStackTraces=function(){if(async.haveItemsQueued()&&!config.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}Promise.prototype._captureStackTrace=Promise_captureStackTrace;Promise.prototype._attachExtraTrace=Promise_attachExtraTrace;Promise.prototype._dereferenceTrace=Promise_dereferenceTrace;Context.deactivateLongStackTraces();async.enableTrampoline();config.longStackTraces=false;};Promise.prototype._captureStackTrace=longStackTracesCaptureStackTrace;Promise.prototype._attachExtraTrace=longStackTracesAttachExtraTrace;Promise.prototype._dereferenceTrace=longStackTracesDereferenceTrace;Context.activateLongStackTraces();async.disableTrampolineIfNecessary();}};Promise.hasLongStackTraces=function(){return config.longStackTraces&&longStackTracesIsSupported();};var fireDomEvent=(function(){try{if(typeof CustomEvent==="function"){var event=new CustomEvent("CustomEvent");util.global.dispatchEvent(event);return function(name,event){var eventData={detail:event,cancelable:true};es5.defineProperty(eventData,"promise",{value:event.promise});es5.defineProperty(eventData,"reason",{value:event.reason});var domEvent=new CustomEvent(name.toLowerCase(),eventData);return !util.global.dispatchEvent(domEvent);};}else{if(typeof Event==="function"){var event=new Event("CustomEvent");util.global.dispatchEvent(event);return function(name,event){var domEvent=new Event(name.toLowerCase(),{cancelable:true});domEvent.detail=event;es5.defineProperty(domEvent,"promise",{value:event.promise});es5.defineProperty(domEvent,"reason",{value:event.reason});return !util.global.dispatchEvent(domEvent);};}else{var event=document.createEvent("CustomEvent");event.initCustomEvent("testingtheevent",false,true,{});util.global.dispatchEvent(event);return function(name,event){var domEvent=document.createEvent("CustomEvent");domEvent.initCustomEvent(name.toLowerCase(),false,true,event);return !util.global.dispatchEvent(domEvent);};}}}catch(e){}return function(){return false;};})();var fireGlobalEvent=(function(){if(util.isNode){return function(){return process.emit.apply(process,arguments);};}else{if(!util.global){return function(){return false;};}return function(name){var methodName="on"+name.toLowerCase();var method=util.global[methodName];if(!method){return false;}method.apply(util.global,[].slice.call(arguments,1));return true;};}})();function generatePromiseLifecycleEventObject(name,promise){return{promise:promise};}var eventToObjectGenerator={promiseCreated:generatePromiseLifecycleEventObject,promiseFulfilled:generatePromiseLifecycleEventObject,promiseRejected:generatePromiseLifecycleEventObject,promiseResolved:generatePromiseLifecycleEventObject,promiseCancelled:generatePromiseLifecycleEventObject,promiseChained:function(name,promise,child){return{promise:promise,child:child};},warning:function(name,warning){return{warning:warning};},unhandledRejection:function(name,reason,promise){return{reason:reason,promise:promise};},rejectionHandled:generatePromiseLifecycleEventObject};var activeFireEvent=function(name){var globalEventFired=false;try{globalEventFired=fireGlobalEvent.apply(null,arguments);}catch(e){async.throwLater(e);globalEventFired=true;}var domEventFired=false;try{domEventFired=fireDomEvent(name,eventToObjectGenerator[name].apply(null,arguments));}catch(e){async.throwLater(e);domEventFired=true;}return domEventFired||globalEventFired;};Promise.config=function(opts){opts=Object(opts);if("longStackTraces" in opts){if(opts.longStackTraces){Promise.longStackTraces();}else{if(!opts.longStackTraces&&Promise.hasLongStackTraces()){disableLongStackTraces();}}}if("warnings" in opts){var warningsOption=opts.warnings;config.warnings=!!warningsOption;wForgottenReturn=config.warnings;if(util.isObject(warningsOption)){if("wForgottenReturn" in warningsOption){wForgottenReturn=!!warningsOption.wForgottenReturn;}}}if("cancellation" in opts&&opts.cancellation&&!config.cancellation){if(async.haveItemsQueued()){throw new Error("cannot enable cancellation after promises are in use");}Promise.prototype._clearCancellationData=cancellationClearCancellationData;Promise.prototype._propagateFrom=cancellationPropagateFrom;Promise.prototype._onCancel=cancellationOnCancel;Promise.prototype._setOnCancel=cancellationSetOnCancel;Promise.prototype._attachCancellationCallback=cancellationAttachCancellationCallback;Promise.prototype._execute=cancellationExecute;propagateFromFunction=cancellationPropagateFrom;config.cancellation=true;}if("monitoring" in opts){if(opts.monitoring&&!config.monitoring){config.monitoring=true;Promise.prototype._fireEvent=activeFireEvent;}else{if(!opts.monitoring&&config.monitoring){config.monitoring=false;Promise.prototype._fireEvent=defaultFireEvent;}}}return Promise;};function defaultFireEvent(){return false;}Promise.prototype._fireEvent=defaultFireEvent;Promise.prototype._execute=function(executor,resolve,reject){try{executor(resolve,reject);}catch(e){return e;}};Promise.prototype._onCancel=function(){};Promise.prototype._setOnCancel=function(handler){};Promise.prototype._attachCancellationCallback=function(onCancel){};Promise.prototype._captureStackTrace=function(){};Promise.prototype._attachExtraTrace=function(){};Promise.prototype._dereferenceTrace=function(){};Promise.prototype._clearCancellationData=function(){};Promise.prototype._propagateFrom=function(parent,flags){};function cancellationExecute(executor,resolve,reject){var promise=this;try{executor(resolve,reject,function(onCancel){if(typeof onCancel!=="function"){throw new TypeError("onCancel must be a function, got: "+util.toString(onCancel));}promise._attachCancellationCallback(onCancel);});}catch(e){return e;}}function cancellationAttachCancellationCallback(onCancel){if(!this._isCancellable()){return this;}var previousOnCancel=this._onCancel();if(previousOnCancel!==undefined){if(util.isArray(previousOnCancel)){previousOnCancel.push(onCancel);}else{this._setOnCancel([previousOnCancel,onCancel]);}}else{this._setOnCancel(onCancel);}}function cancellationOnCancel(){return this._onCancelField;}function cancellationSetOnCancel(onCancel){this._onCancelField=onCancel;}function cancellationClearCancellationData(){this._cancellationParent=undefined;this._onCancelField=undefined;}function cancellationPropagateFrom(parent,flags){if((flags&1)!==0){this._cancellationParent=parent;var branchesRemainingToCancel=parent._branchesRemainingToCancel;if(branchesRemainingToCancel===undefined){branchesRemainingToCancel=0;}parent._branchesRemainingToCancel=branchesRemainingToCancel+1;}if((flags&2)!==0&&parent._isBound()){this._setBoundTo(parent._boundTo);}}function bindingPropagateFrom(parent,flags){if((flags&2)!==0&&parent._isBound()){this._setBoundTo(parent._boundTo);}}var propagateFromFunction=bindingPropagateFrom;function boundValueFunction(){var ret=this._boundTo;if(ret!==undefined){if(ret instanceof Promise){if(ret.isFulfilled()){return ret.value();}else{return undefined;}}}return ret;}function longStackTracesCaptureStackTrace(){this._trace=new CapturedTrace(this._peekContext());}function longStackTracesAttachExtraTrace(error,ignoreSelf){if(canAttachTrace(error)){var trace=this._trace;if(trace!==undefined){if(ignoreSelf){trace=trace._parent;}}if(trace!==undefined){trace.attachExtraTrace(error);}else{if(!error.__stackCleaned__){var parsed=parseStackAndMessage(error);util.notEnumerableProp(error,"stack",parsed.message+"\n"+parsed.stack.join("\n"));util.notEnumerableProp(error,"__stackCleaned__",true);}}}}function longStackTracesDereferenceTrace(){this._trace=undefined;}function checkForgottenReturns(returnValue,promiseCreated,name,promise,parent){if(returnValue===undefined&&promiseCreated!==null&&wForgottenReturn){if(parent!==undefined&&parent._returnedNonUndefined()){return;}if((promise._bitField&65535)===0){return;}if(name){name=name+" ";}var handlerLine="";var creatorLine="";if(promiseCreated._trace){var traceLines=promiseCreated._trace.stack.split("\n");var stack=cleanStack(traceLines);for(var i=stack.length-1;i>=0;--i){var line=stack[i];if(!nodeFramePattern.test(line)){var lineMatches=line.match(parseLinePattern);if(lineMatches){handlerLine="at "+lineMatches[1]+":"+lineMatches[2]+":"+lineMatches[3]+" ";}break;}}if(stack.length>0){var firstUserLine=stack[0];for(var i=0;i<traceLines.length;++i){if(traceLines[i]===firstUserLine){if(i>0){creatorLine="\n"+traceLines[i-1];}break;}}}}var msg="a promise was created in a "+name+"handler "+handlerLine+"but was not returned from it, see http://goo.gl/rRqMUw"+creatorLine;promise._warn(msg,true,promiseCreated);}}function deprecated(name,replacement){var message=name+" is deprecated and will be removed in a future version.";if(replacement){message+=" Use "+replacement+" instead.";}return warn(message);}function warn(message,shouldUseOwnTrace,promise){if(!config.warnings){return;}var warning=new Warning(message);var ctx;if(shouldUseOwnTrace){promise._attachExtraTrace(warning);}else{if(config.longStackTraces&&(ctx=Promise._peekContext())){ctx.attachExtraTrace(warning);}else{var parsed=parseStackAndMessage(warning);warning.stack=parsed.message+"\n"+parsed.stack.join("\n");}}if(!activeFireEvent("warning",warning)){formatAndLogError(warning,"",true);}}function reconstructStack(message,stacks){for(var i=0;i<stacks.length-1;++i){stacks[i].push("From previous event:");stacks[i]=stacks[i].join("\n");}if(i<stacks.length){stacks[i]=stacks[i].join("\n");}return message+"\n"+stacks.join("\n");}function removeDuplicateOrEmptyJumps(stacks){for(var i=0;i<stacks.length;++i){if(stacks[i].length===0||((i+1<stacks.length)&&stacks[i][0]===stacks[i+1][0])){stacks.splice(i,1);i--;}}}function removeCommonRoots(stacks){var current=stacks[0];for(var i=1;i<stacks.length;++i){var prev=stacks[i];var currentLastIndex=current.length-1;var currentLastLine=current[currentLastIndex];var commonRootMeetPoint=-1;for(var j=prev.length-1;j>=0;--j){if(prev[j]===currentLastLine){commonRootMeetPoint=j;break;}}for(var j=commonRootMeetPoint;j>=0;--j){var line=prev[j];if(current[currentLastIndex]===line){current.pop();currentLastIndex--;}else{break;}}current=prev;}}function cleanStack(stack){var ret=[];for(var i=0;i<stack.length;++i){var line=stack[i];var isTraceLine="    (No stack trace)"===line||stackFramePattern.test(line);var isInternalFrame=isTraceLine&&shouldIgnore(line);if(isTraceLine&&!isInternalFrame){if(indentStackFrames&&line.charAt(0)!==" "){line="    "+line;}ret.push(line);}}return ret;}function stackFramesAsArray(error){var stack=error.stack.replace(/\s+$/g,"").split("\n");for(var i=0;i<stack.length;++i){var line=stack[i];if("    (No stack trace)"===line||stackFramePattern.test(line)){break;}}if(i>0&&error.name!="SyntaxError"){stack=stack.slice(i);}return stack;}function parseStackAndMessage(error){var stack=error.stack;var message=error.toString();stack=typeof stack==="string"&&stack.length>0?stackFramesAsArray(error):["    (No stack trace)"];return{message:message,stack:error.name=="SyntaxError"?stack:cleanStack(stack)};}function formatAndLogError(error,title,isSoft){if(typeof console!=="undefined"){var message;if(util.isObject(error)){var stack=error.stack;message=title+formatStack(stack,error);}else{message=title+String(error);}if(typeof printWarning==="function"){printWarning(message,isSoft);}else{if(typeof console.log==="function"||typeof console.log==="object"){console.log(message);}}}}function fireRejectionEvent(name,localHandler,reason,promise){var localEventFired=false;try{if(typeof localHandler==="function"){localEventFired=true;if(name==="rejectionHandled"){localHandler(promise);}else{localHandler(reason,promise);}}}catch(e){async.throwLater(e);}if(name==="unhandledRejection"){if(!activeFireEvent(name,reason,promise)&&!localEventFired){formatAndLogError(reason,"Unhandled rejection ");}}else{activeFireEvent(name,promise);}}function formatNonError(obj){var str;if(typeof obj==="function"){str="[function "+(obj.name||"anonymous")+"]";}else{str=obj&&typeof obj.toString==="function"?obj.toString():util.toString(obj);var ruselessToString=/\[object [a-zA-Z0-9$_]+\]/;if(ruselessToString.test(str)){try{var newStr=JSON.stringify(obj);str=newStr;}catch(e){}}if(str.length===0){str="(empty array)";}}return("(<"+snip(str)+">, no stack trace)");}function snip(str){var maxChars=41;if(str.length<maxChars){return str;}return str.substr(0,maxChars-3)+"...";}function longStackTracesIsSupported(){return typeof captureStackTrace==="function";}var shouldIgnore=function(){return false;};var parseLineInfoRegex=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function parseLineInfo(line){var matches=line.match(parseLineInfoRegex);if(matches){return{fileName:matches[1],line:parseInt(matches[2],10)};}}function setBounds(firstLineError,lastLineError){if(!longStackTracesIsSupported()){return;}var firstStackLines=firstLineError.stack.split("\n");var lastStackLines=lastLineError.stack.split("\n");var firstIndex=-1;var lastIndex=-1;var firstFileName;var lastFileName;for(var i=0;i<firstStackLines.length;++i){var result=parseLineInfo(firstStackLines[i]);if(result){firstFileName=result.fileName;firstIndex=result.line;break;}}for(var i=0;i<lastStackLines.length;++i){var result=parseLineInfo(lastStackLines[i]);if(result){lastFileName=result.fileName;lastIndex=result.line;break;}}if(firstIndex<0||lastIndex<0||!firstFileName||!lastFileName||firstFileName!==lastFileName||firstIndex>=lastIndex){return;}shouldIgnore=function(line){if(bluebirdFramePattern.test(line)){return true;}var info=parseLineInfo(line);if(info){if(info.fileName===firstFileName&&(firstIndex<=info.line&&info.line<=lastIndex)){return true;}}return false;};}function CapturedTrace(parent){this._parent=parent;this._promisesCreated=0;var length=this._length=1+(parent===undefined?0:parent._length);captureStackTrace(this,CapturedTrace);if(length>32){this.uncycle();}}util.inherits(CapturedTrace,Error);Context.CapturedTrace=CapturedTrace;CapturedTrace.prototype.uncycle=function(){var length=this._length;if(length<2){return;}var nodes=[];var stackToIndex={};for(var i=0,node=this;node!==undefined;++i){nodes.push(node);node=node._parent;}length=this._length=i;for(var i=length-1;i>=0;--i){var stack=nodes[i].stack;if(stackToIndex[stack]===undefined){stackToIndex[stack]=i;}}for(var i=0;i<length;++i){var currentStack=nodes[i].stack;var index=stackToIndex[currentStack];if(index!==undefined&&index!==i){if(index>0){nodes[index-1]._parent=undefined;nodes[index-1]._length=1;}nodes[i]._parent=undefined;nodes[i]._length=1;var cycleEdgeNode=i>0?nodes[i-1]:this;if(index<length-1){cycleEdgeNode._parent=nodes[index+1];cycleEdgeNode._parent.uncycle();cycleEdgeNode._length=cycleEdgeNode._parent._length+1;}else{cycleEdgeNode._parent=undefined;cycleEdgeNode._length=1;}var currentChildLength=cycleEdgeNode._length+1;for(var j=i-2;j>=0;--j){nodes[j]._length=currentChildLength;currentChildLength++;}return;}}};CapturedTrace.prototype.attachExtraTrace=function(error){if(error.__stackCleaned__){return;}this.uncycle();var parsed=parseStackAndMessage(error);var message=parsed.message;var stacks=[parsed.stack];var trace=this;while(trace!==undefined){stacks.push(cleanStack(trace.stack.split("\n")));trace=trace._parent;}removeCommonRoots(stacks);removeDuplicateOrEmptyJumps(stacks);util.notEnumerableProp(error,"stack",reconstructStack(message,stacks));util.notEnumerableProp(error,"__stackCleaned__",true);};var captureStackTrace=(function stackDetection(){var v8stackFramePattern=/^\s*at\s*/;var v8stackFormatter=function(stack,error){if(typeof stack==="string"){return stack;}if(error.name!==undefined&&error.message!==undefined){return error.toString();}return formatNonError(error);};if(typeof Error.stackTraceLimit==="number"&&typeof Error.captureStackTrace==="function"){Error.stackTraceLimit+=6;stackFramePattern=v8stackFramePattern;formatStack=v8stackFormatter;var captureStackTrace=Error.captureStackTrace;shouldIgnore=function(line){return bluebirdFramePattern.test(line);};return function(receiver,ignoreUntil){Error.stackTraceLimit+=6;captureStackTrace(receiver,ignoreUntil);Error.stackTraceLimit-=6;};}var err=new Error();if(typeof err.stack==="string"&&err.stack.split("\n")[0].indexOf("stackDetection@")>=0){stackFramePattern=/@/;formatStack=v8stackFormatter;indentStackFrames=true;return function captureStackTrace(o){o.stack=new Error().stack;};}var hasStackAfterThrow;try{throw new Error();}catch(e){hasStackAfterThrow=("stack" in e);}if(!("stack" in err)&&hasStackAfterThrow&&typeof Error.stackTraceLimit==="number"){stackFramePattern=v8stackFramePattern;formatStack=v8stackFormatter;return function captureStackTrace(o){Error.stackTraceLimit+=6;try{throw new Error();}catch(e){o.stack=e.stack;}Error.stackTraceLimit-=6;};}formatStack=function(stack,error){if(typeof stack==="string"){return stack;}if((typeof error==="object"||typeof error==="function")&&error.name!==undefined&&error.message!==undefined){return error.toString();}return formatNonError(error);};return null;})([]);if(typeof console!=="undefined"&&typeof console.warn!=="undefined"){printWarning=function(message){console.warn(message);};if(util.isNode&&process.stderr.isTTY){printWarning=function(message,isSoft){var color=isSoft?"\u001b[33m":"\u001b[31m";console.warn(color+message+"\u001b[0m\n");};}else{if(!util.isNode&&typeof(new Error().stack)==="string"){printWarning=function(message,isSoft){console.warn("%c"+message,isSoft?"color: darkorange":"color: red");};}}}var config={warnings:warnings,longStackTraces:false,cancellation:false,monitoring:false};if(longStackTraces){Promise.longStackTraces();}return{longStackTraces:function(){return config.longStackTraces;},warnings:function(){return config.warnings;},cancellation:function(){return config.cancellation;},monitoring:function(){return config.monitoring;},propagateFromFunction:function(){return propagateFromFunction;},boundValueFunction:function(){return boundValueFunction;},checkForgottenReturns:checkForgottenReturns,setBounds:setBounds,warn:warn,deprecated:deprecated,CapturedTrace:CapturedTrace,fireDomEvent:fireDomEvent,fireGlobalEvent:fireGlobalEvent};};},{"./errors":12,"./es5":13,"./util":36}],10:[function(_dereq_,module,exports){module.exports=function(Promise){function returner(){return this.value;}function thrower(){throw this.reason;}Promise.prototype["return"]=Promise.prototype.thenReturn=function(value){if(value instanceof Promise){value.suppressUnhandledRejections();}return this._then(returner,undefined,undefined,{value:value},undefined);};Promise.prototype["throw"]=Promise.prototype.thenThrow=function(reason){return this._then(thrower,undefined,undefined,{reason:reason},undefined);};Promise.prototype.catchThrow=function(reason){if(arguments.length<=1){return this._then(undefined,thrower,undefined,{reason:reason},undefined);}else{var _reason=arguments[1];var handler=function(){throw _reason;};return this.caught(reason,handler);}};Promise.prototype.catchReturn=function(value){if(arguments.length<=1){if(value instanceof Promise){value.suppressUnhandledRejections();}return this._then(undefined,returner,undefined,{value:value},undefined);}else{var _value=arguments[1];if(_value instanceof Promise){_value.suppressUnhandledRejections();}var handler=function(){return _value;};return this.caught(value,handler);}};};},{}],11:[function(_dereq_,module,exports){module.exports=function(Promise,INTERNAL){var PromiseReduce=Promise.reduce;var PromiseAll=Promise.all;function promiseAllThis(){return PromiseAll(this);}function PromiseMapSeries(promises,fn){return PromiseReduce(promises,fn,INTERNAL,INTERNAL);}Promise.prototype.each=function(fn){return PromiseReduce(this,fn,INTERNAL,0)._then(promiseAllThis,undefined,undefined,this,undefined);};Promise.prototype.mapSeries=function(fn){return PromiseReduce(this,fn,INTERNAL,INTERNAL);};Promise.each=function(promises,fn){return PromiseReduce(promises,fn,INTERNAL,0)._then(promiseAllThis,undefined,undefined,promises,undefined);};Promise.mapSeries=PromiseMapSeries;};},{}],12:[function(_dereq_,module,exports){var es5=_dereq_("./es5");var Objectfreeze=es5.freeze;var util=_dereq_("./util");var inherits=util.inherits;var notEnumerableProp=util.notEnumerableProp;function subError(nameProperty,defaultMessage){function SubError(message){if(!(this instanceof SubError)){return new SubError(message);}notEnumerableProp(this,"message",typeof message==="string"?message:defaultMessage);notEnumerableProp(this,"name",nameProperty);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor);}else{Error.call(this);}}inherits(SubError,Error);return SubError;}var _TypeError,_RangeError;var Warning=subError("Warning","warning");var CancellationError=subError("CancellationError","cancellation error");var TimeoutError=subError("TimeoutError","timeout error");var AggregateError=subError("AggregateError","aggregate error");try{_TypeError=TypeError;_RangeError=RangeError;}catch(e){_TypeError=subError("TypeError","type error");_RangeError=subError("RangeError","range error");}var methods=("join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse").split(" ");for(var i=0;i<methods.length;++i){if(typeof Array.prototype[methods[i]]==="function"){AggregateError.prototype[methods[i]]=Array.prototype[methods[i]];}}es5.defineProperty(AggregateError.prototype,"length",{value:0,configurable:false,writable:true,enumerable:true});AggregateError.prototype.isOperational=true;var level=0;AggregateError.prototype.toString=function(){var indent=Array(level*4+1).join(" ");var ret="\n"+indent+"AggregateError of:\n";level++;indent=Array(level*4+1).join(" ");for(var i=0;i<this.length;++i){var str=this[i]===this?"[Circular AggregateError]":this[i]+"";var lines=str.split("\n");for(var j=0;j<lines.length;++j){lines[j]=indent+lines[j];}str=lines.join("\n");ret+=str+"\n";}level--;return ret;};function OperationalError(message){if(!(this instanceof OperationalError)){return new OperationalError(message);}notEnumerableProp(this,"name","OperationalError");notEnumerableProp(this,"message",message);this.cause=message;this["isOperational"]=true;if(message instanceof Error){notEnumerableProp(this,"message",message.message);notEnumerableProp(this,"stack",message.stack);}else{if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor);}}}inherits(OperationalError,Error);var errorTypes=Error.__BluebirdErrorTypes__;if(!errorTypes){errorTypes=Objectfreeze({CancellationError:CancellationError,TimeoutError:TimeoutError,OperationalError:OperationalError,RejectionError:OperationalError,AggregateError:AggregateError});es5.defineProperty(Error,"__BluebirdErrorTypes__",{value:errorTypes,writable:false,enumerable:false,configurable:false});}module.exports={Error:Error,TypeError:_TypeError,RangeError:_RangeError,CancellationError:errorTypes.CancellationError,OperationalError:errorTypes.OperationalError,TimeoutError:errorTypes.TimeoutError,AggregateError:errorTypes.AggregateError,Warning:Warning};},{"./es5":13,"./util":36}],13:[function(_dereq_,module,exports){var isES5=(function(){return this===undefined;})();if(isES5){module.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:isES5,propertyIsWritable:function(obj,prop){var descriptor=Object.getOwnPropertyDescriptor(obj,prop);return !!(!descriptor||descriptor.writable||descriptor.set);}};}else{var has={}.hasOwnProperty;var str={}.toString;var proto={}.constructor.prototype;var ObjectKeys=function(o){var ret=[];for(var key in o){if(has.call(o,key)){ret.push(key);}}return ret;};var ObjectGetDescriptor=function(o,key){return{value:o[key]};};var ObjectDefineProperty=function(o,key,desc){o[key]=desc.value;return o;};var ObjectFreeze=function(obj){return obj;};var ObjectGetPrototypeOf=function(obj){try{return Object(obj).constructor.prototype;}catch(e){return proto;}};var ArrayIsArray=function(obj){try{return str.call(obj)==="[object Array]";}catch(e){return false;}};module.exports={isArray:ArrayIsArray,keys:ObjectKeys,names:ObjectKeys,defineProperty:ObjectDefineProperty,getDescriptor:ObjectGetDescriptor,freeze:ObjectFreeze,getPrototypeOf:ObjectGetPrototypeOf,isES5:isES5,propertyIsWritable:function(){return true;}};}},{}],14:[function(_dereq_,module,exports){module.exports=function(Promise,INTERNAL){var PromiseMap=Promise.map;Promise.prototype.filter=function(fn,options){return PromiseMap(this,fn,options,INTERNAL);};Promise.filter=function(promises,fn,options){return PromiseMap(promises,fn,options,INTERNAL);};};},{}],15:[function(_dereq_,module,exports){module.exports=function(Promise,tryConvertToPromise,NEXT_FILTER){var util=_dereq_("./util");var CancellationError=Promise.CancellationError;var errorObj=util.errorObj;var catchFilter=_dereq_("./catch_filter")(NEXT_FILTER);function PassThroughHandlerContext(promise,type,handler){this.promise=promise;this.type=type;this.handler=handler;this.called=false;this.cancelPromise=null;}PassThroughHandlerContext.prototype.isFinallyHandler=function(){return this.type===0;};function FinallyHandlerCancelReaction(finallyHandler){this.finallyHandler=finallyHandler;}FinallyHandlerCancelReaction.prototype._resultCancelled=function(){checkCancel(this.finallyHandler);};function checkCancel(ctx,reason){if(ctx.cancelPromise!=null){if(arguments.length>1){ctx.cancelPromise._reject(reason);}else{ctx.cancelPromise._cancel();}ctx.cancelPromise=null;return true;}return false;}function succeed(){return finallyHandler.call(this,this.promise._target()._settledValue());}function fail(reason){if(checkCancel(this,reason)){return;}errorObj.e=reason;return errorObj;}function finallyHandler(reasonOrValue){var promise=this.promise;var handler=this.handler;if(!this.called){this.called=true;var ret=this.isFinallyHandler()?handler.call(promise._boundValue()):handler.call(promise._boundValue(),reasonOrValue);if(ret===NEXT_FILTER){return ret;}else{if(ret!==undefined){promise._setReturnedNonUndefined();var maybePromise=tryConvertToPromise(ret,promise);if(maybePromise instanceof Promise){if(this.cancelPromise!=null){if(maybePromise._isCancelled()){var reason=new CancellationError("late cancellation observer");promise._attachExtraTrace(reason);errorObj.e=reason;return errorObj;}else{if(maybePromise.isPending()){maybePromise._attachCancellationCallback(new FinallyHandlerCancelReaction(this));}}}return maybePromise._then(succeed,fail,undefined,this,undefined);}}}}if(promise.isRejected()){checkCancel(this);errorObj.e=reasonOrValue;return errorObj;}else{checkCancel(this);return reasonOrValue;}}Promise.prototype._passThrough=function(handler,type,success,fail){if(typeof handler!=="function"){return this.then();}return this._then(success,fail,undefined,new PassThroughHandlerContext(this,type,handler),undefined);};Promise.prototype.lastly=Promise.prototype["finally"]=function(handler){return this._passThrough(handler,0,finallyHandler,finallyHandler);};Promise.prototype.tap=function(handler){return this._passThrough(handler,1,finallyHandler);};Promise.prototype.tapCatch=function(handlerOrPredicate){var len=arguments.length;if(len===1){return this._passThrough(handlerOrPredicate,1,undefined,finallyHandler);}else{var catchInstances=new Array(len-1),j=0,i;for(i=0;i<len-1;++i){var item=arguments[i];if(util.isObject(item)){catchInstances[j++]=item;}else{return Promise.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+util.classString(item)));}}catchInstances.length=j;var handler=arguments[i];return this._passThrough(catchFilter(catchInstances,handler,this),1,undefined,finallyHandler);}};return PassThroughHandlerContext;};},{"./catch_filter":7,"./util":36}],16:[function(_dereq_,module,exports){module.exports=function(Promise,apiRejection,INTERNAL,tryConvertToPromise,Proxyable,debug){var errors=_dereq_("./errors");var TypeError=errors.TypeError;var util=_dereq_("./util");var errorObj=util.errorObj;var tryCatch=util.tryCatch;var yieldHandlers=[];function promiseFromYieldHandler(value,yieldHandlers,traceParent){for(var i=0;i<yieldHandlers.length;++i){traceParent._pushContext();var result=tryCatch(yieldHandlers[i])(value);traceParent._popContext();if(result===errorObj){traceParent._pushContext();var ret=Promise.reject(errorObj.e);traceParent._popContext();return ret;}var maybePromise=tryConvertToPromise(result,traceParent);if(maybePromise instanceof Promise){return maybePromise;}}return null;}function PromiseSpawn(generatorFunction,receiver,yieldHandler,stack){if(debug.cancellation()){var internal=new Promise(INTERNAL);var _finallyPromise=this._finallyPromise=new Promise(INTERNAL);this._promise=internal.lastly(function(){return _finallyPromise;});internal._captureStackTrace();internal._setOnCancel(this);}else{var promise=this._promise=new Promise(INTERNAL);promise._captureStackTrace();}this._stack=stack;this._generatorFunction=generatorFunction;this._receiver=receiver;this._generator=undefined;this._yieldHandlers=typeof yieldHandler==="function"?[yieldHandler].concat(yieldHandlers):yieldHandlers;this._yieldedPromise=null;this._cancellationPhase=false;}util.inherits(PromiseSpawn,Proxyable);PromiseSpawn.prototype._isResolved=function(){return this._promise===null;};PromiseSpawn.prototype._cleanup=function(){this._promise=this._generator=null;if(debug.cancellation()&&this._finallyPromise!==null){this._finallyPromise._fulfill();this._finallyPromise=null;}};PromiseSpawn.prototype._promiseCancelled=function(){if(this._isResolved()){return;}var implementsReturn=typeof this._generator["return"]!=="undefined";var result;if(!implementsReturn){var reason=new Promise.CancellationError("generator .return() sentinel");Promise.coroutine.returnSentinel=reason;this._promise._attachExtraTrace(reason);this._promise._pushContext();result=tryCatch(this._generator["throw"]).call(this._generator,reason);this._promise._popContext();}else{this._promise._pushContext();result=tryCatch(this._generator["return"]).call(this._generator,undefined);this._promise._popContext();}this._cancellationPhase=true;this._yieldedPromise=null;this._continue(result);};PromiseSpawn.prototype._promiseFulfilled=function(value){this._yieldedPromise=null;this._promise._pushContext();var result=tryCatch(this._generator.next).call(this._generator,value);this._promise._popContext();this._continue(result);};PromiseSpawn.prototype._promiseRejected=function(reason){this._yieldedPromise=null;this._promise._attachExtraTrace(reason);this._promise._pushContext();var result=tryCatch(this._generator["throw"]).call(this._generator,reason);this._promise._popContext();this._continue(result);};PromiseSpawn.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof Promise){var promise=this._yieldedPromise;this._yieldedPromise=null;promise.cancel();}};PromiseSpawn.prototype.promise=function(){return this._promise;};PromiseSpawn.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=undefined;this._promiseFulfilled(undefined);};PromiseSpawn.prototype._continue=function(result){var promise=this._promise;if(result===errorObj){this._cleanup();if(this._cancellationPhase){return promise.cancel();}else{return promise._rejectCallback(result.e,false);}}var value=result.value;if(result.done===true){this._cleanup();if(this._cancellationPhase){return promise.cancel();}else{return promise._resolveCallback(value);}}else{var maybePromise=tryConvertToPromise(value,this._promise);if(!(maybePromise instanceof Promise)){maybePromise=promiseFromYieldHandler(maybePromise,this._yieldHandlers,this._promise);if(maybePromise===null){this._promiseRejected(new TypeError("A value %s was yielded that could not be treated as a promise\u000a\u000a    See http://goo.gl/MqrFmX\u000a\u000a".replace("%s",String(value))+"From coroutine:\u000a"+this._stack.split("\n").slice(1,-7).join("\n")));return;}}maybePromise=maybePromise._target();var bitField=maybePromise._bitField;if(((bitField&50397184)===0)){this._yieldedPromise=maybePromise;maybePromise._proxy(this,null);}else{if(((bitField&33554432)!==0)){Promise._async.invoke(this._promiseFulfilled,this,maybePromise._value());}else{if(((bitField&16777216)!==0)){Promise._async.invoke(this._promiseRejected,this,maybePromise._reason());}else{this._promiseCancelled();}}}}};Promise.coroutine=function(generatorFunction,options){if(typeof generatorFunction!=="function"){throw new TypeError("generatorFunction must be a function\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}var yieldHandler=Object(options).yieldHandler;var PromiseSpawn$=PromiseSpawn;var stack=new Error().stack;return function(){var generator=generatorFunction.apply(this,arguments);var spawn=new PromiseSpawn$(undefined,undefined,yieldHandler,stack);var ret=spawn.promise();spawn._generator=generator;spawn._promiseFulfilled(undefined);return ret;};};Promise.coroutine.addYieldHandler=function(fn){if(typeof fn!=="function"){throw new TypeError("expecting a function but got "+util.classString(fn));}yieldHandlers.push(fn);};Promise.spawn=function(generatorFunction){debug.deprecated("Promise.spawn()","Promise.coroutine()");if(typeof generatorFunction!=="function"){return apiRejection("generatorFunction must be a function\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}var spawn=new PromiseSpawn(generatorFunction,this);var ret=spawn.promise();spawn._run(Promise.spawn);return ret;};};},{"./errors":12,"./util":36}],17:[function(_dereq_,module,exports){module.exports=function(Promise,PromiseArray,tryConvertToPromise,INTERNAL,async,getDomain){var util=_dereq_("./util");var canEvaluate=util.canEvaluate;var tryCatch=util.tryCatch;var errorObj=util.errorObj;var reject;if(!true){if(canEvaluate){var thenCallback=function(i){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,i));};var promiseSetter=function(i){return new Function("promise","holder","                           \n            'use strict';                                                    \n            holder.pIndex = promise;                                         \n            ".replace(/Index/g,i));};var generateHolderClass=function(total){var props=new Array(total);for(var i=0;i<props.length;++i){props[i]="this.p"+(i+1);}var assignment=props.join(" = ")+" = null;";var cancellationCode="var promise;\n"+props.map(function(prop){return"                                                         \n                promise = "+prop+";                                      \n                if (promise instanceof Promise) {                            \n                    promise.cancel();                                        \n                }                                                            \n            ";}).join("\n");var passedArguments=props.join(", ");var name="Holder$"+total;var code="return function(tryCatch, errorObj, Promise, async) {    \n            'use strict';                                                    \n            function [TheName](fn) {                                         \n                [TheProperties]                                              \n                this.fn = fn;                                                \n                this.asyncNeeded = true;                                     \n                this.now = 0;                                                \n            }                                                                \n                                                                             \n            [TheName].prototype._callFunction = function(promise) {          \n                promise._pushContext();                                      \n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \n                promise._popContext();                                       \n                if (ret === errorObj) {                                      \n                    promise._rejectCallback(ret.e, false);                   \n                } else {                                                     \n                    promise._resolveCallback(ret);                           \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype.checkFulfillment = function(promise) {       \n                var now = ++this.now;                                        \n                if (now === [TheTotal]) {                                    \n                    if (this.asyncNeeded) {                                  \n                        async.invoke(this._callFunction, this, promise);     \n                    } else {                                                 \n                        this._callFunction(promise);                         \n                    }                                                        \n                                                                             \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype._resultCancelled = function() {              \n                [CancellationCode]                                           \n            };                                                               \n                                                                             \n            return [TheName];                                                \n        }(tryCatch, errorObj, Promise, async);                               \n        ";code=code.replace(/\[TheName\]/g,name).replace(/\[TheTotal\]/g,total).replace(/\[ThePassedArguments\]/g,passedArguments).replace(/\[TheProperties\]/g,assignment).replace(/\[CancellationCode\]/g,cancellationCode);return new Function("tryCatch","errorObj","Promise","async",code)(tryCatch,errorObj,Promise,async);};var holderClasses=[];var thenCallbacks=[];var promiseSetters=[];for(var i=0;i<8;++i){holderClasses.push(generateHolderClass(i+1));thenCallbacks.push(thenCallback(i+1));promiseSetters.push(promiseSetter(i+1));}reject=function(reason){this._reject(reason);};}}Promise.join=function(){var last=arguments.length-1;var fn;if(last>0&&typeof arguments[last]==="function"){fn=arguments[last];if(!true){if(last<=8&&canEvaluate){var ret=new Promise(INTERNAL);ret._captureStackTrace();var HolderClass=holderClasses[last-1];var holder=new HolderClass(fn);var callbacks=thenCallbacks;for(var i=0;i<last;++i){var maybePromise=tryConvertToPromise(arguments[i],ret);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();var bitField=maybePromise._bitField;if(((bitField&50397184)===0)){maybePromise._then(callbacks[i],reject,undefined,ret,holder);promiseSetters[i](maybePromise,holder);holder.asyncNeeded=false;}else{if(((bitField&33554432)!==0)){callbacks[i].call(ret,maybePromise._value(),holder);}else{if(((bitField&16777216)!==0)){ret._reject(maybePromise._reason());}else{ret._cancel();}}}}else{callbacks[i].call(ret,maybePromise,holder);}}if(!ret._isFateSealed()){if(holder.asyncNeeded){var domain=getDomain();if(domain!==null){holder.fn=util.domainBind(domain,holder.fn);}}ret._setAsyncGuaranteed();ret._setOnCancel(holder);}return ret;}}}var args=[].slice.call(arguments);if(fn){args.pop();}var ret=new PromiseArray(args).promise();return fn!==undefined?ret.spread(fn):ret;};};},{"./util":36}],18:[function(_dereq_,module,exports){module.exports=function(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug){var getDomain=Promise._getDomain;var util=_dereq_("./util");var tryCatch=util.tryCatch;var errorObj=util.errorObj;var async=Promise._async;function MappingPromiseArray(promises,fn,limit,_filter){this.constructor$(promises);this._promise._captureStackTrace();var domain=getDomain();this._callback=domain===null?fn:util.domainBind(domain,fn);this._preservedValues=_filter===INTERNAL?new Array(this.length()):null;this._limit=limit;this._inFlight=0;this._queue=[];async.invoke(this._asyncInit,this,undefined);}util.inherits(MappingPromiseArray,PromiseArray);MappingPromiseArray.prototype._asyncInit=function(){this._init$(undefined,-2);};MappingPromiseArray.prototype._init=function(){};MappingPromiseArray.prototype._promiseFulfilled=function(value,index){var values=this._values;var length=this.length();var preservedValues=this._preservedValues;var limit=this._limit;if(index<0){index=(index*-1)-1;values[index]=value;if(limit>=1){this._inFlight--;this._drainQueue();if(this._isResolved()){return true;}}}else{if(limit>=1&&this._inFlight>=limit){values[index]=value;this._queue.push(index);return false;}if(preservedValues!==null){preservedValues[index]=value;}var promise=this._promise;var callback=this._callback;var receiver=promise._boundValue();promise._pushContext();var ret=tryCatch(callback).call(receiver,value,index,length);var promiseCreated=promise._popContext();debug.checkForgottenReturns(ret,promiseCreated,preservedValues!==null?"Promise.filter":"Promise.map",promise);if(ret===errorObj){this._reject(ret.e);return true;}var maybePromise=tryConvertToPromise(ret,this._promise);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();var bitField=maybePromise._bitField;if(((bitField&50397184)===0)){if(limit>=1){this._inFlight++;}values[index]=maybePromise;maybePromise._proxy(this,(index+1)*-1);return false;}else{if(((bitField&33554432)!==0)){ret=maybePromise._value();}else{if(((bitField&16777216)!==0)){this._reject(maybePromise._reason());return true;}else{this._cancel();return true;}}}}values[index]=ret;}var totalResolved=++this._totalResolved;if(totalResolved>=length){if(preservedValues!==null){this._filter(values,preservedValues);}else{this._resolve(values);}return true;}return false;};MappingPromiseArray.prototype._drainQueue=function(){var queue=this._queue;var limit=this._limit;var values=this._values;while(queue.length>0&&this._inFlight<limit){if(this._isResolved()){return;}var index=queue.pop();this._promiseFulfilled(values[index],index);}};MappingPromiseArray.prototype._filter=function(booleans,values){var len=values.length;var ret=new Array(len);var j=0;for(var i=0;i<len;++i){if(booleans[i]){ret[j++]=values[i];}}ret.length=j;this._resolve(ret);};MappingPromiseArray.prototype.preservedValues=function(){return this._preservedValues;};function map(promises,fn,options,_filter){if(typeof fn!=="function"){return apiRejection("expecting a function but got "+util.classString(fn));}var limit=0;if(options!==undefined){if(typeof options==="object"&&options!==null){if(typeof options.concurrency!=="number"){return Promise.reject(new TypeError("'concurrency' must be a number but it is "+util.classString(options.concurrency)));}limit=options.concurrency;}else{return Promise.reject(new TypeError("options argument must be an object but it is "+util.classString(options)));}}limit=typeof limit==="number"&&isFinite(limit)&&limit>=1?limit:0;return new MappingPromiseArray(promises,fn,limit,_filter).promise();}Promise.prototype.map=function(fn,options){return map(this,fn,options,null);};Promise.map=function(promises,fn,options,_filter){return map(promises,fn,options,_filter);};};},{"./util":36}],19:[function(_dereq_,module,exports){module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection,debug){var util=_dereq_("./util");var tryCatch=util.tryCatch;Promise.method=function(fn){if(typeof fn!=="function"){throw new Promise.TypeError("expecting a function but got "+util.classString(fn));}return function(){var ret=new Promise(INTERNAL);ret._captureStackTrace();ret._pushContext();var value=tryCatch(fn).apply(this,arguments);var promiseCreated=ret._popContext();debug.checkForgottenReturns(value,promiseCreated,"Promise.method",ret);ret._resolveFromSyncValue(value);return ret;};};Promise.attempt=Promise["try"]=function(fn){if(typeof fn!=="function"){return apiRejection("expecting a function but got "+util.classString(fn));}var ret=new Promise(INTERNAL);ret._captureStackTrace();ret._pushContext();var value;if(arguments.length>1){debug.deprecated("calling Promise.try with more than 1 argument");var arg=arguments[1];var ctx=arguments[2];value=util.isArray(arg)?tryCatch(fn).apply(ctx,arg):tryCatch(fn).call(ctx,arg);}else{value=tryCatch(fn)();}var promiseCreated=ret._popContext();debug.checkForgottenReturns(value,promiseCreated,"Promise.try",ret);ret._resolveFromSyncValue(value);return ret;};Promise.prototype._resolveFromSyncValue=function(value){if(value===util.errorObj){this._rejectCallback(value.e,false);}else{this._resolveCallback(value,true);}};};},{"./util":36}],20:[function(_dereq_,module,exports){var util=_dereq_("./util");var maybeWrapAsError=util.maybeWrapAsError;var errors=_dereq_("./errors");var OperationalError=errors.OperationalError;var es5=_dereq_("./es5");function isUntypedError(obj){return obj instanceof Error&&es5.getPrototypeOf(obj)===Error.prototype;}var rErrorKey=/^(?:name|message|stack|cause)$/;function wrapAsOperationalError(obj){var ret;if(isUntypedError(obj)){ret=new OperationalError(obj);ret.name=obj.name;ret.message=obj.message;ret.stack=obj.stack;var keys=es5.keys(obj);for(var i=0;i<keys.length;++i){var key=keys[i];if(!rErrorKey.test(key)){ret[key]=obj[key];}}return ret;}util.markAsOriginatingFromRejection(obj);return obj;}function nodebackForPromise(promise,multiArgs){return function(err,value){if(promise===null){return;}if(err){var wrapped=wrapAsOperationalError(maybeWrapAsError(err));promise._attachExtraTrace(wrapped);promise._reject(wrapped);}else{if(!multiArgs){promise._fulfill(value);}else{var args=[].slice.call(arguments,1);promise._fulfill(args);}}promise=null;};}module.exports=nodebackForPromise;},{"./errors":12,"./es5":13,"./util":36}],21:[function(_dereq_,module,exports){module.exports=function(Promise){var util=_dereq_("./util");var async=Promise._async;var tryCatch=util.tryCatch;var errorObj=util.errorObj;function spreadAdapter(val,nodeback){var promise=this;if(!util.isArray(val)){return successAdapter.call(promise,val,nodeback);}var ret=tryCatch(nodeback).apply(promise._boundValue(),[null].concat(val));if(ret===errorObj){async.throwLater(ret.e);}}function successAdapter(val,nodeback){var promise=this;var receiver=promise._boundValue();var ret=val===undefined?tryCatch(nodeback).call(receiver,null):tryCatch(nodeback).call(receiver,null,val);if(ret===errorObj){async.throwLater(ret.e);}}function errorAdapter(reason,nodeback){var promise=this;if(!reason){var newReason=new Error(reason+"");newReason.cause=reason;reason=newReason;}var ret=tryCatch(nodeback).call(promise._boundValue(),reason);if(ret===errorObj){async.throwLater(ret.e);}}Promise.prototype.asCallback=Promise.prototype.nodeify=function(nodeback,options){if(typeof nodeback=="function"){var adapter=successAdapter;if(options!==undefined&&Object(options).spread){adapter=spreadAdapter;}this._then(adapter,errorAdapter,undefined,this,nodeback);}return this;};};},{"./util":36}],22:[function(_dereq_,module,exports){module.exports=function(){var makeSelfResolutionError=function(){return new TypeError("circular promise resolution chain\u000a\u000a    See http://goo.gl/MqrFmX\u000a");};var reflectHandler=function(){return new Promise.PromiseInspection(this._target());};var apiRejection=function(msg){return Promise.reject(new TypeError(msg));};function Proxyable(){}var UNDEFINED_BINDING={};var util=_dereq_("./util");var getDomain;if(util.isNode){getDomain=function(){var ret=process.domain;if(ret===undefined){ret=null;}return ret;};}else{getDomain=function(){return null;};}util.notEnumerableProp(Promise,"_getDomain",getDomain);var es5=_dereq_("./es5");var Async=_dereq_("./async");var async=new Async();es5.defineProperty(Promise,"_async",{value:async});var errors=_dereq_("./errors");var TypeError=Promise.TypeError=errors.TypeError;Promise.RangeError=errors.RangeError;var CancellationError=Promise.CancellationError=errors.CancellationError;Promise.TimeoutError=errors.TimeoutError;Promise.OperationalError=errors.OperationalError;Promise.RejectionError=errors.OperationalError;Promise.AggregateError=errors.AggregateError;var INTERNAL=function(){};var APPLY={};var NEXT_FILTER={};var tryConvertToPromise=_dereq_("./thenables")(Promise,INTERNAL);var PromiseArray=_dereq_("./promise_array")(Promise,INTERNAL,tryConvertToPromise,apiRejection,Proxyable);var Context=_dereq_("./context")(Promise);var createContext=Context.create;var debug=_dereq_("./debuggability")(Promise,Context);var CapturedTrace=debug.CapturedTrace;var PassThroughHandlerContext=_dereq_("./finally")(Promise,tryConvertToPromise,NEXT_FILTER);var catchFilter=_dereq_("./catch_filter")(NEXT_FILTER);var nodebackForPromise=_dereq_("./nodeback");var errorObj=util.errorObj;var tryCatch=util.tryCatch;function check(self,executor){if(self==null||self.constructor!==Promise){throw new TypeError("the promise constructor cannot be invoked directly\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}if(typeof executor!=="function"){throw new TypeError("expecting a function but got "+util.classString(executor));}}function Promise(executor){if(executor!==INTERNAL){check(this,executor);}this._bitField=0;this._fulfillmentHandler0=undefined;this._rejectionHandler0=undefined;this._promise0=undefined;this._receiver0=undefined;this._resolveFromExecutor(executor);this._promiseCreated();this._fireEvent("promiseCreated",this);}Promise.prototype.toString=function(){return"[object Promise]";};Promise.prototype.caught=Promise.prototype["catch"]=function(fn){var len=arguments.length;if(len>1){var catchInstances=new Array(len-1),j=0,i;for(i=0;i<len-1;++i){var item=arguments[i];if(util.isObject(item)){catchInstances[j++]=item;}else{return apiRejection("Catch statement predicate: expecting an object but got "+util.classString(item));}}catchInstances.length=j;fn=arguments[i];return this.then(undefined,catchFilter(catchInstances,fn,this));}return this.then(undefined,fn);};Promise.prototype.reflect=function(){return this._then(reflectHandler,reflectHandler,undefined,this,undefined);};Promise.prototype.then=function(didFulfill,didReject){if(debug.warnings()&&arguments.length>0&&typeof didFulfill!=="function"&&typeof didReject!=="function"){var msg=".then() only accepts functions but was passed: "+util.classString(didFulfill);if(arguments.length>1){msg+=", "+util.classString(didReject);}this._warn(msg);}return this._then(didFulfill,didReject,undefined,undefined,undefined);};Promise.prototype.done=function(didFulfill,didReject){var promise=this._then(didFulfill,didReject,undefined,undefined,undefined);promise._setIsFinal();};Promise.prototype.spread=function(fn){if(typeof fn!=="function"){return apiRejection("expecting a function but got "+util.classString(fn));}return this.all()._then(fn,undefined,undefined,APPLY,undefined);};Promise.prototype.toJSON=function(){var ret={isFulfilled:false,isRejected:false,fulfillmentValue:undefined,rejectionReason:undefined};if(this.isFulfilled()){ret.fulfillmentValue=this.value();ret.isFulfilled=true;}else{if(this.isRejected()){ret.rejectionReason=this.reason();ret.isRejected=true;}}return ret;};Promise.prototype.all=function(){if(arguments.length>0){this._warn(".all() was passed arguments but it does not take any");}return new PromiseArray(this).promise();};Promise.prototype.error=function(fn){return this.caught(util.originatesFromRejection,fn);};Promise.getNewLibraryCopy=module.exports;Promise.is=function(val){return val instanceof Promise;};Promise.fromNode=Promise.fromCallback=function(fn){var ret=new Promise(INTERNAL);ret._captureStackTrace();var multiArgs=arguments.length>1?!!Object(arguments[1]).multiArgs:false;var result=tryCatch(fn)(nodebackForPromise(ret,multiArgs));if(result===errorObj){ret._rejectCallback(result.e,true);}if(!ret._isFateSealed()){ret._setAsyncGuaranteed();}return ret;};Promise.all=function(promises){return new PromiseArray(promises).promise();};Promise.cast=function(obj){var ret=tryConvertToPromise(obj);if(!(ret instanceof Promise)){ret=new Promise(INTERNAL);ret._captureStackTrace();ret._setFulfilled();ret._rejectionHandler0=obj;}return ret;};Promise.resolve=Promise.fulfilled=Promise.cast;Promise.reject=Promise.rejected=function(reason){var ret=new Promise(INTERNAL);ret._captureStackTrace();ret._rejectCallback(reason,true);return ret;};Promise.setScheduler=function(fn){if(typeof fn!=="function"){throw new TypeError("expecting a function but got "+util.classString(fn));}return async.setScheduler(fn);};Promise.prototype._then=function(didFulfill,didReject,_,receiver,internalData){var haveInternalData=internalData!==undefined;var promise=haveInternalData?internalData:new Promise(INTERNAL);var target=this._target();var bitField=target._bitField;if(!haveInternalData){promise._propagateFrom(this,3);promise._captureStackTrace();if(receiver===undefined&&((this._bitField&2097152)!==0)){if(!((bitField&50397184)===0)){receiver=this._boundValue();}else{receiver=target===this?undefined:this._boundTo;}}this._fireEvent("promiseChained",this,promise);}var domain=getDomain();if(!((bitField&50397184)===0)){var handler,value,settler=target._settlePromiseCtx;if(((bitField&33554432)!==0)){value=target._rejectionHandler0;handler=didFulfill;}else{if(((bitField&16777216)!==0)){value=target._fulfillmentHandler0;handler=didReject;target._unsetRejectionIsUnhandled();}else{settler=target._settlePromiseLateCancellationObserver;value=new CancellationError("late cancellation observer");target._attachExtraTrace(value);handler=didReject;}}async.invoke(settler,target,{handler:domain===null?handler:(typeof handler==="function"&&util.domainBind(domain,handler)),promise:promise,receiver:receiver,value:value});}else{target._addCallbacks(didFulfill,didReject,promise,receiver,domain);}return promise;};Promise.prototype._length=function(){return this._bitField&65535;};Promise.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0;};Promise.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864;};Promise.prototype._setLength=function(len){this._bitField=(this._bitField&-65536)|(len&65535);};Promise.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432;this._fireEvent("promiseFulfilled",this);};Promise.prototype._setRejected=function(){this._bitField=this._bitField|16777216;this._fireEvent("promiseRejected",this);};Promise.prototype._setFollowing=function(){this._bitField=this._bitField|67108864;this._fireEvent("promiseResolved",this);};Promise.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304;};Promise.prototype._isFinal=function(){return(this._bitField&4194304)>0;};Promise.prototype._unsetCancelled=function(){this._bitField=this._bitField&(~65536);};Promise.prototype._setCancelled=function(){this._bitField=this._bitField|65536;this._fireEvent("promiseCancelled",this);};Promise.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608;};Promise.prototype._setAsyncGuaranteed=function(){if(async.hasCustomScheduler()){return;}this._bitField=this._bitField|134217728;};Promise.prototype._receiverAt=function(index){var ret=index===0?this._receiver0:this[index*4-4+3];if(ret===UNDEFINED_BINDING){return undefined;}else{if(ret===undefined&&this._isBound()){return this._boundValue();}}return ret;};Promise.prototype._promiseAt=function(index){return this[index*4-4+2];};Promise.prototype._fulfillmentHandlerAt=function(index){return this[index*4-4+0];};Promise.prototype._rejectionHandlerAt=function(index){return this[index*4-4+1];};Promise.prototype._boundValue=function(){};Promise.prototype._migrateCallback0=function(follower){var bitField=follower._bitField;var fulfill=follower._fulfillmentHandler0;var reject=follower._rejectionHandler0;var promise=follower._promise0;var receiver=follower._receiverAt(0);if(receiver===undefined){receiver=UNDEFINED_BINDING;}this._addCallbacks(fulfill,reject,promise,receiver,null);};Promise.prototype._migrateCallbackAt=function(follower,index){var fulfill=follower._fulfillmentHandlerAt(index);var reject=follower._rejectionHandlerAt(index);var promise=follower._promiseAt(index);var receiver=follower._receiverAt(index);if(receiver===undefined){receiver=UNDEFINED_BINDING;}this._addCallbacks(fulfill,reject,promise,receiver,null);};Promise.prototype._addCallbacks=function(fulfill,reject,promise,receiver,domain){var index=this._length();if(index>=65535-4){index=0;this._setLength(0);}if(index===0){this._promise0=promise;this._receiver0=receiver;if(typeof fulfill==="function"){this._fulfillmentHandler0=domain===null?fulfill:util.domainBind(domain,fulfill);}if(typeof reject==="function"){this._rejectionHandler0=domain===null?reject:util.domainBind(domain,reject);}}else{var base=index*4-4;this[base+2]=promise;this[base+3]=receiver;if(typeof fulfill==="function"){this[base+0]=domain===null?fulfill:util.domainBind(domain,fulfill);}if(typeof reject==="function"){this[base+1]=domain===null?reject:util.domainBind(domain,reject);}}this._setLength(index+1);return index;};Promise.prototype._proxy=function(proxyable,arg){this._addCallbacks(undefined,undefined,arg,proxyable,null);};Promise.prototype._resolveCallback=function(value,shouldBind){if(((this._bitField&117506048)!==0)){return;}if(value===this){return this._rejectCallback(makeSelfResolutionError(),false);}var maybePromise=tryConvertToPromise(value,this);if(!(maybePromise instanceof Promise)){return this._fulfill(value);}if(shouldBind){this._propagateFrom(maybePromise,2);}var promise=maybePromise._target();if(promise===this){this._reject(makeSelfResolutionError());return;}var bitField=promise._bitField;if(((bitField&50397184)===0)){var len=this._length();if(len>0){promise._migrateCallback0(this);}for(var i=1;i<len;++i){promise._migrateCallbackAt(this,i);}this._setFollowing();this._setLength(0);this._setFollowee(promise);}else{if(((bitField&33554432)!==0)){this._fulfill(promise._value());}else{if(((bitField&16777216)!==0)){this._reject(promise._reason());}else{var reason=new CancellationError("late cancellation observer");promise._attachExtraTrace(reason);this._reject(reason);}}}};Promise.prototype._rejectCallback=function(reason,synchronous,ignoreNonErrorWarnings){var trace=util.ensureErrorObject(reason);var hasStack=trace===reason;if(!hasStack&&!ignoreNonErrorWarnings&&debug.warnings()){var message="a promise was rejected with a non-error: "+util.classString(reason);this._warn(message,true);}this._attachExtraTrace(trace,synchronous?hasStack:false);this._reject(reason);};Promise.prototype._resolveFromExecutor=function(executor){if(executor===INTERNAL){return;}var promise=this;this._captureStackTrace();this._pushContext();var synchronous=true;var r=this._execute(executor,function(value){promise._resolveCallback(value);},function(reason){promise._rejectCallback(reason,synchronous);});synchronous=false;this._popContext();if(r!==undefined){promise._rejectCallback(r,true);}};Promise.prototype._settlePromiseFromHandler=function(handler,receiver,value,promise){var bitField=promise._bitField;if(((bitField&65536)!==0)){return;}promise._pushContext();var x;if(receiver===APPLY){if(!value||typeof value.length!=="number"){x=errorObj;x.e=new TypeError("cannot .spread() a non-array: "+util.classString(value));}else{x=tryCatch(handler).apply(this._boundValue(),value);}}else{x=tryCatch(handler).call(receiver,value);}var promiseCreated=promise._popContext();bitField=promise._bitField;if(((bitField&65536)!==0)){return;}if(x===NEXT_FILTER){promise._reject(value);}else{if(x===errorObj){promise._rejectCallback(x.e,false);}else{debug.checkForgottenReturns(x,promiseCreated,"",promise,this);promise._resolveCallback(x);}}};Promise.prototype._target=function(){var ret=this;while(ret._isFollowing()){ret=ret._followee();}return ret;};Promise.prototype._followee=function(){return this._rejectionHandler0;};Promise.prototype._setFollowee=function(promise){this._rejectionHandler0=promise;};Promise.prototype._settlePromise=function(promise,handler,receiver,value){var isPromise=promise instanceof Promise;var bitField=this._bitField;var asyncGuaranteed=((bitField&134217728)!==0);if(((bitField&65536)!==0)){if(isPromise){promise._invokeInternalOnCancel();}if(receiver instanceof PassThroughHandlerContext&&receiver.isFinallyHandler()){receiver.cancelPromise=promise;if(tryCatch(handler).call(receiver,value)===errorObj){promise._reject(errorObj.e);}}else{if(handler===reflectHandler){promise._fulfill(reflectHandler.call(receiver));}else{if(receiver instanceof Proxyable){receiver._promiseCancelled(promise);}else{if(isPromise||promise instanceof PromiseArray){promise._cancel();}else{receiver.cancel();}}}}}else{if(typeof handler==="function"){if(!isPromise){handler.call(receiver,value,promise);}else{if(asyncGuaranteed){promise._setAsyncGuaranteed();}this._settlePromiseFromHandler(handler,receiver,value,promise);}}else{if(receiver instanceof Proxyable){if(!receiver._isResolved()){if(((bitField&33554432)!==0)){receiver._promiseFulfilled(value,promise);}else{receiver._promiseRejected(value,promise);}}}else{if(isPromise){if(asyncGuaranteed){promise._setAsyncGuaranteed();}if(((bitField&33554432)!==0)){promise._fulfill(value);}else{promise._reject(value);}}}}}};Promise.prototype._settlePromiseLateCancellationObserver=function(ctx){var handler=ctx.handler;var promise=ctx.promise;var receiver=ctx.receiver;var value=ctx.value;if(typeof handler==="function"){if(!(promise instanceof Promise)){handler.call(receiver,value,promise);}else{this._settlePromiseFromHandler(handler,receiver,value,promise);}}else{if(promise instanceof Promise){promise._reject(value);}}};Promise.prototype._settlePromiseCtx=function(ctx){this._settlePromise(ctx.promise,ctx.handler,ctx.receiver,ctx.value);};Promise.prototype._settlePromise0=function(handler,value,bitField){var promise=this._promise0;var receiver=this._receiverAt(0);this._promise0=undefined;this._receiver0=undefined;this._settlePromise(promise,handler,receiver,value);};Promise.prototype._clearCallbackDataAtIndex=function(index){var base=index*4-4;this[base+2]=this[base+3]=this[base+0]=this[base+1]=undefined;};Promise.prototype._fulfill=function(value){var bitField=this._bitField;if(((bitField&117506048)>>>16)){return;}if(value===this){var err=makeSelfResolutionError();this._attachExtraTrace(err);return this._reject(err);}this._setFulfilled();this._rejectionHandler0=value;if((bitField&65535)>0){if(((bitField&134217728)!==0)){this._settlePromises();}else{async.settlePromises(this);}this._dereferenceTrace();}};Promise.prototype._reject=function(reason){var bitField=this._bitField;if(((bitField&117506048)>>>16)){return;}this._setRejected();this._fulfillmentHandler0=reason;if(this._isFinal()){return async.fatalError(reason,util.isNode);}if((bitField&65535)>0){async.settlePromises(this);}else{this._ensurePossibleRejectionHandled();}};Promise.prototype._fulfillPromises=function(len,value){for(var i=1;i<len;i++){var handler=this._fulfillmentHandlerAt(i);var promise=this._promiseAt(i);var receiver=this._receiverAt(i);this._clearCallbackDataAtIndex(i);this._settlePromise(promise,handler,receiver,value);}};Promise.prototype._rejectPromises=function(len,reason){for(var i=1;i<len;i++){var handler=this._rejectionHandlerAt(i);var promise=this._promiseAt(i);var receiver=this._receiverAt(i);this._clearCallbackDataAtIndex(i);this._settlePromise(promise,handler,receiver,reason);}};Promise.prototype._settlePromises=function(){var bitField=this._bitField;var len=(bitField&65535);if(len>0){if(((bitField&16842752)!==0)){var reason=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,reason,bitField);this._rejectPromises(len,reason);}else{var value=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,value,bitField);this._fulfillPromises(len,value);}this._setLength(0);}this._clearCancellationData();};Promise.prototype._settledValue=function(){var bitField=this._bitField;if(((bitField&33554432)!==0)){return this._rejectionHandler0;}else{if(((bitField&16777216)!==0)){return this._fulfillmentHandler0;}}};function deferResolve(v){this.promise._resolveCallback(v);}function deferReject(v){this.promise._rejectCallback(v,false);}Promise.defer=Promise.pending=function(){debug.deprecated("Promise.defer","new Promise");var promise=new Promise(INTERNAL);return{promise:promise,resolve:deferResolve,reject:deferReject};};util.notEnumerableProp(Promise,"_makeSelfResolutionError",makeSelfResolutionError);_dereq_("./method")(Promise,INTERNAL,tryConvertToPromise,apiRejection,debug);_dereq_("./bind")(Promise,INTERNAL,tryConvertToPromise,debug);_dereq_("./cancel")(Promise,PromiseArray,apiRejection,debug);_dereq_("./direct_resolve")(Promise);_dereq_("./synchronous_inspection")(Promise);_dereq_("./join")(Promise,PromiseArray,tryConvertToPromise,INTERNAL,async,getDomain);Promise.Promise=Promise;Promise.version="3.5.3";_dereq_("./map.js")(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug);_dereq_("./call_get.js")(Promise);_dereq_("./using.js")(Promise,apiRejection,tryConvertToPromise,createContext,INTERNAL,debug);_dereq_("./timers.js")(Promise,INTERNAL,debug);_dereq_("./generators.js")(Promise,apiRejection,INTERNAL,tryConvertToPromise,Proxyable,debug);_dereq_("./nodeify.js")(Promise);_dereq_("./promisify.js")(Promise,INTERNAL);_dereq_("./props.js")(Promise,PromiseArray,tryConvertToPromise,apiRejection);_dereq_("./race.js")(Promise,INTERNAL,tryConvertToPromise,apiRejection);_dereq_("./reduce.js")(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug);_dereq_("./settle.js")(Promise,PromiseArray,debug);_dereq_("./some.js")(Promise,PromiseArray,apiRejection);_dereq_("./filter.js")(Promise,INTERNAL);_dereq_("./each.js")(Promise,INTERNAL);_dereq_("./any.js")(Promise);util.toFastProperties(Promise);util.toFastProperties(Promise.prototype);function fillTypes(value){var p=new Promise(INTERNAL);p._fulfillmentHandler0=value;p._rejectionHandler0=value;p._promise0=value;p._receiver0=value;}fillTypes({a:1});fillTypes({b:2});fillTypes({c:3});fillTypes(1);fillTypes(function(){});fillTypes(undefined);fillTypes(false);fillTypes(new Promise(INTERNAL));debug.setBounds(Async.firstLineError,util.lastLineError);return Promise;};},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(_dereq_,module,exports){module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection,Proxyable){var util=_dereq_("./util");var isArray=util.isArray;function toResolutionValue(val){switch(val){case -2:return[];case -3:return{};case -6:return new Map();}}function PromiseArray(values){var promise=this._promise=new Promise(INTERNAL);if(values instanceof Promise){promise._propagateFrom(values,3);}promise._setOnCancel(this);this._values=values;this._length=0;this._totalResolved=0;this._init(undefined,-2);}util.inherits(PromiseArray,Proxyable);PromiseArray.prototype.length=function(){return this._length;};PromiseArray.prototype.promise=function(){return this._promise;};PromiseArray.prototype._init=function init(_,resolveValueIfEmpty){var values=tryConvertToPromise(this._values,this._promise);if(values instanceof Promise){values=values._target();var bitField=values._bitField;this._values=values;if(((bitField&50397184)===0)){this._promise._setAsyncGuaranteed();return values._then(init,this._reject,undefined,this,resolveValueIfEmpty);}else{if(((bitField&33554432)!==0)){values=values._value();}else{if(((bitField&16777216)!==0)){return this._reject(values._reason());}else{return this._cancel();}}}}values=util.asArray(values);if(values===null){var err=apiRejection("expecting an array or an iterable object but got "+util.classString(values)).reason();this._promise._rejectCallback(err,false);return;}if(values.length===0){if(resolveValueIfEmpty===-5){this._resolveEmptyArray();}else{this._resolve(toResolutionValue(resolveValueIfEmpty));}return;}this._iterate(values);};PromiseArray.prototype._iterate=function(values){var len=this.getActualLength(values.length);this._length=len;this._values=this.shouldCopyValues()?new Array(len):this._values;var result=this._promise;var isResolved=false;var bitField=null;for(var i=0;i<len;++i){var maybePromise=tryConvertToPromise(values[i],result);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();bitField=maybePromise._bitField;}else{bitField=null;}if(isResolved){if(bitField!==null){maybePromise.suppressUnhandledRejections();}}else{if(bitField!==null){if(((bitField&50397184)===0)){maybePromise._proxy(this,i);this._values[i]=maybePromise;}else{if(((bitField&33554432)!==0)){isResolved=this._promiseFulfilled(maybePromise._value(),i);}else{if(((bitField&16777216)!==0)){isResolved=this._promiseRejected(maybePromise._reason(),i);}else{isResolved=this._promiseCancelled(i);}}}}else{isResolved=this._promiseFulfilled(maybePromise,i);}}}if(!isResolved){result._setAsyncGuaranteed();}};PromiseArray.prototype._isResolved=function(){return this._values===null;};PromiseArray.prototype._resolve=function(value){this._values=null;this._promise._fulfill(value);};PromiseArray.prototype._cancel=function(){if(this._isResolved()||!this._promise._isCancellable()){return;}this._values=null;this._promise._cancel();};PromiseArray.prototype._reject=function(reason){this._values=null;this._promise._rejectCallback(reason,false);};PromiseArray.prototype._promiseFulfilled=function(value,index){this._values[index]=value;var totalResolved=++this._totalResolved;if(totalResolved>=this._length){this._resolve(this._values);return true;}return false;};PromiseArray.prototype._promiseCancelled=function(){this._cancel();return true;};PromiseArray.prototype._promiseRejected=function(reason){this._totalResolved++;this._reject(reason);return true;};PromiseArray.prototype._resultCancelled=function(){if(this._isResolved()){return;}var values=this._values;this._cancel();if(values instanceof Promise){values.cancel();}else{for(var i=0;i<values.length;++i){if(values[i] instanceof Promise){values[i].cancel();}}}};PromiseArray.prototype.shouldCopyValues=function(){return true;};PromiseArray.prototype.getActualLength=function(len){return len;};return PromiseArray;};},{"./util":36}],24:[function(_dereq_,module,exports){module.exports=function(Promise,INTERNAL){var THIS={};var util=_dereq_("./util");var nodebackForPromise=_dereq_("./nodeback");var withAppended=util.withAppended;var maybeWrapAsError=util.maybeWrapAsError;var canEvaluate=util.canEvaluate;var TypeError=_dereq_("./errors").TypeError;var defaultSuffix="Async";var defaultPromisified={__isPromisified__:true};var noCopyProps=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"];var noCopyPropsPattern=new RegExp("^(?:"+noCopyProps.join("|")+")$");var defaultFilter=function(name){return util.isIdentifier(name)&&name.charAt(0)!=="_"&&name!=="constructor";};function propsFilter(key){return !noCopyPropsPattern.test(key);}function isPromisified(fn){try{return fn.__isPromisified__===true;}catch(e){return false;}}function hasPromisified(obj,key,suffix){var val=util.getDataPropertyOrDefault(obj,key+suffix,defaultPromisified);return val?isPromisified(val):false;}function checkValid(ret,suffix,suffixRegexp){for(var i=0;i<ret.length;i+=2){var key=ret[i];if(suffixRegexp.test(key)){var keyWithoutAsyncSuffix=key.replace(suffixRegexp,"");for(var j=0;j<ret.length;j+=2){if(ret[j]===keyWithoutAsyncSuffix){throw new TypeError("Cannot promisify an API that has normal methods with '%s'-suffix\u000a\u000a    See http://goo.gl/MqrFmX\u000a".replace("%s",suffix));}}}}}function promisifiableMethods(obj,suffix,suffixRegexp,filter){var keys=util.inheritedDataKeys(obj);var ret=[];for(var i=0;i<keys.length;++i){var key=keys[i];var value=obj[key];var passesDefaultFilter=filter===defaultFilter?true:defaultFilter(key,value,obj);if(typeof value==="function"&&!isPromisified(value)&&!hasPromisified(obj,key,suffix)&&filter(key,value,obj,passesDefaultFilter)){ret.push(key,value);}}checkValid(ret,suffix,suffixRegexp);return ret;}var escapeIdentRegex=function(str){return str.replace(/([$])/,"\\$");};var makeNodePromisifiedEval;if(!true){var switchCaseArgumentOrder=function(likelyArgumentCount){var ret=[likelyArgumentCount];var min=Math.max(0,likelyArgumentCount-1-3);for(var i=likelyArgumentCount-1;i>=min;--i){ret.push(i);}for(var i=likelyArgumentCount+1;i<=3;++i){ret.push(i);}return ret;};var argumentSequence=function(argumentCount){return util.filledRange(argumentCount,"_arg","");};var parameterDeclaration=function(parameterCount){return util.filledRange(Math.max(parameterCount,3),"_arg","");};var parameterCount=function(fn){if(typeof fn.length==="number"){return Math.max(Math.min(fn.length,1023+1),0);}return 0;};makeNodePromisifiedEval=function(callback,receiver,originalName,fn,_,multiArgs){var newParameterCount=Math.max(0,parameterCount(fn)-1);var argumentOrder=switchCaseArgumentOrder(newParameterCount);var shouldProxyThis=typeof callback==="string"||receiver===THIS;function generateCallForArgumentCount(count){var args=argumentSequence(count).join(", ");var comma=count>0?", ":"";var ret;if(shouldProxyThis){ret="ret = callback.call(this, {{args}}, nodeback); break;\n";}else{ret=receiver===undefined?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n";}return ret.replace("{{args}}",args).replace(", ",comma);}function generateArgumentSwitchCase(){var ret="";for(var i=0;i<argumentOrder.length;++i){ret+="case "+argumentOrder[i]+":"+generateCallForArgumentCount(argumentOrder[i]);}ret+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = nodeback;                                              \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",(shouldProxyThis?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n"));return ret;}var getFunctionCode=typeof callback==="string"?("this != null ? this['"+callback+"'] : fn"):"fn";var body="'use strict';                                                \n        var ret = function (Parameters) {                                    \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._captureStackTrace();                                    \n            var nodeback = nodebackForPromise(promise, "+multiArgs+");   \n            var ret;                                                         \n            var callback = tryCatch([GetFunctionCode]);                      \n            switch(len) {                                                    \n                [CodeForSwitchCase]                                          \n            }                                                                \n            if (ret === errorObj) {                                          \n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n            }                                                                \n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \n            return promise;                                                  \n        };                                                                   \n        notEnumerableProp(ret, '__isPromisified__', true);                   \n        return ret;                                                          \n    ".replace("[CodeForSwitchCase]",generateArgumentSwitchCase()).replace("[GetFunctionCode]",getFunctionCode);body=body.replace("Parameters",parameterDeclaration(newParameterCount));return new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",body)(Promise,fn,receiver,withAppended,maybeWrapAsError,nodebackForPromise,util.tryCatch,util.errorObj,util.notEnumerableProp,INTERNAL);};}function makeNodePromisifiedClosure(callback,receiver,_,fn,__,multiArgs){var defaultThis=(function(){return this;})();var method=callback;if(typeof method==="string"){callback=fn;}function promisified(){var _receiver=receiver;if(receiver===THIS){_receiver=this;}var promise=new Promise(INTERNAL);promise._captureStackTrace();var cb=typeof method==="string"&&this!==defaultThis?this[method]:callback;var fn=nodebackForPromise(promise,multiArgs);try{cb.apply(_receiver,withAppended(arguments,fn));}catch(e){promise._rejectCallback(maybeWrapAsError(e),true,true);}if(!promise._isFateSealed()){promise._setAsyncGuaranteed();}return promise;}util.notEnumerableProp(promisified,"__isPromisified__",true);return promisified;}var makeNodePromisified=canEvaluate?makeNodePromisifiedEval:makeNodePromisifiedClosure;function promisifyAll(obj,suffix,filter,promisifier,multiArgs){var suffixRegexp=new RegExp(escapeIdentRegex(suffix)+"$");var methods=promisifiableMethods(obj,suffix,suffixRegexp,filter);for(var i=0,len=methods.length;i<len;i+=2){var key=methods[i];var fn=methods[i+1];var promisifiedKey=key+suffix;if(promisifier===makeNodePromisified){obj[promisifiedKey]=makeNodePromisified(key,THIS,key,fn,suffix,multiArgs);}else{var promisified=promisifier(fn,function(){return makeNodePromisified(key,THIS,key,fn,suffix,multiArgs);});util.notEnumerableProp(promisified,"__isPromisified__",true);obj[promisifiedKey]=promisified;}}util.toFastProperties(obj);return obj;}function promisify(callback,receiver,multiArgs){return makeNodePromisified(callback,receiver,undefined,callback,null,multiArgs);}Promise.promisify=function(fn,options){if(typeof fn!=="function"){throw new TypeError("expecting a function but got "+util.classString(fn));}if(isPromisified(fn)){return fn;}options=Object(options);var receiver=options.context===undefined?THIS:options.context;var multiArgs=!!options.multiArgs;var ret=promisify(fn,receiver,multiArgs);util.copyDescriptors(fn,ret,propsFilter);return ret;};Promise.promisifyAll=function(target,options){if(typeof target!=="function"&&typeof target!=="object"){throw new TypeError("the target of promisifyAll must be an object or a function\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}options=Object(options);var multiArgs=!!options.multiArgs;var suffix=options.suffix;if(typeof suffix!=="string"){suffix=defaultSuffix;}var filter=options.filter;if(typeof filter!=="function"){filter=defaultFilter;}var promisifier=options.promisifier;if(typeof promisifier!=="function"){promisifier=makeNodePromisified;}if(!util.isIdentifier(suffix)){throw new RangeError("suffix must be a valid identifier\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}var keys=util.inheritedDataKeys(target);for(var i=0;i<keys.length;++i){var value=target[keys[i]];if(keys[i]!=="constructor"&&util.isClass(value)){promisifyAll(value.prototype,suffix,filter,promisifier,multiArgs);promisifyAll(value,suffix,filter,promisifier,multiArgs);}}return promisifyAll(target,suffix,filter,promisifier,multiArgs);};};},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(_dereq_,module,exports){module.exports=function(Promise,PromiseArray,tryConvertToPromise,apiRejection){var util=_dereq_("./util");var isObject=util.isObject;var es5=_dereq_("./es5");var Es6Map;if(typeof Map==="function"){Es6Map=Map;}var mapToEntries=(function(){var index=0;var size=0;function extractEntry(value,key){this[index]=value;this[index+size]=key;index++;}return function mapToEntries(map){size=map.size;index=0;var ret=new Array(map.size*2);map.forEach(extractEntry,ret);return ret;};})();var entriesToMap=function(entries){var ret=new Es6Map();var length=entries.length/2|0;for(var i=0;i<length;++i){var key=entries[length+i];var value=entries[i];ret.set(key,value);}return ret;};function PropertiesPromiseArray(obj){var isMap=false;var entries;if(Es6Map!==undefined&&obj instanceof Es6Map){entries=mapToEntries(obj);isMap=true;}else{var keys=es5.keys(obj);var len=keys.length;entries=new Array(len*2);for(var i=0;i<len;++i){var key=keys[i];entries[i]=obj[key];entries[i+len]=key;}}this.constructor$(entries);this._isMap=isMap;this._init$(undefined,isMap?-6:-3);}util.inherits(PropertiesPromiseArray,PromiseArray);PropertiesPromiseArray.prototype._init=function(){};PropertiesPromiseArray.prototype._promiseFulfilled=function(value,index){this._values[index]=value;var totalResolved=++this._totalResolved;if(totalResolved>=this._length){var val;if(this._isMap){val=entriesToMap(this._values);}else{val={};var keyOffset=this.length();for(var i=0,len=this.length();i<len;++i){val[this._values[i+keyOffset]]=this._values[i];}}this._resolve(val);return true;}return false;};PropertiesPromiseArray.prototype.shouldCopyValues=function(){return false;};PropertiesPromiseArray.prototype.getActualLength=function(len){return len>>1;};function props(promises){var ret;var castValue=tryConvertToPromise(promises);if(!isObject(castValue)){return apiRejection("cannot await properties of a non-object\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}else{if(castValue instanceof Promise){ret=castValue._then(Promise.props,undefined,undefined,undefined,undefined);}else{ret=new PropertiesPromiseArray(castValue).promise();}}if(castValue instanceof Promise){ret._propagateFrom(castValue,2);}return ret;}Promise.prototype.props=function(){return props(this);};Promise.props=function(promises){return props(promises);};};},{"./es5":13,"./util":36}],26:[function(_dereq_,module,exports){function arrayMove(src,srcIndex,dst,dstIndex,len){for(var j=0;j<len;++j){dst[j+dstIndex]=src[j+srcIndex];src[j+srcIndex]=void 0;}}function Queue(capacity){this._capacity=capacity;this._length=0;this._front=0;}Queue.prototype._willBeOverCapacity=function(size){return this._capacity<size;};Queue.prototype._pushOne=function(arg){var length=this.length();this._checkCapacity(length+1);var i=(this._front+length)&(this._capacity-1);this[i]=arg;this._length=length+1;};Queue.prototype.push=function(fn,receiver,arg){var length=this.length()+3;if(this._willBeOverCapacity(length)){this._pushOne(fn);this._pushOne(receiver);this._pushOne(arg);return;}var j=this._front+length-3;this._checkCapacity(length);var wrapMask=this._capacity-1;this[(j+0)&wrapMask]=fn;this[(j+1)&wrapMask]=receiver;this[(j+2)&wrapMask]=arg;this._length=length;};Queue.prototype.shift=function(){var front=this._front,ret=this[front];this[front]=undefined;this._front=(front+1)&(this._capacity-1);this._length--;return ret;};Queue.prototype.length=function(){return this._length;};Queue.prototype._checkCapacity=function(size){if(this._capacity<size){this._resizeTo(this._capacity<<1);}};Queue.prototype._resizeTo=function(capacity){var oldCapacity=this._capacity;this._capacity=capacity;var front=this._front;var length=this._length;var moveItemsCount=(front+length)&(oldCapacity-1);arrayMove(this,0,this,oldCapacity,moveItemsCount);};module.exports=Queue;},{}],27:[function(_dereq_,module,exports){module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection){var util=_dereq_("./util");var raceLater=function(promise){return promise.then(function(array){return race(array,promise);});};function race(promises,parent){var maybePromise=tryConvertToPromise(promises);if(maybePromise instanceof Promise){return raceLater(maybePromise);}else{promises=util.asArray(promises);if(promises===null){return apiRejection("expecting an array or an iterable object but got "+util.classString(promises));}}var ret=new Promise(INTERNAL);if(parent!==undefined){ret._propagateFrom(parent,3);}var fulfill=ret._fulfill;var reject=ret._reject;for(var i=0,len=promises.length;i<len;++i){var val=promises[i];if(val===undefined&&!(i in promises)){continue;}Promise.cast(val)._then(fulfill,reject,undefined,ret,null);}return ret;}Promise.race=function(promises){return race(promises,undefined);};Promise.prototype.race=function(){return race(this,undefined);};};},{"./util":36}],28:[function(_dereq_,module,exports){module.exports=function(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug){var getDomain=Promise._getDomain;var util=_dereq_("./util");var tryCatch=util.tryCatch;function ReductionPromiseArray(promises,fn,initialValue,_each){this.constructor$(promises);var domain=getDomain();this._fn=domain===null?fn:util.domainBind(domain,fn);if(initialValue!==undefined){initialValue=Promise.resolve(initialValue);initialValue._attachCancellationCallback(this);}this._initialValue=initialValue;this._currentCancellable=null;if(_each===INTERNAL){this._eachValues=Array(this._length);}else{if(_each===0){this._eachValues=null;}else{this._eachValues=undefined;}}this._promise._captureStackTrace();this._init$(undefined,-5);}util.inherits(ReductionPromiseArray,PromiseArray);ReductionPromiseArray.prototype._gotAccum=function(accum){if(this._eachValues!==undefined&&this._eachValues!==null&&accum!==INTERNAL){this._eachValues.push(accum);}};ReductionPromiseArray.prototype._eachComplete=function(value){if(this._eachValues!==null){this._eachValues.push(value);}return this._eachValues;};ReductionPromiseArray.prototype._init=function(){};ReductionPromiseArray.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==undefined?this._eachValues:this._initialValue);};ReductionPromiseArray.prototype.shouldCopyValues=function(){return false;};ReductionPromiseArray.prototype._resolve=function(value){this._promise._resolveCallback(value);this._values=null;};ReductionPromiseArray.prototype._resultCancelled=function(sender){if(sender===this._initialValue){return this._cancel();}if(this._isResolved()){return;}this._resultCancelled$();if(this._currentCancellable instanceof Promise){this._currentCancellable.cancel();}if(this._initialValue instanceof Promise){this._initialValue.cancel();}};ReductionPromiseArray.prototype._iterate=function(values){this._values=values;var value;var i;var length=values.length;if(this._initialValue!==undefined){value=this._initialValue;i=0;}else{value=Promise.resolve(values[0]);i=1;}this._currentCancellable=value;if(!value.isRejected()){for(;i<length;++i){var ctx={accum:null,value:values[i],index:i,length:length,array:this};value=value._then(gotAccum,undefined,undefined,ctx,undefined);}}if(this._eachValues!==undefined){value=value._then(this._eachComplete,undefined,undefined,this,undefined);}value._then(completed,completed,undefined,value,this);};Promise.prototype.reduce=function(fn,initialValue){return reduce(this,fn,initialValue,null);};Promise.reduce=function(promises,fn,initialValue,_each){return reduce(promises,fn,initialValue,_each);};function completed(valueOrReason,array){if(this.isFulfilled()){array._resolve(valueOrReason);}else{array._reject(valueOrReason);}}function reduce(promises,fn,initialValue,_each){if(typeof fn!=="function"){return apiRejection("expecting a function but got "+util.classString(fn));}var array=new ReductionPromiseArray(promises,fn,initialValue,_each);return array.promise();}function gotAccum(accum){this.accum=accum;this.array._gotAccum(accum);var value=tryConvertToPromise(this.value,this.array._promise);if(value instanceof Promise){this.array._currentCancellable=value;return value._then(gotValue,undefined,undefined,this,undefined);}else{return gotValue.call(this,value);}}function gotValue(value){var array=this.array;var promise=array._promise;var fn=tryCatch(array._fn);promise._pushContext();var ret;if(array._eachValues!==undefined){ret=fn.call(promise._boundValue(),value,this.index,this.length);}else{ret=fn.call(promise._boundValue(),this.accum,value,this.index,this.length);}if(ret instanceof Promise){array._currentCancellable=ret;}var promiseCreated=promise._popContext();debug.checkForgottenReturns(ret,promiseCreated,array._eachValues!==undefined?"Promise.each":"Promise.reduce",promise);return ret;}};},{"./util":36}],29:[function(_dereq_,module,exports){var util=_dereq_("./util");var schedule;var noAsyncScheduler=function(){throw new Error("No async scheduler available\u000a\u000a    See http://goo.gl/MqrFmX\u000a");};var NativePromise=util.getNativePromise();if(util.isNode&&typeof MutationObserver==="undefined"){var GlobalSetImmediate=global.setImmediate;var ProcessNextTick=process.nextTick;schedule=util.isRecentNode?function(fn){GlobalSetImmediate.call(global,fn);}:function(fn){ProcessNextTick.call(process,fn);};}else{if(typeof NativePromise==="function"&&typeof NativePromise.resolve==="function"){var nativePromise=NativePromise.resolve();schedule=function(fn){nativePromise.then(fn);};}else{if((typeof MutationObserver!=="undefined")&&!(typeof window!=="undefined"&&window.navigator&&(window.navigator.standalone||window.cordova))){schedule=(function(){var div=document.createElement("div");var opts={attributes:true};var toggleScheduled=false;var div2=document.createElement("div");var o2=new MutationObserver(function(){div.classList.toggle("foo");toggleScheduled=false;});o2.observe(div2,opts);var scheduleToggle=function(){if(toggleScheduled){return;}toggleScheduled=true;div2.classList.toggle("foo");};return function schedule(fn){var o=new MutationObserver(function(){o.disconnect();fn();});o.observe(div,opts);scheduleToggle();};})();}else{if(typeof setImmediate!=="undefined"){schedule=function(fn){setImmediate(fn);};}else{if(typeof setTimeout!=="undefined"){schedule=function(fn){setTimeout(fn,0);};}else{schedule=noAsyncScheduler;}}}}}module.exports=schedule;},{"./util":36}],30:[function(_dereq_,module,exports){module.exports=function(Promise,PromiseArray,debug){var PromiseInspection=Promise.PromiseInspection;var util=_dereq_("./util");function SettledPromiseArray(values){this.constructor$(values);}util.inherits(SettledPromiseArray,PromiseArray);SettledPromiseArray.prototype._promiseResolved=function(index,inspection){this._values[index]=inspection;var totalResolved=++this._totalResolved;if(totalResolved>=this._length){this._resolve(this._values);return true;}return false;};SettledPromiseArray.prototype._promiseFulfilled=function(value,index){var ret=new PromiseInspection();ret._bitField=33554432;ret._settledValueField=value;return this._promiseResolved(index,ret);};SettledPromiseArray.prototype._promiseRejected=function(reason,index){var ret=new PromiseInspection();ret._bitField=16777216;ret._settledValueField=reason;return this._promiseResolved(index,ret);};Promise.settle=function(promises){debug.deprecated(".settle()",".reflect()");return new SettledPromiseArray(promises).promise();};Promise.prototype.settle=function(){return Promise.settle(this);};};},{"./util":36}],31:[function(_dereq_,module,exports){module.exports=function(Promise,PromiseArray,apiRejection){var util=_dereq_("./util");var RangeError=_dereq_("./errors").RangeError;var AggregateError=_dereq_("./errors").AggregateError;var isArray=util.isArray;var CANCELLATION={};function SomePromiseArray(values){this.constructor$(values);this._howMany=0;this._unwrap=false;this._initialized=false;}util.inherits(SomePromiseArray,PromiseArray);SomePromiseArray.prototype._init=function(){if(!this._initialized){return;}if(this._howMany===0){this._resolve([]);return;}this._init$(undefined,-5);var isArrayResolved=isArray(this._values);if(!this._isResolved()&&isArrayResolved&&this._howMany>this._canPossiblyFulfill()){this._reject(this._getRangeError(this.length()));}};SomePromiseArray.prototype.init=function(){this._initialized=true;this._init();};SomePromiseArray.prototype.setUnwrap=function(){this._unwrap=true;};SomePromiseArray.prototype.howMany=function(){return this._howMany;};SomePromiseArray.prototype.setHowMany=function(count){this._howMany=count;};SomePromiseArray.prototype._promiseFulfilled=function(value){this._addFulfilled(value);if(this._fulfilled()===this.howMany()){this._values.length=this.howMany();if(this.howMany()===1&&this._unwrap){this._resolve(this._values[0]);}else{this._resolve(this._values);}return true;}return false;};SomePromiseArray.prototype._promiseRejected=function(reason){this._addRejected(reason);return this._checkOutcome();};SomePromiseArray.prototype._promiseCancelled=function(){if(this._values instanceof Promise||this._values==null){return this._cancel();}this._addRejected(CANCELLATION);return this._checkOutcome();};SomePromiseArray.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){var e=new AggregateError();for(var i=this.length();i<this._values.length;++i){if(this._values[i]!==CANCELLATION){e.push(this._values[i]);}}if(e.length>0){this._reject(e);}else{this._cancel();}return true;}return false;};SomePromiseArray.prototype._fulfilled=function(){return this._totalResolved;};SomePromiseArray.prototype._rejected=function(){return this._values.length-this.length();};SomePromiseArray.prototype._addRejected=function(reason){this._values.push(reason);};SomePromiseArray.prototype._addFulfilled=function(value){this._values[this._totalResolved++]=value;};SomePromiseArray.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected();};SomePromiseArray.prototype._getRangeError=function(count){var message="Input array must contain at least "+this._howMany+" items but contains only "+count+" items";return new RangeError(message);};SomePromiseArray.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0));};function some(promises,howMany){if((howMany|0)!==howMany||howMany<0){return apiRejection("expecting a positive integer\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}var ret=new SomePromiseArray(promises);var promise=ret.promise();ret.setHowMany(howMany);ret.init();return promise;}Promise.some=function(promises,howMany){return some(promises,howMany);};Promise.prototype.some=function(howMany){return some(this,howMany);};Promise._SomePromiseArray=SomePromiseArray;};},{"./errors":12,"./util":36}],32:[function(_dereq_,module,exports){module.exports=function(Promise){function PromiseInspection(promise){if(promise!==undefined){promise=promise._target();this._bitField=promise._bitField;this._settledValueField=promise._isFateSealed()?promise._settledValue():undefined;}else{this._bitField=0;this._settledValueField=undefined;}}PromiseInspection.prototype._settledValue=function(){return this._settledValueField;};var value=PromiseInspection.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}return this._settledValue();};var reason=PromiseInspection.prototype.error=PromiseInspection.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}return this._settledValue();};var isFulfilled=PromiseInspection.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0;};var isRejected=PromiseInspection.prototype.isRejected=function(){return(this._bitField&16777216)!==0;};var isPending=PromiseInspection.prototype.isPending=function(){return(this._bitField&50397184)===0;};var isResolved=PromiseInspection.prototype.isResolved=function(){return(this._bitField&50331648)!==0;};PromiseInspection.prototype.isCancelled=function(){return(this._bitField&8454144)!==0;};Promise.prototype.__isCancelled=function(){return(this._bitField&65536)===65536;};Promise.prototype._isCancelled=function(){return this._target().__isCancelled();};Promise.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0;};Promise.prototype.isPending=function(){return isPending.call(this._target());};Promise.prototype.isRejected=function(){return isRejected.call(this._target());};Promise.prototype.isFulfilled=function(){return isFulfilled.call(this._target());};Promise.prototype.isResolved=function(){return isResolved.call(this._target());};Promise.prototype.value=function(){return value.call(this._target());};Promise.prototype.reason=function(){var target=this._target();target._unsetRejectionIsUnhandled();return reason.call(target);};Promise.prototype._value=function(){return this._settledValue();};Promise.prototype._reason=function(){this._unsetRejectionIsUnhandled();return this._settledValue();};Promise.PromiseInspection=PromiseInspection;};},{}],33:[function(_dereq_,module,exports){module.exports=function(Promise,INTERNAL){var util=_dereq_("./util");var errorObj=util.errorObj;var isObject=util.isObject;function tryConvertToPromise(obj,context){if(isObject(obj)){if(obj instanceof Promise){return obj;}var then=getThen(obj);if(then===errorObj){if(context){context._pushContext();}var ret=Promise.reject(then.e);if(context){context._popContext();}return ret;}else{if(typeof then==="function"){if(isAnyBluebirdPromise(obj)){var ret=new Promise(INTERNAL);obj._then(ret._fulfill,ret._reject,undefined,ret,null);return ret;}return doThenable(obj,then,context);}}}return obj;}function doGetThen(obj){return obj.then;}function getThen(obj){try{return doGetThen(obj);}catch(e){errorObj.e=e;return errorObj;}}var hasProp={}.hasOwnProperty;function isAnyBluebirdPromise(obj){try{return hasProp.call(obj,"_promise0");}catch(e){return false;}}function doThenable(x,then,context){var promise=new Promise(INTERNAL);var ret=promise;if(context){context._pushContext();}promise._captureStackTrace();if(context){context._popContext();}var synchronous=true;var result=util.tryCatch(then).call(x,resolve,reject);synchronous=false;if(promise&&result===errorObj){promise._rejectCallback(result.e,true,true);promise=null;}function resolve(value){if(!promise){return;}promise._resolveCallback(value);promise=null;}function reject(reason){if(!promise){return;}promise._rejectCallback(reason,synchronous,true);promise=null;}return ret;}return tryConvertToPromise;};},{"./util":36}],34:[function(_dereq_,module,exports){module.exports=function(Promise,INTERNAL,debug){var util=_dereq_("./util");var TimeoutError=Promise.TimeoutError;function HandleWrapper(handle){this.handle=handle;}HandleWrapper.prototype._resultCancelled=function(){clearTimeout(this.handle);};var afterValue=function(value){return delay(+this).thenReturn(value);};var delay=Promise.delay=function(ms,value){var ret;var handle;if(value!==undefined){ret=Promise.resolve(value)._then(afterValue,null,null,ms,undefined);if(debug.cancellation()&&value instanceof Promise){ret._setOnCancel(value);}}else{ret=new Promise(INTERNAL);handle=setTimeout(function(){ret._fulfill();},+ms);if(debug.cancellation()){ret._setOnCancel(new HandleWrapper(handle));}ret._captureStackTrace();}ret._setAsyncGuaranteed();return ret;};Promise.prototype.delay=function(ms){return delay(ms,this);};var afterTimeout=function(promise,message,parent){var err;if(typeof message!=="string"){if(message instanceof Error){err=message;}else{err=new TimeoutError("operation timed out");}}else{err=new TimeoutError(message);}util.markAsOriginatingFromRejection(err);promise._attachExtraTrace(err);promise._reject(err);if(parent!=null){parent.cancel();}};function successClear(value){clearTimeout(this.handle);return value;}function failureClear(reason){clearTimeout(this.handle);throw reason;}Promise.prototype.timeout=function(ms,message){ms=+ms;var ret,parent;var handleWrapper=new HandleWrapper(setTimeout(function timeoutTimeout(){if(ret.isPending()){afterTimeout(ret,message,parent);}},ms));if(debug.cancellation()){parent=this.then();ret=parent._then(successClear,failureClear,undefined,handleWrapper,undefined);ret._setOnCancel(handleWrapper);}else{ret=this._then(successClear,failureClear,undefined,handleWrapper,undefined);}return ret;};};},{"./util":36}],35:[function(_dereq_,module,exports){module.exports=function(Promise,apiRejection,tryConvertToPromise,createContext,INTERNAL,debug){var util=_dereq_("./util");var TypeError=_dereq_("./errors").TypeError;var inherits=_dereq_("./util").inherits;var errorObj=util.errorObj;var tryCatch=util.tryCatch;var NULL={};function thrower(e){setTimeout(function(){throw e;},0);}function castPreservingDisposable(thenable){var maybePromise=tryConvertToPromise(thenable);if(maybePromise!==thenable&&typeof thenable._isDisposable==="function"&&typeof thenable._getDisposer==="function"&&thenable._isDisposable()){maybePromise._setDisposable(thenable._getDisposer());}return maybePromise;}function dispose(resources,inspection){var i=0;var len=resources.length;var ret=new Promise(INTERNAL);function iterator(){if(i>=len){return ret._fulfill();}var maybePromise=castPreservingDisposable(resources[i++]);if(maybePromise instanceof Promise&&maybePromise._isDisposable()){try{maybePromise=tryConvertToPromise(maybePromise._getDisposer().tryDispose(inspection),resources.promise);}catch(e){return thrower(e);}if(maybePromise instanceof Promise){return maybePromise._then(iterator,thrower,null,null,null);}}iterator();}iterator();return ret;}function Disposer(data,promise,context){this._data=data;this._promise=promise;this._context=context;}Disposer.prototype.data=function(){return this._data;};Disposer.prototype.promise=function(){return this._promise;};Disposer.prototype.resource=function(){if(this.promise().isFulfilled()){return this.promise().value();}return NULL;};Disposer.prototype.tryDispose=function(inspection){var resource=this.resource();var context=this._context;if(context!==undefined){context._pushContext();}var ret=resource!==NULL?this.doDispose(resource,inspection):null;if(context!==undefined){context._popContext();}this._promise._unsetDisposable();this._data=null;return ret;};Disposer.isDisposer=function(d){return(d!=null&&typeof d.resource==="function"&&typeof d.tryDispose==="function");};function FunctionDisposer(fn,promise,context){this.constructor$(fn,promise,context);}inherits(FunctionDisposer,Disposer);FunctionDisposer.prototype.doDispose=function(resource,inspection){var fn=this.data();return fn.call(resource,resource,inspection);};function maybeUnwrapDisposer(value){if(Disposer.isDisposer(value)){this.resources[this.index]._setDisposable(value);return value.promise();}return value;}function ResourceList(length){this.length=length;this.promise=null;this[length-1]=null;}ResourceList.prototype._resultCancelled=function(){var len=this.length;for(var i=0;i<len;++i){var item=this[i];if(item instanceof Promise){item.cancel();}}};Promise.using=function(){var len=arguments.length;if(len<2){return apiRejection("you must pass at least 2 arguments to Promise.using");}var fn=arguments[len-1];if(typeof fn!=="function"){return apiRejection("expecting a function but got "+util.classString(fn));}var input;var spreadArgs=true;if(len===2&&Array.isArray(arguments[0])){input=arguments[0];len=input.length;spreadArgs=false;}else{input=arguments;len--;}var resources=new ResourceList(len);for(var i=0;i<len;++i){var resource=input[i];if(Disposer.isDisposer(resource)){var disposer=resource;resource=resource.promise();resource._setDisposable(disposer);}else{var maybePromise=tryConvertToPromise(resource);if(maybePromise instanceof Promise){resource=maybePromise._then(maybeUnwrapDisposer,null,null,{resources:resources,index:i},undefined);}}resources[i]=resource;}var reflectedResources=new Array(resources.length);for(var i=0;i<reflectedResources.length;++i){reflectedResources[i]=Promise.resolve(resources[i]).reflect();}var resultPromise=Promise.all(reflectedResources).then(function(inspections){for(var i=0;i<inspections.length;++i){var inspection=inspections[i];if(inspection.isRejected()){errorObj.e=inspection.error();return errorObj;}else{if(!inspection.isFulfilled()){resultPromise.cancel();return;}}inspections[i]=inspection.value();}promise._pushContext();fn=tryCatch(fn);var ret=spreadArgs?fn.apply(undefined,inspections):fn(inspections);var promiseCreated=promise._popContext();debug.checkForgottenReturns(ret,promiseCreated,"Promise.using",promise);return ret;});var promise=resultPromise.lastly(function(){var inspection=new Promise.PromiseInspection(resultPromise);return dispose(resources,inspection);});resources.promise=promise;promise._setOnCancel(resources);return promise;};Promise.prototype._setDisposable=function(disposer){this._bitField=this._bitField|131072;this._disposer=disposer;};Promise.prototype._isDisposable=function(){return(this._bitField&131072)>0;};Promise.prototype._getDisposer=function(){return this._disposer;};Promise.prototype._unsetDisposable=function(){this._bitField=this._bitField&(~131072);this._disposer=undefined;};Promise.prototype.disposer=function(fn){if(typeof fn==="function"){return new FunctionDisposer(fn,this,createContext());}throw new TypeError();};};},{"./errors":12,"./util":36}],36:[function(_dereq_,module,exports){var es5=_dereq_("./es5");var canEvaluate=typeof navigator=="undefined";var errorObj={e:{}};var tryCatchTarget;var globalObject=typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:this!==undefined?this:null;function tryCatcher(){try{var target=tryCatchTarget;tryCatchTarget=null;return target.apply(this,arguments);}catch(e){errorObj.e=e;return errorObj;}}function tryCatch(fn){tryCatchTarget=fn;return tryCatcher;}var inherits=function(Child,Parent){var hasProp={}.hasOwnProperty;function T(){this.constructor=Child;this.constructor$=Parent;for(var propertyName in Parent.prototype){if(hasProp.call(Parent.prototype,propertyName)&&propertyName.charAt(propertyName.length-1)!=="$"){this[propertyName+"$"]=Parent.prototype[propertyName];}}}T.prototype=Parent.prototype;Child.prototype=new T();return Child.prototype;};function isPrimitive(val){return val==null||val===true||val===false||typeof val==="string"||typeof val==="number";}function isObject(value){return typeof value==="function"||typeof value==="object"&&value!==null;}function maybeWrapAsError(maybeError){if(!isPrimitive(maybeError)){return maybeError;}return new Error(safeToString(maybeError));}function withAppended(target,appendee){var len=target.length;var ret=new Array(len+1);var i;for(i=0;i<len;++i){ret[i]=target[i];}ret[i]=appendee;return ret;}function getDataPropertyOrDefault(obj,key,defaultValue){if(es5.isES5){var desc=Object.getOwnPropertyDescriptor(obj,key);if(desc!=null){return desc.get==null&&desc.set==null?desc.value:defaultValue;}}else{return{}.hasOwnProperty.call(obj,key)?obj[key]:undefined;}}function notEnumerableProp(obj,name,value){if(isPrimitive(obj)){return obj;}var descriptor={value:value,configurable:true,enumerable:false,writable:true};es5.defineProperty(obj,name,descriptor);return obj;}function thrower(r){throw r;}var inheritedDataKeys=(function(){var excludedPrototypes=[Array.prototype,Object.prototype,Function.prototype];var isExcludedProto=function(val){for(var i=0;i<excludedPrototypes.length;++i){if(excludedPrototypes[i]===val){return true;}}return false;};if(es5.isES5){var getKeys=Object.getOwnPropertyNames;return function(obj){var ret=[];var visitedKeys=Object.create(null);while(obj!=null&&!isExcludedProto(obj)){var keys;try{keys=getKeys(obj);}catch(e){return ret;}for(var i=0;i<keys.length;++i){var key=keys[i];if(visitedKeys[key]){continue;}visitedKeys[key]=true;var desc=Object.getOwnPropertyDescriptor(obj,key);if(desc!=null&&desc.get==null&&desc.set==null){ret.push(key);}}obj=es5.getPrototypeOf(obj);}return ret;};}else{var hasProp={}.hasOwnProperty;return function(obj){if(isExcludedProto(obj)){return[];}var ret=[];enumeration:for(var key in obj){if(hasProp.call(obj,key)){ret.push(key);}else{for(var i=0;i<excludedPrototypes.length;++i){if(hasProp.call(excludedPrototypes[i],key)){continue enumeration;}}ret.push(key);}}return ret;};}})();var thisAssignmentPattern=/this\s*\.\s*\S+\s*=/;function isClass(fn){try{if(typeof fn==="function"){var keys=es5.names(fn.prototype);var hasMethods=es5.isES5&&keys.length>1;var hasMethodsOtherThanConstructor=keys.length>0&&!(keys.length===1&&keys[0]==="constructor");var hasThisAssignmentAndStaticMethods=thisAssignmentPattern.test(fn+"")&&es5.names(fn).length>0;if(hasMethods||hasMethodsOtherThanConstructor||hasThisAssignmentAndStaticMethods){return true;}}return false;}catch(e){return false;}}function toFastProperties(obj){function FakeConstructor(){}FakeConstructor.prototype=obj;var receiver=new FakeConstructor();function ic(){return typeof receiver.foo;}ic();ic();return obj;eval(obj);}var rident=/^[a-z$_][a-z$_0-9]*$/i;function isIdentifier(str){return rident.test(str);}function filledRange(count,prefix,suffix){var ret=new Array(count);for(var i=0;i<count;++i){ret[i]=prefix+i+suffix;}return ret;}function safeToString(obj){try{return obj+"";}catch(e){return"[no string representation]";}}function isError(obj){return obj instanceof Error||(obj!==null&&typeof obj==="object"&&typeof obj.message==="string"&&typeof obj.name==="string");}function markAsOriginatingFromRejection(e){try{notEnumerableProp(e,"isOperational",true);}catch(ignore){}}function originatesFromRejection(e){if(e==null){return false;}return((e instanceof Error.__BluebirdErrorTypes__.OperationalError)||e.isOperational===true);}function canAttachTrace(obj){return isError(obj)&&es5.propertyIsWritable(obj,"stack");}var ensureErrorObject=(function(){if(!("stack" in new Error())){return function(value){if(canAttachTrace(value)){return value;}try{throw new Error(safeToString(value));}catch(err){return err;}};}else{return function(value){if(canAttachTrace(value)){return value;}return new Error(safeToString(value));};}})();function classString(obj){return{}.toString.call(obj);}function copyDescriptors(from,to,filter){var keys=es5.names(from);for(var i=0;i<keys.length;++i){var key=keys[i];if(filter(key)){try{es5.defineProperty(to,key,es5.getDescriptor(from,key));}catch(ignore){}}}}var asArray=function(v){if(es5.isArray(v)){return v;}return null;};if(typeof Symbol!=="undefined"&&Symbol.iterator){var ArrayFrom=typeof Array.from==="function"?function(v){return Array.from(v);}:function(v){var ret=[];var it=v[Symbol.iterator]();var itResult;while(!((itResult=it.next()).done)){ret.push(itResult.value);}return ret;};asArray=function(v){if(es5.isArray(v)){return v;}else{if(v!=null&&typeof v[Symbol.iterator]==="function"){return ArrayFrom(v);}}return null;};}var isNode=typeof process!=="undefined"&&classString(process).toLowerCase()==="[object process]";var hasEnvVariables=typeof process!=="undefined"&&typeof process.env!=="undefined";function env(key){return hasEnvVariables?process.env[key]:undefined;}function getNativePromise(){if(typeof Promise==="function"){try{var promise=new Promise(function(){});if({}.toString.call(promise)==="[object Promise]"){return Promise;}}catch(e){}}}function domainBind(self,cb){return self.bind(cb);}var ret={isClass:isClass,isIdentifier:isIdentifier,inheritedDataKeys:inheritedDataKeys,getDataPropertyOrDefault:getDataPropertyOrDefault,thrower:thrower,isArray:es5.isArray,asArray:asArray,notEnumerableProp:notEnumerableProp,isPrimitive:isPrimitive,isObject:isObject,isError:isError,canEvaluate:canEvaluate,errorObj:errorObj,tryCatch:tryCatch,inherits:inherits,withAppended:withAppended,maybeWrapAsError:maybeWrapAsError,toFastProperties:toFastProperties,filledRange:filledRange,toString:safeToString,canAttachTrace:canAttachTrace,ensureErrorObject:ensureErrorObject,originatesFromRejection:originatesFromRejection,markAsOriginatingFromRejection:markAsOriginatingFromRejection,classString:classString,copyDescriptors:copyDescriptors,hasDevTools:typeof chrome!=="undefined"&&chrome&&typeof chrome.loadTimes==="function",isNode:isNode,hasEnvVariables:hasEnvVariables,env:env,global:globalObject,getNativePromise:getNativePromise,domainBind:domainBind};ret.isRecentNode=ret.isNode&&(function(){var version=process.versions.node.split(".").map(Number);return(version[0]===0&&version[1]>10)||(version[0]>0);})();if(ret.isNode){ret.toFastProperties(process);}try{throw new Error();}catch(e){ret.lastLineError=e;}module.exports=ret;},{"./es5":13}]},{},[4])(4);});if(typeof window!=="undefined"&&window!==null){window.P=window.Promise;}else{if(typeof self!=="undefined"&&self!==null){self.P=self.Promise;}}
			/* /bluebird.promise.js */
			/* fetch.polyfill.js */
(function(){if(!window.fetch){Object.defineProperty(window,"fetch",{value:function(url,conf){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.open((conf&&conf.method)||"get",url);xhr.onload=function(){if(this.status>=200&&this.status<300){resolve({text:function(){return xhr.responseText;},json:function(){var _response=JSON.parse(xhr.responseText);return _response;},status:this.status,statusText:this.statusText});}else{reject({status:this.status,statusText:xhr.statusText});}};xhr.onerror=function(){reject({status:this.status,statusText:xhr.statusText});};xhr.send();});}});}})();
			/* /fetch.polyfill.js */
			/* makeRequest_js */

;(function() {	
	/**
	 * Get data wrapper
	 * @param {String} url
	 * @param {Object=} opt Fetch parameters
	 * @param {Boolean=} resolveData Wheter return resolved response or Promise
	 */
	 Object.defineProperty(window, 'makeRequest', {
			value: function (url, opt, resolveData) {
				const opt_ = Object.assign({}, {
				  headers: {
				    'Accept': 'application/json',
				    'Content-Type': 'application/json',
				    'Cache': 'no-cache'
				  },
				  'credentials': 'include'
				}, opt);
				
				return fetch(url, opt_)
					.then( _checkStatus )
					.then( function(res) {
							return resolveData
								? _resolveResponse(res)
								: res;
					})
		      .catch( function(error) {
		      	throw(error);
		      })
		    	
		    
				function _checkStatus (res) {
					return res.status === 200
						? res
						: Promise.reject(res)
				}
 
		    /**
		     * Resolve response data by its content type
		     * @param {Promise} res
		     * @return {JSON | String}
		     */
		    function _resolveResponse (res) {	
					const contentType_ = res.headers 														
																? res.headers.get('Content-Type') 																
																: null;
		    	const type_ = contentType_ 
		    									? contentType_.split('/')[1].split(';')[0] 								
													: 'html';
					const resolve_ = type_ === 'html' ? 'text' : 'json';	
															
					return res[resolve_] ? res[resolve_]() : res;
				}
			}
		}	
	);
})();

			/* /makeRequest_js */
			/* tdi.js */
/*!
 * Twinstone TDI (http://wiki.twinstone.org/display/TDI)
 * Version: 1.7.4-snapshot
 *
 * Copyright 2013 Etnetera a.s. http://www.etnetera.cz
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(typeof jQuery=="undefined"){throw ("Missing dependency: jQuery!");}var TDI=function($){return{};}(jQuery);TDI.Ajax=function($){var _delegateSelectors={linkClick:"a.ajaxlink, a.tdi, a.infuse",formSubmit:"form.ajaxform, form.tdi, form.infuse",formButtonActivate:"form.ajaxform [type=submit], form.tdi [type=submit], form.infuse [type=submit]",fieldChange:"select.ajaxselect, select.tdi, select.infuse, input[type=checkbox].tdi, input[type=checkbox].infuse, input[type=radio].tdi, input[type=radio].infuse",fieldSubmit:"input[type=text].tdi, input[type=text].infuse"};function _bindUI(){$(document).delegate(_delegateSelectors.formSubmit,"submit",_onBeforeFormSubmit).delegate(_delegateSelectors.linkClick,"click",_onBeforeLinkClick).delegate(_delegateSelectors.formButtonActivate,"click",_onFormButtonActivate).delegate(_delegateSelectors.fieldChange,"change",_onFieldChange).delegate(_delegateSelectors.fieldSubmit,"keydown",_onFieldSubmit);$(window).unload(_unbindUI);$.event.special["tdi:ajax:beforeLinkClick"]={_default:_onLinkClick};$.event.special["tdi:ajax:beforeFormSubmit"]={_default:_onFormSubmit};}function _unbindUI(evt){$(document).undelegate(_delegateSelectors.linkClick,"click",_onLinkClick).undelegate(_delegateSelectors.formSubmit,"submit",_onBeforeFormSubmit).undelegate(_delegateSelectors.formButtonActivate,"click",_onFormButtonActivate).undelegate(_delegateSelectors.fieldChange,"change",_onFieldChange).undelegate(_delegateSelectors.fieldSubmit,"keydown",_onFieldSubmit);}function _onBeforeLinkClick(evt){evt.preventDefault();$(this).trigger("tdi:ajax:beforeLinkClick",{link:$(this)});return false;}function _onLinkClick(evt){TDI.Ajax.send(evt.target);}function _onBeforeFormSubmit(evt){evt.preventDefault();$(this).trigger("tdi:ajax:beforeFormSubmit",{form:$(this)});return false;}function _onFormSubmit(evt){TDI.Ajax.send(evt.target);}function _onFormButtonActivate(evt){var $button=$(this),$form=$(this.form);$form.data("_submitButton",$button);if($button.attr("name")){$form.find("input.submit-action").remove();$("<input>").attr("type","hidden").attr("name",$button.attr("name")).attr("value",$button.attr("value")).addClass("submit-action").appendTo($form);}}function _onFieldChange(evt){TDI.Ajax.send($(this).data("ajax-url")?this:this.form);}function _onFieldSubmit(evt){if(evt.keyCode===13&&$(this).data("ajax-url")){evt.preventDefault();TDI.Ajax.send(this);}}_bindUI();return{send:function(elm,callbacks){callbacks=callbacks||{};var $elm=$(elm),name=$elm.attr("name"),value=$elm.val(),confirm=$elm.data("confirm"),related=$elm.closest($elm.data("related-ancestor")||"").add($($elm.data("related-element")||"")).add($($elm.attr("rel")||"")).add($($elm.data("_submitButton")||"")),triggerGroup=$($elm.data("trigger-group")||""),url=$elm.data("ajax-url")||$elm.attr("href")||$elm.attr("action"),data={};if((url===""||url===undefined)&&value){url=value;}if(name&&value){if($elm.is("input[type=checkbox]")&&$elm.prop("checked")===false){data[name]=0;}else{data[name]=value;}}if($elm.is("[disabled], .disabled")){return false;}if(confirm&&!window.confirm(confirm)){return false;}var _options={beforeStart:function(){var res=callbacks.beforeStart&&callbacks.beforeStart.apply(this,arguments);if(typeof res==="undefined"||res===true){$elm.add(related).addClass("loading");triggerGroup.each(function(){var $trigger=$(this);if(!$trigger.hasClass("disabled")&&!$trigger.prop("disabled")){$trigger.addClass("disabled").prop("disabled",true);$trigger.data("_disabled",true);}});related.get(0)&&related.addClass("loading-target");callbacks.start&&callbacks.start.apply(this,arguments);return true;}return false;},beforeEnd:function(){var res=callbacks.beforeEnd&&callbacks.beforeEnd.apply(this,arguments);if(typeof res==="undefined"||res===true){$elm.add(related).removeClass("loading");triggerGroup.each(function(i,$trigger){var $trigger=$(this);if($trigger.data("_disabled")===true){$trigger.removeClass("disabled").prop("disabled",false);$trigger.data("_disabled",false);}});related.get(0)&&related.removeClass("loading-target");callbacks.end&&callbacks.end.apply(this,arguments);}},data:data,trigger:$elm};if($elm.is("form")){if($elm.find("input[type=file]").length>0){TDI.Ajax.Request.sendForm($elm[0],_options);}else{_options.data=$elm.serialize();_options.method=$elm.attr("method");_options.end=function(){$elm.data("_submitButton",null);$elm.find("input.submit-action").remove();};TDI.Ajax.Request.send(url,_options);}}else{TDI.Ajax.Request.send(url,_options);}}};}(jQuery);TDI.Ajax.Request=function($){return{send:function(url,options){options=options||{};options.url=TDI.Ajax.Request.ajaxifyUrl(url);$.ajax({url:options.url,type:options.method||"GET",async:!options.sync,data:options.data||"",dataType:"xml",beforeSend:function(xhr,settings){var res=options.beforeStart&&options.beforeStart(xhr,settings,options);if(typeof res==="undefined"||res===true){$(document).trigger("tdi:ajax:_start",{xhr:xhr,settings:settings,options:options});options.start&&options.start(xhr,settings,options);return true;}return false;},success:function(data,textStatus,xhr){$(document).trigger("tdi:ajax:_success",{data:data,textStatus:textStatus,xhr:xhr,options:options});options.success&&options.success(data,textStatus,xhr,options);},error:function(xhr,textStatus,error){$(document).trigger("tdi:ajax:_error",{xhr:xhr,textStatus:textStatus,error:error,options:options});options.error&&options.error(xhr,textStatus,error,options);},complete:function(xhr,textStatus){var res=options.beforeEnd&&options.beforeEnd(xhr,textStatus,options);if(typeof res==="undefined"||res===true){$(document).trigger("tdi:ajax:_end",{xhr:xhr,textStatus:textStatus,options:options});options.end&&options.end(xhr,textStatus,options);}}});},sendForm:function(form,options){options=options||{};var $form=$(form),$submitButton=$form.data("_submitButton"),url=$form.data("ajax-url")||$form.attr("action");options.url=TDI.Ajax.Request.ajaxifyUrl(url);var res=options.beforeStart&&options.beforeStart($form,options);if(res===false){return false;}$(document).trigger("tdi:ajax:_start",{xhr:$form,settings:null,options:options});options.start&&options.start($form,options);if($submitButton){$submitButton.addClass("loading");}var iframeName="form_iframe_"+(new Date()).getTime(),iframe;if(document.documentMode&&document.documentMode<=8){iframe=document.createElement('<iframe name="'+iframeName+'">');}else{iframe=document.createElement("iframe");iframe.name=iframeName;}iframe.style.display="none";document.body.appendChild(iframe);$(iframe).load(function(){var xml=this.contentWindow.document.XMLDocument||this.contentWindow.document,xhr={responseXML:xml,responseText:(xml.body)?xml.getElementsByTagName("html")[0].innerHTML:null};var res=options.beforeEnd&&options.beforeEnd($form,options,xml);if(res===false){return false;}if($submitButton){$submitButton.removeClass("loading");}$(document).trigger("tdi:ajax:_success",{data:xml,textStatus:"",xhr:xhr,options:options});$(document).trigger("tdi:ajax:_end",{xhr:$form,textStatus:null,options:options});$form.trigger("tdi:ajax:_formSubmit",{form:$form,options:options,xhr:xhr,data:xml});options.end&&options.end($form,options,xml);setTimeout(function(){$(iframe).unbind().remove();$form.removeAttr("target");},100);});$form.attr("action",options.url);$form.attr("method","post");$form.attr("target",iframeName);$form.attr("enctype","multipart/form-data");$form[0].submit();},ajaxifyUrl:function(url){var p="_infuse=1&_ts="+(new Date()).getTime();if(url.indexOf("?#")>0){return url.replace(/\?#/,"?"+p+"#");}else{if(url.indexOf("&#")>0){return url.replace(/&#/,"&"+p+"#");}else{if(url.indexOf("?")>0){return url.replace(/\?/,"?"+p+"&");}else{if(url.indexOf("#")>0){return url.replace(/#/,"?"+p+"#");}else{return url+"?"+p;}}}}}};}(jQuery);TDI.Ajax.Response=function($){$(document).bind("tdi:ajax:_start",function(evt,data){_start(data.xhr,data.settings,data.options);});$(document).bind("tdi:ajax:_success",function(evt,data){_success(data.data,data.textStatus,data.xhr,data.options);});$(document).bind("tdi:ajax:_error",function(evt,data){_error(data.xhr,data.textStatus,data.error,data.options);});$(document).bind("tdi:ajax:_end",function(evt,data){_end(data.xhr,data.textStatus,data.options);});var _infusionInstructions={update:_onBeforeUpdate,insert:_onBeforeInsert,script:_onBeforeScript,style:_onBeforeStyle,reload:_onBeforeReload,redirect:_onBeforeRedirect,popup:_onBeforePopup};var _scriptTags=[];var _responses={updates:[],inserts:[],scripts:[],styles:[],popups:[],unknowns:[]};function _start(xhr,settings,options){$(document).trigger("tdi:ajax:start",[{options:options}]);}function _success(xml,textStatus,xhr,options){if(!xml){_error(xhr,textStatus,null,options);return false;}var $xml=$(xml),status=$xml.find("status");if(status.text().toLowerCase()!="ok"){_error(xhr,textStatus,status.text(),options);}$xml.find("response > *:not(status)").each(function(){var instruction=this.tagName.toLowerCase();switch(instruction){case"Script":_scriptTags.push(this);break;default:if(_infusionInstructions[instruction]){_infusionInstructions[instruction](this,options);}else{_onBeforeUnknown(this,options);}break;}});_onBeforeScript(_scriptTags.shift(),options);$(document).trigger("tdi:ajax:updatesDone",[{updates:_responses.updates,options:options}]);$(document).trigger("tdi:ajax:insertsDone",[{inserts:_responses.inserts,options:options}]);$(document).trigger("tdi:ajax:scriptsDone",[{scripts:_responses.scripts,options:options}]);$(document).trigger("tdi:ajax:stylesDone",[{styles:_responses.styles,options:options}]);$(document).trigger("tdi:ajax:popupsDone",[{popups:_responses.popups,options:options}]);$(document).trigger("tdi:ajax:unknownsDone",[{unknowns:_responses.unknowns,options:options}]);$(document).trigger("tdi:ajax:done",[{responses:_responses,options:options}]);}function _error(xhr,textStatus,error,options){$(document).trigger("tdi:ajax:error",[{status:xhr?xhr.status:"N/A",message:error||"Invalid Ajax response. The response must be a valid XML.",xhr:xhr,textStatus:textStatus,options:options}]);}function _end(xhr,textStatus,options){$(document).trigger("tdi:ajax:end",[{options:options}]);}function _onBeforeUpdate(tag,options){if(!tag){return false;}var $tag=$(tag),target_id=$tag.attr("target"),target=$("#"+$tag.attr("target")),content=$.trim($tag.text()),replace=$tag.attr("replace"),append=$tag.attr("append"),prepend=$tag.attr("prepend"),class_add=$tag.attr("class-add")||"",class_remove=$tag.attr("class-remove")||"",event_data={target_id:target_id,target:target,content:content,content_empty:(content.replace(/\&nbsp;/g,"").length===0),replace:replace,append:append,prepend:prepend,class_add:class_add,class_remove:class_remove,options:options};if(target.get(0)){target.trigger("tdi:ajax:beforeUpdate",event_data);_responses.updates.push(event_data);}}function _onBeforeInsert(tag,options){if(!tag){return false;}var $tag=$(tag),target_id=$tag.attr("target"),target=$("#"+target_id),content=$.trim($tag.text()),position=$tag.attr("position")||"after",inserted_node,event_data={target_id:target_id,target:target,content:content,position:position,inserted_node:inserted_node,options:options};if(target.get(0)){target.trigger("tdi:ajax:beforeInsert",event_data);_responses.inserts.push(event_data);}}function _onBeforeScript(tag,options){if(!tag){return false;}var $tag=$(tag),contents=$.trim($tag.text()),src=$tag.attr("src"),id=$tag.attr("id"),event_data={script_src:src,script_data:contents,script_id:id,options:options};$(document).trigger("tdi:ajax:beforeScript",event_data);_responses.scripts.push(event_data);}function _onBeforeStyle(tag,options){if(!tag){return false;}var $tag=$(tag),src=$tag.attr("src"),id=$tag.attr("id"),event_data={style_src:src,style_id:id,options:options};$(document).trigger("tdi:ajax:beforeStyle",event_data);_responses.styles.push(event_data);}function _onBeforeReload(tag,options){$(document).trigger("tdi:ajax:beforeReload",{options:options});}function _onBeforeRedirect(tag,options){if(!tag){return false;}var $tag=$(tag),href=$tag.attr("href");if(href){$(document).trigger("tdi:ajax:beforeRedirect",{href:href,options:options});}}function _onBeforePopup(tag,options){if(!tag){return false;}var $tag=$(tag),mode=$tag.attr("mode")||"popup",href=$tag.attr("href"),width=$tag.attr("width")||600,height=$tag.attr("height")||500,event_data={href:href,mode:mode,width:parseInt(width),height:parseInt(height),options:options};if(href){$(document).trigger("tdi:ajax:beforePopup",event_data);_responses.popups.push(event_data);}}function _onBeforeUnknown(tag,options){if(!tag){return false;}var $tag=$(tag),name=tag.tagName.toLowerCase(),beforeName=name[0].toUpperCase()+name.substr(1),attributes=tag.attributes,event_data={_name:name,contents:$.trim($tag.text())};for(var i=0,l=attributes.length;i<l;i++){event_data[attributes[i].name]=attributes[i].value;}$.event.special["tdi:ajax:before"+beforeName]={_default:customDefault};$(document).trigger("tdi:ajax:before"+beforeName,event_data);_responses.unknowns.push(event_data);}function _onUpdateDefault(evt,data){data.target.removeClass(data.class_remove).addClass(data.class_add);if(data.replace==="true"){data.target.find("*").andSelf().unbind();data.target.replaceWith(data.content);}else{if(data.append==="true"){data.target.append(data.content);}else{if(data.prepend==="true"){data.target.prepend(data.content);}else{data.target.find("*").unbind();data.target.html(data.content);}}}data.target.trigger("tdi:ajax:update",data);}function _onInsertDefault(evt,data){data.inserted_node=$(data.content)[(data.position==="before")?"insertBefore":"insertAfter"](data.target);data.target.trigger("tdi:ajax:insert",data);}function _onScriptDefault(evt,data){var scripts=_scriptTags,download=true,onComplete=function(node){var s;if(data.script_data){s=document.createElement("script");s.type="text/javascript";s.text=data.script_data;if(data.script_id){s.id=data.script_id+"_inline";}document.getElementsByTagName("head")[0].appendChild(s);}data.script_node=node;data.script_node_inline=s;$(document).trigger("tdi:ajax:script",data);_onBeforeScript(scripts.shift());};if(data.script_src){if(data.script_id&&$("#"+data.script_id).length>0){download=false;}if(download){TDI.Tools.getScript(data.script_src,{id:data.script_id,complete:onComplete});}}else{onComplete();}}function _onStyleDefault(evt,data){var download=true;if(data.style_id&&$("#"+data.style_id).length>0){download=false;}if(download){TDI.Tools.getStyle(data.style_src,{id:data.style_id,complete:function(node){data.style_node=node;$(document).trigger("tdi:ajax:style",data);}});}}function _onReloadDefault(evt,data){window.location.reload(true);}function _onRedirectDefault(evt,data){window.location.assign(data.href);}function _onPopupDefault(evt,data){var params="",popup;if(data.mode==="dialog"){params+="width="+data.width+", height="+data.height;}data.popup=window.open(data.href,"_blank",params);$(document).trigger("tdi:ajax:popup",data);}function _onUnknownDefault(evt,data){$(document).trigger("tdi:ajax:"+data._name,data);}var i,customHandlers={"tdi:ajax:beforeUpdate":_onUpdateDefault,"tdi:ajax:beforeInsert":_onInsertDefault,"tdi:ajax:beforeScript":_onScriptDefault,"tdi:ajax:beforeStyle":_onStyleDefault,"tdi:ajax:beforeReload":_onReloadDefault,"tdi:ajax:beforeRedirect":_onRedirectDefault,"tdi:ajax:beforePopup":_onPopupDefault},customDefault=function(evt,data){if(customHandlers[evt.type]){customHandlers[evt.type].call(this,evt,($.isArray(data)?data[1]:data));}else{_onUnknownDefault.call(this,evt,($.isArray(data)?data[1]:data));}};for(i in customHandlers){$.event.special[i]={_default:customDefault};}return{};}(jQuery);TDI.Tools=function($){return{getScript:function(url,options){var loaded=false,node;if(url){options=options||{};node=document.createElement("script");node.type="text/javascript";node.src=url;if(options.id){node.id=options.id;}if(options.complete){node.onreadystatechange=function(){var rs=this.readyState;if(!loaded&&(rs==="loaded"||rs==="complete")){loaded=true;node.onreadystatechange=null;options.complete(node);}};node.onload=function(){if(!loaded){loaded=true;options.complete(node);}};}document.getElementsByTagName("head")[0].appendChild(node);}},getStyle:function(url,options){var node;if(url){options=options||{};node=document.createElement("link");node.rel="stylesheet";node.type="text/css";node.media=options.media||"screen";node.href=url;if(options.id){node.id=options.id;}document.getElementsByTagName("head")[0].appendChild(node);options.complete&&options.complete(node);}}};}(jQuery);
			/* /tdi.js */
			/* et.js */
/*!
 * ET  (14.05.2018)
 * ET(&) or Extra Terrestrial
 * Author: Ivan Čentéš
 * Repository: gitlab@git.etnetera.cz:centi/et.git
 */
window.ET=window.ET={};(function(ET,$){ET.ModalDialogManager=function(conf,modalDialogClass){this.conf=$.extend({id:"default",name:"modal-dialog",width:null,height:null,zIndex:1000,zIndexIncrement:10,contents:"",cls:null,shimCls:null},conf||{});this.modalDialogClass=modalDialogClass||ET.ModalDialog;this.dialogs=[];this._bind();};ET.ModalDialogManager.prototype.openDialog=function(conf){var defaultConf=$.extend({},this.conf);var dialogConf=$.extend(defaultConf,conf||{});var modalDialog=this.findDialog(dialogConf.id);if(!modalDialog){dialogConf.zIndex+=this.conf.zIndexIncrement*this.dialogs.length;modalDialog=new this.modalDialogClass(dialogConf);this.dialogs.push(modalDialog);}modalDialog.open(dialogConf);return modalDialog;};ET.ModalDialogManager.prototype.closeDialog=function(dialogId,userTriggered){if(!dialogId){return false;}var modalDialog=this.findDialog(dialogId);if(modalDialog){this._removeDialog(modalDialog,userTriggered||false);return true;}else{return false;}};ET.ModalDialogManager.prototype.findDialog=function(dialogId){if(!dialogId){return null;}for(var i=0,l=this.dialogs.length;i<l;i++){if(dialogId===this.dialogs[i].conf.id){return this.dialogs[i];}}return null;};ET.ModalDialogManager.prototype.destroy=function(){while(this.dialogs.length>0){this.dialogs.shift().destroy();}this._unbind();};ET.ModalDialogManager.prototype._removeDialog=function(dialog,userTriggered){if(!dialog){return false;}var dialogs=[];if(dialog.close(userTriggered||false)!==false){for(var i=0,l=this.dialogs.length;i<l;i++){if(this.dialogs[i]!==dialog){dialogs.push(this.dialogs[i]);}}dialog.destroy();this.dialogs=dialogs;return true;}return false;};ET.ModalDialogManager.prototype._bind=function(){$(document).on("keydown.modalDialogManager",$.proxy(this._onKeyDown,this));};ET.ModalDialogManager.prototype._unbind=function(){$(document).off(".modalDialogManager");};ET.ModalDialogManager.prototype._onKeyDown=function(evt){if(!evt||!evt.preventDefault){return false;}switch(evt.keyCode){case 27:var dialog=this.dialogs[0];var closableDialog=dialog&&dialog.conf.closeOnUserClick===true;if(!dialog||!closableDialog){return false;}this._onEsc(evt);break;}};ET.ModalDialogManager.prototype._onEsc=function(evt){if(!evt||!evt.preventDefault){return false;}evt.preventDefault();if(this.dialogs.length>0){return this.closeDialog(this.dialogs[this.dialogs.length-1].conf.id,true);}return false;};}(window.ET,jQuery));(function(ET,$){ET.ModalDialog=function(conf){this.conf=$.extend({id:"default",name:"modal-dialog",width:null,height:null,maxWidth:null,maxHeight:null,zIndex:1000,contents:"",attrsShim:{},attrsDialog:{},attrsContents:{},attrsClose:{},closeOnShimClick:true,cls:null,shimCls:null,positionLeft:"center",positionTop:"center",closeOnUserClick:true},conf||{});this._render();this._bind();};ET.ModalDialog.prototype.open=function(conf){this.conf=$.extend(this.conf,conf||{});var evtData={dialog:this,conf:conf};var beforeOpenHandler=$(document).triggerHandler("beforeOpen.modalDialog",evtData);if(beforeOpenHandler!==false){this.$shim.show();this.$dialog.show();this.$dialog.css({width:this.conf.width,height:this.conf.height,"max-width":this.conf.maxWidth,"max-height":this.conf.maxHeight});this.$contents.empty().append(this.conf.contents);if(this.conf.width){if(this.conf.width==="auto"){this.$contents.css({width:this.conf.width});}else{this.$contents.css({width:this.conf.width-(this.$contents.outerWidth(true)-this.$contents.width())});}}if(this.conf.maxWidth){this.$contents.css({"max-width":this.conf.maxWidth});}if(this.conf.height){if(this.conf.height==="auto"){this.$contents.css({height:this.conf.height});}else{this.$contents.css({height:this.conf.height-(this.$contents.outerHeight(true)-this.$contents.height())});}}if(this.conf.maxHeight){this.$contents.css({"max-height":this.conf.maxHeight});}this.position();$(document).triggerHandler("open.modalDialog",evtData);return true;}return false;};ET.ModalDialog.prototype.close=function(userTriggered){var evtData={dialog:this,userTriggered:userTriggered||false};var beforeCloseHandler=$(document).triggerHandler("beforeClose.modalDialog",evtData);if(beforeCloseHandler!==false){this.$shim.hide();this.$dialog.hide();$(document).triggerHandler("close.modalDialog",evtData);return true;}return false;};ET.ModalDialog.prototype.position=function(){var evtData={dialog:this};var beforePositionHandler=$(document).triggerHandler("beforePosition.modalDialog",evtData);if(beforePositionHandler!==false){if(this.conf.positionLeft==="center"){this.$dialog.css("left",$(window).width()/2-this.$dialog.outerWidth(true)/2);}if(this.conf.positionTop==="center"){this.$dialog.css("top",$(window).height()/2-this.$dialog.outerHeight(true)/2);}$(document).triggerHandler("position.modalDialog",evtData);return true;}return false;};ET.ModalDialog.prototype.destroy=function(){this._unbind();this._unrender();};ET.ModalDialog.prototype._render=function(){this.$shim=$("<div>").addClass(this.conf.name+"-shim").addClass(this.conf.shimCls).attr(this.conf.attrsShim).attr("id",this.conf.id+"-shim").css("z-index",this.conf.zIndex).hide().appendTo("body");this.$dialog=$("<div>").addClass(this.conf.name).addClass(this.conf.cls).attr(this.conf.attrsDialog).attr("id",this.conf.id).css("z-index",this.conf.zIndex+1).hide().appendTo("body");this.$contents=$("<div>").addClass(this.conf.name+"-contents").attr(this.conf.attrsContents).attr("id",this.conf.id+"-contents").appendTo(this.$dialog);if(this.conf.closeOnUserClick===true){this.$close=$("<div>").addClass(this.conf.name+"-close").attr(this.conf.attrsClose).attr("id",this.conf.id+"-close").appendTo(this.$dialog);}};ET.ModalDialog.prototype._unrender=function(){if(this.conf.closeOnUserClick===true){this.$close.remove();this.$contents.remove();}if(this.conf.closeOnShimClick===true){this.$shim.remove();}this.$dialog.remove();this.$close=null;this.$shim=null;this.$contents=null;this.$dialog=null;};ET.ModalDialog.prototype._bind=function(){if(this.conf.closeOnUserClick===true){this.$close.on("click.modalDialog",$.proxy(this._onCloseClick,this));this.$contents.on("click.modalDialog",".close",$.proxy(this._onContentsDelegatedClick,this));}if(this.conf.closeOnShimClick===true&&this.conf.closeOnUserClick===true){this.$shim.on("click.modalDialog",$.proxy(this._onShimClick,this));}$(window).on("resize.modalDialog",$.proxy(this._onWindowResize,this));};ET.ModalDialog.prototype._unbind=function(){if(this.$close){this.$close.off(".modalDialog");this.$contents.off(".modalDialog");}if(this.$shim){this.$shim.off(".modalDialog");}$(window).off(".modalDialog");};ET.ModalDialog.prototype._onCloseClick=function(evt){evt.preventDefault();this.close(true);};ET.ModalDialog.prototype._onShimClick=function(evt){evt.preventDefault();this.close(true);};ET.ModalDialog.prototype._onContentsDelegatedClick=function(evt){evt.preventDefault();this.close(true);};ET.ModalDialog.prototype._onWindowResize=function(){this.position();};}(window.ET,jQuery));
			/* /et.js */
			/* position_js */
/*! tether 1.4.4 */

(function(root, factory) {
  if (typeof define === 'function' && define.amd) {
    define([], factory);
  } else if (typeof exports === 'object') {
    module.exports = factory();
  } else {
    root.Tether = factory();
  }
}(this, function() {

'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var TetherBase = undefined;
if (typeof TetherBase === 'undefined') {
  TetherBase = { modules: [] };
}

var zeroElement = null;

// Same as native getBoundingClientRect, except it takes into account parent <frame> offsets
// if the element lies within a nested document (<frame> or <iframe>-like).
function getActualBoundingClientRect(node) {
  var boundingRect = node.getBoundingClientRect();

  // The original object returned by getBoundingClientRect is immutable, so we clone it
  // We can't use extend because the properties are not considered part of the object by hasOwnProperty in IE9
  var rect = {};
  for (var k in boundingRect) {
    rect[k] = boundingRect[k];
  }

  if (node.ownerDocument !== document) {
    var _frameElement = node.ownerDocument.defaultView.frameElement;
    if (_frameElement) {
      var frameRect = getActualBoundingClientRect(_frameElement);
      rect.top += frameRect.top;
      rect.bottom += frameRect.top;
      rect.left += frameRect.left;
      rect.right += frameRect.left;
    }
  }

  return rect;
}

function getScrollParents(el) {
  // In firefox if the el is inside an iframe with display: none; window.getComputedStyle() will return null;
  // https://bugzilla.mozilla.org/show_bug.cgi?id=548397
  var computedStyle = getComputedStyle(el) || {};
  var position = computedStyle.position;
  var parents = [];

  if (position === 'fixed') {
    return [el];
  }

  var parent = el;
  while ((parent = parent.parentNode) && parent && parent.nodeType === 1) {
    var style = undefined;
    try {
      style = getComputedStyle(parent);
    } catch (err) {}

    if (typeof style === 'undefined' || style === null) {
      parents.push(parent);
      return parents;
    }

    var _style = style;
    var overflow = _style.overflow;
    var overflowX = _style.overflowX;
    var overflowY = _style.overflowY;

    if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {
      if (position !== 'absolute' || ['relative', 'absolute', 'fixed'].indexOf(style.position) >= 0) {
        parents.push(parent);
      }
    }
  }

  parents.push(el.ownerDocument.body);

  // If the node is within a frame, account for the parent window scroll
  if (el.ownerDocument !== document) {
    parents.push(el.ownerDocument.defaultView);
  }

  return parents;
}

var uniqueId = (function () {
  var id = 0;
  return function () {
    return ++id;
  };
})();

var zeroPosCache = {};
var getOrigin = function getOrigin() {
  // getBoundingClientRect is unfortunately too accurate.  It introduces a pixel or two of
  // jitter as the user scrolls that messes with our ability to detect if two positions
  // are equivilant or not.  We place an element at the top left of the page that will
  // get the same jitter, so we can cancel the two out.
  var node = zeroElement;
  if (!node || !document.body.contains(node)) {
    node = document.createElement('div');
    node.setAttribute('data-tether-id', uniqueId());
    extend(node.style, {
      top: 0,
      left: 0,
      position: 'absolute'
    });

    document.body.appendChild(node);

    zeroElement = node;
  }

  var id = node.getAttribute('data-tether-id');
  if (typeof zeroPosCache[id] === 'undefined') {
    zeroPosCache[id] = getActualBoundingClientRect(node);

    // Clear the cache when this position call is done
    defer(function () {
      delete zeroPosCache[id];
    });
  }

  return zeroPosCache[id];
};

function removeUtilElements() {
  if (zeroElement) {
    document.body.removeChild(zeroElement);
  }
  zeroElement = null;
};

function getBounds(el) {
  var doc = undefined;
  if (el === document) {
    doc = document;
    el = document.documentElement;
  } else {
    doc = el.ownerDocument;
  }

  var docEl = doc.documentElement;

  var box = getActualBoundingClientRect(el);

  var origin = getOrigin();

  box.top -= origin.top;
  box.left -= origin.left;

  if (typeof box.width === 'undefined') {
    box.width = document.body.scrollWidth - box.left - box.right;
  }
  if (typeof box.height === 'undefined') {
    box.height = document.body.scrollHeight - box.top - box.bottom;
  }

  box.top = box.top - docEl.clientTop;
  box.left = box.left - docEl.clientLeft;
  box.right = doc.body.clientWidth - box.width - box.left;
  box.bottom = doc.body.clientHeight - box.height - box.top;

  return box;
}

function getOffsetParent(el) {
  return el.offsetParent || document.documentElement;
}

var _scrollBarSize = null;
function getScrollBarSize() {
  if (_scrollBarSize) {
    return _scrollBarSize;
  }
  var inner = document.createElement('div');
  inner.style.width = '100%';
  inner.style.height = '200px';

  var outer = document.createElement('div');
  extend(outer.style, {
    position: 'absolute',
    top: 0,
    left: 0,
    pointerEvents: 'none',
    visibility: 'hidden',
    width: '200px',
    height: '150px',
    overflow: 'hidden'
  });

  outer.appendChild(inner);

  document.body.appendChild(outer);

  var widthContained = inner.offsetWidth;
  outer.style.overflow = 'scroll';
  var widthScroll = inner.offsetWidth;

  if (widthContained === widthScroll) {
    widthScroll = outer.clientWidth;
  }

  document.body.removeChild(outer);

  var width = widthContained - widthScroll;

  _scrollBarSize = { width: width, height: width };
  return _scrollBarSize;
}

function extend() {
  var out = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

  var args = [];

  Array.prototype.push.apply(args, arguments);

  args.slice(1).forEach(function (obj) {
    if (obj) {
      for (var key in obj) {
        if (({}).hasOwnProperty.call(obj, key)) {
          out[key] = obj[key];
        }
      }
    }
  });

  return out;
}

function removeClass(el, name) {
  if (typeof el.classList !== 'undefined') {
    name.split(' ').forEach(function (cls) {
      if (cls.trim()) {
        el.classList.remove(cls);
      }
    });
  } else {
    var regex = new RegExp('(^| )' + name.split(' ').join('|') + '( |$)', 'gi');
    var className = getClassName(el).replace(regex, ' ');
    setClassName(el, className);
  }
}

function addClass(el, name) {
  if (typeof el.classList !== 'undefined') {
    name.split(' ').forEach(function (cls) {
      if (cls.trim()) {
        el.classList.add(cls);
      }
    });
  } else {
    removeClass(el, name);
    var cls = getClassName(el) + (' ' + name);
    setClassName(el, cls);
  }
}

function hasClass(el, name) {
  if (typeof el.classList !== 'undefined') {
    return el.classList.contains(name);
  }
  var className = getClassName(el);
  return new RegExp('(^| )' + name + '( |$)', 'gi').test(className);
}

function getClassName(el) {
  // Can't use just SVGAnimatedString here since nodes within a Frame in IE have
  // completely separately SVGAnimatedString base classes
  if (el.className instanceof el.ownerDocument.defaultView.SVGAnimatedString) {
    return el.className.baseVal;
  }
  return el.className;
}

function setClassName(el, className) {
  el.setAttribute('class', className);
}

function updateClasses(el, add, all) {
  // Of the set of 'all' classes, we need the 'add' classes, and only the
  // 'add' classes to be set.
  all.forEach(function (cls) {
    if (add.indexOf(cls) === -1 && hasClass(el, cls)) {
      removeClass(el, cls);
    }
  });

  add.forEach(function (cls) {
    if (!hasClass(el, cls)) {
      addClass(el, cls);
    }
  });
}

var deferred = [];

var defer = function defer(fn) {
  deferred.push(fn);
};

var flush = function flush() {
  var fn = undefined;
  while (fn = deferred.pop()) {
    fn();
  }
};

var Evented = (function () {
  function Evented() {
    _classCallCheck(this, Evented);
  }

  _createClass(Evented, [{
    key: 'on',
    value: function on(event, handler, ctx) {
      var once = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];

      if (typeof this.bindings === 'undefined') {
        this.bindings = {};
      }
      if (typeof this.bindings[event] === 'undefined') {
        this.bindings[event] = [];
      }
      this.bindings[event].push({ handler: handler, ctx: ctx, once: once });
    }
  }, {
    key: 'once',
    value: function once(event, handler, ctx) {
      this.on(event, handler, ctx, true);
    }
  }, {
    key: 'off',
    value: function off(event, handler) {
      if (typeof this.bindings === 'undefined' || typeof this.bindings[event] === 'undefined') {
        return;
      }

      if (typeof handler === 'undefined') {
        delete this.bindings[event];
      } else {
        var i = 0;
        while (i < this.bindings[event].length) {
          if (this.bindings[event][i].handler === handler) {
            this.bindings[event].splice(i, 1);
          } else {
            ++i;
          }
        }
      }
    }
  }, {
    key: 'trigger',
    value: function trigger(event) {
      if (typeof this.bindings !== 'undefined' && this.bindings[event]) {
        var i = 0;

        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }

        while (i < this.bindings[event].length) {
          var _bindings$event$i = this.bindings[event][i];
          var handler = _bindings$event$i.handler;
          var ctx = _bindings$event$i.ctx;
          var once = _bindings$event$i.once;

          var context = ctx;
          if (typeof context === 'undefined') {
            context = this;
          }

          handler.apply(context, args);

          if (once) {
            this.bindings[event].splice(i, 1);
          } else {
            ++i;
          }
        }
      }
    }
  }]);

  return Evented;
})();

TetherBase.Utils = {
  getActualBoundingClientRect: getActualBoundingClientRect,
  getScrollParents: getScrollParents,
  getBounds: getBounds,
  getOffsetParent: getOffsetParent,
  extend: extend,
  addClass: addClass,
  removeClass: removeClass,
  hasClass: hasClass,
  updateClasses: updateClasses,
  defer: defer,
  flush: flush,
  uniqueId: uniqueId,
  Evented: Evented,
  getScrollBarSize: getScrollBarSize,
  removeUtilElements: removeUtilElements
};
/* globals TetherBase, performance */

'use strict';

var _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x6, _x7, _x8) { var _again = true; _function: while (_again) { var object = _x6, property = _x7, receiver = _x8; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x6 = parent; _x7 = property; _x8 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

if (typeof TetherBase === 'undefined') {
  throw new Error('You must include the utils.js file before tether.js');
}

var _TetherBase$Utils = TetherBase.Utils;
var getScrollParents = _TetherBase$Utils.getScrollParents;
var getBounds = _TetherBase$Utils.getBounds;
var getOffsetParent = _TetherBase$Utils.getOffsetParent;
var extend = _TetherBase$Utils.extend;
var addClass = _TetherBase$Utils.addClass;
var removeClass = _TetherBase$Utils.removeClass;
var updateClasses = _TetherBase$Utils.updateClasses;
var defer = _TetherBase$Utils.defer;
var flush = _TetherBase$Utils.flush;
var getScrollBarSize = _TetherBase$Utils.getScrollBarSize;
var removeUtilElements = _TetherBase$Utils.removeUtilElements;

function within(a, b) {
  var diff = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];

  return a + diff >= b && b >= a - diff;
}

var transformKey = (function () {
  if (typeof document === 'undefined') {
    return '';
  }
  var el = document.createElement('div');

  var transforms = ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform'];
  for (var i = 0; i < transforms.length; ++i) {
    var key = transforms[i];
    if (el.style[key] !== undefined) {
      return key;
    }
  }
})();

var tethers = [];

var position = function position() {
  tethers.forEach(function (tether) {
    tether.position(false);
  });
  flush();
};

function now() {
  if (typeof performance === 'object' && typeof performance.now === 'function') {
    return performance.now();
  }
  return +new Date();
}

(function () {
  var lastCall = null;
  var lastDuration = null;
  var pendingTimeout = null;

  var tick = function tick() {
    if (typeof lastDuration !== 'undefined' && lastDuration > 16) {
      // We voluntarily throttle ourselves if we can't manage 60fps
      lastDuration = Math.min(lastDuration - 16, 250);

      // Just in case this is the last event, remember to position just once more
      pendingTimeout = setTimeout(tick, 250);
      return;
    }

    if (typeof lastCall !== 'undefined' && now() - lastCall < 10) {
      // Some browsers call events a little too frequently, refuse to run more than is reasonable
      return;
    }

    if (pendingTimeout != null) {
      clearTimeout(pendingTimeout);
      pendingTimeout = null;
    }

    lastCall = now();
    position();
    lastDuration = now() - lastCall;
  };

  if (typeof window !== 'undefined' && typeof window.addEventListener !== 'undefined') {
    ['resize', 'scroll', 'touchmove'].forEach(function (event) {
      window.addEventListener(event, tick);
    });
  }
})();

var MIRROR_LR = {
  center: 'center',
  left: 'right',
  right: 'left'
};

var MIRROR_TB = {
  middle: 'middle',
  top: 'bottom',
  bottom: 'top'
};

var OFFSET_MAP = {
  top: 0,
  left: 0,
  middle: '50%',
  center: '50%',
  bottom: '100%',
  right: '100%'
};

var autoToFixedAttachment = function autoToFixedAttachment(attachment, relativeToAttachment) {
  var left = attachment.left;
  var top = attachment.top;

  if (left === 'auto') {
    left = MIRROR_LR[relativeToAttachment.left];
  }

  if (top === 'auto') {
    top = MIRROR_TB[relativeToAttachment.top];
  }

  return { left: left, top: top };
};

var attachmentToOffset = function attachmentToOffset(attachment) {
  var left = attachment.left;
  var top = attachment.top;

  if (typeof OFFSET_MAP[attachment.left] !== 'undefined') {
    left = OFFSET_MAP[attachment.left];
  }

  if (typeof OFFSET_MAP[attachment.top] !== 'undefined') {
    top = OFFSET_MAP[attachment.top];
  }

  return { left: left, top: top };
};

function addOffset() {
  var out = { top: 0, left: 0 };

  for (var _len = arguments.length, offsets = Array(_len), _key = 0; _key < _len; _key++) {
    offsets[_key] = arguments[_key];
  }

  offsets.forEach(function (_ref) {
    var top = _ref.top;
    var left = _ref.left;

    if (typeof top === 'string') {
      top = parseFloat(top, 10);
    }
    if (typeof left === 'string') {
      left = parseFloat(left, 10);
    }

    out.top += top;
    out.left += left;
  });

  return out;
}

function offsetToPx(offset, size) {
  if (typeof offset.left === 'string' && offset.left.indexOf('%') !== -1) {
    offset.left = parseFloat(offset.left, 10) / 100 * size.width;
  }
  if (typeof offset.top === 'string' && offset.top.indexOf('%') !== -1) {
    offset.top = parseFloat(offset.top, 10) / 100 * size.height;
  }

  return offset;
}

var parseOffset = function parseOffset(value) {
  var _value$split = value.split(' ');

  var _value$split2 = _slicedToArray(_value$split, 2);

  var top = _value$split2[0];
  var left = _value$split2[1];

  return { top: top, left: left };
};
var parseAttachment = parseOffset;

var TetherClass = (function (_Evented) {
  _inherits(TetherClass, _Evented);

  function TetherClass(options) {
    var _this = this;

    _classCallCheck(this, TetherClass);

    _get(Object.getPrototypeOf(TetherClass.prototype), 'constructor', this).call(this);
    this.position = this.position.bind(this);

    tethers.push(this);

    this.history = [];

    this.setOptions(options, false);

    TetherBase.modules.forEach(function (module) {
      if (typeof module.initialize !== 'undefined') {
        module.initialize.call(_this);
      }
    });

    this.position();
  }

  _createClass(TetherClass, [{
    key: 'getClass',
    value: function getClass() {
      var key = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];
      var classes = this.options.classes;

      if (typeof classes !== 'undefined' && classes[key]) {
        return this.options.classes[key];
      } else if (this.options.classPrefix) {
        return this.options.classPrefix + '-' + key;
      } else {
        return key;
      }
    }
  }, {
    key: 'setOptions',
    value: function setOptions(options) {
      var _this2 = this;

      var pos = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];

      var defaults = {
        offset: '0 0',
        targetOffset: '0 0',
        targetAttachment: 'auto auto',
        classPrefix: 'tether'
      };

      this.options = extend(defaults, options);

      var _options = this.options;
      var element = _options.element;
      var target = _options.target;
      var targetModifier = _options.targetModifier;

      this.element = element;
      this.target = target;
      this.targetModifier = targetModifier;

      if (this.target === 'viewport') {
        this.target = document.body;
        this.targetModifier = 'visible';
      } else if (this.target === 'scroll-handle') {
        this.target = document.body;
        this.targetModifier = 'scroll-handle';
      }

      ['element', 'target'].forEach(function (key) {
        if (typeof _this2[key] === 'undefined') {
          throw new Error('Tether Error: Both element and target must be defined');
        }

        if (typeof _this2[key].jquery !== 'undefined') {
          _this2[key] = _this2[key][0];
        } else if (typeof _this2[key] === 'string') {
          _this2[key] = document.querySelector(_this2[key]);
        }
      });

      addClass(this.element, this.getClass('element'));
      if (!(this.options.addTargetClasses === false)) {
        addClass(this.target, this.getClass('target'));
      }

      if (!this.options.attachment) {
        throw new Error('Tether Error: You must provide an attachment');
      }

      this.targetAttachment = parseAttachment(this.options.targetAttachment);
      this.attachment = parseAttachment(this.options.attachment);
      this.offset = parseOffset(this.options.offset);
      this.targetOffset = parseOffset(this.options.targetOffset);

      if (typeof this.scrollParents !== 'undefined') {
        this.disable();
      }

      if (this.targetModifier === 'scroll-handle') {
        this.scrollParents = [this.target];
      } else {
        this.scrollParents = getScrollParents(this.target);
      }

      if (!(this.options.enabled === false)) {
        this.enable(pos);
      }
    }
  }, {
    key: 'getTargetBounds',
    value: function getTargetBounds() {
      if (typeof this.targetModifier !== 'undefined') {
        if (this.targetModifier === 'visible') {
          if (this.target === document.body) {
            return { top: pageYOffset, left: pageXOffset, height: innerHeight, width: innerWidth };
          } else {
            var bounds = getBounds(this.target);

            var out = {
              height: bounds.height,
              width: bounds.width,
              top: bounds.top,
              left: bounds.left
            };

            out.height = Math.min(out.height, bounds.height - (pageYOffset - bounds.top));
            out.height = Math.min(out.height, bounds.height - (bounds.top + bounds.height - (pageYOffset + innerHeight)));
            out.height = Math.min(innerHeight, out.height);
            out.height -= 2;

            out.width = Math.min(out.width, bounds.width - (pageXOffset - bounds.left));
            out.width = Math.min(out.width, bounds.width - (bounds.left + bounds.width - (pageXOffset + innerWidth)));
            out.width = Math.min(innerWidth, out.width);
            out.width -= 2;

            if (out.top < pageYOffset) {
              out.top = pageYOffset;
            }
            if (out.left < pageXOffset) {
              out.left = pageXOffset;
            }

            return out;
          }
        } else if (this.targetModifier === 'scroll-handle') {
          var bounds = undefined;
          var target = this.target;
          if (target === document.body) {
            target = document.documentElement;

            bounds = {
              left: pageXOffset,
              top: pageYOffset,
              height: innerHeight,
              width: innerWidth
            };
          } else {
            bounds = getBounds(target);
          }

          var style = getComputedStyle(target);

          var hasBottomScroll = target.scrollWidth > target.clientWidth || [style.overflow, style.overflowX].indexOf('scroll') >= 0 || this.target !== document.body;

          var scrollBottom = 0;
          if (hasBottomScroll) {
            scrollBottom = 15;
          }

          var height = bounds.height - parseFloat(style.borderTopWidth) - parseFloat(style.borderBottomWidth) - scrollBottom;

          var out = {
            width: 15,
            height: height * 0.975 * (height / target.scrollHeight),
            left: bounds.left + bounds.width - parseFloat(style.borderLeftWidth) - 15
          };

          var fitAdj = 0;
          if (height < 408 && this.target === document.body) {
            fitAdj = -0.00011 * Math.pow(height, 2) - 0.00727 * height + 22.58;
          }

          if (this.target !== document.body) {
            out.height = Math.max(out.height, 24);
          }

          var scrollPercentage = this.target.scrollTop / (target.scrollHeight - height);
          out.top = scrollPercentage * (height - out.height - fitAdj) + bounds.top + parseFloat(style.borderTopWidth);

          if (this.target === document.body) {
            out.height = Math.max(out.height, 24);
          }

          return out;
        }
      } else {
        return getBounds(this.target);
      }
    }
  }, {
    key: 'clearCache',
    value: function clearCache() {
      this._cache = {};
    }
  }, {
    key: 'cache',
    value: function cache(k, getter) {
      // More than one module will often need the same DOM info, so
      // we keep a cache which is cleared on each position call
      if (typeof this._cache === 'undefined') {
        this._cache = {};
      }

      if (typeof this._cache[k] === 'undefined') {
        this._cache[k] = getter.call(this);
      }

      return this._cache[k];
    }
  }, {
    key: 'enable',
    value: function enable() {
      var _this3 = this;

      var pos = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];

      if (!(this.options.addTargetClasses === false)) {
        addClass(this.target, this.getClass('enabled'));
      }
      addClass(this.element, this.getClass('enabled'));
      this.enabled = true;

      this.scrollParents.forEach(function (parent) {
        if (parent !== _this3.target.ownerDocument) {
          parent.addEventListener('scroll', _this3.position);
        }
      });

      if (pos) {
        this.position();
      }
    }
  }, {
    key: 'disable',
    value: function disable() {
      var _this4 = this;

      removeClass(this.target, this.getClass('enabled'));
      removeClass(this.element, this.getClass('enabled'));
      this.enabled = false;

      if (typeof this.scrollParents !== 'undefined') {
        this.scrollParents.forEach(function (parent) {
          parent.removeEventListener('scroll', _this4.position);
        });
      }
    }
  }, {
    key: 'destroy',
    value: function destroy() {
      var _this5 = this;

      this.disable();

      tethers.forEach(function (tether, i) {
        if (tether === _this5) {
          tethers.splice(i, 1);
        }
      });

      // Remove any elements we were using for convenience from the DOM
      if (tethers.length === 0) {
        removeUtilElements();
      }
    }
  }, {
    key: 'updateAttachClasses',
    value: function updateAttachClasses(elementAttach, targetAttach) {
      var _this6 = this;

      elementAttach = elementAttach || this.attachment;
      targetAttach = targetAttach || this.targetAttachment;
      var sides = ['left', 'top', 'bottom', 'right', 'middle', 'center'];

      if (typeof this._addAttachClasses !== 'undefined' && this._addAttachClasses.length) {
        // updateAttachClasses can be called more than once in a position call, so
        // we need to clean up after ourselves such that when the last defer gets
        // ran it doesn't add any extra classes from previous calls.
        this._addAttachClasses.splice(0, this._addAttachClasses.length);
      }

      if (typeof this._addAttachClasses === 'undefined') {
        this._addAttachClasses = [];
      }
      var add = this._addAttachClasses;

      if (elementAttach.top) {
        add.push(this.getClass('element-attached') + '-' + elementAttach.top);
      }
      if (elementAttach.left) {
        add.push(this.getClass('element-attached') + '-' + elementAttach.left);
      }
      if (targetAttach.top) {
        add.push(this.getClass('target-attached') + '-' + targetAttach.top);
      }
      if (targetAttach.left) {
        add.push(this.getClass('target-attached') + '-' + targetAttach.left);
      }

      var all = [];
      sides.forEach(function (side) {
        all.push(_this6.getClass('element-attached') + '-' + side);
        all.push(_this6.getClass('target-attached') + '-' + side);
      });

      defer(function () {
        if (!(typeof _this6._addAttachClasses !== 'undefined')) {
          return;
        }

        updateClasses(_this6.element, _this6._addAttachClasses, all);
        if (!(_this6.options.addTargetClasses === false)) {
          updateClasses(_this6.target, _this6._addAttachClasses, all);
        }

        delete _this6._addAttachClasses;
      });
    }
  }, {
    key: 'position',
    value: function position() {
      var _this7 = this;

      var flushChanges = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];

      // flushChanges commits the changes immediately, leave true unless you are positioning multiple
      // tethers (in which case call Tether.Utils.flush yourself when you're done)

      if (!this.enabled) {
        return;
      }

      this.clearCache();

      // Turn 'auto' attachments into the appropriate corner or edge
      var targetAttachment = autoToFixedAttachment(this.targetAttachment, this.attachment);

      this.updateAttachClasses(this.attachment, targetAttachment);

      var elementPos = this.cache('element-bounds', function () {
        return getBounds(_this7.element);
      });

      var width = elementPos.width;
      var height = elementPos.height;

      if (width === 0 && height === 0 && typeof this.lastSize !== 'undefined') {
        var _lastSize = this.lastSize;

        // We cache the height and width to make it possible to position elements that are
        // getting hidden.
        width = _lastSize.width;
        height = _lastSize.height;
      } else {
        this.lastSize = { width: width, height: height };
      }

      var targetPos = this.cache('target-bounds', function () {
        return _this7.getTargetBounds();
      });
      var targetSize = targetPos;

      // Get an actual px offset from the attachment
      var offset = offsetToPx(attachmentToOffset(this.attachment), { width: width, height: height });
      var targetOffset = offsetToPx(attachmentToOffset(targetAttachment), targetSize);

      var manualOffset = offsetToPx(this.offset, { width: width, height: height });
      var manualTargetOffset = offsetToPx(this.targetOffset, targetSize);

      // Add the manually provided offset
      offset = addOffset(offset, manualOffset);
      targetOffset = addOffset(targetOffset, manualTargetOffset);

      // It's now our goal to make (element position + offset) == (target position + target offset)
      var left = targetPos.left + targetOffset.left - offset.left;
      var top = targetPos.top + targetOffset.top - offset.top;

      for (var i = 0; i < TetherBase.modules.length; ++i) {
        var _module2 = TetherBase.modules[i];
        var ret = _module2.position.call(this, {
          left: left,
          top: top,
          targetAttachment: targetAttachment,
          targetPos: targetPos,
          elementPos: elementPos,
          offset: offset,
          targetOffset: targetOffset,
          manualOffset: manualOffset,
          manualTargetOffset: manualTargetOffset,
          scrollbarSize: scrollbarSize,
          attachment: this.attachment
        });

        if (ret === false) {
          return false;
        } else if (typeof ret === 'undefined' || typeof ret !== 'object') {
          continue;
        } else {
          top = ret.top;
          left = ret.left;
        }
      }

      // We describe the position three different ways to give the optimizer
      // a chance to decide the best possible way to position the element
      // with the fewest repaints.
      var next = {
        // It's position relative to the page (absolute positioning when
        // the element is a child of the body)
        page: {
          top: top,
          left: left
        },

        // It's position relative to the viewport (fixed positioning)
        viewport: {
          top: top - pageYOffset,
          bottom: pageYOffset - top - height + innerHeight,
          left: left - pageXOffset,
          right: pageXOffset - left - width + innerWidth
        }
      };

      var doc = this.target.ownerDocument;
      var win = doc.defaultView;

      var scrollbarSize = undefined;
      if (win.innerHeight > doc.documentElement.clientHeight) {
        scrollbarSize = this.cache('scrollbar-size', getScrollBarSize);
        next.viewport.bottom -= scrollbarSize.height;
      }

      if (win.innerWidth > doc.documentElement.clientWidth) {
        scrollbarSize = this.cache('scrollbar-size', getScrollBarSize);
        next.viewport.right -= scrollbarSize.width;
      }

      if (['', 'static'].indexOf(doc.body.style.position) === -1 || ['', 'static'].indexOf(doc.body.parentElement.style.position) === -1) {
        // Absolute positioning in the body will be relative to the page, not the 'initial containing block'
        next.page.bottom = doc.body.scrollHeight - top - height;
        next.page.right = doc.body.scrollWidth - left - width;
      }

      if (typeof this.options.optimizations !== 'undefined' && this.options.optimizations.moveElement !== false && !(typeof this.targetModifier !== 'undefined')) {
        (function () {
          var offsetParent = _this7.cache('target-offsetparent', function () {
            return getOffsetParent(_this7.target);
          });
          var offsetPosition = _this7.cache('target-offsetparent-bounds', function () {
            return getBounds(offsetParent);
          });
          var offsetParentStyle = getComputedStyle(offsetParent);
          var offsetParentSize = offsetPosition;

          var offsetBorder = {};
          ['Top', 'Left', 'Bottom', 'Right'].forEach(function (side) {
            offsetBorder[side.toLowerCase()] = parseFloat(offsetParentStyle['border' + side + 'Width']);
          });

          offsetPosition.right = doc.body.scrollWidth - offsetPosition.left - offsetParentSize.width + offsetBorder.right;
          offsetPosition.bottom = doc.body.scrollHeight - offsetPosition.top - offsetParentSize.height + offsetBorder.bottom;

          if (next.page.top >= offsetPosition.top + offsetBorder.top && next.page.bottom >= offsetPosition.bottom) {
            if (next.page.left >= offsetPosition.left + offsetBorder.left && next.page.right >= offsetPosition.right) {
              // We're within the visible part of the target's scroll parent
              var scrollTop = offsetParent.scrollTop;
              var scrollLeft = offsetParent.scrollLeft;

              // It's position relative to the target's offset parent (absolute positioning when
              // the element is moved to be a child of the target's offset parent).
              next.offset = {
                top: next.page.top - offsetPosition.top + scrollTop - offsetBorder.top,
                left: next.page.left - offsetPosition.left + scrollLeft - offsetBorder.left
              };
            }
          }
        })();
      }

      // We could also travel up the DOM and try each containing context, rather than only
      // looking at the body, but we're gonna get diminishing returns.

      this.move(next);

      this.history.unshift(next);

      if (this.history.length > 3) {
        this.history.pop();
      }

      if (flushChanges) {
        flush();
      }

      return true;
    }

    // THE ISSUE
  }, {
    key: 'move',
    value: function move(pos) {
      var _this8 = this;

      if (!(typeof this.element.parentNode !== 'undefined')) {
        return;
      }

      var same = {};

      for (var type in pos) {
        same[type] = {};

        for (var key in pos[type]) {
          var found = false;

          for (var i = 0; i < this.history.length; ++i) {
            var point = this.history[i];
            if (typeof point[type] !== 'undefined' && !within(point[type][key], pos[type][key])) {
              found = true;
              break;
            }
          }

          if (!found) {
            same[type][key] = true;
          }
        }
      }

      var css = { top: '', left: '', right: '', bottom: '' };

      var transcribe = function transcribe(_same, _pos) {
        var hasOptimizations = typeof _this8.options.optimizations !== 'undefined';
        var gpu = hasOptimizations ? _this8.options.optimizations.gpu : null;
        if (gpu !== false) {
          var yPos = undefined,
              xPos = undefined;
          if (_same.top) {
            css.top = 0;
            yPos = _pos.top;
          } else {
            css.bottom = 0;
            yPos = -_pos.bottom;
          }

          if (_same.left) {
            css.left = 0;
            xPos = _pos.left;
          } else {
            css.right = 0;
            xPos = -_pos.right;
          }

          if (window.matchMedia) {
            // HubSpot/tether#207
            var retina = window.matchMedia('only screen and (min-resolution: 1.3dppx)').matches || window.matchMedia('only screen and (-webkit-min-device-pixel-ratio: 1.3)').matches;
            if (!retina) {
              xPos = Math.round(xPos);
              yPos = Math.round(yPos);
            }
          }

          css[transformKey] = 'translateX(' + xPos + 'px) translateY(' + yPos + 'px)';

          if (transformKey !== 'msTransform') {
            // The Z transform will keep this in the GPU (faster, and prevents artifacts),
            // but IE9 doesn't support 3d transforms and will choke.
            css[transformKey] += " translateZ(0)";
          }
        } else {
          if (_same.top) {
            css.top = _pos.top + 'px';
          } else {
            css.bottom = _pos.bottom + 'px';
          }

          if (_same.left) {
            css.left = _pos.left + 'px';
          } else {
            css.right = _pos.right + 'px';
          }
        }
      };

      var moved = false;
      if ((same.page.top || same.page.bottom) && (same.page.left || same.page.right)) {
        css.position = 'absolute';
        transcribe(same.page, pos.page);
      } else if ((same.viewport.top || same.viewport.bottom) && (same.viewport.left || same.viewport.right)) {
        css.position = 'fixed';
        transcribe(same.viewport, pos.viewport);
      } else if (typeof same.offset !== 'undefined' && same.offset.top && same.offset.left) {
        (function () {
          css.position = 'absolute';
          var offsetParent = _this8.cache('target-offsetparent', function () {
            return getOffsetParent(_this8.target);
          });

          if (getOffsetParent(_this8.element) !== offsetParent) {
            defer(function () {
              _this8.element.parentNode.removeChild(_this8.element);
              offsetParent.appendChild(_this8.element);
            });
          }

          transcribe(same.offset, pos.offset);
          moved = true;
        })();
      } else {
        css.position = 'absolute';
        transcribe({ top: true, left: true }, pos.page);
      }

      if (!moved) {
        if (this.options.bodyElement) {
          if (this.element.parentNode !== this.options.bodyElement) {
            this.options.bodyElement.appendChild(this.element);
          }
        } else {
          var isFullscreenElement = function isFullscreenElement(e) {
            var d = e.ownerDocument;
            var fe = d.fullscreenElement || d.webkitFullscreenElement || d.mozFullScreenElement || d.msFullscreenElement;
            return fe === e;
          };

          var offsetParentIsBody = true;

          var currentNode = this.element.parentNode;
          while (currentNode && currentNode.nodeType === 1 && currentNode.tagName !== 'BODY' && !isFullscreenElement(currentNode)) {
            if (getComputedStyle(currentNode).position !== 'static') {
              offsetParentIsBody = false;
              break;
            }

            currentNode = currentNode.parentNode;
          }

          if (!offsetParentIsBody) {
            this.element.parentNode.removeChild(this.element);
            this.element.ownerDocument.body.appendChild(this.element);
          }
        }
      }

      // Any css change will trigger a repaint, so let's avoid one if nothing changed
      var writeCSS = {};
      var write = false;
      for (var key in css) {
        var val = css[key];
        var elVal = this.element.style[key];

        if (elVal !== val) {
          write = true;
          writeCSS[key] = val;
        }
      }

      if (write) {
        defer(function () {
          extend(_this8.element.style, writeCSS);
          _this8.trigger('repositioned');
        });
      }
    }
  }]);

  return TetherClass;
})(Evented);

TetherClass.modules = [];

TetherBase.position = position;

var Tether = extend(TetherClass, TetherBase);
/* globals TetherBase */

'use strict';

var _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();

var _TetherBase$Utils = TetherBase.Utils;
var getBounds = _TetherBase$Utils.getBounds;
var extend = _TetherBase$Utils.extend;
var updateClasses = _TetherBase$Utils.updateClasses;
var defer = _TetherBase$Utils.defer;

var BOUNDS_FORMAT = ['left', 'top', 'right', 'bottom'];

function getBoundingRect(tether, to) {
  if (to === 'scrollParent') {
    to = tether.scrollParents[0];
  } else if (to === 'window') {
    to = [pageXOffset, pageYOffset, innerWidth + pageXOffset, innerHeight + pageYOffset];
  }

  if (to === document) {
    to = to.documentElement;
  }

  if (typeof to.nodeType !== 'undefined') {
    (function () {
      var node = to;
      var size = getBounds(to);
      var pos = size;
      var style = getComputedStyle(to);

      to = [pos.left, pos.top, size.width + pos.left, size.height + pos.top];

      // Account any parent Frames scroll offset
      if (node.ownerDocument !== document) {
        var win = node.ownerDocument.defaultView;
        to[0] += win.pageXOffset;
        to[1] += win.pageYOffset;
        to[2] += win.pageXOffset;
        to[3] += win.pageYOffset;
      }

      BOUNDS_FORMAT.forEach(function (side, i) {
        side = side[0].toUpperCase() + side.substr(1);
        if (side === 'Top' || side === 'Left') {
          to[i] += parseFloat(style['border' + side + 'Width']);
        } else {
          to[i] -= parseFloat(style['border' + side + 'Width']);
        }
      });
    })();
  }

  return to;
}

TetherBase.modules.push({
  position: function position(_ref) {
    var _this = this;

    var top = _ref.top;
    var left = _ref.left;
    var targetAttachment = _ref.targetAttachment;

    if (!this.options.constraints) {
      return true;
    }

    var _cache = this.cache('element-bounds', function () {
      return getBounds(_this.element);
    });

    var height = _cache.height;
    var width = _cache.width;

    if (width === 0 && height === 0 && typeof this.lastSize !== 'undefined') {
      var _lastSize = this.lastSize;

      // Handle the item getting hidden as a result of our positioning without glitching
      // the classes in and out
      width = _lastSize.width;
      height = _lastSize.height;
    }

    var targetSize = this.cache('target-bounds', function () {
      return _this.getTargetBounds();
    });

    var targetHeight = targetSize.height;
    var targetWidth = targetSize.width;

    var allClasses = [this.getClass('pinned'), this.getClass('out-of-bounds')];

    this.options.constraints.forEach(function (constraint) {
      var outOfBoundsClass = constraint.outOfBoundsClass;
      var pinnedClass = constraint.pinnedClass;

      if (outOfBoundsClass) {
        allClasses.push(outOfBoundsClass);
      }
      if (pinnedClass) {
        allClasses.push(pinnedClass);
      }
    });

    allClasses.forEach(function (cls) {
      ['left', 'top', 'right', 'bottom'].forEach(function (side) {
        allClasses.push(cls + '-' + side);
      });
    });

    var addClasses = [];

    var tAttachment = extend({}, targetAttachment);
    var eAttachment = extend({}, this.attachment);

    this.options.constraints.forEach(function (constraint) {
      var to = constraint.to;
      var attachment = constraint.attachment;
      var pin = constraint.pin;

      if (typeof attachment === 'undefined') {
        attachment = '';
      }

      var changeAttachX = undefined,
          changeAttachY = undefined;
      if (attachment.indexOf(' ') >= 0) {
        var _attachment$split = attachment.split(' ');

        var _attachment$split2 = _slicedToArray(_attachment$split, 2);

        changeAttachY = _attachment$split2[0];
        changeAttachX = _attachment$split2[1];
      } else {
        changeAttachX = changeAttachY = attachment;
      }

      var bounds = getBoundingRect(_this, to);

      if (changeAttachY === 'target' || changeAttachY === 'both') {
        if (top < bounds[1] && tAttachment.top === 'top') {
          top += targetHeight;
          tAttachment.top = 'bottom';
        }

        if (top + height > bounds[3] && tAttachment.top === 'bottom') {
          top -= targetHeight;
          tAttachment.top = 'top';
        }
      }

      if (changeAttachY === 'together') {
        if (tAttachment.top === 'top') {
          if (eAttachment.top === 'bottom' && top < bounds[1]) {
            top += targetHeight;
            tAttachment.top = 'bottom';

            top += height;
            eAttachment.top = 'top';
          } else if (eAttachment.top === 'top' && top + height > bounds[3] && top - (height - targetHeight) >= bounds[1]) {
            top -= height - targetHeight;
            tAttachment.top = 'bottom';

            eAttachment.top = 'bottom';
          }
        }

        if (tAttachment.top === 'bottom') {
          if (eAttachment.top === 'top' && top + height > bounds[3]) {
            top -= targetHeight;
            tAttachment.top = 'top';

            top -= height;
            eAttachment.top = 'bottom';
          } else if (eAttachment.top === 'bottom' && top < bounds[1] && top + (height * 2 - targetHeight) <= bounds[3]) {
            top += height - targetHeight;
            tAttachment.top = 'top';

            eAttachment.top = 'top';
          }
        }

        if (tAttachment.top === 'middle') {
          if (top + height > bounds[3] && eAttachment.top === 'top') {
            top -= height;
            eAttachment.top = 'bottom';
          } else if (top < bounds[1] && eAttachment.top === 'bottom') {
            top += height;
            eAttachment.top = 'top';
          }
        }
      }

      if (changeAttachX === 'target' || changeAttachX === 'both') {
        if (left < bounds[0] && tAttachment.left === 'left') {
          left += targetWidth;
          tAttachment.left = 'right';
        }

        if (left + width > bounds[2] && tAttachment.left === 'right') {
          left -= targetWidth;
          tAttachment.left = 'left';
        }
      }

      if (changeAttachX === 'together') {
        if (left < bounds[0] && tAttachment.left === 'left') {
          if (eAttachment.left === 'right') {
            left += targetWidth;
            tAttachment.left = 'right';

            left += width;
            eAttachment.left = 'left';
          } else if (eAttachment.left === 'left') {
            left += targetWidth;
            tAttachment.left = 'right';

            left -= width;
            eAttachment.left = 'right';
          }
        } else if (left + width > bounds[2] && tAttachment.left === 'right') {
          if (eAttachment.left === 'left') {
            left -= targetWidth;
            tAttachment.left = 'left';

            left -= width;
            eAttachment.left = 'right';
          } else if (eAttachment.left === 'right') {
            left -= targetWidth;
            tAttachment.left = 'left';

            left += width;
            eAttachment.left = 'left';
          }
        } else if (tAttachment.left === 'center') {
          if (left + width > bounds[2] && eAttachment.left === 'left') {
            left -= width;
            eAttachment.left = 'right';
          } else if (left < bounds[0] && eAttachment.left === 'right') {
            left += width;
            eAttachment.left = 'left';
          }
        }
      }

      if (changeAttachY === 'element' || changeAttachY === 'both') {
        if (top < bounds[1] && eAttachment.top === 'bottom') {
          top += height;
          eAttachment.top = 'top';
        }

        if (top + height > bounds[3] && eAttachment.top === 'top') {
          top -= height;
          eAttachment.top = 'bottom';
        }
      }

      if (changeAttachX === 'element' || changeAttachX === 'both') {
        if (left < bounds[0]) {
          if (eAttachment.left === 'right') {
            left += width;
            eAttachment.left = 'left';
          } else if (eAttachment.left === 'center') {
            left += width / 2;
            eAttachment.left = 'left';
          }
        }

        if (left + width > bounds[2]) {
          if (eAttachment.left === 'left') {
            left -= width;
            eAttachment.left = 'right';
          } else if (eAttachment.left === 'center') {
            left -= width / 2;
            eAttachment.left = 'right';
          }
        }
      }

      if (typeof pin === 'string') {
        pin = pin.split(',').map(function (p) {
          return p.trim();
        });
      } else if (pin === true) {
        pin = ['top', 'left', 'right', 'bottom'];
      }

      pin = pin || [];

      var pinned = [];
      var oob = [];

      if (top < bounds[1]) {
        if (pin.indexOf('top') >= 0) {
          top = bounds[1];
          pinned.push('top');
        } else {
          oob.push('top');
        }
      }

      if (top + height > bounds[3]) {
        if (pin.indexOf('bottom') >= 0) {
          top = bounds[3] - height;
          pinned.push('bottom');
        } else {
          oob.push('bottom');
        }
      }

      if (left < bounds[0]) {
        if (pin.indexOf('left') >= 0) {
          left = bounds[0];
          pinned.push('left');
        } else {
          oob.push('left');
        }
      }

      if (left + width > bounds[2]) {
        if (pin.indexOf('right') >= 0) {
          left = bounds[2] - width;
          pinned.push('right');
        } else {
          oob.push('right');
        }
      }

      if (pinned.length) {
        (function () {
          var pinnedClass = undefined;
          if (typeof _this.options.pinnedClass !== 'undefined') {
            pinnedClass = _this.options.pinnedClass;
          } else {
            pinnedClass = _this.getClass('pinned');
          }

          addClasses.push(pinnedClass);
          pinned.forEach(function (side) {
            addClasses.push(pinnedClass + '-' + side);
          });
        })();
      }

      if (oob.length) {
        (function () {
          var oobClass = undefined;
          if (typeof _this.options.outOfBoundsClass !== 'undefined') {
            oobClass = _this.options.outOfBoundsClass;
          } else {
            oobClass = _this.getClass('out-of-bounds');
          }

          addClasses.push(oobClass);
          oob.forEach(function (side) {
            addClasses.push(oobClass + '-' + side);
          });
        })();
      }

      if (pinned.indexOf('left') >= 0 || pinned.indexOf('right') >= 0) {
        eAttachment.left = tAttachment.left = false;
      }
      if (pinned.indexOf('top') >= 0 || pinned.indexOf('bottom') >= 0) {
        eAttachment.top = tAttachment.top = false;
      }

      if (tAttachment.top !== targetAttachment.top || tAttachment.left !== targetAttachment.left || eAttachment.top !== _this.attachment.top || eAttachment.left !== _this.attachment.left) {
        _this.updateAttachClasses(eAttachment, tAttachment);
        _this.trigger('update', {
          attachment: eAttachment,
          targetAttachment: tAttachment
        });
      }
    });

    defer(function () {
      if (!(_this.options.addTargetClasses === false)) {
        updateClasses(_this.target, addClasses, allClasses);
      }
      updateClasses(_this.element, addClasses, allClasses);
    });

    return { top: top, left: left };
  }
});
/* globals TetherBase */

'use strict';

var _TetherBase$Utils = TetherBase.Utils;
var getBounds = _TetherBase$Utils.getBounds;
var updateClasses = _TetherBase$Utils.updateClasses;
var defer = _TetherBase$Utils.defer;

TetherBase.modules.push({
  position: function position(_ref) {
    var _this = this;

    var top = _ref.top;
    var left = _ref.left;

    var _cache = this.cache('element-bounds', function () {
      return getBounds(_this.element);
    });

    var height = _cache.height;
    var width = _cache.width;

    var targetPos = this.getTargetBounds();

    var bottom = top + height;
    var right = left + width;

    var abutted = [];
    if (top <= targetPos.bottom && bottom >= targetPos.top) {
      ['left', 'right'].forEach(function (side) {
        var targetPosSide = targetPos[side];
        if (targetPosSide === left || targetPosSide === right) {
          abutted.push(side);
        }
      });
    }

    if (left <= targetPos.right && right >= targetPos.left) {
      ['top', 'bottom'].forEach(function (side) {
        var targetPosSide = targetPos[side];
        if (targetPosSide === top || targetPosSide === bottom) {
          abutted.push(side);
        }
      });
    }

    var allClasses = [];
    var addClasses = [];

    var sides = ['left', 'top', 'right', 'bottom'];
    allClasses.push(this.getClass('abutted'));
    sides.forEach(function (side) {
      allClasses.push(_this.getClass('abutted') + '-' + side);
    });

    if (abutted.length) {
      addClasses.push(this.getClass('abutted'));
    }

    abutted.forEach(function (side) {
      addClasses.push(_this.getClass('abutted') + '-' + side);
    });

    defer(function () {
      if (!(_this.options.addTargetClasses === false)) {
        updateClasses(_this.target, addClasses, allClasses);
      }
      updateClasses(_this.element, addClasses, allClasses);
    });

    return true;
  }
});
/* globals TetherBase */

'use strict';

var _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();

TetherBase.modules.push({
  position: function position(_ref) {
    var top = _ref.top;
    var left = _ref.left;

    if (!this.options.shift) {
      return;
    }

    var shift = this.options.shift;
    if (typeof this.options.shift === 'function') {
      shift = this.options.shift.call(this, { top: top, left: left });
    }

    var shiftTop = undefined,
        shiftLeft = undefined;
    if (typeof shift === 'string') {
      shift = shift.split(' ');
      shift[1] = shift[1] || shift[0];

      var _shift = shift;

      var _shift2 = _slicedToArray(_shift, 2);

      shiftTop = _shift2[0];
      shiftLeft = _shift2[1];

      shiftTop = parseFloat(shiftTop, 10);
      shiftLeft = parseFloat(shiftLeft, 10);
    } else {
      shiftTop = shift.top;
      shiftLeft = shift.left;
    }

    top += shiftTop;
    left += shiftLeft;

    return { top: top, left: left };
  }
});
return Tether;

}));
			/* /position_js */
			/* extendYUIMethods_js */
(function(){var Cookie={componentName:"Cookie"},Event={componentName:"Event"},Dom={componentName:"Dom",hasAttribute:function(node,attr){if(node.hasAttribute&&node.getAttribute(attr)!=null){return(node.hasAttribute(attr)||node.getAttribute(attr)!=null);}else{return(!!node.getAttribute(attr)&&node.getAttribute(attr)==null);}}},extendMethods=[Cookie,Event,Dom];if(YAHOO.util){for(var i=0,l=extendMethods.length;i<l;i++){var cpName=extendMethods[i].componentName;for(var method in extendMethods[i]){if(cpName&&YAHOO.util[cpName]&&!YAHOO.util[cpName].hasOwnProperty(method)){YAHOO.util[cpName][method]=method;}}}}})();
			/* /extendYUIMethods_js */
			/* native_history_js */

/*
 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 @license New BSD License <http://creativecommons.org/licenses/BSD/>
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 @author James Padolsey <https://gist.github.com/527683>
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
*/
"object"!==typeof JSON&&(JSON={});(function(){function c(b){return 10>b?"0"+b:b}function n(e){b.lastIndex=0;return b.test(e)?'"'+e.replace(b,function(b){var e=k[b];return"string"===typeof e?e:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function g(b,c){var f=e,a=c[b];a&&"object"===typeof a&&"function"===typeof a.toJSON&&(a=a.toJSON(b));"function"===typeof m&&(a=m.call(c,b,a));switch(typeof a){case "string":return n(a);case "number":return isFinite(a)?String(a):"null";case "boolean":case "null":return String(a);case "object":if(!a)return"null";e+=p;var h=[];if("[object Array]"===Object.prototype.toString.apply(a)){var l=a.length;for(b=0;b<l;b+=1)h[b]=g(b,a)||"null";c=0===h.length?"[]":e?"[\n"+e+h.join(",\n"+e)+"\n"+f+"]":"["+h.join(",")+"]";e=f;return c}if(m&&"object"===typeof m)for(l=m.length,b=0;b<l;b+=1){if("string"===typeof m[b]){var d=m[b];(c=g(d,a))&&h.push(n(d)+(e?": ":":")+c)}}else for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c=g(d,a))&&h.push(n(d)+(e?": ":":")+c);c=0===h.length?"{}":e?"{\n"+e+h.join(",\n"+e)+"\n"+f+"}":"{"+h.join(",")+"}";e=f;return c}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(b){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,b=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,p,k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},m;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,f){var a;p=e="";if("number"===typeof f)for(a=0;a<f;a+=1)p+=" ";else"string"===typeof f&&(p=f);if((m=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return g("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(b,e){function c(a,b){var f,d=a[b];if(d&&"object"===typeof d)for(f in d)if(Object.prototype.hasOwnProperty.call(d,f)){var q=c(d,f);void 0!==q?d[f]=q:delete d[f]}return e.call(a,b,d)}b=String(b);f.lastIndex=0;f.test(b)&&(b=b.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return b=eval("("+b+")"),"function"===typeof e?c({"":b},""):b;throw new SyntaxError("JSON.parse");})})();(function(c,n){var g=c.History=c.History||{};if("undefined"!==typeof g.Adapter)throw Error("History.js Adapter has already been loaded...");g.Adapter={handlers:{},_uid:1,uid:function(c){return c._uid||(c._uid=g.Adapter._uid++)},bind:function(c,b,e){var f=g.Adapter.uid(c);g.Adapter.handlers[f]=g.Adapter.handlers[f]||{};g.Adapter.handlers[f][b]=g.Adapter.handlers[f][b]||[];g.Adapter.handlers[f][b].push(e);c["on"+b]=function(b,e){return function(c){g.Adapter.trigger(b,e,c)}}(c,b)},trigger:function(c,b,e){e=e||{};c=g.Adapter.uid(c);var f;g.Adapter.handlers[c]=g.Adapter.handlers[c]||{};g.Adapter.handlers[c][b]=g.Adapter.handlers[c][b]||[];var k=0;for(f=g.Adapter.handlers[c][b].length;k<f;++k)g.Adapter.handlers[c][b][k].apply(this,[e])},extractEventData:function(c,b){return b&&b[c]||n},onDomLoad:function(f){var b=c.setTimeout(function(){f()},2E3);c.onload=function(){clearTimeout(b);f()}}};"undefined"!==typeof g.init&&g.init()})(window);(function(c,n){var g=c.document,f=c.setInterval||f,b=c.History=c.History||{};if("undefined"!==typeof b.initHtml4)throw Error("History.js HTML4 Support has already been loaded...");b.initHtml4=function(){if("undefined"!==typeof b.initHtml4.initialized)return!1;b.initHtml4.initialized=!0;b.enabled=!0;b.savedHashes=[];b.isLastHash=function(e){var c=b.getHashByIndex();return e===c};b.isHashEqual=function(b,c){b=encodeURIComponent(b).replace(/%25/g,"%");c=encodeURIComponent(c).replace(/%25/g,"%");return b===c};b.saveHash=function(c){if(b.isLastHash(c))return!1;b.savedHashes.push(c);return!0};b.getHashByIndex=function(c){return"undefined"===typeof c?b.savedHashes[b.savedHashes.length-1]:0>c?b.savedHashes[b.savedHashes.length+c]:b.savedHashes[c]};b.discardedHashes={};b.discardedStates={};b.discardState=function(c,f,g){var e=b.getHashByState(c);b.discardedStates[e]={discardedState:c,backState:g,forwardState:f};return!0};b.discardHash=function(c,f,g){b.discardedHashes[c]={discardedHash:c,backState:g,forwardState:f};return!0};b.discardedState=function(c){c=b.getHashByState(c);return b.discardedStates[c]||!1};b.discardedHash=function(c){return b.discardedHashes[c]||!1};b.recycleState=function(c){var e=b.getHashByState(c);b.discardedState(c)&&delete b.discardedStates[e];return!0};b.emulated.hashChange&&(b.hashChangeInit=function(){b.checkerFunction=null;var e="",p=!!b.getHash();if(b.isInternetExplorer()){var k=g.createElement("iframe");k.setAttribute("id","historyjs-iframe");k.setAttribute("src","#");k.style.display="none";g.body.appendChild(k);k.contentWindow.document.open();k.contentWindow.document.close();var m="";var h=!1;b.checkerFunction=function(){if(h)return!1;h=!0;var f=b.getHash(),g=b.getHash(k.contentWindow.document);f!==e?(e=f,g!==f&&(m=f,k.contentWindow.document.open(),k.contentWindow.document.close(),k.contentWindow.document.location.hash=b.escapeHash(f)),b.Adapter.trigger(c,"hashchange")):g!==m&&(m=g,p&&""===g?b.back():b.setHash(g,!1));h=!1;return!0}}else b.checkerFunction=function(){var f=b.getHash()||"";f!==e&&(e=f,b.Adapter.trigger(c,"hashchange"));return!0};b.intervalList.push(f(b.checkerFunction,b.options.hashChangeInterval));return!0},b.Adapter.onDomLoad(b.hashChangeInit));b.emulated.pushState&&(b.onHashChange=function(e){e=e&&e.newURL||b.getLocationHref();e=b.getHashByUrl(e);var f;if(b.isLastHash(e))return b.busy(!1),!1;b.doubleCheckComplete();b.saveHash(e);if(e&&b.isTraditionalAnchor(e))return b.Adapter.trigger(c,"anchorchange"),b.busy(!1),!1;e=b.extractState(b.getFullUrl(e||b.getLocationHref()),!0);if(b.isLastSavedState(e))return b.busy(!1),!1;b.getHashByState(e);if(f=b.discardedState(e))return b.getHashByIndex(-2)===b.getHashByState(f.forwardState)?b.back(!1):b.forward(!1),!1;b.pushState(e.data,e.title,encodeURI(e.url),!1);return!0},b.Adapter.bind(c,"hashchange",b.onHashChange),b.pushState=function(e,f,g,m){g=encodeURI(g).replace(/%25/g,"%");if(b.getHashByUrl(g))throw Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==m&&b.busy())return b.pushQueue({scope:b,callback:b.pushState,args:arguments,queue:m}),!1;b.busy(!0);var h=b.createStateObject(e,f,g),l=b.getHashByState(h),k=b.getState(!1);k=b.getHashByState(k);var a=b.getHash(),n=b.expectedStateId==h.id;b.storeState(h);b.expectedStateId=h.id;b.recycleState(h);b.setTitle(h);if(l===k)return b.busy(!1),!1;b.saveState(h);n||b.Adapter.trigger(c,"statechange");b.isHashEqual(l,a)||b.isHashEqual(l,b.getShortUrl(b.getLocationHref()))||b.setHash(l,!1);b.busy(!1);return!0},b.replaceState=function(e,f,g,m){g=encodeURI(g).replace(/%25/g,"%");if(b.getHashByUrl(g))throw Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==m&&b.busy())return b.pushQueue({scope:b,callback:b.replaceState,args:arguments,queue:m}),!1;b.busy(!0);var h=b.createStateObject(e,f,g),l=b.getHashByState(h),k=b.getState(!1),a=b.getHashByState(k),n=b.getStateByIndex(-2);b.discardState(k,h,n);l===a?(b.storeState(h),b.expectedStateId=h.id,b.recycleState(h),b.setTitle(h),b.saveState(h),b.Adapter.trigger(c,"statechange"),b.busy(!1)):b.pushState(h.data,h.title,h.url,!1);return!0});if(b.emulated.pushState&&b.getHash()&&!b.emulated.hashChange)b.Adapter.onDomLoad(function(){b.Adapter.trigger(c,"hashchange")})};"undefined"!==typeof b.init&&b.init()})(window);(function(c,n){var g=c.console||n,f=c.document,b=c.navigator,e=c.sessionStorage||!1,p=c.setTimeout,k=c.clearTimeout,m=c.setInterval,h=c.clearInterval,l=c.JSON,v=c.alert,a=c.History=c.History||{},r=c.history;try{e.setItem("TEST","1"),e.removeItem("TEST")}catch(t){e=!1}l.stringify=l.stringify||l.encode;l.parse=l.parse||l.decode;if("undefined"!==typeof a.init)throw Error("History.js Core has already been loaded...");a.init=function(b){if("undefined"===typeof a.Adapter)return!1;"undefined"!==typeof a.initCore&&a.initCore();"undefined"!==typeof a.initHtml4&&a.initHtml4();return!0};a.initCore=function(t){if("undefined"!==typeof a.initCore.initialized)return!1;a.initCore.initialized=!0;a.options=a.options||{};a.options.hashChangeInterval=a.options.hashChangeInterval||100;a.options.safariPollInterval=a.options.safariPollInterval||500;a.options.doubleCheckInterval=a.options.doubleCheckInterval||500;a.options.disableSuid=a.options.disableSuid||!1;a.options.storeInterval=a.options.storeInterval||1E3;a.options.busyDelay=a.options.busyDelay||250;a.options.debug=a.options.debug||!1;a.options.initialTitle=a.options.initialTitle||f.title;a.options.html4Mode=a.options.html4Mode||!1;a.options.delayInit=a.options.delayInit||!1;a.intervalList=[];a.clearAllIntervals=function(){var d,b=a.intervalList;if("undefined"!==typeof b&&null!==b){for(d=0;d<b.length;d++)h(b[d]);a.intervalList=null}};a.debug=function(){a.options.debug&&a.log.apply(a,arguments)};a.log=function(){var a=!("undefined"===typeof g||"undefined"===typeof g.log||"undefined"===typeof g.log.apply),b=f.getElementById("log"),c;if(a){var e=Array.prototype.slice.call(arguments);var h=e.shift();"undefined"!==typeof g.debug?g.debug.apply(g,[h,e]):g.log.apply(g,[h,e])}else h="\n"+arguments[0]+"\n";e=1;for(c=arguments.length;e<c;++e){var k=arguments[e];if("object"===typeof k&&"undefined"!==typeof l)try{k=l.stringify(k)}catch(x){}h+="\n"+k+"\n"}b?(b.value+=h+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||v(h);return!0};a.getInternetExplorerMajorVersion=function(){var d=a.getInternetExplorerMajorVersion;if("undefined"!==typeof a.getInternetExplorerMajorVersion.cached)var b=a.getInternetExplorerMajorVersion.cached;else{b=3;for(var c=f.createElement("div"),e=c.getElementsByTagName("i");(c.innerHTML="\x3c!--[if gt IE "+ ++b+"]\x3e\x3ci\x3e\x3c/i\x3e\x3c![endif]--\x3e")&&e[0];);b=4<b?b:!1}return d.cached=b};a.isInternetExplorer=function(){return a.isInternetExplorer.cached="undefined"!==typeof a.isInternetExplorer.cached?a.isInternetExplorer.cached:!!a.getInternetExplorerMajorVersion()};a.emulated=a.options.html4Mode?{pushState:!0,hashChange:!0}:{pushState:!(c.history&&c.history.pushState&&c.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(b.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(b.userAgent)),hashChange:!(("onhashchange"in c||"onhashchange"in f)&&!(a.isInternetExplorer()&&8>a.getInternetExplorerMajorVersion()))};a.enabled=!a.emulated.pushState;a.bugs={setHash:!(a.emulated.pushState||"Apple Computer, Inc."!==b.vendor||!/AppleWebKit\/5([0-2]|3[0-3])/.test(b.userAgent)),safariPoll:!(a.emulated.pushState||"Apple Computer, Inc."!==b.vendor||!/AppleWebKit\/5([0-2]|3[0-3])/.test(b.userAgent)),ieDoubleCheck:!!(a.isInternetExplorer()&&8>a.getInternetExplorerMajorVersion()),hashEscape:!!(a.isInternetExplorer()&&7>a.getInternetExplorerMajorVersion())};a.isEmptyObject=function(a){for(var d in a)if(a.hasOwnProperty(d))return!1;return!0};a.cloneObject=function(a){a?(a=l.stringify(a),a=l.parse(a)):a={};return a};a.getRootUrl=function(){var a=f.location.protocol+"//"+(f.location.hostname||f.location.host);f.location.port&&(a+=":"+f.location.port);return a+"/"};a.getBaseHref=function(){var a=f.getElementsByTagName("base"),b="";1===a.length&&(a=a[0],b=a.href.replace(/[^\/]+$/,""));(b=b.replace(/\/+$/,""))&&(b+="/");return b};a.getBaseUrl=function(){return a.getBaseHref()||a.getBasePageUrl()||a.getRootUrl()};a.getPageUrl=function(){return((a.getState(!1,!1)||{}).url||a.getLocationHref()).replace(/\/+$/,"").replace(/[^\/]+$/,function(a,b,c){return/\./.test(a)?a:a+"/"})};a.getBasePageUrl=function(){return a.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a,b,c){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/"};a.getFullUrl=function(d,b){var c=d,q=d.substring(0,1);b="undefined"===typeof b?!0:b;/[a-z]+:\/\//.test(d)||(c="/"===q?a.getRootUrl()+d.replace(/^\/+/,""):"#"===q?a.getPageUrl().replace(/#.*/,"")+d:"?"===q?a.getPageUrl().replace(/[\?#].*/,"")+d:b?a.getBaseUrl()+d.replace(/^(\.\/)+/,""):a.getBasePageUrl()+d.replace(/^(\.\/)+/,""));return c.replace(/#$/,"")};a.getShortUrl=function(b){var d=a.getBaseUrl(),c=a.getRootUrl();a.emulated.pushState&&(b=b.replace(d,""));b=b.replace(c,"/");a.isTraditionalAnchor(b)&&(b="./"+b);return b=b.replace(/^(\.\/)+/g,"./").replace(/#$/,"")};a.getLocationHref=function(a){a=a||f;return a.URL===a.location.href?a.location.href:a.location.href===decodeURIComponent(a.URL)?a.URL:a.location.hash&&decodeURIComponent(a.location.href.replace(/^[^#]+/,""))===a.location.hash||-1==a.URL.indexOf("#")&&-1!=a.location.href.indexOf("#")?a.location.href:a.URL||a.location.href};a.store={};a.idToState=a.idToState||{};a.stateToId=a.stateToId||{};a.urlToId=a.urlToId||{};a.storedStates=a.storedStates||[];a.savedStates=a.savedStates||[];a.normalizeStore=function(){a.store.idToState=a.store.idToState||{};a.store.urlToId=a.store.urlToId||{};a.store.stateToId=a.store.stateToId||{}};a.getState=function(b,c){"undefined"===typeof b&&(b=!0);"undefined"===typeof c&&(c=!0);var d=a.getLastSavedState();!d&&c&&(d=a.createStateObject());b&&(d=a.cloneObject(d),d.url=d.cleanUrl||d.url);return d};a.getIdByState=function(b){var d=a.extractId(b.url);if(!d){var c=a.getStateString(b);if("undefined"!==typeof a.stateToId[c])d=a.stateToId[c];else if("undefined"!==typeof a.store.stateToId[c])d=a.store.stateToId[c];else{for(;d=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!==typeof a.idToState[d]||"undefined"!==typeof a.store.idToState[d];);a.stateToId[c]=d;a.idToState[d]=b}}return d};a.normalizeState=function(b){b&&"object"===typeof b||(b={});if("undefined"!==typeof b.normalized)return b;b.data&&"object"===typeof b.data||(b.data={});var d={normalized:!0};d.title=b.title||"";d.url=a.getFullUrl(b.url?b.url:a.getLocationHref());d.hash=a.getShortUrl(d.url);d.data=a.cloneObject(b.data);d.id=a.getIdByState(d);d.cleanUrl=d.url.replace(/\??&_suid.*/,"");d.url=d.cleanUrl;b=!a.isEmptyObject(d.data);(d.title||b)&&!0!==a.options.disableSuid&&(d.hash=a.getShortUrl(d.url).replace(/\??&_suid.*/,""),/\?/.test(d.hash)||(d.hash+="?"),d.hash+="\x26_suid\x3d"+d.id);d.hashedUrl=a.getFullUrl(d.hash);(a.emulated.pushState||a.bugs.safariPoll)&&a.hasUrlDuplicate(d)&&(d.url=d.hashedUrl);return d};a.createStateObject=function(b,c,e){b={data:b,title:c,url:e};return b=a.normalizeState(b)};a.getStateById=function(b){b=String(b);return a.idToState[b]||a.store.idToState[b]||n};a.getStateString=function(b){b={data:a.normalizeState(b).data,title:b.title,url:b.url};return l.stringify(b)};a.getStateId=function(b){return a.normalizeState(b).id};a.getHashByState=function(b){return a.normalizeState(b).hash};a.extractId=function(a){a=-1!=a.indexOf("#")?a.split("#")[0]:a;return((a=/(.*)&_suid=([0-9]+)$/.exec(a))?String(a[2]||""):"")||!1};a.isTraditionalAnchor=function(a){return!/[\/\?\.]/.test(a)};a.extractState=function(b,c){var d=null,e;c=c||!1;(e=a.extractId(b))&&(d=a.getStateById(e));if(!d){var f=a.getFullUrl(b);(e=a.getIdByUrl(f)||!1)&&(d=a.getStateById(e));d||!c||a.isTraditionalAnchor(b)||(d=a.createStateObject(null,null,f))}return d};a.getIdByUrl=function(b){return a.urlToId[b]||a.store.urlToId[b]||n};a.getLastSavedState=function(){return a.savedStates[a.savedStates.length-1]||n};a.getLastStoredState=function(){return a.storedStates[a.storedStates.length-1]||n};a.hasUrlDuplicate=function(b){var d;return(d=a.extractState(b.url))&&d.id!==b.id};a.storeState=function(b){a.urlToId[b.url]=b.id;a.storedStates.push(a.cloneObject(b));return b};a.isLastSavedState=function(b){var d=!1;a.savedStates.length&&(b=b.id,d=a.getLastSavedState(),d=d.id,d=b===d);return d};a.saveState=function(b){if(a.isLastSavedState(b))return!1;a.savedStates.push(a.cloneObject(b));return!0};a.getStateByIndex=function(b){return"undefined"===typeof b?a.savedStates[a.savedStates.length-1]:0>b?a.savedStates[a.savedStates.length+b]:a.savedStates[b]};a.getCurrentIndex=function(){return 1>a.savedStates.length?0:a.savedStates.length-1};a.getHash=function(b){b=a.getLocationHref(b);return a.getHashByUrl(b)};a.unescapeHash=function(b){b=a.normalizeHash(b);return b=decodeURIComponent(b)};a.normalizeHash=function(a){return a.replace(/[^#]*#/,"").replace(/#.*/,"")};a.setHash=function(b,c){var d;if(!1!==c&&a.busy())return a.pushQueue({scope:a,callback:a.setHash,args:arguments,queue:c}),!1;a.busy(!0);(d=a.extractState(b,!0))&&!a.emulated.pushState?a.pushState(d.data,d.title,d.url,!1):a.getHash()!==b&&(a.bugs.setHash?(d=a.getPageUrl(),a.pushState(null,null,d+"#"+b,!1)):f.location.hash=b);return a};a.escapeHash=function(b){b=a.normalizeHash(b);b=c.encodeURIComponent(b);a.bugs.hashEscape||(b=b.replace(/%21/g,"!").replace(/%26/g,"\x26").replace(/%3D/g,"\x3d").replace(/%3F/g,"?"));return b};a.getHashByUrl=function(b){b=String(b).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=a.unescapeHash(b)};a.setTitle=function(b){var d=b.title,c;d||(c=a.getStateByIndex(0))&&c.url===b.url&&(d=c.title||a.options.initialTitle);try{f.getElementsByTagName("title")[0].innerHTML=d.replace("\x3c","\x26lt;").replace("\x3e","\x26gt;").replace(" \x26 "," \x26amp; ")}catch(w){}f.title=d;return a};a.queues=[];a.busy=function(b){"undefined"!==typeof b?a.busy.flag=b:"undefined"===typeof a.busy.flag&&(a.busy.flag=!1);if(!a.busy.flag){k(a.busy.timeout);var d=function(){var b;if(!a.busy.flag)for(b=a.queues.length-1;0<=b;--b){var c=a.queues[b];0!==c.length&&(c=c.shift(),a.fireQueueItem(c),a.busy.timeout=p(d,a.options.busyDelay))}};a.busy.timeout=p(d,a.options.busyDelay)}return a.busy.flag};a.busy.flag=!1;a.fireQueueItem=function(b){return b.callback.apply(b.scope||a,b.args||[])};a.pushQueue=function(b){a.queues[b.queue||0]=a.queues[b.queue||0]||[];a.queues[b.queue||0].push(b);return a};a.queue=function(b,c){"function"===typeof b&&(b={callback:b});"undefined"!==typeof c&&(b.queue=c);a.busy()?a.pushQueue(b):a.fireQueueItem(b);return a};a.clearQueue=function(){a.busy.flag=!1;a.queues=[];return a};a.stateChanged=!1;a.doubleChecker=!1;a.doubleCheckComplete=function(){a.stateChanged=!0;a.doubleCheckClear();return a};a.doubleCheckClear=function(){a.doubleChecker&&(k(a.doubleChecker),a.doubleChecker=!1);return a};a.doubleCheck=function(b){a.stateChanged=!1;a.doubleCheckClear();a.bugs.ieDoubleCheck&&(a.doubleChecker=p(function(){a.doubleCheckClear();a.stateChanged||b();return!0},a.options.doubleCheckInterval));return a};a.safariStatePoll=function(){var b=a.extractState(a.getLocationHref());if(!a.isLastSavedState(b))return b||a.createStateObject(),a.Adapter.trigger(c,"popstate"),a};a.back=function(b){if(!1!==b&&a.busy())return a.pushQueue({scope:a,callback:a.back,args:arguments,queue:b}),!1;a.busy(!0);a.doubleCheck(function(){a.back(!1)});r.go(-1);return!0};a.forward=function(b){if(!1!==b&&a.busy())return a.pushQueue({scope:a,callback:a.forward,args:arguments,queue:b}),!1;a.busy(!0);a.doubleCheck(function(){a.forward(!1)});r.go(1);return!0};a.go=function(b,c){var d;if(0<b)for(d=1;d<=b;++d)a.forward(c);else if(0>b)for(d=-1;d>=b;--d)a.back(c);else throw Error("History.go: History.go requires a positive or negative integer passed.");return a};a.emulated.pushState?(t=function(){},a.pushState=a.pushState||t,a.replaceState=a.replaceState||t):(a.onPopState=function(b,e){var d;a.doubleCheckComplete();if(d=a.getHash())return(b=a.extractState(d||a.getLocationHref(),!0))?a.replaceState(b.data,b.title,b.url,!1):(a.Adapter.trigger(c,"anchorchange"),a.busy(!1)),a.expectedStateId=!1;(b=(b=a.Adapter.extractEventData("state",b,e)||!1)?a.getStateById(b):a.expectedStateId?a.getStateById(a.expectedStateId):a.extractState(a.getLocationHref()))||(b=a.createStateObject(null,null,a.getLocationHref()));a.expectedStateId=!1;if(a.isLastSavedState(b))return a.busy(!1),!1;a.storeState(b);a.saveState(b);a.setTitle(b);a.Adapter.trigger(c,"statechange");a.busy(!1);return!0},a.Adapter.bind(c,"popstate",a.onPopState),a.pushState=function(b,e,f,g){if(a.getHashByUrl(f)&&a.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==g&&a.busy())return a.pushQueue({scope:a,callback:a.pushState,args:arguments,queue:g}),!1;a.busy(!0);var d=a.createStateObject(b,e,f);a.isLastSavedState(d)?a.busy(!1):(a.storeState(d),a.expectedStateId=d.id,r.pushState(d.id,d.title,d.url),a.Adapter.trigger(c,"popstate"));return!0},a.replaceState=function(b,e,f,g){if(a.getHashByUrl(f)&&a.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==g&&a.busy())return a.pushQueue({scope:a,callback:a.replaceState,args:arguments,queue:g}),!1;a.busy(!0);var d=a.createStateObject(b,e,f);a.isLastSavedState(d)?a.busy(!1):(a.storeState(d),a.expectedStateId=d.id,r.replaceState(d.id,d.title,d.url),a.Adapter.trigger(c,"popstate"));return!0});if(e)try{a.store=l.parse(e.getItem("History.store"))||{}}catch(d){a.store={}}else a.store={};a.normalizeStore();a.Adapter.bind(c,"unload",a.clearAllIntervals);a.saveState(a.storeState(a.extractState(a.getLocationHref(),!0)));e&&(a.onUnload=function(){var b;try{var c=l.parse(e.getItem("History.store"))||{}}catch(u){c={}}c.idToState=c.idToState||{};c.urlToId=c.urlToId||{};c.stateToId=c.stateToId||{};for(b in a.idToState)a.idToState.hasOwnProperty(b)&&(c.idToState[b]=a.idToState[b]);for(b in a.urlToId)a.urlToId.hasOwnProperty(b)&&(c.urlToId[b]=a.urlToId[b]);for(b in a.stateToId)a.stateToId.hasOwnProperty(b)&&(c.stateToId[b]=a.stateToId[b]);a.store=c;a.normalizeStore();c=l.stringify(c);try{e.setItem("History.store",c)}catch(u){if(u.code===DOMException.QUOTA_EXCEEDED_ERR)e.length&&(e.removeItem("History.store"),e.setItem("History.store",c));else throw u;}},a.intervalList.push(m(a.onUnload,a.options.storeInterval)),a.Adapter.bind(c,"beforeunload",a.onUnload),a.Adapter.bind(c,"unload",a.onUnload));if(!a.emulated.pushState&&(a.bugs.safariPoll&&a.intervalList.push(m(a.safariStatePoll,a.options.safariPollInterval)),"Apple Computer, Inc."===b.vendor||"Mozilla"===(b.appCodeName||""))&&(a.Adapter.bind(c,"hashchange",function(){a.Adapter.trigger(c,"popstate")}),a.getHash()))a.Adapter.onDomLoad(function(){a.Adapter.trigger(c,"hashchange")})};a.options&&a.options.delayInit||a.init()})(window);
			/* /native_history_js */
			/* fortuna */

FORTUNA._onReady=function(){for(;this._run[0];)this._run.shift()();this._run=null};FORTUNA._onLoad=function(){for(;this._load[0];)this._load.shift()();this._load=null};FORTUNA.userData={};YAHOO.util.Event.onDOMReady(FORTUNA._onReady,!0,FORTUNA);YAHOO.util.Event.on(window,"load",FORTUNA._onLoad,!0,FORTUNA);YAHOO.util.Event.on(window,"unload",FORTUNA._unload,!0,FORTUNA);
			/* /fortuna */
			/* fortuna_utils */

(function(){DEBUG=!1;FORTUNA.UTILS={componentName:"FORTUNA.UTILS",roundNumber:function(a,b){b=Math.pow(10,b);return Math.round(a*b)/b},log:function(a){var b=arguments;if("undefined"!=typeof console)try{console.log.apply(console,b)}catch(d){}else DEBUG&&alert("FORTUNA.UTILS.log:\n\n"+FORTUNA.UTILS.arrayJoin(b))},arrayJoin:function(a,b){b=b||"";for(var d,c=0;c<a.length;c++)d=0===c?a[c]:d+(b+a[c]);return d},isInArray:function(a,b){inArray=!1;for(i=0;i<a.length;i++)b==a[i]&&(inArray=!0);return inArray},removeFromArray:function(a,b,d){if(0<a.length){if(d)return a.splice(parseInt(b),1),[].concat(a);d=[];for(var c=0,e=a.length;c<e;c++)a[c]!==b&&d.push(a[c]);return[].concat(d)}},editUrlParams:function(a,b,d){if("string"===typeof a){var c=String(a).split("?");a=c[0];var e=(c[1]||"").split("\x26");c={};var f=[];if("object"!==typeof b)return a;if(""!==e[0])for(var g=0,h=e.length;g<h;g++){var k=e[g].split("\x3d");c[k[0]]=k[1]}for(var l in b)e=b[l],"undefined"!==e&&null!==e&&""!==e||!0===d?c[l]=e:c[l]&&delete c[l];for(var n in c)b=n+"\x3d"+c[n],f.push(b);if(0<f.length){var m="?"+f.join("\x26");m=a+m}return m||a}},capitalizeString:function(a){for(var b,d="",c=0,e=a.length;c<e;c++)b=0===c||" "===a[c],d+=a[c][b?"toUpperCase":"toLowerCase"]();return d},trimString:function(a){a=a||"";return String.prototype.hasOwnProperty("trim")?a.trim():a.replace(/^\s+|\s+$/g,"")},Storage:{setItem:function(a,b,d){a=[].concat(b?{name:a,value:b}:a);d=!d&&"localStorage"in window;b=0;var c=a.length;for(a=a[b];b<c;b++)"string"===typeof a.name&&(d?localStorage.setItem(a.name,a.value):$.cookie(a.name,a.value,{path:"/",expires:30}))},getItem:function(a,b){a=String(a);return!b&&"localStorage"in window?localStorage.getItem(a):$.cookie(a)},removeItem:function(a,b){a=String(a);!b&&"localStorage"in window?localStorage.removeItem(a):$.cookie(a,null)}},isFirstUrlParam:function(a){a=String(a);return 0<=a.indexOf("?")?!1:!0},getClosestNumber:function(a,b,d){if(!(a&&0<=b))return null;var c=a[0],e=Math.abs(a[0]-b),f=1,g=a.length;f;for(g;f<g;f++){var h=Math.abs(a[f]-b);if(h<e){e=h;c=a[f];var k=f}}return d?k:c},normalizeNumber:function(a,b){b=parseInt(b);a=parseFloat(a).toFixed(b||2);return a=String(a).replace(".",",")},getScrollbarsWidth:function(){var a=document.createElement("p");a.style.width="100%";a.style.height="200px";var b=document.createElement("div");b.style.position="absolute";b.style.top="0px";b.style.left="0px";b.style.visibility="hidden";b.style.width="200px";b.style.height="150px";b.style.overflow="hidden";b.appendChild(a);document.body.appendChild(b);var d=a.offsetWidth;b.style.overflow="scroll";a=a.offsetWidth;d==a&&(a=b.clientWidth);document.body.removeChild(b);return d-a},isIphone:function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1},isAndroid:function(){return-1<navigator.userAgent.toLowerCase().indexOf("android")},getURLParams:function(a){a||(a=window.location.href);var b=a.substr(window.location.href.indexOf("?")+1);a={};if(b==window.location.href)return a;b=b.split("\x26");var d=b.length,c;for(c=0;c<d;c++){var e=b[c].split("\x3d");1<e.length&&(a[decodeURIComponent(e[0])]=decodeURIComponent(e[1]))}return a},ieVersion:function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,d=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=d.exec(b)&&(a=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(b=navigator.userAgent,d=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=d.exec(b)&&(a=parseFloat(RegExp.$1)));return a},isSVGSupported:function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")},isNullOrUndefined:function(a){return void 0==a},hash:function(a){var b=0,d;if(0==a.length)return b;var c=0;for(d=a.length;c<d;c++){var e=a.charCodeAt(c);b=(b<<5)-b+e;b|=0}return b},debounce:function(a,b,d){var c;return function(){var e=this,f=arguments,g=d&&!c;clearTimeout(c);c=setTimeout(function(){c=null;d||a.apply(e,f)},b);g&&a.apply(e,f)}},callFnFromString:function(a,b){if(!a||"string"!==typeof a||!b||"object"!==typeof b)return null;for(var d=Array.prototype.slice.call(arguments,2),c=a.split("."),e=c.pop(),f=0;f<c.length;f++)b=b[c[f]];(c=b[e])&&c.apply(b,d);return c},expandPlaceholders:function(a,b,d){for(var c in b)a=a.replace(new RegExp("{{"+c+"}}","g"),b[c]);d&&(a=a.replace(/\{\{*}}/g,""));return a},stripHtml:function(a){return String(a||this).replace(/<(.|\n)*?>/ig,"")},unescapeHtml:function(a){return String(a||this).replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e").replace(/&quot;/g,'"')},sanitizeString:function(a){return(a||this).unescapeHtml().stripHtml().trim().replace(/['"]/g,"").replace(/\n/g,"")},getPropertyByPath:function(a,b){return a.split(".").reduce(function(a,b){return a&&a[b]},obj)}};String.prototype.unescapeHtml=FORTUNA.UTILS.unescapeHtml;String.prototype.stripHtml=FORTUNA.UTILS.stripHtml;String.prototype.sanitize=FORTUNA.UTILS.sanitizeString;FORTUNA.components.push(FORTUNA.UTILS)})();
			/* /fortuna_utils */
			/* Validation_js */

;FORTUNA.run(function() {
  /**
   * General validation module
   * TODO: Validation description
   * FIX ME: class instance with prototype
   * @author Hakim 11-2018
   */
  const Dom = YAHOO.util.Dom;
  const Event = YAHOO.util.Event;
  const editUrlParams = FORTUNA.UTILS.editUrlParams;  
  const SEVERITY_ERROR = 'ERROR';
  const SEVERITY_VALID = 'VALID';
  const SEVERITY_INFO = 'INFO';

  FORTUNA.UI.validation = new function () {
    const CTX = this;
    let formElm = null;
    let formSteps = null;
    let validateUrl = '';
    let conf = {
      SELECTOR_FORM_STEP: '.form__step',
      SELECTOR_REQUIRED_FIELD: '[required]',
      CLASS_VALIDATION_SUGGESTION: 'validataion-suggestion',
      CLASS_VALIDATION_MESSAGE: 'form-message-row'
    };

    /**
     * Initialize validation on form
     * @param  {HtmlElement} form    Form element
     * @param  {Object=} options Additional setting
     * @return {Object}         Instance of validation
     */
    function init (form, options) {
      if ( !form || !form.tagName || form.tagName.toLowerCase() !== 'form' ) {
        return null;
      }
      formElm = form;
      formSteps = formElm.querySelectorAll(conf.SELECTOR_FORM_STEP);

      Object.assign(conf, {
        validateUrl: formElm.dataset.validateUrl, // {String}
        beforeSubmit : null,  // {Function}
        handleValidationResponse: null,   // {Function}
        handleFieldSuggestion: null, // {Function}
        
        fieldErrorCallback: null, // {Function}
        fieldEnterCallback: null, // {Function}
        formErrorTracking: null, // {Function}

        formSendHandler: null // {Function}
      }, options)

      _setEvents.apply(CTX);

      return this;
    }

    /**
     * Validate field
     * @param  {Event|HtmlElement} callee
     * @return {Promise}
     */
    function validateField (callee, handleResponse) {
      const field_ = callee.name ? callee : callee.target;
      if (!field_ || !field_.dataset) {
        return null;
      }

      // Wheter field nees aditional values for validation
      const url_ = formElm.dataset[field_.dataset.validateUrl]
                    || conf.validateUrl ;

      let value_ = encodeURIComponent(field_.value);
      let parameters_ = {'validatedFieldName': field_.name};
      const dependencies_ = _fieldValidationDependency(field_);

      // For checkboxes, send empty value if unchecked
      if (field_.type === 'checkbox') {
        value_ = encodeURIComponent(field_.checked ? field_.value : '');
      }
      
      parameters_[field_.name] = value_;
      parameters_ = Object.assign({}, parameters_, dependencies_);
      
      // Loading
      field_.dataset.loading = true;

      return validationRequest(
        url_, 
        parameters_,  
        (handleResponse || conf.handleValidationResponse)
      );
    }

    /**
     * Validation request
     * @param  {String} url        url for validation
     * @param  {Object=} parameters Additional parameters 
     * @return {Promise}
     */
    function validationRequest (url, parameters, handleValidationResponse) {
      const url_ = editUrlParams(url, parameters, true);

      return makeRequest(url_, {}, true)
        .then( function(res) {
          const handleResponse_ = handleValidationResponse || _handleValidationResponse;
          // If single field validation, turn of loading indicator
          const field_ = formElm[parameters.validatedFieldName];
          if (field_) {
            delete field_.dataset.loading;
          }

          return handleResponse_(res, parameters);
        })
        // .catch(function(error) {
        //   throw(error);
        // })
    }

    /**
     * If value of promocode is set in, validates as validatePromo,
     * otherwise validates as normal field
     * @param  {Event|HtmlElement} callee
     * @param  {Boolean=} forcePromoValidation If true, forces promo validation
     */
    function validatePromoCode (callee, forcePromoValidation) {
      const promoCodeField_ = callee.target || callee;
      const captcha = Dom.get('id-promocode_captcha');
      const url_ = editUrlParams(formElm.dataset.validatePromoUrl, {
                      promo_code: promoCodeField_.value
                    });
      // Dont validate, if capcha
      if (captcha) {
        return null;
      }

      if (
        promoCodeField_.value
        || forcePromoValidation === true
        || promoCodeField_.dataset.urlPromo
      ) {
        TDI.Ajax.Request.send(url_, {
          success: function() {
            promoCodeField_.value 
            && validateField(callee);
          }
        });
      } else {
        validateField(callee);
      }
    }

    /**
     * Validates fields in given step
     * @param  {HtmlElement} step Block of fields for validation
     * @return {Boolean}      Wheter is block 
     */
    function validateFormStep (step) {
      const fields = getRequiredFields(step);
      let parameters = {};

      fields.forEach(function(field){
        if (field.type === 'checkbox') {
          parameters[field.name] = field.checked ? field.value : '';
        } else {
          const dependencies_ = _fieldValidationDependency(field);
          parameters = Object.assign({}, parameters, dependencies_);
          parameters[field.name] = encodeURIComponent(field.value);
        }
      });

      return validationRequest(conf.validateUrl, parameters);
    }

    /**
     * Fields for validation
     * @param  {HtmlElement=} root Root to get fields from, otherwise uses form
     * @return {NodeList} List of elements
     */
    function getRequiredFields (root) {
      if (!root && formElm) {
        throw "Validation: no root to get required fields from";
      }
      return (root || formElm).querySelectorAll('[required]:not([readonly])');
    }




    /**
     * Validation events
     */
    function _setEvents () {
      const submitButton = formElm.querySelector('button[type=submit]');

      // Validate fields that are marked as required
      Event.delegate(formElm, 'focusout', _chooseFieldValidation, 'input' + conf.SELECTOR_REQUIRED_FIELD + ':not([type=checkbox]):not([readonly])');
      // Validate required checkboxes
      Event.delegate(formElm, 'change', _chooseFieldValidation, 'input[type=checkbox]' + conf.SELECTOR_REQUIRED_FIELD);
      // Validace selectbox
      Event.delegate(formElm, 'change', _chooseFieldValidation, 'select' + conf.SELECTOR_REQUIRED_FIELD);
      // validate form
      Event.addListener(submitButton, 'click', _chooseFormSubmitValidation);
      // handle field validation suggestion
      Event.delegate(formElm, 'click', _handleFieldSuggestion, ('.' + conf.CLASS_VALIDATION_SUGGESTION));
    }

    /**
     * Depending on step of the form, validate current step or send form.
     * @param {Event} evt
     */
    function _chooseFormSubmitValidation (evt) {
      evt.preventDefault();
      evt.stopPropagation();
      
      if (typeof conf.beforeSubmit === 'function') {
       conf.beforeSubmit(evt, _validateFormBeforeSubmit);
      } else {
        _validateFormBeforeSubmit(evt);
      }
    }

    /**
     * Call default field validation method, or custom one
     * @param  {Event} evt [description]
     */
    function _chooseFieldValidation (evt) {
      if (!evt) {
        return null;
      }
      const field_ = evt.target;
      const validationMethod_ = field_.dataset.validateMethod;

      const ctx_ = validationMethod_ && validationMethod_.indexOf('.') > 0 
        ? FORTUNA.UTILS.getPropertyByPath
        : CTX;

      typeof conf.fieldEnterCallback === 'function'
      && conf.fieldEnterCallback(evt);

      if (ctx_[validationMethod_]) {
        ctx_[validationMethod_](evt);
      } else {
        validateField(evt)
      }
    }

    /**
     * Find fields validation dependencies
     * @param  {HtmlElement} field
     * @return {Object}       Map of dependcies nad its values
     */
    function _fieldValidationDependency (field) {
      const parameters_ = {};
      if (field && field.dataset.validateFields) {
        // Those are specified in 'data-validate-fields'
        const fieldsForrequest_ = field.dataset.validateFields.split('|');
        fieldsForrequest_.map(function(f) {

          const value_ = NodeList.prototype.isPrototypeOf(formElm[f])
            ? formElm[f][0].value 
            : formElm[f].value;

          parameters_[f] = encodeURIComponent(value_);
        });
      }
      return parameters_;
    }

    /**
     * Validates form on submit. If no errors returned, allow sending
     * @param {Event} evt
     */
    function _validateFormBeforeSubmit (evt) {
      evt.preventDefault();
      evt.stopPropagation();

      validateFormStep(formElm)
        .then(function(hasNoErrors) {

          if (hasNoErrors) {
            // Custom form submit handler.
            try {
              conf.formSendHandler && conf.formSendHandler();
            } catch(e) {
              console.log(e);
            }
            // Submit the form
            formElm.submit();
          }
        })
        .catch(function(error) {
          throw(error);
        })
    }

    /**
     * Handles validation messages
     * @param  {Array|String} messages   Data returned from server
     * @param  {Object} parameters Uri params used for validation
     * @param  {Boolean=} returnMessages If true, returns list of messages, instead of just true/false
     * @return {Boolean|Array} True if has erro
     */
    function _handleValidationResponse (messages, parameters, returnMessages) {
      const messages_ = typeof messages === 'string'
                        ? JSON.parse(messages.trim()) // IE 11 fix
                        : messages; 
      const singleField_ = formElm[parameters.validatedFieldName];
      let isValid = true;

      // Validation messages came back
      if (messages_ && messages_.length) {

        messages_.forEach(function(message) {
          const field_ = formElm[message.field];
          if (isValid && message.severity === SEVERITY_ERROR) {
            isValid = false;
          }
          
          setFieldValidityStatus(field_, message.severity, message);
        });

        // Track error if handler provided
        if (typeof conf.fieldErrorCallback === 'function') {
          conf.fieldErrorCallback(messages_, singleField_);
        }

      // All clear
      } else {
        // single field validation
        if (singleField_) {
          const status_ = (singleField_.value && singleField_.required ? SEVERITY_VALID : undefined);
          setFieldValidityStatus(singleField_, status_)
        // form submit
        } else {
          for(let param in parameters) {
            const field_ = formElm[param];
            const parent_ = _getFieldRow(field_);
            if (parent_ && parent_._message) {
              const status_ = field_.value && field_.required 
                              ? SEVERITY_VALID 
                              : undefined;
              setFieldValidityStatus(formElm[param], status_);
            }
          }
        }
      }

      return returnMessages === true
        ? (messages_ || [])
        : isValid;
    }

    /**
     * Sets field validation status coresponding to
     * - message
     * - validation status
     * @param {HtmlElement}  field
     * @param {String|Undefined=} severity Message severity
     * invalid(false) or not specified (undefined)
     * @param {Object=}  message Validation message
     */
    function setFieldValidityStatus (field, severity, message) {
      _resetFieldError(field);
      _setFieldValidity(field, severity);
      if (message) {
        _setFieldMessage(field, message);
      }
    }

    /**
     * Removes field message
     * @param  {HtmlElement} field Field we are removing message from
     * @return {HtmlElement}       FieldRow
     */
    function _resetFieldError (field) {
      const fieldRow_ = _getFieldRow(field);
      const messages_ = formElm.querySelectorAll('.__fmr--' + field.name);
                               
      messages_.forEach(function(msgElm) {
        msgElm.remove();
      })
      if (fieldRow_._message) {
        delete fieldRow_._message;
      }

      return fieldRow_;
    }

    /**
     * Set field validation status
     * @param {HtmlElement} field Form field that has been validated
     * @param {String=} severity Field validation severity.
     *                           ERROR - failed validaiton
     *                           INFO  - some suggestion, but field valid
     *                           VALID - field is valid
     */
    function _setFieldValidity (field, severity) {
      const fieldRow_ = _getFieldRow(field);
      field.__severity = severity;
      
      field.dataset.status = severity;

      if (severity && _canSetValidity(fieldRow_)) {
        fieldRow_.dataset.status = severity;
      } else {
        delete fieldRow_.dataset.status;
      }
    }

    /**
     * Looks to row parent and checks wheter we have all fields validated
     * and are obligated to show result.
     * Prevents showing result status, when there are more fields in form row
     * and not all of them
     * - have same validation status
     * - has been validated
     * So we cannot say if the row is valid or not, as we place status on row, not field.
     * @param  {HtmlElement} fieldRow Row we are checking
     * @return {Boolean}
     */
    function _canSetValidity (fieldRow) {
      // Required fields
      const requiredFields_ = getRequiredFields(fieldRow);

      // If more than one field presented,...
      if (requiredFields_.length > 1) {
        const severities_ = [];
        const haveValues_ = [];
        
        // ...check if all has status
        requiredFields_.forEach(function( field ) {
          const severity_ = field.__severity;
          // Has set validation status and is not already presented
          if (
            severity_ !== SEVERITY_INFO
            && !severities_.includes(severity_)
          ) {
            severities_.push(severity_);
          }
        });

        // If there is only ONE severity, means all fields has same VALID or ERROR status
        if (severities_.length !== 1) {
          return false;
        }
      }

      return true;
    }

    /**
     * Iterates through list of messages and displays them for provided field,
     * or removes when field is valid and message set.
     * @param {HtmlElement} field       field to set message for
     * @param {Object} message
     */
    function _setFieldMessage (field, message) {
      if (!field){
        throw 'Validation: No field provided for message ' + (typeof message === 'object' ? JSON.stringify(message) : 'null');
      }
      const fieldRow_ = _getFieldRow(field);

      if (message) {
        const messageElm_ = fieldRow_._message 
                            || _createFieldMessage(fieldRow_, field.name);
        const messageTextWrapper_ = messageElm_.querySelector('span');
        messageElm_.classList.add(
          conf.CLASS_VALIDATION_MESSAGE, 
          conf.CLASS_VALIDATION_MESSAGE + '--' + message.severity,
          '__fmr--' + field.name
        );

        messageElm_.__field = field;

        if (message.suggestions && message.suggestions.length) {
          let text_ = message.text + ': ' + message.suggestions.map(function (sug, i) {
            return '<span class="' + conf.CLASS_VALIDATION_SUGGESTION + '">' + sug + '</span>';
          }).join(', ');

          messageTextWrapper_.innerHTML = text_;
        } else {
          messageTextWrapper_.innerHTML = message.text;
        }

      }
    }

    /**
     * Unified get field parent
     * @param  {HtmlElement} field
     * @return {HtmlElement} Fields parent
     */
    function _getFieldRow (field) {
      return Dom.getAncestorByClassName(field, 'form-row');
    }

    /**
     * Creates field for validation message
     * @param  {HtmlElement} fieldRow Row to append message next to
     * @param  {String} fieldName   Field name message is for
     * @return {HtmlElement}        Error element
     */
    function _createFieldMessage (fieldRow, fieldName) {
      let messageElm_ = document.createElement('p');
      let messageTextElm_ = document.createElement('span');

      messageElm_.id = conf.CLASS_VALIDATION_MESSAGE + '--' + fieldName;
      messageElm_.appendChild( messageTextElm_ );
      Dom.insertAfter(messageElm_, fieldRow);
      fieldRow._message = messageElm_;
      return messageElm_;
    }

    /**
     * Handles suggestions returned in message
     * @param  {Event} evt
     * @param  {HtmlElement} suggestionElm
     */
    function _handleFieldSuggestion (evt, suggestionElm) {
      const messageRow_ = Dom.getAncestorByClassName(suggestionElm, conf.CLASS_VALIDATION_MESSAGE);
      const field_ = messageRow_.__field || formElm[evt.target.dataset.fieldName]; // if message is rendered on server
      const suggestedValue_ = evt.target.innerText;

      field_.value = suggestedValue_;
      validateField(field_);
    }

    /*****/
    this.init = init;
    this.getRequiredFields = getRequiredFields;
    this.setFieldValidityStatus = setFieldValidityStatus;
    this.validateField = validateField;
    this.validateFormStep = validateFormStep;
    this.validatePromoCode = validatePromoCode;
  };
});

			/* /Validation_js */
			/* fortuna_ui */

(function(e){var c=YAHOO.util.Dom,g=YAHOO.util.Event,k=YAHOO.util.Cookie,p=YAHOO.util.Connect,l=FORTUNA.UTILS,t=YAHOO.util.YUILoader,q=YAHOO.util.Get,u=YAHOO.util.Selector;FORTUNA.UI={componentName:"FORTUNA.UI",settings:{linksHolder:null,links:{}},allBetLinks:[],betTables:[],betComponents:{filterItemsBubble:null,activeExpandFilterLink:null,activeTable:null},betTablesObj:{},activeMenuItems:{},ticketManager:null,sidebarManagers:{},betLinkTooltip:null,activeCalendar:null,serverTime:null,serverTimeOffset:null,serverTimeDate:null,localTimeDate:null,clockTimeInterval:null,clockSyncInterval:null,timePlacer:null,popupTicketWindow:null,popupCookie:k.get("popup_ticket"),customEvents:null,nextBetTableLoading:!1,actualState:null,addBetInfoBubble:null,user:!1,userSegment:null,modalDialogManager:null,errorModal:null,domready:function(){var a=this,b=FORTUNA.UTILS.BrowserDetect,d=document.getElementsByTagName("html")[0],f=c.get("call-to-action"),h=c.get("online_chat_loadit");this.modalDialogManager=new ET.ModalDialogManager;this.errorModal=new ET.ModalDialogManager({cls:"error"});this.actualState="CZ";this.settings.linksHolder=c.get("user-profile");this.settings.links=this.settings.linksHolder?this.settings.linksHolder.dataset:{};this.user=c.get("user-profile-holder")?!0:!1;d&&(c.addClass(d,b.browser),c.addClass(d,b.OS));c.replaceClass(document.body,"no-js","js");f&&(b=c.get("cta-close"),g.on(b,"click",function(a){g.stopEvent(a);c.addClass(f,"hidden");document.cookie="call_co_action_close\x3dtrue; path\x3d/";_gaq.push(["_trackEvent","Call-to-action","close"])},!0,this));this.customEvents={ticketUpdate:new YAHOO.util.CustomEvent("ticketUpdate",this)};c.getElementsByClassName("toggle_menu","ul",document.body,function(b){b&&a.initializeToggleMenu.call(a,b)});e(document).on("click",".bet-all .submit",function(a){a.preventDefault();a=FORTUNA.UI.ticketManager;var b=e(this).attr("href");a.sendTicketRequest(l.editUrlParams(b,{ticket_id:a.getTicketId()}))});this.userSegment=k.get("user_segment");h&&(c.removeClass(h,"hidden"),g.delegate(h,"click",a.loadOnlineChat,"a"));this.initTooltips();this.initOnClickRedirect();this.user&&(this.initToggleMenu(),this.initToggleProfileInfo());this.initBoxToggling();this.initFixedBetFilter();this.initProfileBonusPopup();this.initMainArticleTables();this.initSelectboxes();this.initCasinoTransferButtons();this.initProfileUpdateButton();this.expandOpenedSportMenuElements();this.initSportMenuItemTitleClick();this.initHideableButtons();this.initOpenPlayerLimits()},load:function(){var a=this,b=parseInt(e("#page-variables").data("server-time")),d=window.__clientRenderStart;this.initializeTabbedContainers();this.initializeBetradarLinks();c.getElementsByClassName("checkboxToggle","input",document.body,function(b){g.on(b,"click",function(){var b=c.get(this.id+"-subitems");a.checkboxGroupToggle(this,b)})});a=this;c.getElementsByClassName("lottery_form_radio","input","lottery_form",function(b){g.on(b,"click",a.toggleLotteryDate)});this.initializeBetItemArticleLinks();this.initializeBetItemArticlePopups();"undefined"!=typeof GMapInitialize&&GMapInitialize();!isNaN(b)&&d&&(this.serverTime=b,this.serverTimeDate=new Date(b),this.localTimeDate=d,this.serverTimeOffset=this.localTimeDate.getTime()-this.serverTimeDate.getTime(),c.get("time")&&(this.clockTimeInterval=setInterval(this.timeDate,1E3)));this.clockSync();this.clockSyncInterval=setInterval(this.clockSync,3E5);(b=c.get("js-loggedin-time"))&&FORTUNA.UI.ResponsibleGaming.userLoginTime(b);this.user&&this.userTicketGratulation&&this.userTicketGratulation.initTicketNotification();this.initBrowser()},clockSync:function(){var a=document.createElement("script");a.src="/none/live_resources/-logic-fortuna-resources-js-server_date_sync_js.js?request_time\x3d"+(new Date).getTime();a.onload=this._cleanup;document.body&&document.body.appendChild(a)},clockSyncResponse:function(a){var b=(new Date).getTime()-a.clientRequestTime;this.serverTimeOffset=a.clientRequestTime-(a.serverTimeThen+b)},_cleanup:function(){this.onload&&(this.onload=null);this.parentNode.removeChild(this)},unload:function(){"undefined"!=typeof GUnload&&GUnload()},initTooltips:function(a,b){b={}.tooltipName||"tooltip";e(a||document).on("mouseenter","."+b,function(){var a=e(this);if(a.data("hasTooltip"))return!0;a.data("hasTooltip",!0);a.tooltip({show:{effect:"blind",duration:800},hide:{effect:"blind",duration:300}});a.tooltip("open");return!0})},initializeTabbedContainers:function(){c.getElementsByClassName("tuck-ins","*",document.body,function(a){c.hasClass(a,"off")||new FORTUNA.UI.Tabbed(a)})},initializeCalendars:function(){0<c.getElementsByClassName("calendar","input",document).length&&(new t({base:"/js/libs/yui/",require:["calendar"],onSuccess:function(){for(var a=a||c.getElementsByClassName("calendar","input",document),b=0,d=a.length;b<d;b++)(new FORTUNA.UI.Calendar(a[b],FORTUNA.UI)).render()}})).insert()},initializeResultsRowToggle:function(){var a=this;c.getElementsByClassName("row_toggle_results","a",document.body,function(b){g.on(b,"click",a.toggleResultsRow,a,!0)})},toggleResultsRow:function(a){g.stopEvent(a);var b=g.getTarget(a);a=c.getAncestorByTagName(b,"tr");b=c.get("row-"+b.rel);c.hasClass(a,"active")?(c.removeClass(a,"active"),c.addClass(b,"hidden")):(c.addClass(a,"active"),c.removeClass(b,"hidden"))},initializeBetItemArticleLinks:function(){var a=this;g.delegate("main_wrapper","mouseover",function(){this.removeAttribute("title");this.popup=c.get(this.id+"-popup");a.openBetItemArticleLinksPopup(this)},".bet_item_article_link");g.delegate("main_wrapper","mouseout",function(){this.removeAttribute("title");this.popup=c.get(this.id+"-popup");a.closeBetItemArticleLinksPopup(this,this.getAttribute("rel"))},".bet_item_article_link")},openBetItemArticleLinksPopup:function(a){a.popup||this.initializeBetItemArticleLinks();a.popup.hide=!1;var b=c.getXY(a),d=Number(c.getAttribute(a.popup,"data-left")),f=Number(c.getAttribute(a.popup,"data-right")),h=c.getAttribute(a.popup,"data-top"),e=c.hasClass(a.popup,"vhidden")?"vhidden":"hidden";d=d&&"NaN"!==d?d:b[0]+a.offsetWidth;f=f&&"NaN"!==f?f:null;b=h&&"NaN"!==h?h:b[1]+a.offsetHeight;f?a.popup.style.right=f+"px":a.popup.style.left=d+"px";a.popup.style.top=b+"px";c.removeClass(a.popup,e)},closeBetItemArticleLinksPopup:function(a,b){var d=this,c=a.popup;c||this.initializeBetItemArticleLinks();c.hide=!0;setTimeout(function(){d.hideBetItemArticlePopup(c)},b?0:500)},initializeBetItemArticlePopups:function(){var a=this;g.delegate("main_wrapper","mouseover",function(){this.hide=!1},".bet_item_article_popup");g.delegate("main_wrapper","mouseout",function(){var b=this;b.hide=!0;setTimeout(function(){a.hideBetItemArticlePopup(b)},500)},".bet_item_article_popup")},initToggleMenu:function(){var a=this,b=c.get("user-holder");c.get("user-profile");var d=c.get("user-panel"),f=c.get("top-panel");c.get("user-menu");var h=f.offsetHeight+"px",n=!1;d&&(e(b).on("mouseenter",".top-panel",function(b){n=!0;window.setTimeout(function(){n&&FORTUNA.UI.openUserMenu.call(a,h)},250)}).on("mouseleave",".top-panel",function(a){FORTUNA.UI.closeUserMenu.call(FORTUNA.UI);n=!1}),g.on("user-menu-toggler","click",function(a){g.preventDefault(a)}))},initProfileBonusPopup:function(){var a=this,b=document.getElementById("bonus-description"),d=document.getElementById("bonus-description-popup"),c=document.getElementById("user-holder");c&&b&&d&&(g.delegate(c,"mouseover",function(){a.openBetItemArticleLinksPopup(this)},"#bonus-description"),g.delegate(c,"mouseout",function(){a.closeBetItemArticleLinksPopup(this)},"#bonus-description"))},initToggleProfileInfo:function(){var a=c.get("user-holder"),b=this;g.delegate(a,"click",function(a){b.toggleProfile.call(b,this);g.preventDefault(a)},"#user-profile-toggler")},initFinishRegistration:function(){c.get("finnish_registration_confirm_form")&&this.setFinishRegistrationLogout()},initOnClickRedirect:function(){c.getElementsByClassName("redir-on-click","*",document.body,function(a){var b=c.getAttribute(a,"data-redir-url");b&&g.delegate(a,"click",function(a){window.location.href=b;g.preventDefault(a)},"*")})},openUserMenu:function(a){var b=c.get("user-menu"),d=c.get("user-menu-toggler");c.setStyle(b,"top",a);c.replaceClass(b,"closed","opened");c.replaceClass(d,"closed","opened")},closeUserMenu:function(a){a=c.get("user-menu");var b=c.get("user-menu-toggler");c.setStyle(a,"top","-10000px");c.replaceClass(a,"opened","closed");c.replaceClass(b,"opened","closed")},toggleProfile:function(a){var b=c.get("user-profile-table"),d=k.get("profile_collapsed"),f=new Date;"true"==d?(dataCollapsed="false",c.removeClass(b,"hidden"),c.removeClass(a,"collapse"),f.setFullYear(f.getFullYear()-1)):(dataCollapsed="true",c.addClass(b,"hidden"),c.addClass(a,"collapse"),f.setFullYear(f.getFullYear()+1));k.set("profile_collapsed","true",{path:"/",expires:f});e(a).data("ga-track-value",dataCollapsed)},hideBetItemArticlePopup:function(a){a.hide&&c.addClass(a,"hidden")},showLoadingOverlay:function(a,b,d){if(a){a=c.get(a);var f=c.getXY(a),h=c.get("loading_overlay");h.style.left=f[0]+"px";h.style.top=f[1]+"px";h.style.height=a.offsetHeight+"px";h.style.width=b&&!isNaN(b)?b+"px":a.offsetWidth+"px";c.removeClass(h,"invisible");d&&c.addClass(h,d)}},hideLoadingOverlay:function(){c.get("loading_overlay").className="invisible"},timeDate:function(){var a=FORTUNA.UI;a.localTimeDate=new Date;a.serverTimeDate.setTime(a.localTimeDate.getTime()-a.serverTimeOffset);a.serverTime=a.serverTimeDate.getTime();a.timePlacer=a.timePlacer||c.get("time");if(a.timePlacer){var b=a.serverTimeDate,d="SK"!=FORTUNA.UI.actualState?b.getDate()+"."+(b.getMonth()+1)+"."+b.getFullYear():"",f=b.getHours(),h=b.getMinutes();b=b.getSeconds();d="\x3cstrong\x3e"+d+"\x3c/strong\x3e "+(10>f?"0":"")+f+((10>h?":0":":")+h)+((10>b?":0":":")+b);a.timePlacer.innerHTML=d}},inflectTimePeriod:function(a,b){a={months:["m\u011bs\u00edc\u016f","m\u011bs\u00edc","m\u011bs\u00edce","m\u011bs\u00edce","m\u011bs\u00edce"],days:["dn\u00ed","den","dny","dny","dny"],hours:["hodin","hodina","hodiny","hodiny","hodiny"],minutes:["minut","minuta","minuty","minuty","minuty"],seconds:["sekund","sekunda","sekundy","sekundy","sekundy"]}[a];if("undefined"!=typeof b&&"undefined"!=typeof a)return b=4<b||0==b?a[0]:a[b]},setCustomCountdown:function(a,b){a=c.get(a);var d=parseInt(c.get("uniTime").innerHTML);b=b.split(",");end_date=new Date(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);remaining_secs=parseFloat((end_date.getTime()-d)/1E3);a&&1<remaining_secs&&(new FORTUNA.UI.Countdown(a,remaining_secs,this.updateInflectedCountdown)).run()},updateInflectedCountdown:function(a,b){var d=FORTUNA.UI,f=String(b.hours).length,h=String(b.minutes).length,e=String(b.seconds).length;d=0<b.days?'\x3cspan class\x3d"cnt_days"\x3e\x3cstrong\x3e'+b.days+"\x3c/strong\x3e"+d.inflectTimePeriod("days",b.days)+"\x3c/span\x3e":"";f='\x3cspan class\x3d"cnt_hours"\x3e\x3cstrong\x3e'+(1==f?0:"")+b.hours+"\x3c/strong\x3ehod\x3c/span\x3e\x3ci\x3e:\x3c/i\x3e";h='\x3cspan class\x3d"cnt_minutes"\x3e\x3cstrong\x3e'+(1==h?0:"")+b.minutes+"\x3c/strong\x3emin\x3c/span\x3e\x3ci\x3e:\x3c/i\x3e";b='\x3cspan class\x3d"cnt_seconds"\x3e\x3cstrong\x3e'+(1==e?0:"")+b.seconds+"\x3c/strong\x3esek\x3c/span\x3e";c.hasClass(a,"tick")?c.removeClass(a,"tick"):c.addClass(a,"tick");a.innerHTML=[d,f,h,b].join("")},addToFavorite:function(a,b){var d=location.href,c=document.title;if(window.sidebar)return window.sidebar.addPanel(c,d,""),!1;if(window.opera&&window.print)return a.title=c,!0;if(document.all)return window.external.AddFavorite(d,c),!1;alert(b);return!1},loadBetTables:function(a){var b=this;a=c.get(a||document.body);var d=0;c.getElementsByClassName("bet_table","table",a,function(a){0===d&&(b.betComponents.filterItemsBubble=b.prepareCustomElement({id:"surplus-items-dialog",clsName:"invisible"}),b.setShowHideMethods(b.betComponents.filterItemsBubble));if(!c.hasClass(a,"no_js")){var f=new FORTUNA.UI.BetTable(a);f.enhance();b.betTablesObj[a.id]=f;b.betTables.push(f)}d++})},betTablesOrderByColumn:function(a){for(var b=this.betTables,d=0;d<b.length;d++)b[d].orderByColumn.call(b[d],a)},checkboxGroupToggle:function(a,b){if(a&&b){b=b.getElementsByTagName("input");for(var d=0;d<b.length;d++)"checkbox"==b[d].type&&(b[d].checked=a.checked)}},prepareSidebarManagers:function(){this.sidebarManagers.sidebaAgregator=FORTUNA.UI.SidebarManager.create("#sidebar_agregator_content");this.sidebarManagers.sidebarTiketsList=FORTUNA.UI.SidebarManager.create("#sidebar_tikets_list_content")},prepareTicketManager:function(){var a={ticketId:k.get("active_ticket")||1};this.ticketManager=new FORTUNA.UI.TicketManager(a)},toggleUserProfile:function(a){c.hasClass(a,"opened")?c.removeClass(a,"opened"):c.addClass(a,"opened")},initializeBetradarLinks:function(){g.delegate("main_content","click",function(a){window.open(this.href,"_blank","width\x3d"+("SK"==FORTUNA.UI.actualState?1112:886)+",height\x3d700,scrollbars\x3dyes,toolbar\x3dyes")&&g.stopEvent(a)},".betradar")},initializeToggleMenu:function(a){var b=this,d=a.id;a=k.get(d+"_cookie");this.activeMenuItems[d]=a?a.split("_"):[];c.getElementsByClassName(d+"_group","a",d,function(a){if(a)g.on(a,"click",function(f){g.stopEvent(f);f=c.getAncestorByTagName(a,"li");c.hasClass(f,"closed")?b.expandToggleMenuGroup(a,d):b.collapseToggleMenuGroup(a,d)})})},expandToggleMenuGroup:function(a,b){var d=c.getAncestorByTagName(a,"li"),f=a.rel;a=b+"_cookie";0>this.activeMenuItems[b].indexOf(f)&&this.activeMenuItems[b].push(f);f=new Date;f.setFullYear(f.getFullYear()+1);k.set(a,this.activeMenuItems[b].join("_"),{path:"/",expires:f});c.addClass(d,"opened");c.removeClass(d,"closed")},collapseToggleMenuGroup:function(a,b){var d=c.getAncestorByTagName(a,"li"),f=b+"_cookie";a=this.activeMenuItems[b].indexOf(a.rel);0<=a&&this.activeMenuItems[b].splice(a,1);a=new Date;a.setFullYear(a.getFullYear()+1);k.set(f,this.activeMenuItems[b].join("_"),{path:"/",expires:a});c.removeClass(d,"opened");c.addClass(d,"closed")},setValueToggle:function(a){g.on(a,"focus",function(){a.value==a.defaultValue&&(a.value="")});g.on(a,"blur",function(){""==a.value&&(a.value=a.defaultValue)})},resizePopupTicket:function(a){var b=FORTUNA.UI.popupTicketWindow||window,d=screen.height,f=b.outerHeight,h=c.getViewportHeight(b);f=YAHOO.env.ua.gecko?f-h:68;f=b.Dom.get("ticket_static_container").scrollHeight+f;f>d&&(f=d-100);b.resizeTo(null!=a?a:800,f)},toggleLotteryDate:function(){var a=c.get("lottery_form_date");this&&a&&(a.disabled="-4"==this.value?!0:!1)},openShadowbox:function(a,b){var d=-1==a.href.indexOf("?")?"?":"\x26";a.href+=d+"shadowbox\x3d1";Shadowbox.open(Shadowbox.buildCacheObj(a,b))},setNotification:function(a,b){var d=[];a&&(d[0]=c.get(a.id+"-set"),d[1]=c.get(a.id+"-cancel"),a.checked?!b||confirm(b)?(b&&(a.disabled=!0),location.href=d[0].href):a.checked=!1:location.href=d[1].href)},getWindow:function(){var a;try{window.opener.navigator&&(a=window.opener&&window===window.opener.FORTUNA.UI.popupTicketWindow?window.opener:window)}catch(b){}return a||window},toggleListRow:function(a){g.stopEvent(a);var b=this,d=g.getTarget(a);a=d.href;var f=d.id;d=c.getAncestorByTagName(d,"tr");var h=c.get(f+"-detail");f=c.getAncestorByTagName(h,"tr");var e=c.hasClass(d,"active")?!1:!0,r=document.createElement("div");r.className="ajax_loading";a+="\x26_ajax\x3d1";e?(c.addClass(d,"active"),c.removeClass(f,"hidden"),a&&(""==h.innerHTML&&h.appendChild(r),p.asyncRequest("GET",a,{success:function(a){a=a.responseText;0<=a.indexOf("DETAIL:OK")?h.innerHTML=a:window.location.href=location.href},failure:function(a){b.ajaxErrorHandler(a)}}))):(c.removeClass(d,"active"),c.addClass(f,"hidden"))},controlTicket:function(a){"undefined"!=typeof event&&(event.returnValue=!1);a=c.get(a);var b=c.get("ct_ticket_id"),d=c.get("ct_protection_code"),f=c.get("ct_heading");if(!checkForm.checkForm(a))return!1;if(a&&b&&d&&f){var h=document.createElement("a");h.href=a.action+"?control_ticket_id\x3d"+b.value+"\x26protection_code\x3d"+d.value;h.title=f.innerHTML+" "+b.value;FORTUNA.UI.openShadowbox(h,{width:800,height:500})}return!1},shadowboxOnFinish:function(){var a=c.get("shadowbox_body_inner"),b=c.get("shadowbox_img_prev")||document.createElement("a"),d=c.get("shadowbox_img_next")||document.createElement("a");c.get("shadowbox_nav_previous")?b.parentNode||(b.id="shadowbox_img_prev",b.href="javascript:Shadowbox.previous();",a.appendChild(b)):(b.parentNode&&a.removeChild(b),delete b);c.get("shadowbox_nav_next")?d.parentNode||(d.id="shadowbox_img_next",d.href="javascript:Shadowbox.next();",a.appendChild(d)):(d.parentNode&&a.removeChild(d),delete d)},previewShowMore:function(a){g.stopEvent(a);var b=g.getTarget(a);a=c.getAncestorByClassName(b,"preview-articles");b=c.getAncestorByClassName(b,"showmore");for(var d=c.getElementsByClassName("hidden","*",a),f=0;f<d.length;f++)c.removeClass(d[f],"hidden");a.removeChild(b)},previewInit:function(){var a=c.getElementsByClassName("info-block","div","hcarousel")[0],b=c.getElementsByClassName("preview-articles","div","hcarousel")[0];a&&b&&3<b.querySelectorAll("li").length&&c.addClass(a,"show-more")},checkAgreement:function(a,b){c.get(b);a.checked?this.enableButton(b):this.disableButton(b)},disableButton:function(a){a=c.get(a);c.removeClass(a,a.className);c.addClass(a,"disabled_w order");a.disabled=!0},enableButton:function(a){a=c.get(a);c.removeClass(a,a.className);c.addClass(a,"yellow_w order");a.disabled=!1},loadResource:function(a,b,d,c){b=b.toLowerCase();var f=!1;if(a&&b){document.getElementsByTagName("head");for(var e=document.getElementsByTagName(b),g=0,k=e.length;g<k;g++)if(0<=e[g].indexOf(a)){f=!0;break}if(d&&!f)"css"==b?q.css(d,{onSuccess:c}):q.script(d,{onSuccess:c});else return f}},fetchContent:function(a,b,d){if(a){var c=this;d=d||{};d=d.method?d.method.toUpperCase():"GET";p.asyncRequest(d,a+"\x26ts\x3d"+(new Date).getTime(),{failure:function(a){c.ajaxErrorHandler(a);b&&b.failure(a)},success:function(a){b&&b.success(a)}})}},loadOnlineChat:function(a){g.stopEvent(a);a=c.get("online_chat_loadit");var b=c.get("online_chat_frame"),d=this.getAttribute("href");b&&d&&(c.addClass(a,"hidden"),b.src=d,c.removeClass(b,"hidden"))},invalidateUserAccount:function(a){var b=e("#page-variables").data("invalidate-user");a=a||{};var c=a.success;a.success=function(){c&&c();FORTUNA.UI.accordionToggle.init()};b&&TDI.Ajax.Request.send(b,a)},logoutUser:function(a,b){const c=this.settings.links.logoutUrl;c&&(b&&b(),makeRequest(c).then(function(b){a&&a(b);200===b.status&&window.location.reload()}).catch(a))},refreshMarathonIndication:function(){var a=c.get("js-marathon-info");if(!a)return!1;var b=e(a).data("refresh-url");TDI.Ajax.Request.send(b,{start:function(){a.setAttribute("data-loading-overlay","true")},end:function(){a.removeAttribute("data-loading-overlay")}})},prepareInfoBox:function(){var a=c.get("info-prebox"),b=this,d=c.getElementBy(function(a){return"checkbox"==a.getAttribute("type")},"input",a);c.removeClass(this.dialog_overlay,"hidden");this.centerIt(a);c.removeClass(a,"vhidden");g.delegate(a,"click",function(f){var e=null;d.checked&&(e=new Date,e.setFullYear(e.getFullYear()+1));c.hasClass(this,"yes")&&g.stopEvent(f);k.set("confirm_age_"+b.actualState,!0,{path:"/",expires:e});b.closeDialogOverlay();c.addClass(a,"vhidden")},"a.yes")},isUsingPupUpTicket:function(){var a=this.getWindow(),b=a.document.getElementById("ticket_static_container");b=c.hasClass(b,"using_popup");return k.get("popup_ticket")&&b&&a!=window.opener?!0:!1},disableIt:function(a){if(a=c.get(a))a.disabled=!0},enableIt:function(a){if(a=c.get(a))a.disabled=!1},pushState:function(a){"pushState"in history&&a&&history.pushState(null,"",a)},toggleBox:function(a){if((a=c.getAncestorByClassName(a,"box"))&&a.id){var b=a.id+"-hidden";if(k.get(b))c.removeClass(a,"collapsed"),k.remove(b);else{var d=new Date;d.setMonth(d.getMonth()+1);c.addClass(a,"collapsed");k.set(b,1,{expires:d})}}},initBoxToggling:function(){var a=u.query(".box.collapsable .toggler"),b=this;if(a)g.on(a,"click",function(){b.toggleBox(this)})},initFixedBetFilter:function(){var a=document.getElementById("betTableDateFilter"),b=this;a&&(this.betFilterTopPosition=c.getY(a),g.on(window,"scroll",function(){b.toggleFilterFixed(a)}))},toggleFilterFixed:function(a){var b=c.getElementsByClassName("box","div","main_content")[1];if(this.betFilterTopPosition<c.getDocumentScrollTop()){if(!c.hasClass(a,"fixed")){c.addClass(a,"fixed right-shadow");var d=parseInt(c.getStyle(b,"margin-top"))+parseInt(a.offsetHeight)+parseInt(c.getStyle(a,"margin-bottom"));c.setStyle(b,"margin-top",d+"px");c.setStyle(a,"width",parseInt(b.offsetWidth)+"px")}}else c.removeClass(a,"fixed right-shadow"),d=parseInt(c.getStyle(b,"margin-top"))-parseInt(a.offsetHeight)-parseInt(c.getStyle(a,"margin-bottom")),c.setStyle(b,"margin-top",(0>d?0:d)+"px"),c.setStyle(a,"width","auto")},initSubmenusPositions:function(){var a=e("#main_sub_nav \x3e li \x3e ul");if(a)for(var b=0,c=a.length;b<c;b++){var f=(a[b].parentNode.offsetWidth-e(a[b]).width())/2,h=e(a[b].parentNode).offset();h.left>=Math.abs(f)?e(a[b]).css("margin-left",f+"px"):e(a[b]).css("margin-left",-1*h.left+"px")}},initMainArticleTables:function(){e(".main_article table:not(.no-holder)").not(".bet_table").wrap(function(){return'\x3cdiv class\x3d"table-holder '+this.className+'"\x3e\x3c/div\x3e'})},hidePlaceholder:function(a){var b=a.getAttribute("placeholder");b&&(a.setAttribute("data-placeholder",b),a.setAttribute("placeholder",""),c.addClass(a,"has-placeholder"))},showPlaceholder:function(a){var b=a.getAttribute("data-placeholder");b&&(a.setAttribute("placeholder",b),a.removeAttribute("data-placeholder",null),c.addClass(a,"has-placeholder"))},initSelectboxes:function(){e("select.jquery-ui").each(function(){var a=e(this),b=e(this).data("collision")?e(this).data("collision"):"flip";a.selectmenu();var c=a.selectmenu("widget"),f=e(c[0]).find(".ui-selectmenu").outerWidth();e(c[1]).addClass("left");e(this).data("class")&&(e(c[0]).addClass(e(this).data("class")),e(c[1]).addClass(e(this).data("class")));!1===e(this).data("resize-menu")&&e(c[1]).addClass("auto-width");e(this).data("menu-class")&&e(c[1]).addClass(e(this).data("menu-class"));a.selectmenu({menuWidth:f,style:"dropdown",positionOptions:{my:"left top",at:"left bottom",collision:b},change:function(b,c){document.createEvent?(b=document.createEvent("HTMLEvents"),b.initEvent("change",!0,!1),a[0].dispatchEvent(b)):document.createEventObject&&(b=document.createEventObject(),a[0].fireEvent("onchange",b))},open:function(){if(document.createEvent){var b=document.createEvent("HTMLEvents");b.initEvent("focus",!0,!1);a[0].dispatchEvent(b)}else document.createEventObject&&(b=document.createEventObject(),a[0].fireEvent("onfocus",b));b=e(this).selectmenu("widget");if(!e(b[1]).hasClass("auto-width")){var c=e(b[0]).find(".ui-selectmenu").outerWidth();e(b[1]).find(".ui-selectmenu-menu-dropdown").css({width:c+"px"})}},close:function(){if(document.createEvent){var b=document.createEvent("HTMLEvents");b.initEvent("blur",!0,!1);a[0].dispatchEvent(b)}else document.createEventObject&&(b=document.createEventObject(),a[0].fireEvent("onblur",b))}})});e("#selling_point_select-menu li").each(function(a){e(this).attr("title",e(this).text())});e("#selling_point_select").change(function(){e(".ui-selectmenu-status").attr("title",e(".ui-selectmenu-status").text())})},initBrowser:function(){Function("/*@cc_on return document.documentMode\x3d\x3d\x3d10@*/")()&&(document.documentElement.className+=" ie10")},initControlTicketTooltip:function(){var a=c.get("footer-control-ticket");a&&(a=a.getElementsByTagName("input"),g.on(a,"focus",function(){c.hasClass(this.parentElement,"control-ticket-tooltip-holder")&&c.addClass(this.parentElement,"hover")}),g.on(a,"blur",function(){c.hasClass(this.parentElement,"control-ticket-tooltip-holder")&&c.removeClass(this.parentElement,"hover")}))},isUserLogged:function(a,b){var d=function(){return c.get("user-profile-holder")?!0:!1};return a?(FORTUNA.UI.invalidateUserAccount({success:function(){var a=d();b&&"function"===typeof b&&b.call(null,a)}}),null):d()},ajaxErrorHandler:function(a){function b(){var a=c.get("logout-reload-time"),b=parseInt(a.innerHTML,10);(new FORTUNA.UI.Countdown(a,b,function(a,b){a.innerHTML=b.seconds},function(){FORTUNA.UI.errorModal.openDialog({contents:"Str\u00e1nka se obnovuje, vydr\u017ete pros\u00edm...",closeable:!1});window.location.reload()})).run()}if(!a)return!1;switch(parseInt(a.status,10)){case 403:FORTUNA.UI.errorModal.openDialog({contents:'Do\u0161lo k Va\u0161emu odhl\u00e1\u0161en\u00ed. \x3cbr\x3e\x3cbr\x3eZa \x3cspan id\x3d"logout-reload-time"\x3e15\x3c/span\x3e vte\u0159in dojde k obnoven\u00ed str\u00e1nky, nebo klikn\u011bte \x3ca href\x3d"javascript:window.location.reload();"\x3ena tento odkaz\x3c/a\x3e pro obnoven\u00ed ihned.',closeable:!1});b();FORTUNA.UI.invalidateUserAccount();FORTUNA.UI.ticketManager.reloadTicket();break;default:Utils.log("Error "+a.status+" "+a.message+(a.options&&a.options.url?" on URL: "+a.options.url:""))}},initCasinoTransferButtons:function(){var a=this;e("#user-holder").on("click",".casino-transfer-link",function(b){a.openCasinoTransferPage(b)})},initProfileUpdateButton:function(){var a=this,b=e("#user-holder");b.on("click",".profile-update-link",function(d){var f=c.get("top-panel").offsetHeight+"px",h=b.find(".js-toggle-item").index(b.find(".js-expanded"))||0;k.set("usermenu_idx",h,{path:"/"});d.preventDefault();e(d.currentTarget).addClass("refreshing");a.invalidateUserAccount({success:function(){a.closeUserMenu();a.openUserMenu(f);k.set("usermenu_idx",0,{path:"/"})}})});b.on("mouseleave",FORTUNA.UI.accordionToggle.reset)},openCasinoTransferPage:function(a){FORTUNA.UI.openModalWindow(a)},openModalWindow:function(a){a.preventDefault();this.invalidateUserAccount();a=e(a.currentTarget).closest("a");a.size()&&(a=a[0],window.open(a.href,"transfer_page","width\x3d640,height\x3d660,left\x3d"+(screen.width-640)/2+",top\x3d"+(screen.height-660)/2))},expandOpenedSportMenuElements:function(){var a=e.cookie("sports_menu_cookie"),b=e.cookie("sports_menu_last_opened_cookie"),c=e("#page-variables").data("action"),f=e("#page-variables").data("markettype");if(a){a=a.split("_");for(var h;null!=(h=a.shift());)e("#sport-"+h).removeClass("closed").addClass("opened")}b&&(e("#sport-"+b).removeClass("closed").addClass("opened"),e.removeCookie("sports_menu_last_opened_cookie",{path:"/"}));c&&e("#action-"+c+"."+f).find("a").addClass("active")},initSportMenuItemTitleClick:function(){var a=this;e("#sports_menu").on("click",".js-sport-parent",function(){a.onSportMenuItemTitleClick(this)});e("#sports_menu .js-sport-menu-item ul").on("click","a",function(){a.onSportMenuLeagueLinkClick(this)})},onSportMenuItemTitleClick:function(a){e.cookie("sports_menu_last_opened_cookie",a.rel,{path:"/"})},onSportMenuLeagueLinkClick:function(a){(a=e(a).parents(".js-sport-menu-item").find(".js-sport-toggler").attr("rel"))&&e.cookie("sports_menu_last_opened_cookie",a,{path:"/"})},updateSpResultTable:function(a,b){var c=FORTUNA.UI,f=YAHOO.util.Connect,e=YAHOO.util.Dom,g=document.getElementById("actual_phase_id"),k=e.get(a);if(k){a=k.form;var m=e.get(b);b=a.action+"?branch\x3d"+k.value+"\x26ts\x3d"+(new Date).getTime()+"\x26_ajax\x3d1\x26action\x3dupdate_sp_result_table";a.getAttribute("data-parameters")&&(b+="\x26"+a.getAttribute("data-parameters"));g&&(b+="\x26phase_id\x3d"+g.innerHTML);c.showLoadingOverlay(m);b&&f.asyncRequest("GET",b,{success:function(a){c.hideLoadingOverlay();m.innerHTML=a.responseText},failure:function(a){c.hideLoadingOverlay();m.innerHTML=a.status+" - "+a.statusText}})}},updateOverallResultTable:function(a,b){var c=FORTUNA.UI,e=YAHOO.util.Dom,h=YAHOO.util.Connect;b=document.getElementById(b);var g=e.get(b);a=a.href;c.showLoadingOverlay(b);a&&h.asyncRequest("GET",a,{success:function(a){c.hideLoadingOverlay();g.innerHTML=a.responseText},failure:function(a){c.hideLoadingOverlay();g.innerHTML=a.status+" - "+a.statusText}});return!1},smoothScroll:function(a,b,c){if("undefined"!=typeof a&&null!=a){"object"==typeof a&&a.href&&(a=a.href.substring(a.href.indexOf("#")));if("string"==typeof a){"#"==a.charAt(0)&&(a=a.substr(1));var d=document.getElementsByName(a);d=d.length?d[0]:document.getElementById(a);for(a=0;d;)a+=d.offsetTop,d=d.offsetParent}if(!(0>=a)){c&&c.preventDefault();c=a-(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0);var e=Math.floor((b||1E3)/25);if(1>e)window.scrollTo(0,a);else var g=c/e,k=0,m=(g-g|0)*e,l=window.setInterval(function(){k<e?(window.scrollBy(0,g),k++):(window.scrollBy(0,m),clearInterval(l))},25)}}},updateAcceptedTicketsCounter:function(){var a=e("#sidebar_tikets_list"),b=FORTUNA.UTILS.editUrlParams(a.attr("href"),{mode:"ticket_list_count"});b&&(a.addClass("loading-overlay"),TDI.Ajax.Request.send(b))},AcceptedTicketCounter:{_$counter:null,getCounter:function(){this._$counter||(this._$counter=e("#accepted-tickets-count"));return this._$counter},update:function(){var a=this.getCounter();if(a.length){var b=e("#sidebar_tikets_list_content .ticket_status_accepted");b.length?(a.text(b.length),a.show()):a.hide()}},increment:function(){var a=this.getCounter();if(a.length){var b=parseInt(a.text());isNaN(b)?a.text(1):a.text(++b);a.show()}}},closeCookieDisclaimer:function(){e("#cookies-disclaimer").hide(0,function(){e.cookie("cookies_disclaimer","closed",{path:"/",expires:365});e(document.body).trigger("resize.layout")});return!1},hideHideableButtons:function(){e(".button.once").each(function(){var a=e(this),b=a.data("hideable-for")&&a.data("hideable-for").toUpperCase()||"ALL";if("LOGGED"==b&&FORTUNA.UI.user||"ANONYMOUS"==b&&!FORTUNA.UI.user||"ALL"==b)if(b=a.data("name"),FORTUNA.UI.user&&(b+="_"+l.hash(e("#user-profile-holder .user-profile-username").text())),e.cookie("hidden-button-"+b)){b=a.data("alternative");var c=e(a.data("hideable-relatives"));a.addClass("hidden");c.addClass("hidden");b&&a.after(b)}})},initHideableButtons:function(){this.hideHideableButtons();e(document.body).on("click",".button.once",function(a){var b=e(this),c=b.data("message");b.data("no-go")&&a.preventDefault();var f=b.data("hideable-for")&&b.data("hideable-for").toUpperCase()||"ALL";"LOGGED"==f&&FORTUNA.UI.user||"ANONYMOUS"==f&&!FORTUNA.UI.user||"ALL"==f?(a=b.data("name"),FORTUNA.UI.user&&(a+="_"+l.hash(e("#user-profile-holder .user-profile-username").text())),b=b.data("expires")||30,e.cookie("hidden-button-"+a,"true",{path:"/",expires:b}),FORTUNA.UI.hideHideableButtons()):c&&((new ET.ModalDialog).open({contents:c}),a.stopPropagation())})},initOpenPlayerLimits:function(){var a=this;e("body").on("click",".player-limits-opener",function(b){a.openPlayerLimits(b)})},openPlayerLimits:function(a){a.preventDefault();this.invalidateUserAccount();a=e(a.currentTarget).closest("a");a.size()&&(a=a[0],FORTUNA.UI.openShadowbox(a,{width:800,height:690,addClass:"casino_iforium_transfer_shadowbox"}))},openDepositBox:function(a,b){null!=b&&b.preventDefault();e("#"+a).removeClass("hidden-box")},closeDepositBox:function(a,b){b.preventDefault();a="#"+a;e(a).addClass("hidden-box");e(a+" #msg-holder").addClass("hidden")},logoutCasino:function(){console.log("Casino logout; starting");window.history.replaceState({},document.title,window.location.pathname);e.ajax({url:"https://login.ifortuna.cz/Logout.php?allSessions\x3d1\x26casinoname\x3dbifortuna.cz\x26behaviour\x3dall\x26realMode\x3d1\x26responseType\x3djson",type:"GET",timeout:5E3,xhrFields:{withCredentials:!0},success:function(a){null==a||null==a.errorCode||0!=a.errorCode&&3!=a.errorCode?(console.log("Casino logout; server didn't respond correctly:"),alert("Odhl\u00e1\u0161en\u00ed z casina se nezda\u0159ilo. Prove\u010fte pros\u00edm manu\u00e1ln\u00ed odhl\u00e1\u0161en\u00ed na str\u00e1nce casina.")):console.log("Casino logout; logout success:");console.log(a)},error:function(){console.log("Casino logout; casino response timed out or didn't recieved 200 code");alert("Odhl\u00e1\u0161en\u00ed z casina se nezda\u0159ilo. Prove\u010fte pros\u00edm manu\u00e1ln\u00ed odhl\u00e1\u0161en\u00ed na str\u00e1nce casina.")}})},casinoKeepalive:function(){console.log("Casino keepalive; starting");if("undefined"===typeof Storage)console.log("Upgrade to browser from this century");else{var a=localStorage.getItem("casinoKeepaliveLastUpdate"),b=!1;null==a?(console.log("Casino keepalive; localStarge not found"),b=!0):(console.log("Casino keepalive; localStorage found: "+a),a=Math.floor((new Date-new Date(Number(a)))/6E4),console.log("Casino keepalive; minutes since last keepalive: "+a),"10"<=a?(console.log("Casino keepalive; keepalive expired"),b=!0):console.log("Casino keepalive; not yet expired"));b&&(console.log("Casino keepalive; calling keepalive"),localStorage.setItem("casinoKeepaliveLastUpdate",(new Date).getTime()),e.ajax({url:"https://login.ifortuna.cz/KeepAlive.php?casinoname\x3dbifortuna.cz\x26realMode\x3d1\x26responseType\x3djson",type:"GET",timeout:5E3,xhrFields:{withCredentials:!0},success:function(a){null==a||null==a.errorCode||0!=a.errorCode&&3!=a.errorCode?console.log("Casino keepalive; server didn't respond correctly:"):console.log("Casino keepalive; success");console.log(a)},error:function(){console.log("Casino keepalive; http request failed")}}),e.ajax({url:"/cz/keepalive/index.js",type:"GET",timeout:5E3,xhrFields:{withCredentials:!0},success:function(a){null==a||"OK"!=e.trim(a.toUpperCase())?console.log("Casino keepalive internal; server didn't respond correctly:"):console.log("Casino keepalive internal; success:");console.log(a)},error:function(){console.log("Casino keepalive internal; http request failed")}}))}},logoutCasino2:function(){console.log("Logging out from casino");var a=!1;setTimeout(function(){a||(alert("Odhl\u00e1\u0161en\u00ed z casina se nezda\u0159ilo. Prove\u010fte pros\u00edm manu\u00e1ln\u00ed odhl\u00e1\u0161en\u00ed na str\u00e1nce casina."),console.log("Time for casino response timed out"));try{document.body.removeChild(b)}catch(d){}},5E3);var b=document.createElement("iframe");b.onload=function(){console.log("Odhl\u00e1\u0161en\u00ed z casina se nezda\u0159ilo. Prove\u010fte pros\u00edm manu\u00e1ln\u00ed odhl\u00e1\u0161en\u00ed na str\u00e1nce casina.");a=!0;document.body.removeChild(b)};b.src="https://login.ifortuna.cz/Logout.php?casinoname\x3dbifortuna.cz\x26realMode\x3d1\x26responseType\x3djson";b.style.display="none";document.body.appendChild(b)},setPageVariable:function(a,b){if("string"!==typeof a||!b)return!1;document.getElementById("page-variables").setAttribute("data-"+a,b)},removePageVariable:function(a,b){if("string"!==typeof a)return!1;document.getElementById("page-variables").removeAttribute("data-"+a)},scrollToTop:function(a){const b=window.scrollY,c=Math.PI/(a/15),e=b/2;let g=0,k,l=setInterval(function(){0!=window.scrollY?(g+=1,k=e-e*Math.cos(g*c),window.scrollTo(0,b-k)):clearInterval(l)},15)}};FORTUNA.components.push(FORTUNA.UI);g.onDOMReady(function(){FORTUNA.UI.domready()},!0,FORTUNA);g.on(window,"load",function(){FORTUNA.UI.load()},!0,FORTUNA)})(jQuery);
			/* /fortuna_ui */
			/* track_ga_events_js */

(function(){Utils=FORTUNA.UTILS;FORTUNA.UI.GAEvents={confs:{DEFAULT_SELECTOR:".GATrack",maxEvents:20},eventsCounter:0,init:function(){this.initGlobalEvents();this.BetOfferEvents.initBetItemIconUsage.call(this);this.BetOfferEvents.initSportMenuUsage.call(this);this.TopBetsEvents.initBetItemsAdded.call(this);this.TopBetsEvents.initTabsChanged.call(this);this.Ticket={superticketUsage:!0,tabsUsage:!0,methodMenuUsed:!0,pinnedButtonUsage:!0,quickStakeValuesUsage:!0,stakeSliderUsage:!0,dynamicStakeValueUsage:!0,acceptButtonUsage:!0,previewButtonUsage:!0,clearButtonUsage:!0,saveButtonUsage:!0};this.Deposit.initDepositSubmitUsage.call(this);this.Withdraw.initWithdrawSubmitUsage.call(this)},initGlobalEvents:function(){$(document).on("click",this.confs.DEFAULT_SELECTOR,FORTUNA.UI.GAEvents._onElementClick)},setSpecificEvents:function(a,b,c){a=$(a);if(a.length){var e=c.evt||"click";c=c.callback||$.proxy(function(a){this.defaultCallbackHandler(a)},this);if(b)a.on(e,b,c);else a.on(e,c)}},defaultCallbackHandler:function(a){this._onElementClick(a)},_onElementClick:function(a){a=$(a.target);FORTUNA.UI.GAEvents.trackGAEvent(a)},_onElementChange:function(a){a=$(a.target);FORTUNA.UI.GAEvents.trackGAEvent(a)},TopBetsEvents:{initBetItemsAdded:function(){this.setSpecificEvents("#homepage_actions_content_holder",".bet_table_holder .col_bet a",{callback:$.proxy(function(a){a=$(a.target).closest(".tabbed_content").data("tab-id");a=$("#homepage_actions_"+a).html();this.trackGAEvent("topnabidka","placebet",a)},this)})},initTabsChanged:function(){this.setSpecificEvents("#homepage_actions",".tab a",{callback:$.proxy(function(a){a=$(a.target).html();this.trackGAEvent("topnabidka","tabchange",a)},this)})}},BetOfferEvents:{initBetItemIconUsage:function(){this.setSpecificEvents("#main_content","a.bet_table_icon",{callback:$.proxy(function(a){if(!a)return!1;a="a"===a.target.tagName.toLowerCase()?$(a.target):$(a.target).closest("a");(a=a.data("article-type")||a.attr("title"))&&this.trackGAEvent("bet-offer","bet-item-icon",a)},this)})},initSportMenuUsage:function(){this.setSpecificEvents("#sports_menu","a",{callback:$.proxy(function(a){var b=$(a.target),c=b.closest(".js-sport-menu-item");a=c.data("sport-title");c=c.hasClass("closed")?"zbalene":"rozbalene";b=b.hasClass("js-sport-parent")?"sport":"action";b+="-"+c;a&&b&&this.trackGAEvent("sports-menu",a,b)},this)})}},Ticket:{},Deposit:{initDepositSubmitUsage:function(){this.setSpecificEvents("#payment-methods","form",{evt:"submit",callback:function(a){var b=$(a.target).closest(".method");a=b.attr("id").replace("_pagelet","");b=b.find(".pm-amount-field").val();a&&b&&FORTUNA.UI.GAEvents.trackGAEvent("DepositBegin",a,b)}})},trackDepositReturnUsage:function(){var a=$("#_deposit-result");if(a.length){a=a.data("result");var b=$.cookie("DONATION_last_method");if(a&&b&&(a=a.charAt(0).toUpperCase()+a.substr(1),b=b.split("!"),2==b.length)){var c=b[0].replace("_pagelet","");FORTUNA.UI.GAEvents.trackGAEvent("DepositResult"+a,c,b[1])}}}},Withdraw:{initWithdrawSubmitUsage:function(){this.setSpecificEvents("#withdraw-form",null,{evt:"submit",callback:function(a){var b=$(a.target).closest("#withdraw-form");a=b.find("#amount");b=b.find("#withdraw_type");a=a.val();b=b.val();a&&b&&FORTUNA.UI.GAEvents.trackGAEvent("Withdraw",b,a)}})}},_adjustCounter:function(a){this.eventsCounter>=this.confs.maxEvents?this._resetCounter():this.eventsCounter+=1;if(a)return this.eventsCounter},_resetCounter:function(){Utils.log("\x3e\x3e ",this.eventsCounter," requests tracked \x3e\x3e reseting counter, sending page request");this.trackPage();0!==this.eventsCounter&&(this.eventsCounter=0)},trackPage:function(a){var b=Utils.editUrlParams(location.href);a=Utils.editUrlParams("string"===typeof a?a:b,{gaPage:1});"undefined"!==typeof _gaq&&a&&_gaq.push("send",{hitType:"pageview",page:a,title:document.title})},trackGAEvent:function(a,b,c){var e=$(a);a=e.data("ga-track-scope")||a||"N/A";b=b||e.data("ga-track-event");c=c||e.data("ga-track-value");this._adjustCounter(!0);"undefined"!==typeof _gaq&&a&&b&&_gaq.push(["_trackEvent",a,b,c])}};FORTUNA.UI.GTMEvents={init:function(){this._initBetItemDetailOpen()},_isDataLayerPresent:function(){return"undefined"!=typeof dataLayer&&null!=dataLayer&&dataLayer.push?!0:!1},trackBetDetailPageSeen:function(a,b,c,e){a&&b&&c&&e&&this._isDataLayerPresent()&&dataLayer.push({ecommerce:{detail:{products:[{name:b,id:a,brand:e,category:c}]}}})},_initBetItemDetailOpen:function(){$("#main_content").on("click",".bet_item_detail_href",$.proxy(function(a){a&&a.target&&this._trackBetItemDetailOpen(a.target)},this))},_trackBetItemDetailOpen:function(a){if(a&&this._isDataLayerPresent()){var b=$(a),c=b.parents("tr");a=c.data("gtm-enhanced-ecommerce-id");var e=c.data("gtm-enhanced-ecommerce-match")+" - "+c.data("gtm-enhanced-ecommerce-sport")+" - "+c.data("gtm-enhanced-ecommerce-league"),f=c.data("gtm-enhanced-ecommerce-sport"),g=c.data("gtm-enhanced-ecommerce-league");switch($("#gtm-enhanced-ecommerce-list").data("type")){case "bet-item-detail":var d=Utils.trimString($("#main_content h1.bet_table_title:first").text());break;case "user-defined":d=Utils.trimString($("#bet_banner_holder .offer_by_user:first").text());break;case "user-selected-actions":d=Utils.trimString($("#bet_banner_holder .offer_by_sport:first").text());break;case "sport-list":d=Utils.trimString($("#main_content h3.bet_table_title:first").text()).split("|");d=Utils.trimString(d[0]);break;case "action-list":d=Utils.trimString($("#main_content h1.bet_table_title:first").text());break;case "offer-by-date":d=Utils.trimString($("#bet_banner_holder .offer_by_date:first").text())}d?c=$("#main_content .bet_table tbody tr:not(.header-row)").index(c):(b=b.parents(".tabbed_content"),d=b.attr("id").replace("_content",""),d=$("#"+d),d=Utils.trimString(d.text()),c=b.find(".bet_table tbody tr:not(.header-row)").index(c));a&&e&&f&&g&&d&&null!=c&&!(0>c)&&dataLayer.push({event:"productClick",ecommerce:{click:{actionField:{list:d},products:[{name:e,id:a,brand:g,category:f,position:c}]}}})}},_trackHomepageTabOfferSeen:function(a){this._isDataLayerPresent();var b="Tabbed - ";if(a){var c="#"+$(a).attr("id")+"_content";b+=Utils.trimString($(a).text());a=$(c)}else b+=Utils.trimString($("#homepage_actions .tab_active:not(.hidden) a").text()),a=$("#homepage_actions_content_holder .tabbed_content:not(.hidden)");var e=[];a.find(".bet_table tbody tr").each(function(a){if("undefined"!=typeof dataLayer&&dataLayer&&dataLayer.push){var c=$(this),d=c.data("gtm-enhanced-ecommerce-id"),f=c.data("gtm-enhanced-ecommerce-match")+" - "+c.data("gtm-enhanced-ecommerce-sport")+" - "+c.data("gtm-enhanced-ecommerce-league"),h=c.data("gtm-enhanced-ecommerce-sport"),k=c.data("gtm-enhanced-ecommerce-league");c=c.data("gtm-enhanced-ecommerce-variant");d&&f&&h&&k&&c&&e.push({id:d,name:f,brand:k,category:h,variant:c,list:b,position:a})}});e.length&&dataLayer.push({event:"impression",ecommerce:{impressions:e}})},_trackHomepageTabOfferSeenByOrder:function(a){null==a||0>a||(a=$("#homepage_actions a").get(a))&&this._trackHomepageTabOfferSeen(a)},_initTabHomepageTracking:function(){$("#homepage_actions.tuck-ins").on("click","a",$.proxy(function(a){this._trackHomepageTabOfferSeen(a&&a.target)},this))}};FORTUNA.run(function(){FORTUNA.UI.GAEvents.init();FORTUNA.UI.GTMEvents.init()})})();
			/* /track_ga_events_js */
			/* fortuna_tdi */

$(document).on("tdi:ajax:attr",function(a,b){a=$("#"+b.target);var d=b.name,c=b.value;switch(b.action){case "add-class":a.addClass(c);break;case "remove-class":a.removeClass(c);break;case "remove":a.removeAttr(d);break;default:a.attr(d,c)}});
			/* /fortuna_tdi */
			/* fortuna_modal */

FORTUNA.Modal={manager:null,init:function(){FORTUNA.Modal.manager=new ET.ModalDialogManager({id:"fortuna-modal-dialog",attrsClose:{title:FORTUNA.localization.close},zIndex:2E3,closeOnShimClick:!1,positionTop:"none"});FORTUNA.Modal._bind()},open:function(a){if(!a||"undefined"===typeof a.contents)return!1;FORTUNA.Modal.manager||FORTUNA.Modal.init();FORTUNA.Modal.manager.openDialog($.extend({id:"fortuna-modal-dialog"},a||{}))},close:function(a){FORTUNA.Modal.manager.closeDialog(a)},_bind:function(){$(document).on("click.modal",".modal",function(a){a=$(this);FORTUNA.Modal.open({id:a.data("modal-id"),contents:$(a.data("modal-contents")).html()||a.data("modal-contents")})});$(document).on("tdi:ajax:dialog.modal",function(a,b){switch(b.action){case "open":FORTUNA.Modal.open(b);break;case "close":FORTUNA.Modal.close(b.id)}})}};
			/* /fortuna_modal */
			/* animations_js */

(function(){var f=YAHOO.util,e=f.Dom,h=f.Event,l=f.Anim,m=f.Easing;f={initToggleableElements:function(a,c){function b(a){var b=a.getAttribute("data-elm-id");(b=e.get(b))&&!a.__toggleable&&(this._toggleableElementClassInit(a,b),this._toggleableElementCallback(a))}a="string"===typeof a?e.get(a):a;if(!0===c)b.call(this,a);else{c=(a||document).querySelectorAll(".toggleable");a=0;for(var g=c.length;a<g;a++)b.call(this,c[a])}},_toggleableElementClassInit:function(a,c){e.hasClass(c,"invisible")?e.replaceClass(a,"opened-toggler","closed-toggler"):e.replaceClass(a,"closed-toggler","opened-toggler");a.__toggleable=!0},_toggleableElementCallback:function(a){h.on(a,"click",function(c){var b=e.get(a.getAttribute("data-elm-id"));FORTUNA.UI._toggleableElementsHandler(a,b);h.preventDefault(c)})},_toggleableElementsHandler:function(a,c){h.removeListener(a,"click","toggleElement");e.setStyle(c,"overflow","hidden");FORTUNA.UI.toggleElement(c,.2,null,{complete:function(){FORTUNA.UI._toggleableElementCallback(a);FORTUNA.UI._toggleableElementClassInit(a,c)}})},toggleElement:function(a,c,b,g){var d=e.get(a);c=c?parseFloat(c):.5;var f=!1;a=d.getAttribute("data-parent")?d.getAttribute("data-parent"):null;b=!1!==b||"false"!==a?b||a:null;b=e.get(b)?e.get(b):null;d&&(f=e.hasClass(d,"invisible"),d.runningAnimation||(f?(b&&(a=parseInt(e.getStyle(b,"padding-left"))+parseInt(e.getStyle(b,"padding-right")),d.style.width=b.offsetWidth-a+"px"),b=parseInt(d._height?d._height:d.offsetHeight),b={height:{to:b}},d.style.height="0px",e.removeClass(d,"invisible")):(b={height:{to:0}},d._height=d.offsetHeight,d.style.width="auto"),c=new YAHOO.util.Anim(d,b,c,YAHOO.util.Easing.easeOut),c.onStart.subscribe(function(){g&&g.start();d.runningAnimation=!0}),c.onComplete.subscribe(function(){f||e.addClass(d,"invisible");d.runningAnimation=!1;e.setStyle(d,"overflow","");g&&g.complete()}),c.animate(),g&&"function"===typeof g&&g()))},scrollWindowToTop:function(a){var c=this;a=parseInt(a)||e.getDocumentScrollTop();var b=a-50;0>b&&window.scrollTo(0,0);0<b&&setTimeout(function(){window.scrollTo(0,b);c.scrollWindowToTop(b)},15)},fadeElement:function(a,c,b){a=e.get(a);c=c||{};var f=c.time||.5;c=c.method&&"in"==c.method.toLowerCase()?1:0;if(a&&!isNaN(c))return a=new l(a,{opacity:{to:c}},f,m.easeOut),a.onStart.subscribe(function(){b&&b.start()}),a.onComplete.subscribe(function(){b&&"function"===typeof b?b():b&&b.complete()}),a.animate(),a}};FORTUNA.run(function(){FORTUNA.UI.initToggleableElements()},!0);if(FORTUNA.UI)for(var k in f)f.hasOwnProperty(k)&&(FORTUNA.UI[k]=f[k])})();
			/* /animations_js */
			/* dialog_windows_js */

(function(){var c=YAHOO.util.Dom,k=YAHOO.util.Event,h=FORTUNA.UI,p=FORTUNA.UTILS,m=YAHOO.util.Cookie,l={Dialog:{userCRMInfo:{dataEl:null,init:function(){""===h.dialog_overlay_content.innerHTML&&(this._findDataElement(),this.dataEl&&h.fillDialogOverlay(this.dataEl,!1,function(){h.showDialogOverlay(!0,null,{position:"X"})}))},_findDataElement:function(){var a=c.get("crm-info-wrapper");a&&(this.dataEl=a)}}},dialog_overlay_content:null,dialog_overlay:null,initDialog:function(){h.dialog_overlay_content=c.get("dialog_overlay_content");h.dialog_overlay=c.get("dialog_overlay")},setShowHideMethods:function(a,b){function d(a){a.fn={};a.fn.show=function(){f._show.call(a);b&&b.show&&b.show.call(this)};a.fn.hide=function(){f._hide.call(a);b&&b.hide&&b.hide.call(this)}}var f=this;a.length||(a=c.get(a));a=[].concat(a);for(var e=0,g=a.length;e<g;e++)d(a[e])},_show:function(){c.removeClass(this,"invisible")},_hide:function(){c.addClass(this,"invisible")},_getViewportDimensions:function(){if("undefined"!=typeof window.innerWidth){var a=window.innerWidth;var b=window.innerHeight}else a=document.documentElement.clientWidth,b=document.documentElement.clientHeight;return{width:a,height:b}},_getViewportCenter:function(a){var b=this._getViewportDimensions(),c=this.getScrollXY();wTop=b.height/2;wLeft=b.width/2;offsetX=a?a.offsetWidth/2:0;X_=Math.ceil(wLeft-offsetX);offsetY=a?a.offsetHeight/2:0;Y_=Math.ceil(wTop-offsetY+c.top);return{X:X_,scrollX:c.left,Y:Y_,scrollY:c.top}},_getRootDimensions:function(a,b,d){if(a)return(b=c.get(b))?{X:Math.ceil(b.offsetWidth/2-a.offsetWidth/2),Y:Math.ceil(b.offsetHeight/2-a.offsetHeight/2)}:this._getViewportCenter(a)},getScrollXY:function(){return{top:c.getDocumentScrollTop(),left:c.getDocumentScrollLeft()}},centerIt:function(a,b){if(c.get(a)){a=c.get(a).tagName?c.get(a):c.get(a)[0];b=b?b:{};var d=b.position?b.position:null,f=b.fixed?b.fixed:null,e=c.get(b.root)?c.get(b.root):window,g=e!==window?this._getRootDimensions(a,e):this._getViewportCenter(a);b=b.top&&parseInt(b.top)?parseInt(b.top):0;e===window&&(b=800<e.innerHeight?100:50);if(a&&g)switch(d){case "X":a.style.left=g.X+"px";f||(a.style.top=g.scrollY+b+"px");break;case "Y":a.style.top=g.Y+"px";break;default:a.style.left=g.X+"px",a.style.top=g.Y+"px"}}},showDialogOverlay:function(a,b,d){var f=this.getPageHeight(),e=c.get("close_dialog_window");this.dialog_overlay_content&&this.dialog_overlay&&(a?(e||(e=document.createElement("span"),e.id="close_dialog_window",e.innerHTML="Zav\u0159\u00edt X",this.dialog_overlay_content.appendChild(e)),k.on(e,"click",this.closeDialogOverlay,!0,this)):e&&(k.purgeElement(e,"click"),e.parentNode.removeChild(e)),b&&this._processOverlayClasses(b),this.dialog_overlay.style.height=f+"px",this.centerIt(this.dialog_overlay_content,d),c.removeClass([this.dialog_overlay,this.dialog_overlay_content],"invisible"),b&&0!==b.length||(this.dialog_overlay.className=""))},_processOverlayClasses:function(a){if("string"===typeof a)c.addClass([this.dialog_overlay,this.dialog_overlay_content],a);else{var b=a.overlay;a=a.content;if(b)for(var d=0,f=b.length;d<f;d++)c.addClass(this.dialog_overlay,b[d]);if(a)for(b=0,d=a.length;b<d;b++)c.addClass(this.dialog_overlay_content,a[b])}},closeDialogOverlay:function(){this.dialog_overlay_content&&this.dialog_overlay&&(this.dialog_overlay.className="invisible",this.dialog_overlay_content.className="invisible dialog_overlay_content")},fillDialogOverlay:function(a,b,d){var f=c.get(a);if(a=null===f?a:b?f:f.innerHTML)"string"===typeof a?this.dialog_overlay_content.innerHTML=a:this.dialog_overlay_content.appendChild(a),d?d():this.showDialogOverlay(!0)},getPageHeight:function(){return c.getDocumentHeight()},prepareAjaxLoader:function(a,b){var d=document.createElement("div");return(b=c.get(b))?(d.className=a,b.appendChild(d),d):!1},prepareCustomElement:function(a){var b=a||{};a=b.id;var d=b.clsName,f=c.get(b.appendElm||document.body),e=b.generateId?b.generateId:!1;b=b.appendMethod;var g=document.createElement("div");e||!a?c.generateId(g,a||"custom-dialog"):g.id=a||"custom-dialog";c.addClass(g,d);switch(b){case "before":c.insertBefore(g,f);break;case "after":c.insertAfter(g,f);break;default:f.appendChild(g)}g.destroy=function(){f.removeChild(g)};return g},userTicketGratulation:{ticketNotifyElm:null,ticketIds:[],notifyUpdateInt:null,notifyHideTO:null,notifyHideTOTime:3E3,updateInterval:null,updateIntervalTime:9E4,cacheLifetime:3E4,animation:null,testingMode:!1,testingModeParam:"winningTicketsTest\x3d1",initTicketNotification:function(){this.testingMode=-1<window.location.href.indexOf(this.testingModeParam);this._prepareDialogWindow();var a=this;if(this.ticketNotifyElm)this.updateTicketNotify(),this.updateInterval=setInterval(function(){a.updateTicketNotify()},a.updateIntervalTime),this.testingMode&&setInterval(function(){FORTUNA.UI.isUserLogged(!0,function(a){a||alert("User is not logged")})},6E4);else throw"Dilaog element not found.";},_prepareDialogWindow:function(){var a=this.ticketNotifyElm;a||(a=document.createElement("div"),a.id="tickets-evaluated",c.addClass(a,"invisible"),this.ticketNotifyElm=a,c.insertAfter(a,c.get("main_wrapper").lastChild),this.initDialogEvents(),h.setShowHideMethods(a));$("#user-profile-holder");a=$("#tickets-evaluated");var b=$("#sidebar_ticket");b.length&&(a.removeClass("arrow_top").addClass("arrow_right"),a.css({top:b.position().top+11,left:"auto",right:$("#right_content_tabs").width()+11,bottom:"auto",width:"auto"}))},initDialogEvents:function(){var a=this;k.delegate(this.ticketNotifyElm,"mouseover",function(b){b=c.getAncestorBy(k.getTarget(b),function(a){return"tickets-evaluated"===a.id});a.notifyHideTO&&b&&a._procesHoverStopEvent.call(a)},"*",this,!0);k.delegate(a.ticketNotifyElm,"mouseout",function(b){a.setHideNotifyTimeout()},".holder");k.delegate(this.ticketNotifyElm,"click",a.hideTicketNotification,".close",this,!0);k.delegate(this.ticketNotifyElm,"click",function(b){k.preventDefault(b);a.deleteTicketsCookie();h.openShadowbox(this,{width:890,height:500,continuous:!1,addClass:"ticket_preview_shadowbox"})},"a")},updateTicketNotify:function(){var a=this,b=c.getAttribute(h.settings.linksHolder,"data-user-ticket-notify"),d={success:function(b){var c=document.createElement("div");c.innerHTML=b.responseText;var d=a._getTicketsData(c),f=function(){a.ticketNotifyElm.innerHTML=b.responseText;a.processTickets.call(a,d)};d?FORTUNA.UI.invalidateUserAccount({success:function(){try{a._prepareDialogWindow(),f()}catch(q){p.log(q)}}}):f()},failure:function(a){p.log(a)}};if(b)FORTUNA.UI.fetchContent(b,d);else throw"No url provided, probably user not logged";},processTickets:function(a){var b=m.get("gratulation_tickets");a?(this.showTicketNotification(),b||this.setTicketsCookie(a.dataList),FORTUNA.UI.updateAcceptedTicketsCounter()):this.hideTicketNotification()},_getTicketsData:function(a){a=c.getElementsByClassName("evaluated-ticket","div",a);for(var b=0<a.length?{dataList:[],tickets:[]}:null;a[0];){var d=a.shift();_data=c.getAttribute(d,"data-ticket-data");b.tickets.push(d);b.dataList.push(_data)}return b},showTicketNotification:function(a){if(this.ticketNotifyElm){var b=this,c={complete:function(){b.testingMode&&alert("Winning tickets shown at "+new Date);b.setHideNotifyTimeout.call(b)}};a&&(c.complete=null);this.ticketNotifyElm.fn.show();this.animation=h.fadeElement(this.ticketNotifyElm,{method:"in",time:1},c)}else throw"ticketNotifyElm not found, must initialize first";},hideTicketNotification:function(){var a=this;this.animation=h.fadeElement(this.ticketNotifyElm,{method:"out",time:.5},{complete:function(){a.ticketNotifyElm.fn.hide();a.deleteTicketsCookie()}})},setTicketsCookie:function(a){if(a){var b=new Date;a=a.join("_");b.addMilliseconds(this.cacheLifetime);m.set("gratulation_tickets",a,{path:"/",expires:b,raw:!0})}else throw"No tickets provided";},deleteTicketsCookie:function(){var a=new Date;a.setFullYear(a.getFullYear()-1);m.set("gratulation_tickets","",{path:"/",expires:a})},setHideNotifyTimeout:function(){var a=this;this.notifyHideTO=setTimeout(function(){a.hideTicketNotification.call(a)},a.notifyHideTOTime)},_procesHoverStopEvent:function(){this._stopHideNotifyTimeout.call(this);this.animation.stop(!1);this.showTicketNotification(!0)},_stopHideNotifyTimeout:function(){clearTimeout(this.notifyHideTO);this.notifyHideTO=null}},directMoneyInfo:{dataEl:null,init:function(a){""==h.dialog_overlay_content.innerHTML&&(this._findDataElement(),this.dataEl&&(h.fillDialogOverlay(this.dataEl,!1,function(){h.showDialogOverlay(!0,null,{position:"X"})}),this._adjustDialogHeight(),this._markItemsAsSeen(a)))},_findDataElement:function(){var a=c.get("direct-money-bonus-info");a&&(this.dataEl=a)},_markItemsAsSeen:function(a){if(a&&a instanceof Array)for(var b in a)$.cookie("dmi_seen_"+a[b],"1",{expires:7,path:"/"})},_adjustDialogHeight:function(){var a=$(h.dialog_overlay_content);a.height("1px");a.height("")}}};FORTUNA.run(function(){l.initDialog()});if(FORTUNA.UI)for(var n in l)l.hasOwnProperty(n)&&(FORTUNA.UI[n]=l[n])})();
			/* /dialog_windows_js */
			/* tabbed */

(function(){var c=YAHOO.util.Dom,f=YAHOO.util.Event,g=YAHOO.util.Cookie;FORTUNA.UI.Tabbed=function(a){if(!a)return!1;this.hideClass=a.getAttribute("data-hide-class")||"hidden";this.container=c.get(a);this.activeTab=null;this.ord=0;this.identifier=this.container.id||this.container.className.split(" ")[0];this.cookieName=this.identifier+"_active_tab";this.cookieExpiration=a.getAttribute("data-cookie-expiration")||0;this.initTabs()};FORTUNA.UI.Tabbed.prototype={initTabs:function(){for(var a=this,b=c.getElementsBy(function(a){return!c.hasClass(a,"empty")},"a",this.container),d=g.get(this.cookieName),e=0;e<b.length;e++){tabLink=b[e];tabLink._tab=c.getAncestorByClassName(tabLink,"tab");tabLink._tab._content=document.getElementById(tabLink.id+"_content");var h=tabLink.getAttribute("data-ord");tabLink._tab._ord=null===h?e:h;tabLink.fn={};tabLink.fn.activate=function(){a.activateTab.call(a,this._tab)};c.hasClass(tabLink._tab,"tab_active")&&(this.activeTab=tabLink._tab);f.on(tabLink,"click",function(b){f.preventDefault(b);a.activateTab(this._tab)})}this.activeTab||(d?(d=parseInt(d,10),this.activateTab(b[d]._tab)):this.activateTab(b[0]._tab))},activateTab:function(a){var b=a.getAttribute("callback");this.activeTab&&this.deactivateTab(this.activeTab);this.activeTab=a;c.addClass(a,"tab_active");c.removeClass(a._content,this.hideClass);if(b&&FORTUNA.UI.hasOwnProperty(b))FORTUNA.UI[b]();b=new Date;0<this.cookieExpiration?b.setTime(b.getTime()+6E4*this.cookieExpiration):b.setFullYear(b.getFullYear()+1);g.set(this.cookieName,a._ord,{path:"/",expires:b})},deactivateTab:function(a){c.removeClass(a,"tab_active");c.addClass(a._content,this.hideClass)}}})();
			/* /tabbed */
			/* betlink_tooltip */

(function(){var a=YAHOO.util.Dom;FORTUNA.UI.BetLinkTooltip=function(){this.element=document.createElement("div");a.addClass(this.element,"betLink-tooltip");a.addClass(this.element,"hidden");this.used_tickets=[document.createElement("div"),document.createElement("div"),document.createElement("div"),document.createElement("div")];this.hideTimeout=this.showTimeout=null;for(var e=document.createDocumentFragment(),c=0;4>c;c++)this.used_tickets[c].className="betLink-tooltip-ticket",this.used_tickets[c].innerHTML=c+1,e.appendChild(this.used_tickets[c]);this.element.appendChild(e);document.body.appendChild(this.element);this.show=function(c,e){this.clear_timeouts();for(var d=0;4>d;d++)FORTUNA.UTILS.isInArray(e,d+1+"")?a.addClass(this.used_tickets[d],"used-ticket"):a.removeClass(this.used_tickets[d],"used-ticket");var b=this;this.showTimeout=setTimeout(function(){a.removeClass(b.element,"hidden");b.set_position(c);b.hideTimeout=setTimeout(function(){b.hide()},3E3)},500)};this.hide=function(){a.addClass(this.element,"hidden");this.clear_timeouts()};this.set_position=function(b){a.setXY(this.element,[a.getX(b)+b.offsetWidth-5,a.getY(b)+b.offsetHeight-5])};this.clear_timeouts=function(){this.showTimeout&&clearTimeout(this.showTimeout);this.hideTimeout&&clearTimeout(this.hideTimeout)}}})();
			/* /betlink_tooltip */
			/* layout_js */

(function(e){var c=function(a,b){this.$root=$(a);this.$alignTo=$(this.$root.data("layout-align-to"));this.conf=$.extend({CLS_PINNED:b.clsPinned||"layout-pinned",CLS_FLEX:b.clsFlex||"layout-flex",CLS_ITEM:b.clsItem||"layout-item",CLS_TOGGLER:b.clsToggler||"layout-toggle-pinned",ALIGN_TO:b.alignTo||"body",ALIGN_SIDE:b.alignSide||"RR"},b||{});this.conf.SELECTOR_FLEX="."+this.conf.CLS_FLEX;this.conf.SELECTOR_ITEM="."+this.conf.CLS_ITEM;this.conf.SELECTOR_TOGGLER="."+this.conf.CLS_TOGGLER+":not(.disabled)";this.conf.STORAGE_KEY=this.conf.CLS_PINNED;this.$root.attr("id")&&(this.conf.STORAGE_KEY=this.$root.attr("id")+"-"+this.conf.STORAGE_KEY);0===this.$alignTo.length&&(this.$alignTo=$(this.conf.ALIGN_TO));this.pinned=this.$root.hasClass(this.conf.CLS_PINNED);this._render();this._bind()};c.prototype={setPinned:function(a){this.pinned=a||!1;this.$root[a?"addClass":"removeClass"](this.conf.CLS_PINNED);this.resize();var b=new Date;b.setMonth(b.getMonth()+1);$.cookie(this.conf.STORAGE_KEY,a,{path:"/",expires:b});this.$root.trigger("pinItem.layout")},resize:function(){var a=this.$root.children(this.conf.SELECTOR_ITEM),b=[],d=0,c=this.$alignTo.offset().top;this.pinned?(this.$root.height("auto"),a.filter(this.conf.SELECTOR_FLEX).each(function(){$(this).height("auto").trigger("resizeItem.layout",{height:"auto"})})):(d=$(window).height()-c,this.$root.height(d),a.each($.proxy(function(a,c){a=$(c);a.hasClass(this.conf.CLS_FLEX)?b.push(a):d-=a.outerHeight(!0)},this)),$.each(b,function(){var a=d/b.length;$(this).height(a).trigger("resizeItem.layout",{height:a})}));this.position()},position:function(){alignToW=rootW=_x=0;this.$alignTo.offset();var a=0;if(this.pinned)_x="auto",a=0;else{var b=this.$alignTo.offset().left;alignToW=this.$alignTo.width();rootW=this.$root.outerWidth(!0);switch(this.conf.ALIGN_SIDE){case "RR":_x=b+alignToW-rootW;break;case "RL":_x=b+alignToW;break;case "LR":_x=b-rootW;break;case "LL":_x=b}}this.$root.css({left:_x,top:a})},_render:function(){this.setPinned(this.pinned)},_bind:function(){$(window).on("resize.layout",$.proxy(this._onWindowResize,this));$(document).on("click.layout",this.conf.SELECTOR_TOGGLER,$.proxy(this._onTogglerClick,this))},_onTogglerClick:function(a){a.preventDefault();this.setPinned(!this.pinned)},_onWindowResize:function(a){this.pinned||this.resize()}};$.fn.layout=function(a){this.each(function(){var b=$(this);b.data("layout-api",b.data("layout-api")||new c(b,a||{}))});return this};$(function(){$(".layout").layout()})})(window.FORTUNA.UI);
			/* /layout_js */
			/* sticky_js */

(function(d){var c=function(b,a){this.$element=$(b);this.elmOffset=this.$element.css({top:0}).offset();this.conf=$.extend({TOP_PADDING:a.topPadding||5,BOTTOM_PADDING:a.bottomPadding||5,ORIENTATION:a.position||"BOTTOM",ANIM_DURATION:a.animDuration||50,CLS_STICKY:a.clsSticky||"sticky-item"},a||{});this.conf.STORAGE_KEY=this.conf.CLS_STICKY;this.$element.attr("id")&&(this.conf.STORAGE_KEY=this.$element.attr("id")+"-"+this.conf.STORAGE_KEY);this.isSticky=this.$element.hasClass(this.conf.CLS_STICKY);this.init()};c.prototype={init:function(){this._render()},setSticky:function(b){this.isSticky=b||!1;this.$element[this.isSticky?"addClass":"removeClass"](this.conf.CLS_STICKY)},follow:function(){var b=$(window).scrollTop(),a=this._getAnimationOptions();b>this.elmOffset.top?this.$element.stop().animate(a):this.$element.stop().animate({top:0})},_getAnimationOptions:function(){var b=$(window).scrollTop(),a=$(window).height()-this.$element.outerHeight(!0);b=b-this.elmOffset.top+this.conf.TOP_PADDING;return{top:"TOP"===this.ORIENTATION?b:b+a}},_onWindowScroll:function(b){this.isSticky&&(this.follow(),Utils.log("sticky:following"))},_bind:function(){},_unbind:function(){$(window).off("scroll")},_restore:function(){this.$element.css({top:0})},_render:function(){this.setSticky(this.isSticky)}};$.fn.sticky=function(b){this.each(function(){var a=$(this);a.data("sticky-api",a.data("sticky-api")||new c(a,b||{}))});return this};$(function(){$(".scrollable").sticky()})})(window.FORTUNA.UI);
			/* /sticky_js */
			/* ticket_manager_js */

(function(b){var g=FORTUNA.UTILS,h=b.GAEvents,k=$.isEmptyObject(FORTUNA.userData)?!1:!0;b.TicketManager=function(a){this.UserAgent=FORTUNA.UTILS.BrowserDetect;this.activeInstances={};this.ticketsData={1:{id:1,odds:[]},2:{id:2,odds:[]},3:{id:3,odds:[]},4:{id:4,odds:[]}};this.messages={};this.ticket={resultStatus:"",betsCount:0,betsScrollPosition:0};this.confs={MIN_HEIGHTS:{viewport:600,superticket:450},LOADING:"loading",MIN_TICKET_HOLDER_HEIGHT:150,MAXI_GROUP_COOKIE_PREFIX:"toggled_maxi_groups",MAXIMIZABLE_COOKIE:"ticket-maximizable",OPTIMIZED_COOKIE:"ticket_optimized",STICKY_HOLDER:"scrollable-ticket-holder",DIALOG_ID:"ticket-modal-dialog",DATA_ACTIVE_SUBGAMES:"activeSubgames",COMBI_COLLAPSED_INDICATOR:"combi-values-indicator",MAXITICKET_OVERLAY_ID:"maxiticket-overlay",OPTIMIZED_TICKET_CLASS:"optimized",OPTIMIZED_COMBI_CLASS:"optimized-COMBI",EMPTY_TICKET_CLASS:"empty-ticket",ACTIVE_BET_LINK_CLASS:"active_bet_link",ADD_BET_LINK_CLASS:"add_bet_link",ROTATING_CLASS:"anim-rotate-360-infinite",SELECTOR_TICKET:"#ticket",SELECTOR_SUBGAME_TOGGLER:"#toggler-id-",SELECTOR_BETLINK:".betlink-",SELECTOR_CONTROL_DATA:"#ticket-controls",SELECTOR_CONTROL:".js-control",SELECTOR_CONTROL_MAXIMIZE:".maximize-ticket",SELECTOR_LAYOUT_TOGGLE:".layout-toggle-pinned",SELECTOR_TICKET_BET:".ticket-bet",SELECTOR_TICKET_BET_SELECT:"#ticket-bets .ticket-bet .bet-info select",SELECTOR_MAXI_BET_VALUES:".combi-values-holder",SELECTOR_COMBI_ENTRIES_FILTER:"#combi-entries-filter",SELECTOR_BET_VALUE:".ticket-bet-value",SELECTOR_EVK_VALUE:".ticket-evk-value",SELECTOR_STAKE_REF_ELM:".js-stake-elm",SELECTOR_QUICK_VALUES:".ticket-quick-values a",SELECTOR_STAKE_SLIDER:"#ticket-summary-slider",SELECTOR_TICKET_SUMMARY:"#ticket-summary",SELECTOR_STAKE_ELM:".summary-stake",SELECTOR_STAKE_TMP_ELM:".summary-stake-noedit",SELECTOR_TICKET_BETS:"#ticket-bets",SELECTOR_TICKET_HOLDER:"#ticket-holder",SELECTOR_BET_VALUES_HOLDER:".bet-values-holder",SELECTOR_MAIN_CONTAINER:"#main_container",SELECTOR_TICKET_TAB:"#sidebar_ticket",SELECTOR_COMBI_ALL:".combi-bet-all",SELECTOR_TO_PAY:".summary-to-pay",SELECTOR_CHARGE_ELM:"#ticket-extra-charge",SELECTOR_PL_EXTRA_CHARGE_VALUE:".ticket-extra-charge",SELECTOR_MAXIMIZE_TICKET_BUTTON:".maximize-ticket-field",SELECTOR_CLEAR_TICKET_ELM:"#clear-actual-ticket",SELECTOR_USER_POINTS:".ticket-user-points",SELECTOR_RECOUNT_TICKET:".recount-ticket",SELECTOR_RECOUNT_ICON:".recount-ticket .recount-icon"};this.confs.SELECTOR_STICKY_HOLDER="#"+this.confs.STICKY_HOLDER;this.confs.SELECTOR_ACTIVE_BET_LINK="a."+this.confs.ACTIVE_BET_LINK_CLASS;this.confs.SELECTOR_ADD_BET_LINK="a."+this.confs.ADD_BET_LINK_CLASS;this.$ticket=$(this.confs.SELECTOR_TICKET);this.$stickyElm=$(this.confs.SELECTOR_STICKY_HOLDER);this.sticky=this.$stickyElm.data("sticky-api");this.$layoutRoot=this.$ticket.closest(".layout");this.$layoutParent=this.$ticket.closest(".layout-item");this.$layoutToggle=$(this.confs.SELECTOR_LAYOUT_TOGGLE);this.layout=this.$layoutRoot.data("layout-api");this.$mainWrapper=$("#main_wrapper");this.$ticketHolder=$(this.confs.SELECTOR_TICKET_HOLDER);this.$ticketBets=$(this.confs.SELECTOR_TICKET_BETS);this.naviproType=$(this.confs.SELECTOR_CONTROL_DATA).data("navipro")};b.TicketManager.prototype.initTicket=function(){this.prepareScrollableTicket();this.prepareConfs();this.countBetsOnTicket();this.prepareTicketMessages();this.prepareTicketControls();this.initMaximizeControl(!0);this.setCustomEventListeners();this.prepareBetLinks();this.$ajaxIndicator||(this.$ajaxIndicator=$("\x3cdiv/\x3e",{id:"ticket-ajax-indicator"}).insertAfter("#ticket"));this.addTicketClassToBody(this.getTicketId());$(document.body).ready(function(){document.body.classList.add("has-ticket")});this.readyTicket()};b.TicketManager.prototype.prepareScrollableTicket=function(){this.scrollable=new FORTUNA.UI.Scrollable(this.confs.STICKY_HOLDER,"sidebar_ticket_content","main_wrapper",{});this.scrollable.initialize(this.sticky.isSticky)};b.TicketManager.prototype.prepareConfs=function(){var a=$(this.confs.SELECTOR_CONTROL_DATA).data();a&&$.extend(this.confs,a)};b.TicketManager.prototype.readyTicket=function(){this.setTicketSize();this.optimizeTicketHeight(!0);this.$ticket.length&&(this.setResizeEvents(),this.$ticket.removeClass("initializing"))};b.TicketManager.prototype.sendTicketRequest=function(a,c){if(!a)return!1;var e=this,b="string"===typeof a?!1:!0,f=$.extend({async:!1,callback:{},showIndicator:!0,scrollTo:null},c);b?TDI.Ajax.send(a.target||a,{end:function(){e._restoreBetsScrollPosition(f.scrollTo);f.callback.end&&f.callback.end()},start:function(){e._storeBetsScrollPosition();f.showIndicator&&e.showAjaxIndicator();f.callback.start&&f.callback.start()},sync:!0,enviroment:"TICKET"}):TDI.Ajax.Request.send(a,{end:function(){e._restoreBetsScrollPosition(f.scrollTo);f.callback.end&&f.callback.end()},start:function(){e._storeBetsScrollPosition();f.showIndicator&&e.showAjaxIndicator();f.callback.start&&f.callback.start()},sync:!1,enviroment:"TICKET"})};b.TicketManager.prototype._onAjaxError=function(a){FORTUNA.UI.ajaxErrorHandler(a)};b.TicketManager.prototype._storeBetsScrollPosition=function(){var a=$("#ticket .bet-wrap");this.ticket.betsScrollPosition=a.scrollTop()};b.TicketManager.prototype._restoreBetsScrollPosition=function(a){var c=$("#ticket .bet-wrap");switch(a){case "END":a=c[0].scrollHeight;break;case "START":a=0;break;default:a=this.ticket.betsScrollPosition}c.scrollTop(a)};b.TicketManager.prototype.prepareTicketMessages=function(){var a=this,c,e;$(this.confs.SELECTOR_CONTROL_DATA).find("message").each(function(){c=this.className;(e=$(this).html())&&c&&(a.messages[c]=e)})};b.TicketManager.prototype.prepareTicketControls=function(){var a=this;$(window.document).on("keydown",$.proxy(this._onWindowKeyUp,this));this.$ticket.on("click","input[type\x3dtext]",this.selectTextInInput);this.$ticket.on("mouseenter",this.confs.SELECTOR_TICKET_BET,$.proxy(this._onTicketBetMouseEnter,this));this.$ticket.on("mouseleave",this.confs.SELECTOR_TICKET_BET,$.proxy(this._onTicketBetMouseLeave,this));if("11"<=this.UserAgent.version)this.$ticket.on("click",this.confs.SELECTOR_TICKET_BET_SELECT,$.proxy(function(a){$(a.target).addClass("keep-focus");this._onTicketBetSelectFocus(a)},this));else this.$ticket.on("focus",this.confs.SELECTOR_TICKET_BET_SELECT,$.proxy(this._onTicketBetSelectFocus,this)),this.$ticket.on("blur",this.confs.SELECTOR_TICKET_BET_SELECT,$.proxy(this._onTicketBetSelectBlur,this));this.$ticket.on("change","select",$.proxy(this._controlChangeHandler,this));this.$ticket.on("click",this.confs.SELECTOR_CONTROL,$.proxy(this._controlClickHandler,this));this.$ticket.on("change",this.confs.SELECTOR_CONTROL_MAXIMIZE,$.proxy(this._onMaximizeChange,this));$("#sidebar_ticket_wrap").on("click",$.proxy(function(a){this.scrollable.scroll(!0)},this));this.$ticket.on("click",this.confs.SELECTOR_QUICK_VALUES,$.proxy(this.autoFillBetValue,this));$(document).on("click","#"+this.confs.DIALOG_ID+" "+this.confs.SELECTOR_CONTROL,$.proxy(this._dialogControlClickHandler,this));$("#ticket").on("click",".combi-group-h",$.proxy(this.combiGroupClickHandler,this));this.$ticket.on("change",this.confs.SELECTOR_STAKE_ELM,$.proxy(this.setStake,this));this.$ticket.on("keyup",this.confs.SELECTOR_STAKE_ELM,function(c){13==c.keyCode&&a.setStake.call(a,c)});this.$ticket.on("change",this.confs.SELECTOR_EVK_VALUE,$.proxy(this.setEvkValue,this));this.$ticket.on("keyup",this.confs.SELECTOR_EVK_VALUE,function(c){13==c.keyCode&&a.setEvkValue.call(a,c)});this.$ticket.on("blur",this.confs.SELECTOR_COMBI_ALL,$.proxy(this.setTotalPrice,this));this.$ticket.on("keyup",this.confs.SELECTOR_COMBI_ALL,function(a){13==a.keyCode&&$(a.target).blur()});this.$ticket.on("change",".combi-bet-values-holder input.js-combi-value",$.proxy(this.setCombiBetValues,this));if("EXPLORER"===this.UserAgent.browser)this.$ticket.on("keyup",".combi-bet-values-holder input.js-combi-value",function(a){var c=a.target;13==a.keyCode&&c.value!==c.defaultValue&&(a=$(this),g.normalizeNumber(this.value)!==this.defaultValue&&a.change())});this.$ticket.on("click",".reset-combi-values",$.proxy(this.resetCombiBetValues,this));this.$ticket.on("mouseenter",".COMBI #bet-values",$.proxy(this.combiShowBetValues,this));this.$ticket.on("mouseleave",".COMBI #bet-values",$.proxy(this.combiHideBetValues,this));this.combiEntriesToggle({method:"static",duration:0});this.$ticket.on("mouseenter",".ticket-user-checkers",function(a){$(this).find(".user-checkers-c").show()});this.$ticket.on("mouseleave",".ticket-user-checkers",function(a){$(this).find(".user-checkers-c").hide()});this.prepareStaketSlider()};b.TicketManager.prototype._controlChangeHandler=function(a){a=a.target;switch($(a).data("action")){case "change-bet-group":this._changeBetGroupHandler(a);break;case "ticket-type":this._changeTicketModeHandler(a);break;case "change-bet-rate":this._changeBetRateHandler(a)}};b.TicketManager.prototype._controlClickHandler=function(a){a.preventDefault();var c=a.target,e=$(c),b=e.data("action")?e:e.closest("[data-action]"),f=b.attr("href")||b.data("ajax-url");switch(b.data("action")){case "remove-bet":this.removeBet(c);break;case "notify-sms":this._notifyBySMSHandler(a);break;case "must-be-logged":this.mustBeLoggedHandler();break;case "excluded":this.userExcludedHandler();break;case "accept-ticket":this.isCOMBI()?this.acceptCombiTicketHandler(c):this.acceptTicketHandler(c);break;case "switch-ticket":this.switchTicketTab(c);break;case "clear-ticket":this.clearTicket();break;case "resend-ticket":this.resendTicket();break;case "recount-ticket":this.recountTicket(a);break;case "preview-ticket":this.previewTicket();break;case "prepare-ticket":this.prepareTicket(c);break;case "next-value":this.setToNextStakeValue(c);break;case "close-superticket":this.closeSuperTicket();break;case "close-combi-values":this.combiHideBetValues();break;default:f&&this.sendTicketRequest(c)}e.hasClass("tooltip")&&e.tooltip("close")};b.TicketManager.prototype.switchTicketTab=function(a){h.Ticket.tabsUsage&&this._trackTicketTabSwitch(a);this.sendTicketRequest(a);this.addTicketClassToBody(a.dataset.tiketId)};b.TicketManager.prototype._trackTicketTabSwitch=function(a){a=$(a.target||a).data("tiket-id");h.trackGAEvent("ticket","ticket-tab",a)};b.TicketManager.prototype._dialogControlClickHandler=function(a){a.preventDefault();a="a"===a.target.tagName.toLowerCase()?a.target:$(a.target).closest("a");a.href||$(a).data("ajax-url");switch($(a).data("action")){case "switch-ticket":this.closeDialog();this.sendTicketRequest(a);break;case "clear-ticket":a=$(this.confs.SELECTOR_CLEAR_TICKET_ELM);confirm(a.data("confirm"))&&(this.closeDialog(),this.sendTicketRequest(a.attr("href")));break;case "clear-ticket-no-confirm":a=$(this.confs.SELECTOR_CLEAR_TICKET_ELM);this.closeDialog();this.sendTicketRequest(a.attr("href"));break;default:this.closeDialog()}};b.TicketManager.prototype.mustBeLoggedHandler=function(){var a=this.messages.mustBeLogged;a&&this.openDialog({contents:a})};b.TicketManager.prototype.userExcludedHandler=function(){var a=this.messages.excluded;a&&this.openDialog({contents:a})};b.TicketManager.prototype.acceptTicketHandler=function(a){const c=this;this.sendTicketRequest(a,{callback:{end:function(){var a=c.ticketsData[FORTUNA.UI.ticketManager.getTicketId()];k&&!this.naviproType&&customDatalayer.BETSLIP.accepted({accountNumber:FORTUNA.userData.accountNumber,userName:FORTUNA.userData.userName,currency:FORTUNA.userData.currency,betAmount:a.betAmount,winAmount:a.winAmount,odds:a.odds.map(function(a){return a.sport+"_"+a.action+"_"+a.name+"-"+a.type+"_"+a.subgame+":"+a.rate})})}}});h.Ticket.acceptButtonUsage&&this._trackAcceptedTicket()};b.TicketManager.prototype.acceptCombiTicketHandler=function(a){window.setTimeout($.proxy(this._acceptCombiTicketHandler,this,a),10)};b.TicketManager.prototype._acceptCombiTicketHandler=function(a){this.stopCOMBITicketSend?this.stopCOMBITicketSend=!1:(this.sendTicketRequest(a),this.removeOtherWarningsCOMBI())};b.TicketManager.prototype._trackAcceptedTicket=function(){var a=FORTUNA.UI.ticketManager.getTicketId(),c=$(this.confs.SELECTOR_STAKE_REF_ELM);h.trackGAEvent("ticket","accepted",a+"-"+c)};b.TicketManager.prototype._notifyBySMSHandler=function(a){var c=a.target,e=$(c).data("confirm-message");$(c).is(":checked");e?window.confirm(e)?this.sendTicketRequest(c,{end:$.proxy(FORTUNA.UI.invalidateUserAccount,FORTUNA.UI)}):a.preventDefault():this.sendTicketRequest(c,{end:$.proxy(FORTUNA.UI.invalidateUserAccount,FORTUNA.UI)})};b.TicketManager.prototype._changeBetGroupHandler=function(a){if(a&&a.tagName&&a.value){var c=$(a).closest(".ticket-bet").data("odd");c=this.getActiveInstance(c).getParsedBetLink();a=g.editUrlParams(this.confs.changeBetGroupUrl,{group:a.value,info_id:c.info,odds_id:c.odd,value:c.rate});c&&a&&this.sendTicketRequest(a)}};b.TicketManager.prototype._changeTicketModeHandler=function(a){if(a&&a.tagName&&a.value){var c=this.confs.changeTicketTypeUrl+"\x26mode\x3d"+a.value;c&&this.sendTicketRequest(c,{callback:{end:$.proxy(function(){this.combiGroupReleaseCookie()},this)}});h.Ticket.methodMenuUsed&&this._trackTicketMethodChanged(a)}};b.TicketManager.prototype._trackTicketMethodChanged=function(a){a=$(a).val();h.trackGAEvent("ticket","method-selected",a)};b.TicketManager.prototype._changeBetRateHandler=function(a){if(a&&a.tagName&&a.value){var c=parseInt($(a).closest(".ticket-bet").data("odd")),e=$(a.options[a.selectedIndex]).data("odd"),b=this.getActiveInstance(c).getParsedBetLink();a=g.editUrlParams(this.confs.changeBetRateUrl,{info_id:b.info,odds_id:e,value:a.value,odds_id_old:c,value_old:b.rate});b&&a&&this.sendTicketRequest(a)}};b.TicketManager.prototype.updateBetItemInstance=function(a,c){if(a&&c){var b=$(this.confs.SELECTOR_BETLINK+a);b=this.parseBetLinkToJSon(b);a=this.getActiveInstance(a);if(b&&a&&(a.removeTicketIDFromInstance(this.getTicketId()),c=$(this.confs.SELECTOR_BETLINK+c),betLink=this.parseBetLinkToJSon(c)))return c=this.addActiveBetLink(betLink)}};b.TicketManager.prototype.showTicketResult=function(a){var c=$("#ticket-result");$.trim(c.html())?this.openDialog({contents:c.children(),closeable:0>["UNRESOLVED","RESTRICTED"].indexOf(a)}):this.closeDialog()};b.TicketManager.prototype.evaluateTicketResult=function(a){switch(a){case "ACCEPTED":this.ticket.cancelInterval&&this.ticket.cancelInterval.interval&&this.ticket.cancelInterval.stop();this.ticketAcceptedHandler(a);break;case "UNRESOLVED":this.resolveTicket(a);break;case "REJECTED":this.showTicketResult(a);break;case "RESTRICTED":this.confirmTicketInterval(a);break;case "CANCELED":this.ticket.cancelInterval&&this.ticket.cancelInterval.interval&&this.ticket.cancelInterval.stop();this.closeDialog();break;default:this.ticketNoResultHandler()}};b.TicketManager.prototype.ticketNoResultHandler=function(){FORTUNA.UI.invalidateUserAccount();this.closeDialog();alert("something went wrong, no result provided")};b.TicketManager.prototype.ticketAcceptedHandler=function(a){FORTUNA.UI.invalidateUserAccount();FORTUNA.UI.updateAcceptedTicketsCounter();this.showTicketResult(a);this.combiGroupReleaseCookie();FORTUNA.UI.refreshMarathonIndication()};b.TicketManager.prototype.confirmTicketInterval=function(a){this.showTicketResult(a);a=$("#cancelTicketTimeout").html();this.ticket.cancelInterval=new FORTUNA.UI.Countdown("cancelTicketTimeout",a,$.proxy(this.confirmTicketIntervalHandler,this),$.proxy(this.cancelTicketHandler,this),0);this.ticket.cancelInterval.run()};b.TicketManager.prototype.confirmTicketIntervalHandler=function(a,c){a&&0<c.seconds&&$(a).html(c.seconds)};b.TicketManager.prototype.cancelTicketHandler=function(){var a=FORTUNA.UTILS.editUrlParams(this.confs.cancelTicketUrl,{auto:!0});a&&this.sendTicketRequest(a)};b.TicketManager.prototype.resolveTicket=function(a){var c=this.confs.resolveTicketUrl,b=this;this.showTicketResult(a);c&&"UNRESOLVED"==a&&setTimeout(function(){b.sendTicketRequest(c)},5E3)};b.TicketManager.prototype.removeBet=function(a){var c=isNaN(a)?$(a).data("odd"):a;a.href?a=a.href:(a=this.activeInstances[c],a=a.getParsedBetLink(),a=g.editUrlParams(this.confs.removeBetUrl,{info_id:a.info,odds_id:a.odd,value:a.rate,support_id:"undefined"!==typeof a.parentID?a.parentID:null}));a?(this._trackRemoveBet(a),this.sendTicketRequest(a)):g.log("Not all data provided, bet wasnt removed.")};b.TicketManager.prototype.handleRemoveBetFailed=function(a){this.activeInstances.hasOwnProperty(a)&&this.removeBetInstance(a)};b.TicketManager.prototype.removeBetInstance=function(a){var c=this.getTicketId();a=[].concat(a);var b=0,d=a.length,f;b;for(d;b<d;b++)if(_betLink=a[b],_odd="number"==typeof _betLink?_betLink:_betLink.odd,f=this.getActiveInstance(_odd))f.removeTicketIDFromInstance(c);else try{this.uncheckActiveBetLink(_betLink)}catch(m){}};b.TicketManager.prototype.setTicketSize=function(a,c){var b=this.isMaxi(),d=this.getTicketElementsSizes(),f=$(this.confs.SELECTOR_CONTROL_DATA).outerHeight(!0),g=this.$layoutParent.height(),h=this.isLayoutPinned()&&!b,l=h?"auto":g;f=h?"auto":g-f;g=d.summary;h=b||this.isLayoutPinned()?"relative":"absolute";a&&(b?this.$ticket.stop().animate({width:d.maxiWidth},{always:$.proxy(function(){c&&c.call(this)},this)}):this.$ticket.css({position:h,right:0}).stop().css({width:this.$layoutRoot.width()},{always:$.proxy(function(){c&&c.call(this)},this)}));this.$ticket.css("height",l);$(this.confs.SELECTOR_TICKET_HOLDER).css("height",f);d.summary&&(a=g+d.offsets.bottom,b?$(this.confs.SELECTOR_TICKET_BETS).css("bottom",0):$(this.confs.SELECTOR_TICKET_BETS).css("bottom",a).scrollTop($(this.confs.SELECTOR_TICKET_BETS).outerHeight(!0)))};b.TicketManager.prototype.setResizeEvents=function(){var a=!1;this.$layoutParent.on("resizeItem.layout",$.proxy(function(a,b){this.setTicketSize()},this));$(window).on("resize",$.proxy(function(c,b){clearTimeout(a);a=setTimeout($.proxy(function(){this.optimizeTicketHeight()},this),50)},this))};b.TicketManager.prototype.setLayoutPinned=function(a){a||this.scrollable.restore();this.layout.setPinned(a)};b.TicketManager.prototype.isLayoutPinned=function(){return this.layout.pinned};b.TicketManager.prototype.initStickyTicket=function(){this.$stickyElm.sticky()};b.TicketManager.prototype.setTicketSticky=function(a){this.sticky.setSticky(a);a&&this.scrollable.scroll()};b.TicketManager.prototype.isTicketSticky=function(){return this.sticky.isSticky};b.TicketManager.prototype.isTicketEmpty=function(){return this.$ticketHolder?this.$ticketHolder.hasClass(this.confs.EMPTY_TICKET_CLASS):null};b.TicketManager.prototype._onMaximizeChange=function(a){a=$(a.target);a.blur();a.is(":checked")?(this.maximizable=!0,$.cookie(this.confs.MAXIMIZABLE_COOKIE,"true",{path:"/"}),this.maximizeTicket()):(this.maximizable=!1,$.cookie(this.confs.MAXIMIZABLE_COOKIE,"false",{path:"/"}),this.minimizeTicket());h.Ticket.superticketUsage&&this._trackSuperticketUsage(a)};b.TicketManager.prototype._onWindowKeyUp=function(a){switch(a.which){case 27:this.isMaxi&&this.closeSuperTicket()}};b.TicketManager.prototype._onTicketBetMouseEnter=function(a){a=$(a.target).closest(this.confs.SELECTOR_TICKET_BET);clearTimeout(a.data("_hideTimeout"));this.showTicketBetInfo(a)};b.TicketManager.prototype._onTicketBetMouseLeave=function(a){a=$(a.target);var c=a.closest(this.confs.SELECTOR_TICKET_BET);if(a.hasClass("keep-focus"))return!1;"EXPLORER"===this.UserAgent.browser?a.is("select")||this.hideTicketBetInfo(c):this.hideTicketBetInfo(c)};b.TicketManager.prototype._onTicketBetSelectFocus=function(a){a=$(a.target).closest(this.confs.SELECTOR_TICKET_BET);clearTimeout(a.data("_hideTimeout"))};b.TicketManager.prototype._onTicketBetSelectBlur=function(a){a=$(a.target).closest(this.confs.SELECTOR_TICKET_BET);this.hideTicketBetInfo(a)};b.TicketManager.prototype.showTicketBetInfo=function(a){var c=$(a),b=this;this.$ticket.find(this.confs.SELECTOR_TICKET_BET).each(function(){this!==c.get(0)&&b.hideTicketBetInfo(this,!0)});clearTimeout(c.data("_hideTimeout"));c.addClass("hover");c.find("select").show()};b.TicketManager.prototype.hideTicketBetInfo=function(a,c){var b=$(a);c?(clearTimeout(b.data("_hideTimeout")),b.removeClass("hover"),b.find("select").hide()):b.data("_hideTimeout",setTimeout(function(){b.removeClass("hover");b.find("select").hide()},50))};b.TicketManager.prototype.minimizeTicket=function(){var a=this;this.isMaxi()&&!this.isMaxiLocked&&(this.maxiticketOverlay(),$(this.confs.SELECTOR_MAXIMIZE_TICKET_BUTTON).removeClass("open"),this.equalizeTicketBetsSize(!0),this.setCombiDependencies(),this.$ticket.add(this.$layoutRoot).removeClass("maxi"),this.ticket.optimized||(this.$layoutToggle.removeClass("disabled"),this.restorePinnedStatus()),this.setTicketSize(!0),this.$ticket.find(this.confs.SELECTOR_TICKET_BET).each(function(){a.hideTicketBetInfo(this)}))};b.TicketManager.prototype.closeSuperTicket=function(){var a=$(this.confs.SELECTOR_CONTROL_MAXIMIZE);a.prop("checked",!1);a.change()};b.TicketManager.prototype.maximizeTicket=function(a){var c=this;this.isMaxi()||(this.maxiticketOverlay(),$(this.confs.SELECTOR_MAXIMIZE_TICKET_BUTTON).addClass("open"),this.$ticket.add(this.$layoutRoot).addClass("maxi"),$(this.confs.SELECTOR_TICKET_BETS).scrollTop(0),this.$layoutToggle.addClass("disabled"),g.Storage.setItem("pinned_tmp",this.isLayoutPinned()),this.setLayoutPinned(!1),this.setTicketSize(!0),a||this.optimizeTicketHeight(),this.$ticket.find(this.confs.SELECTOR_TICKET_BET).each(function(){c.hideTicketBetInfo(this)}))};b.TicketManager.prototype.maxiticketOverlay=function(){var a=$("#"+this.confs.MAXITICKET_OVERLAY_ID);a.length||(a=$("\x3cdiv /\x3e",{id:this.confs.MAXITICKET_OVERLAY_ID}),a.click($.proxy(function(){var a=$(this.confs.SELECTOR_CONTROL_MAXIMIZE);a.prop("checked",!1);a.change()},this)),$(document.body).append(a));a.css({height:$(document.body).outerHeight(!0)});a.toggle(0)};b.TicketManager.prototype.equalizeTicketBetsSize=function(a){var c=this.$ticket.find(".combi-group");0===c.length&&(c=this.$ticket);c.each(function(){var c=$(this).find(".ticket-bet"),b=0;c.each(function(){$(this).height("auto")});a||(c.each(function(){b=Math.max(b,$(this).height())}),c.each(function(){$(this).height(b)}))})};b.TicketManager.prototype.resendTicket=function(a){(a=this.confs.resendUrl)&&window.prompt("COPY_ADDBET_URL_TO_CLIPBOARD: Ctrl+C, Enter",a)};b.TicketManager.prototype.previewTicket=function(){var a=g.editUrlParams(this.confs.previewTicketUrl,{ticket_id:this.getTicketId()});if(a){var c=document.createElement("a");c.href=a;FORTUNA.UI.openShadowbox(c,{width:890,height:500,type:"iframe",addClass:"ticket_preview_shadowbox"});h.Ticket.previewButtonUsage&&this._trackPreviewButtonUsage()}};b.TicketManager.prototype._trackPreviewButtonUsage=function(){h.trackGAEvent("ticket","preview-button")};b.TicketManager.prototype.prepareTicket=function(a){this.sendTicketRequest(a);h.Ticket.saveButtonUsage&&this._trackSaveButtonUsage()};b.TicketManager.prototype._trackSaveButtonUsage=function(){h.trackGAEvent("ticket","save-ticket-button")};b.TicketManager.prototype.getTicketElementsSizes=function(){var a=$("#user-holder").outerWidth(),c=$(window).outerHeight(!0),b=$("#right_content_tabs").outerHeight(!0),d=this.$mainWrapper.width()-$("#left_content").width()-5,f=this.$layoutParent.height(),g=$(this.confs.SELECTOR_CONTROL_DATA).outerHeight(!0),h=$(this.confs.SELECTOR_TICKET_SUMMARY).outerHeight(!0),l=$(this.confs.SELECTOR_TICKET_HOLDER);return{offsets:{ticketHolder:l.outerHeight(!0)-l.height(),bottom:6},maxiWidth:d,sidebar:c,width:a,ticket:f,controls:g,summary:h,tabs:b}};b.TicketManager.prototype.setStake=function(a){if(this.isCOMBI()||!a&&!a.target)return!1;var c=$(a.target);a=c.val();var b=c.data("index")||0,d=this.confs.setTotalpriceUrl;c={equally:c.data("equally")||!1};c["bet_value["+b+"]"]=a;a=g.editUrlParams(d,c);this.sendTicketRequest(a)};b.TicketManager.prototype.recountTicket=function(a){a.preventDefault()};b.TicketManager.prototype.reloadTicket=function(){var a=this.confs.updateUrl;if(!a)return!1;this.sendTicketRequest(a)};b.TicketManager.prototype.autoFillBetValue=function(a){a.preventDefault();a=$(a.target).data("value");var c=$(this.confs.SELECTOR_STAKE_REF_ELM);a&&c.length&&(c.val(a),c[this.isCOMBI()?"blur":"change"](),h.Ticket.quickStakeValuesUsage&&this._trackQuickStakeValue(a))};b.TicketManager.prototype._trackQuickStakeValue=function(a){a&&h.trackGAEvent("ticket","quick-stake-value",a)};b.TicketManager.prototype.countBetsOnTicket=function(){var a=this.activeInstances,c=0,b;for(b in a)0<=a[b].tickets.indexOf(this.getTicketId())&&(c+=1);isNaN(c)||(this.ticket.betsCount=c)};b.TicketManager.prototype.setToNextStakeValue=function(a){a=$(a).data("method");var c=this.confs.dynamicBetValueUrl,b={},d={};b.bet_value=a;this.isCOMBI()&&(this.removeOtherWarningsCOMBI(),b.just_part=!0,d={showIndicator:!1,callback:{start:$.proxy(this.showRecountingIndicator,this),end:$.proxy(this.hideRecountingIndicator,this)}});(c=g.editUrlParams(c,b))&&this.sendTicketRequest(c,d);h.Ticket.dynamicStakeValueUsage&&this._trackDynamicStakeChange(a)};b.TicketManager.prototype._trackDynamicStakeChange=function(a){h.trackGAEvent("ticket","stake-value+/-",a)};b.TicketManager.prototype.setTotalPrice=function(a){var c=a.target;a=g.normalizeNumber($(c).val());c=g.normalizeNumber(c.defaultValue);this.stopCOMBITicketSend=!0;this.removeOtherWarningsCOMBI();if(a!=c){c=this.confs.setTotalpriceUrl;var b={};b["bet_value[0]"]=a;b["equally[0]"]=!1;b.just_part=!0;c=g.editUrlParams(c,b);(a||0<=parseInt(a))&&this.sendTicketRequest(c,{showIndicator:!1,callback:{start:$.proxy(this.showRecountingIndicator,this),end:$.proxy(function(){this.hideRecountingIndicator();window.setTimeout($.proxy(function(){this.stopCOMBITicketSend=!1},this),150)},this)}})}};b.TicketManager.prototype.setEvkValue=function(a){a=a.target;if(!a)throw"evk_elm is required";a=$(a).val();var c=this.confs.setEvkUrl,b={};b.value=a;c=g.editUrlParams(c,b);(a||0<=parseInt(a))&&this.sendTicketRequest(c)};b.TicketManager.prototype.clearTicket=function(){var a=this,c=$(this.confs.SELECTOR_CLEAR_TICKET_ELM).get(0);c&&(this.sendTicketRequest(c,{callback:{start:function(){a._trackClearTicket()}}}),h.Ticket.clearButtonUsage&&this._trackClearButtonUsage())};b.TicketManager.prototype._trackClearButtonUsage=function(){h.trackGAEvent("ticket","clear-button")};b.TicketManager.prototype.getTicketId=function(){return parseInt($.cookie("active_ticket"))};b.TicketManager.prototype.prepareBetLinks=function(){FORTUNA.UI.betLinkTooltip=new FORTUNA.UI.BetLinkTooltip;FORTUNA.UI.loadBetTables();$(this.confs.SELECTOR_MAIN_CONTAINER).on("click",this.confs.SELECTOR_ADD_BET_LINK,$.proxy(this._addBetHandler,this));$(this.confs.SELECTOR_MAIN_CONTAINER).on("click",this.confs.SELECTOR_ACTIVE_BET_LINK,$.proxy(this._activeBetClickHandler,this));$(this.confs.SELECTOR_MAIN_CONTAINER).on("mouseover",this.confs.SELECTOR_ACTIVE_BET_LINK,$.proxy(this.showBetlinkTooltip,this));$(this.confs.SELECTOR_MAIN_CONTAINER).on("mouseout",this.confs.SELECTOR_ACTIVE_BET_LINK,$.proxy(this.hideBetlinkTooltip,this))};b.TicketManager.prototype.showBetlinkTooltip=function(a){a=a.target;var c=$(a).data("odd");(c=this.getActiveInstance(c))&&c.showTooltip(a)};b.TicketManager.prototype.hideBetlinkTooltip=function(a){a=$(a.target).data("odd");(a=this.getActiveInstance(a))&&a.hideTooltip()};b.TicketManager.prototype.getActiveInstance=function(a){if(!a)return null;a=a.odd||parseInt(a,10);return this.activeInstances[a]};b.TicketManager.prototype._addBetHandler=function(a){a&&a.target&&(a.preventDefault(),a.stopPropagation(),this.addBet(a.target))};b.TicketManager.prototype._activeBetClickHandler=function(a){var c=a.target,b=$(c).data("odd");this.isBetItemOnActualTicket(b)?this.removeBet(b):this.addBet(c);a.preventDefault()};b.TicketManager.prototype.markSubgameToggler=function(a,c){if("number"===typeof a&&"number"==typeof c){a=$(this.confs.SELECTOR_SUBGAME_TOGGLER+a);var b=a.data(this.confs.DATA_ACTIVE_SUBGAMES)||[];g.isInArray(b,c)||(c=b?[c].concat(b):[c],a.data(this.confs.DATA_ACTIVE_SUBGAMES,c),a.addClass("marked"))}};b.TicketManager.prototype.unmarkSubgameToggler=function(a,c){if("number"===typeof a&&"number"==typeof c){a=$(this.confs.SELECTOR_SUBGAME_TOGGLER+a);var b=a.data(this.confs.DATA_ACTIVE_SUBGAMES)||[];c=b.indexOf(c);0<=c&&(b=g.removeFromArray(b,c,!0));b.length||a.removeData(this.confs.DATA_ACTIVE_SUBGAMES);a.removeClass("marked")}};b.TicketManager.prototype.isBetItemOnActualTicket=function(a){a=this.activeInstances[a];var c=this.getTicketId();return a?a.instanceOnTicket(c):!1};b.TicketManager.prototype.setCustomEventListeners=function(){$("#ticket").on("tdi:ajax:_start",$.proxy(function(){this.showAjaxIndicator()},this));$(document).on("tdi:ajax:error",$.proxy(function(a,c){this.hideAjaxIndicator();this._onAjaxError(c)},this));$(document).on("tdi:ajax:script",function(a,c){$("#"+c.script_id+"_inline").remove()});$("#ticket").on("tdi:ajax:update",$.proxy(this._onTicketUpdate,this));this.$layoutRoot.on("pinItem.layout",$.proxy(this._onTicketPinned,this))};b.TicketManager.prototype.initMaximizeControl=function(a){var c=this.$ticket.find(this.confs.SELECTOR_CONTROL_MAXIMIZE);"true"===$.cookie(this.confs.MAXIMIZABLE_COOKIE)?(c.prop("checked",!0),a&&(this.$ticket.width(250),this.maximizeTicket(a))):c.prop("checked",!1)};b.TicketManager.prototype._onTicketUpdate=function(){this.$layoutToggle=$(this.confs.SELECTOR_LAYOUT_TOGGLE);this.prepareConfs();this.setTicketSize();this.optimizeTicketHeight();this.countBetsOnTicket();this.isMaxi()&&this.disableFixedTicket();this.initMaximizeControl(!1);this.combiEntriesToggle({method:"static",duration:0});this.equalizeTicketBetsSize(!this.isMaxi());this.activateTicket();this.isTicketSticky()&&this.scrollable.scroll();this.prepareStaketSlider();this.hideAjaxIndicator()};b.TicketManager.prototype.onAfterTicketUpdate=function(){this.prepareStaketSlider()};b.TicketManager.prototype._onTicketPinned=function(){var a=this.isLayoutPinned();a||this.scrollable.restore();this.setTicketSticky(a);h.Ticket.pinnedButtonUsage&&this._trackPinnedButtonUsage(!1===a)};b.TicketManager.prototype._trackPinnedButtonUsage=function(a){h.trackGAEvent("ticket","ticket-pin",a?"true":"false")};b.TicketManager.prototype.addBet=function(a){if(a.tagName&&"A"===a.tagName.toUpperCase()){var c=this;this.sendTicketRequest(a,{scrollTo:"END",callback:{end:function(){var a=c.ticketsData[FORTUNA.UI.ticketManager.getTicketId()];k&&!this.naviproType&&customDatalayer.BETSLIP.addTo({accountNumber:FORTUNA.userData.accountNumber,userName:FORTUNA.userData.userName,currency:FORTUNA.userData.currency,odds:a.odds.map(function(a){return a.sport+"_"+a.action+"_"+a.name+"-"+a.type+"_"+a.subgame+":"+a.rate})})}}})}};b.TicketManager.prototype._addBetCallback=function(a){a&&(a=this.parseBetLinkToJSon(a),this.addActiveBetLink(a))};b.TicketManager.prototype.addActiveBetLink=function(a,c){var b;c=[].concat(c||this.getTicketId());if(a.odd&&a.info){if(b=this.instanceExists(a.odd))return a=this.activeInstances[a.odd],a.addTicketToInstance(c),a;try{var d=new FORTUNA.UI.ActiveBetLink(a,c);this.activeInstances[a.odd]=d;this.checkActiveBetLink(a);return d}catch(f){throw f;}}};b.TicketManager.prototype.initActiveBetLinks=function(){var a=$("#ticket-active-betitems").find("div"),c=0,b=a.length;c;for(b;c<b;c++){var d=this.parseBetLinkToJSon(a[c]);var f=$(a[c]).data("tickets").split(";");f=this.getUsedTickets(f);this.addActiveBetLink(d,f)}};b.TicketManager.prototype.getTicketsUsage=function(a,c){a=a||this.getTicketId();return"false"===this.confs.ticketsUsage.split(";")[a-1]?!1:!0};b.TicketManager.prototype.parseBetLinkToJSon=function(a){var c={};a=$(a);var b=a.closest("tr.toggable_row").data("id");b=b&&!a.data("main")?b:0;c.odd=parseInt(a.data("odd"));c.info=parseInt(a.data("info"));c.rate=Number(a.data("rate"));c.parentID=Number(b);return c};b.TicketManager.prototype.ticketHasErrors=function(){return document.getElementById("hasErrors")?!0:!1};b.TicketManager.prototype.removeOtherWarningsCOMBI=function(){var a=$("#ticket-summary \x3e .ticket-notice.INFO"),c=$("#ticket-summary \x3e #ticket-messages"),b=$("#ticket-bets");if(a.length){var d=parseInt(b.css("bottom"))-a.outerHeight();a.remove();$("#ticket-bets").css("bottom",d+"px")}c.length&&(d=parseInt(b.css("bottom"))-c.outerHeight(),c.remove(),$("#ticket-bets").css("bottom",d+"px"))};b.TicketManager.prototype.checkActiveBetLink=function(a){a=[].concat(a);var c=a.length,b=0;b;for(c;b<c;b++){var d=a[b].odd;if(!d)break;d=this.getBetItemById(d);d.removeClass(this.confs.ADD_BET_LINK_CLASS);d.addClass(this.confs.ACTIVE_BET_LINK_CLASS);(d=a[b].parentID)&&this.markSubgameToggler(d,a[b].odd)}};b.TicketManager.prototype.checkActiveSubgameBetLink=function(a){a=$(a.toggler).data(this.confs.DATA_ACTIVE_SUBGAMES)||[];var c=0,b=a.length;if(a.length)for(c,b;c<b;c++){var d=this.getActiveInstance(a[c]);if(!d)break;d=d.getParsedBetLink();this.checkActiveBetLink(d)}};b.TicketManager.prototype.checkAllActiveBetLinks=function(){var a=this===FORTUNA.UI.ticketManager?this:FORTUNA.UI.ticketManager,c=a.activeInstances,b=[];for(oddID in c){var d=c[oddID];d.hasOwnProperty("betLink")&&b.push(d.betLink)}a.checkActiveBetLink(b)};b.TicketManager.prototype.uncheckActiveBetLink=function(a){a=[].concat(a);var c=a.length,b=0;b;for(c;b<c;b++){var d=a[b];if(!d)break;d=this.getBetItemById(d);d.addClass(this.confs.ADD_BET_LINK_CLASS);d.removeClass(this.confs.ACTIVE_BET_LINK_CLASS);(d=a[b].parentID)&&this.unmarkSubgameToggler(d,a[b].odd)}};b.TicketManager.prototype.releaseOtherBetItems=function(a){var c=[],b=[];$.each(a||[],function(a,b){c.push("number"==typeof b?b:b.odd)});var d=this;$.each(this.activeInstances,function(a,e){var f=parseInt(a);d.addBetOnTicketClassesToOdd(a,e.tickets);!isNaN(f)&&0>c.indexOf(f)&&b.push(f)});this.removeBetInstance(b)};b.TicketManager.prototype.releaseAllBetItems=function(){var a=[];$.each(this.activeInstances,function(b,e){b=parseInt(b);isNaN(b)||a.push(b)});this.removeBetInstance(a)};b.TicketManager.prototype.instanceExists=function(a){return this.activeInstances.hasOwnProperty(a)};b.TicketManager.prototype.getUsedTickets=function(a){for(var b=[],e=0;e<a.length;e++)1==a[e]&&b.push(String(e+1));return b};b.TicketManager.prototype.getBetItemById=function(a){return $(this.confs.SELECTOR_BETLINK+a)};b.TicketManager.prototype.showAjaxIndicator=function(){var a=this.$ticket.outerWidth(!0),b=this.$ticket.outerHeight(!0),e=$(this.confs.SELECTOR_CONTROL_DATA).outerWidth(!0);e=this.isMaxi()?-(a-e):0;this.$ticket.position();this.$ajaxIndicator.css({width:a,height:b,left:e});this.$stickyElm.addClass(this.confs.LOADING)};b.TicketManager.prototype.hideAjaxIndicator=function(){this.$stickyElm.removeClass(this.confs.LOADING)};b.TicketManager.prototype.showRecountingIndicator=function(){this.$ticket.find(this.confs.SELECTOR_RECOUNT_ICON).addClass(this.confs.ROTATING_CLASS)};b.TicketManager.prototype.hideRecountingIndicator=function(){var a=this;setTimeout(function(){a.$ticket.find(a.confs.SELECTOR_RECOUNT_ICON).removeClass(a.confs.ROTATING_CLASS)},500)};b.TicketManager.prototype.switchTicket=function(a,b){a=!isNaN(a)&&1<=a&&4>=a?a:this.getTicketId();var c=g.editUrlParams(this.confs.switchTicketUrl,{ticket_id:a});a&&c&&this.sendTicketRequest(c,b)};b.TicketManager.prototype.activateTicket=function(){var a=$(this.confs.SELECTOR_TICKET_TAB).get(0);a.fn.activate.call(a)};b.TicketManager.prototype.switchToEmptyTicket=function(){var a=this.getNextTicket($.proxy(function(a){return!0===this.getTicketsUsage(a)},this));a&&this.switchTicket(a)};b.TicketManager.prototype.getNextTicket=function(a){var b=this.getTicketId(),e=this.ticketsData,d=0;d;for(5;5>d;d++){var f=(d+b+1)%5;f=e[f];if("undefined"!==typeof f)if("function"===typeof a){if(a(f.id))return f.id}else return f.id}return null};b.TicketManager.prototype.openDialog=function(a){FORTUNA.Modal.open($.extend({id:this.confs.DIALOG_ID},a||{}))};b.TicketManager.prototype.closeDialog=function(){FORTUNA.Modal.close(this.confs.DIALOG_ID)};b.TicketManager.prototype._getMaxiGroupCookieName=function(){return this.confs.MAXI_GROUP_COOKIE_PREFIX+"_"+this.getTicketId()};b.TicketManager.prototype.combiGroupClickHandler=function(a){var b=$(a.target).closest(".combi-group");a=b.data("bets")||b.find(".combi-group-c");var e=b.data("drop-group"),d=b.hasClass("toggled");b.data("bets",a);a.stop().slideToggle(100,$.proxy(function(){b.toggleClass("toggled");this.combiGroupHandleCookie(e,d)},this))};b.TicketManager.prototype.combiGroupHandleCookie=function(a,b){var c=this._getMaxiGroupCookieName(),d=$.cookie(c);d=d?d.split("_"):[];a&&(b?d=g.removeFromArray(d,a):d.push(a),a=d&&d.length?d.join("_"):"",$.cookie(c,a,{path:"/"}))};b.TicketManager.prototype.combiGroupReleaseCookie=function(){$.removeCookie(this._getMaxiGroupCookieName(),{path:"/"});this.$ticket.find(".combi-group-c").show({duration:0},function(){$(this).closest(".combi-group").removeClass("toggled")})};b.TicketManager.prototype.combiShowBetValues=function(a){var b=!this.isMaxi()||this.isMaxi()&&this.$ticket.hasClass(this.confs.OPTIMIZED_COMBI_CLASS),e=!this.$ticket.hasClass("drop-active");b&&e&&(a=$(a?a.target:null).hasClass(this.confs.COMBI_COLLAPSED_INDICATOR)?0:200,this.confs.showBetValuesTimer=setTimeout($.proxy(function(){var a=this.$ticket.find(this.confs.SELECTOR_MAXI_BET_VALUES),b=$("#bet-values"),c=a.outerHeight(!0);b=b.outerHeight(!0);var e=a.data("combi-height")||400;c&&a.length&&(bgPosition=-(e-b-c),a.css({top:-c,backgroundPosition:"0 "+bgPosition+"px"}),$(this.confs.SELECTOR_BET_VALUES_HOLDER).addClass("hover"))},this),a))};b.TicketManager.prototype.getActiveCombiBetValue=function(){return $(this.confs.SELECTOR_BET_VALUES_HOLDER).find(":focus")};b.TicketManager.prototype.combiHideBetValues=function(){var a=!this.isMaxi()||this.isMaxi()&&this.$ticket.hasClass(this.confs.OPTIMIZED_COMBI_CLASS);clearTimeout(this.confs.showBetValuesTimer);this.confs.showBetValuesTimer=null;a&&(this.$ticket.find(this.confs.SELECTOR_MAXI_BET_VALUES),$(this.confs.SELECTOR_BET_VALUES_HOLDER).removeClass("hover"))};b.TicketManager.prototype.setCombiBetValues=function(a){a=$(a.target);var b=a.data("index"),e=this.confs.setIndividualpriceUrl,d={};this.removeOtherWarningsCOMBI();d["bet_value["+b+"]"]=a.val();d["equally["+b+"]"]=a.data("equally")?!0:!1;d.just_part=!0;(a=g.editUrlParams(e,d))&&this.sendTicketRequest(a,{showIndicator:!1,callback:{start:$.proxy(this.showRecountingIndicator,this),end:$.proxy(this.hideRecountingIndicator,this)}})};b.TicketManager.prototype.combiEntriesToggle=function(a){var b=this.$ticket.find(this.confs.SELECTOR_COMBI_ENTRIES_FILTER);a=$.extend({method:"animate",duration:150},a||{});b.hasClass("js-show-list")?(b="static"===a.method?"show":"fadeIn",$("#combi-entries")[b]({duration:a.duration})):(b="static"===a.method?"hide":"fadeOut",$("#combi-entries")[b]({duration:a.duration}))};b.TicketManager.prototype.updateCombiBetValues=function(a){var b=$("#bet-values .summary-updown-values"),e=parseFloat(this.confs.minStake),d=parseFloat(this.confs.maxStake);if("object"===typeof a){this.$ticket.find(".combi-bet-values-holder .combi_values").each(function(){var b=$(this).data("index"),c=a["value-"+b];$(this).find("input.js-combi-value").each(function(){$(this).hasClass("pay_value")?$(this).val(c.pay):$(this).val(c.bet);c.disabled?$(this).attr("disabled","disabled"):$(this).removeAttr("disabled")})});if(a.stake){a.stake=parseFloat(a.stake);var f=$(this.confs.SELECTOR_TICKET_SUMMARY).find(this.confs.SELECTOR_COMBI_ALL);f.val(a.stake);f.get(0).defaultValue=a.stake}a.topPay&&$(this.confs.SELECTOR_TICKET_SUMMARY).find(this.confs.SELECTOR_TO_PAY).html(a.topPay);a.charge&&$(this.confs.SELECTOR_TICKET_SUMMARY).find(this.confs.SELECTOR_CHARGE_VALUE).html(a.charge);a.points&&$(this.confs.SELECTOR_TICKET_SUMMARY).find(this.confs.SELECTOR_USER_POINTS).html(a.points);f=$(this.confs.SELECTOR_TICKET_SUMMARY).find(this.confs.SELECTOR_PL_EXTRA_CHARGE_VALUE);var g=0<parseFloat(a.PLextraCharge)?"removeClass":"addClass",h=f.closest("tr");a.PLextraCharge&&f.html(a.PLextraCharge);h[g]("hidden");f=this.getActiveCombiBetValue();this.selectTextInInput.call(f);e=a.stake<=e?"removeClass":"addClass";d=a.stake>=d?"removeClass":"addClass";b.find(".minus")[e]("active js-control");b.find(".plus")[d]("active js-control")}};b.TicketManager.prototype.resetCombiBetValues=function(){var a=this.confs.setTotalpriceUrl,b={};this.removeOtherWarningsCOMBI();b.just_part=!0;b["bet_value[0]"]=0;b["equally[0]"]=!1;(a=g.editUrlParams(a,b))&&this.sendTicketRequest(a,{showIndicator:!1,callback:{start:$.proxy(this.showRecountingIndicator,this),end:$.proxy(this.hideRecountingIndicator,this)}})};b.TicketManager.prototype.setCombiDependencies=function(){!this.isMaxi()&&this.isMaxi()&&this.$ticket.hasClass(this.confs.OPTIMIZED_COMBI_CLASS)&&this.combiHideBetValues()};b.TicketManager.prototype.importTicket=function(a,b){a=g.editUrlParams(a,{ticket_id:b,save_id:1});this.sendTicketRequest(a)};b.TicketManager.prototype.prepareStaketSlider=function(){var a=this.confs.betValues,b=parseFloat($(this.confs.SELECTOR_STAKE_REF_ELM).val());b=g.getClosestNumber(a,b,!0);b=0>b||"undefined"===typeof b?0:b;a=a.length-1;var e=$(this.confs.SELECTOR_STAKE_SLIDER),d=!0===e.data("prepared");e.slider({min:0,max:a,value:b,step:1});d||(e.on("slidestop",$.proxy(this._onStakeSliderStop,this)),e.on("slide",$.proxy(this._onStakeSliderStep,this)),e.data("prepared",!0))};b.TicketManager.prototype._onStakeSliderStep=function(a,b){a=this.$ticket.find(this.confs.SELECTOR_STAKE_REF_ELM);b=parseFloat(this.confs.betValues[b.value]);a.val(b)};b.TicketManager.prototype._onStakeSliderStop=function(a){a=this.$ticket.find(this.confs.SELECTOR_STAKE_REF_ELM);var b=g.normalizeNumber(a.val()),e=g.normalizeNumber(a.get(0).defaultValue);b!=e&&(a[this.isCOMBI()?"blur":"change"](),h.Ticket.stakeSliderUsage&&this._trackSliderUsage(b))};b.TicketManager.prototype._trackSliderUsage=function(a){h.trackGAEvent("ticket","stake-slider-value",a)};b.TicketManager.prototype.optimizeTicketHeight=function(a){if(this.$ticketHolder){var b=$(window).height();this.isToEnableLowResOptimizations(b)?this.enableLowResOptimizations(b):this.isToDisableLowResOptimizations()&&this.disableLowResOptimizations();this.isToOptimizeSuperTicket(b)?this.disableSuperticket():this.enableSuperticket();this.isMaxi()&&this.isCOMBI()?this.optimazeCombiST(a):this.releaseCombiSTOptimization()}};b.TicketManager.prototype.enableLowResOptimizations=function(a){this.$ticket.addClass(this.confs.OPTIMIZED_TICKET_CLASS);this.ticket.optimized=!0;this.disableFixedTicket();g.Storage.setItem(this.confs.OPTIMIZED_COOKIE,"true",!0)};b.TicketManager.prototype.disableLowResOptimizations=function(){this.$ticket.removeClass(this.confs.OPTIMIZED_TICKET_CLASS);this.ticket.optimized=!1;g.Storage.removeItem(this.confs.OPTIMIZED_COOKIE,!0);this.isMaxi()||this.enableFixedTicket()};b.TicketManager.prototype.disableSuperticket=function(){var $superTicketInput=$(this.confs.SELECTOR_CONTROL_DATA).find("input.maximize-ticket"),$superTicketLabel=$superTicketInput.closest("label");$superTicketInput.addClass("disabled").prop("disabled",!0);$superTicketLabel.addClass("disabled");this.isMaxi()&&this.closeSuperTicket()};b.TicketManager.prototype.enableSuperticket=function(){var $superTicketInput=$(this.confs.SELECTOR_CONTROL_DATA).find("input.maximize-ticket"),$superTicketLabel=$superTicketInput.closest("label");$superTicketInput.removeClass("disabled").removeProp("disabled");$superTicketLabel.removeClass("disabled")};b.TicketManager.prototype._trackSuperticketUsage=function(a){a=$(a).is(":checked")?"opened":"closed";h.trackGAEvent("ticket","superticket",a)};b.TicketManager.prototype.disableFixedTicket=function(){var a=this.isLayoutPinned();this.$layoutToggle.addClass("disabled");a||this.isMaxi()||(this.savePinnedStatus(),this.setLayoutPinned(!0))};b.TicketManager.prototype.enableFixedTicket=function(){this.$layoutToggle.removeClass("disabled");this.restorePinnedStatus()};b.TicketManager.prototype.savePinnedStatus=function(){var a=this.isLayoutPinned()?"true":"false";g.Storage.setItem("pinned_tmp",a)};b.TicketManager.prototype.restorePinnedStatus=function(){var a=g.Storage.getItem("pinned_tmp");a&&(g.Storage.removeItem("pinned_tmp"),this.setLayoutPinned("true"===a))};b.TicketManager.prototype.optimazeCombiST=function(a){var b=this.$ticket.hasClass(this.confs.OPTIMIZED_COMBI_CLASS)?10:20,e=this.$ticket.find(".combi-values-holder").outerHeight(!0);e=this.$ticket.find(".combi-bet-values-all").offset().top-e;var d=this.$ticket.find("#ticket-summary #ticket-messages").outerHeight(!0)||0,f=this.$ticket.find(".ticket-additional-controls"),g=f.outerHeight(!0);f=f.offset().top+g;e-f-d<=b?(this.$ticket.addClass(this.confs.OPTIMIZED_COMBI_CLASS),this.combiHideBetValues()):a||this.releaseCombiSTOptimization()};b.TicketManager.prototype.releaseCombiSTOptimization=function(){this.$ticket.removeClass(this.confs.OPTIMIZED_COMBI_CLASS);this.setCombiDependencies()};b.TicketManager.prototype.isMaxi=function(){if(this.$ticket)return this.$ticket.hasClass("maxi")};b.TicketManager.prototype.isCOMBI=function(){return"COMBI"===this.confs.ticketMethod};b.TicketManager.prototype.selectTextInInput=function(){$(this).select()};b.TicketManager.prototype.isMobileDevice=function(){return navigator.userAgent.match(/(iPad|iPhone|iPod|Android|android)/)?!0:!1};b.TicketManager.prototype.isToEnableLowResOptimizations=function(a){return this.isMobileDevice()?!0:0>a-this.confs.MIN_HEIGHTS.viewport};b.TicketManager.prototype.isToDisableLowResOptimizations=function(){return this.ticket.optimized||this.isLayoutPinned()};b.TicketManager.prototype.isToOptimizeSuperTicket=function(a){return a<this.confs.MIN_HEIGHTS.superticket||this.isMobileDevice()};b.TicketManager.prototype._trackClearTicket=function(){this._trackBetsRemoved($("#ticket-bets .ticket-bet"))};b.TicketManager.prototype._trackRemoveBet=function(a){a&&(a=g.getURLParams(a).odds_id,a=$("#bet-id-"+a),this._trackBetsRemoved(a))};b.TicketManager.prototype._trackBetsRemoved=function(a){a.length&&"undefined"!==typeof dataLayer&&null!=dataLayer&&dataLayer.push&&(a=this._prepareGTMProducts(a),a.length&&dataLayer.push({event:"removeFromCart",ecommerce:{remove:{products:a}}}))};b.TicketManager.prototype.trackBetAdded=function(a){a.length&&"undefined"!==typeof dataLayer&&null!=dataLayer&&dataLayer.push&&(a=this._prepareGTMProducts(a),a.length&&dataLayer.push({event:"addToCart",ecommerce:{add:{products:a}}}))};b.TicketManager.prototype.trackTicketAccepted=function(a){if("undefined"!==typeof dataLayer&&null!=dataLayer&&a){var b=this._prepareGTMProducts($("#ticket-bets .ticket-bet"));if(b.length){var e=$("#ticket .ticket-bet-value").val();dataLayer.push({event:"purchase",ecommerce:{purchase:{actionField:{id:a,revenue:e},products:b}}})}}};b.TicketManager.prototype._prepareGTMProducts=function(a){var b=[];a.each(function(){var a=$(this),c=a.data("gtm-enhanced-ecommerce-id"),f=a.data("gtm-enhanced-ecommerce-match")+" - "+a.data("gtm-enhanced-ecommerce-sport")+" - "+a.data("gtm-enhanced-ecommerce-league"),h=a.data("gtm-enhanced-ecommerce-league"),k=a.data("gtm-enhanced-ecommerce-sport");a=a.data("gtm-enhanced-ecommerce-variant");g.isNullOrUndefined(c)||g.isNullOrUndefined(f)||g.isNullOrUndefined(h)||g.isNullOrUndefined(k)||g.isNullOrUndefined(a)||b.push({id:c,name:f,brand:h,category:k,variant:a})});return b};b.TicketManager.prototype.trackImportTicket=function(){this.trackBetAdded($("#ticket-bets .ticket-bet"))};b.TicketManager.prototype.addBetOnTicketClassesToOdd=function(a,b){var c=$(".betlink-"+a);c.removeClass("bet-on-ticket-1 bet-on-ticket-2 bet-on-ticket-3 bet-on-ticket-4");$(b).each(function(a,b){c.addClass("bet-on-ticket-"+b)})};b.TicketManager.prototype.addTicketClassToBody=function(a){$("body").removeClass("ticket-1 ticket-2 ticket-3 ticket-4").addClass("ticket-"+a)}})(window.FORTUNA.UI);
			/* /ticket_manager_js */
			/* ticket_dd_js */

(function(){var b={SELECTOR_TICKET:"#ticket",SELECTOR_TICKET_HOLDER:"#ticket-holder",SELECTOR_TICKET_BET:"#ticket-bets .ticket-bet",SELECTOR_ZONES:"#scrollable-ticket-holder .drop-zone",SELECTOR_PHANTOM:"#ticket-group-drop-zones",SELECTOR_REMOVE_ZONE:"#drop-zone-remove",SELECTOR_LAST_COMBI_GROUP:".combi-group:last",SELECTOR_GROUP_ZONES:".combi-group .drop-zone",SELECTOR_ALIGN_TARGET:"#ticket-bets",CLS_TICKET_BET_PROXY:"ticket-bet-dd-proxy",CLS_DROP_ZONE_ACTIVE:"drop-active",CLS_DROP_ZONE_HOVER:"drop-hover",ID_DROP_ZONES_HOLDER:"drop-zones-holder",SELECTOR_ZONE_HOLDER:"#drop-zones-holder",SELECTOR_MOVEABLE_DROP_ZONES:".drop-zone:not(.js-static-zone)",SELECTOR_COMBI_ENTRIES:"#combi-entries",ID_REMOVE_ZONE:"drop-zone-remove",dropHolderDuration:300,fadeAnimationSpeed:300,init:function(){FORTUNA.UI.TicketDD.hidePhantomZones(!0);b.generateSideDZHolder();b._initDraggable();b._initDroppable()},initDragElm:function(a){a=$(a);a.data("uiDraggable")||(a.draggable({appendTo:"#ticket",revert:"invalid",revertDuration:200,helper:function(a){return b.getTicketBetProxy(this)},cursorAt:{left:0,top:0},refreshPositions:!0}),a.on("dragstart",b._onDragStart),a.on("dragstop",b._onDragStop),a.data("_dropUrl",null))},initDropZone:function(a){$(a).droppable({accept:b.SELECTOR_TICKET_BET,drop:b._onDrop,hoverClass:b.CLS_DROP_ZONE_HOVER,addClasses:!1,tolerance:"pointer"})},getTicketBetProxy:function(a){var d=$(a);a=d.find(".bet_title \x3e span").text();var c=d.find(".bet_title \x3e div").text();d=d.find(".bet_title \x3e small").text();return $("\x3cdiv\x3e").addClass(b.CLS_TICKET_BET_PROXY).append($("\x3cdiv\x3e").addClass("rate").html(a)).append($("\x3cdiv\x3e").addClass("name").html(c)).append($("\x3cdiv\x3e").addClass("type").html(d))},showPhantomZones:function(){var a=$(b.SELECTOR_PHANTOM),d=$(b.SELECTOR_REMOVE_ZONE),c=$(b.SELECTOR_ALIGN_TARGET),e=$(b.SELECTOR_TICKET),h=$(b.SELECTOR_TICKET_HOLDER),k=c.width(),m=a.outerHeight(!0),f=h.hasClass("COMBI")?$(b.SELECTOR_LAST_COMBI_GROUP):$(b.SELECTOR_TICKET_BET).last();f=f.offset().top+f.outerHeight(!0);c=c.offset().top+c.outerHeight(!0);c=f>c?c:f;f=h.offset().top+h.outerHeight(!0);var g={},l={};e.hasClass("maxi")?(g.width=k-20,l.width=k-20):(g.width=250,l.width=250);c+2*m>f?(g.bottom=0,g.top="auto"):(g.bottom="auto",g.top=c+5-h.offset().top);a.css(g);d.css(l);a.add(d).stop().fadeIn(b.fadeAnimationSpeed)},hidePhantomZones:function(a){a=$(b.SELECTOR_PHANTOM);var d=$(b.SELECTOR_REMOVE_ZONE);a.add(d).stop().fadeOut(b.fadeAnimationSpeed)},_initDraggable:function(){$(b.SELECTOR_TICKET_BET).each(function(){b.initDragElm(this)})},_initDroppable:function(){$(b.SELECTOR_ZONES).each(function(){b.initDropZone(this)})},_onDragStart:function(a){var d=$(a.target);$(b.SELECTOR_TICKET).addClass(b.CLS_DROP_ZONE_ACTIVE);FORTUNA.UI.TicketDD.showPhantomZones();b.showDZHolder();$(b.SELECTOR_GROUP_ZONES).each(function(){var a=$(this),e=a.closest(".combi-group");0===d.closest(e).length&&a.addClass(b.CLS_DROP_ZONE_ACTIVE)})},_onDragStop:function(a){a=$(a.target);var d=FORTUNA.UI.ticketManager;$(b.SELECTOR_TICKET).removeClass(b.CLS_DROP_ZONE_ACTIVE);FORTUNA.UI.TicketDD.hidePhantomZones();b.hideDZHolder();$(b.SELECTOR_GROUP_ZONES).removeClass(b.CLS_DROP_ZONE_ACTIVE);if(a.data("_dropUrl")){switch(a.data("gtm-enhanced-ecommerce-action")){case "remove":d._trackRemoveBet(a.data("_dropUrl"))}d.sendTicketRequest.call(d,a.data("_dropUrl"))}},_onDrop:function(a,d){a=$(a.target);var c=$(d.draggable);d=$(d.helper);var e=a.data("drop-confirm"),h=a.data("drop-url"),k=b._getBetData(c);a.data("drop-group")&&(k.group=a.data("drop-group"));d.hide();b.hideDZHolder();if(!e||e&&confirm(e)){switch(a.attr("id")){case b.ID_REMOVE_ZONE:c.data("gtm-enhanced-ecommerce-action","remove")}c.data("_dropUrl",FORTUNA.UTILS.editUrlParams(h,k))}},_getBetData:function(a){a=$(a);var b=FORTUNA.UI.ticketManager;a=b.getActiveInstance.call(b,a.data("odd")).getParsedBetLink();return{info_id:a.info,odds_id:a.odd,value:a.rate}},generateSideDZHolder:function(){var a=$(b.SELECTOR_TICKET),d=a.find(b.SELECTOR_MOVEABLE_DROP_ZONES),c=$(b.SELECTOR_ZONE_HOLDER);c.length?b._clearHoldersDZ(c):c=b._prepareDZHolder(b.SELECTOR_ZONE_HOLDER);d.each(function(){if("T"!==$(this).data("dropGroup")){var a=$(this).clone(),b="side-"+$(this).attr("id");a.attr("id",b);a.appendTo(c)}});c.insertAfter(a)},showDZHolder:function(){var a=$(b.SELECTOR_ZONE_HOLDER);if(a&&!a.length)return!1;var d=a.outerWidth(!0);if(FORTUNA.UI.ticketManager.isMaxi){var c=$(b.SELECTOR_TICKET),e=c.outerWidth(!0)-$("#"+FORTUNA.UI.ticketManager.confs.STICKY_HOLDER).outerWidth(!0);d+=e}FORTUNA.UI.ticketManager.isLayoutPinned()?a.find(b.SELECTOR_MOVEABLE_DROP_ZONES).first().is(":visible")||(e=parseInt(a.css("top")),c=a.offset().top-c.offset().top,c=c<e?e:c,a.data("_top",e),a.css("top",c)):a.css("top",a.data("_top"));a.addClass(b.CLS_DROP_ZONE_ACTIVE);a.css({left:-d});b.hideCombiEntries();a.fadeIn(b.fadeAnimationSpeed)},hideDZHolder:function(){var a=$(b.SELECTOR_ZONE_HOLDER);if(a&&!a.length)return!1;a.addClass(b.CLS_DROP_ZONE_ACTIVE);a.css({left:0});a.fadeOut(b.fadeAnimationSpeed);b.showCombiEntries()},_prepareDZHolder:function(a){return $('\x3cdiv id\x3d"drop-zones-holder" /\x3e')},_clearHoldersDZ:function(a){if(a&&!a.length)return!1;a.empty()},showCombiEntries:function(){var a=$(b.SELECTOR_COMBI_ENTRIES);a.is(":visible")&&a.fadeIn("fast")},hideCombiEntries:function(){var a=$(b.SELECTOR_COMBI_ENTRIES);a.is(":visible")&&a.fadeOut("fast")}};$(b.init);$(document).on("tdi:ajax:update",b.init);$(document).on("tdi:ajax:insert",b.init);FORTUNA.UI.TicketDD=b})();
			/* /ticket_dd_js */
			/* active_betlinks_js */

(function(){var d=FORTUNA.UTILS;FORTUNA.UI.ActiveBetLink=function(a,b,c){"undefined"!==typeof c&&$.merge(c,{});this.id=a.odd;this.betLink=a;this.tickets=[];this.addTicketToInstance(b)};FORTUNA.UI.ActiveBetLink.prototype={addTicketToInstance:function(a){a=[].concat(a);for(var b=this.tickets.slice(0),c=0,e=b.length;c<e;c++)d.isInArray(a,b[c])||this.removeTicketIDFromInstance(b[c]);c=0;for(e=a.length;c<e;c++)d.isInArray(this.tickets,a[c])||(b=parseInt(a[c]),isNaN(b)||this.tickets.push(b))},removeTicketIDFromInstance:function(a){a=parseInt(a);this.tickets=d.removeFromArray(this.tickets,a);0===this.tickets.length&&this.destroy()},instanceOnTicket:function(a){return d.isInArray(this.tickets,String(a))},showTooltip:function(a){a||this.getInstanceElm().get(0);var b=this.getInstanceTickets();a&&0<b.length&&FORTUNA.UI.betLinkTooltip.show(a,b)},hideTooltip:function(){var a=this.getInstanceElm().get(0),b=this.getInstanceTickets();a&&0<b.length&&FORTUNA.UI.betLinkTooltip.hide(a)},getInstanceId:function(){return this.id},getInstanceElm:function(){var a=".betlink-"+this.getInstanceId();return $(a)},getInstanceTickets:function(){return this.tickets},getInstanceParentID:function(){return this.betLink.parentID},getBetLinkAttr:function(a){return a&&this.betLink.hasOwnProperty(a)?this.betLink[a]:this.getParsedBetLink()},getParsedBetLink:function(){return this.betLink},updateInstance:function(a){},destroy:function(){var a=this.getInstanceId();a&&(FORTUNA.UI.ticketManager.uncheckActiveBetLink(a),delete FORTUNA.UI.ticketManager.activeInstances[a])}}})();
			/* /active_betlinks_js */
			/* bet_table */

(function(){var n=YAHOO,c=YAHOO.util.Dom,h=YAHOO.util.Event,p=n.util.Connect;FORTUNA.UI.BetTable=function(k,t){function u(){var a=this;c.getElementsByClassName(this.config.order_link_cls,"a",this.table,function(b){var c=b.rel;a.orderLinks[c]=b;h.on(b,"click",function(b){h.stopEvent(b);a.orderByColumn.call(a,c)})})}function v(){var a=this;if(this.filterHolder){this.filterLinks=this.filterHolder.getElementsByTagName("a");for(var b=0;b<this.filterLinks.length;b++){var e=this.filterLinks[b];c.hasClass(e,"defaultFilterLink")&&(this.defaultFilterLink=e);h.purgeElement(e)}this.filterHolder._enhanced||(this.surplusItems=c.getElementsByClassName("surplus-filter-items","div",this.filterHolder)[0],h.delegate(this.filterHolder,"click",function(b){h.preventDefault(b);q.call(a,this)},"a.filterLink"),h.delegate(this.filterHolder,"click",function(b){h.preventDefault(b);w.call(a,this)},"a.more-items-link"),this.filterHolder._enhanced=!0)}if(this.cancelFilterLink)h.on(this.cancelFilterLink,"click",function(b){h.stopEvent(b);r.call(a);q.call(a,a.defaultFilterLink)})}function x(a){for(var b,e=a.length,d,g=0;g<e;g++){b=a[g];if(c.hasClass(b,this.config.toggable_row_cls)){d=b;var f=d.getAttribute("data-id");f=c.get(this.config.toggler_prefix+f);var k=c.hasClass(d,"active")?!0:!1;f?(f.row={row:d,expanded:k,details:{tr:null,td:null,content:""},toggler:f},h.on(f,"click",y,f,this),k&&l.call(this,f.row,f.href),d=f.row):d=null;d&&this.toggable_rows.push(d)}z.call(this,b)}}function q(a){for(var b=c.getAncestorByClassName(this.table_container,"gradient_table")||this.table_container.parentElement,e=b.querySelectorAll('.betTableFilterHolder input[type\x3d"checkbox"]'),d=0;d<e.length;d++)e[d].checked=!1;d=a.href.lastIndexOf("\x3d")+1;d=a.href.substring(d).split("%2C").join(",");b=b.querySelectorAll('.betTableFilterHolder input[value\x3d"'+d+'"]');for(d=0;d<b.length;d++)b[d].checked=!0;m.call(this,this.table_container,a.href);b=this.filterLinks;for(d=0;d<b.length;d++)c.removeClass(b[d],"activeFilterLink");c.addClass(a,"activeFilterLink");this.activeFilterLink=a;a==this.defaultFilterLink?c.addClass(this.cancelFilterLink,"hidden"):c.removeClass(this.cancelFilterLink,"hidden")}function w(a){if(this.surplusItems)if("block"==this.surplusItems.style.display)r.call(this);else{c.setStyle(this.surplusItems,"display","block");a=this.filterHolder.querySelectorAll(".visible-filter-items span");c.setStyle(a,"display","none");a=this.filterHolder.querySelector(".more");var b=this.filterHolder.querySelector(".less");c.setStyle(a,"display","none");c.setStyle(b,"display","inline")}else throw"No link elm or surplus items holder available";}function r(){c.setStyle(this.surplusItems,"display","none");var a=this.filterHolder.querySelectorAll(".visible-filter-items span");c.setStyle(a,"display","inline-block");a=this.filterHolder.querySelector(".more");var b=this.filterHolder.querySelector(".less");c.setStyle(a,"display","inline");c.setStyle(b,"display","none")}function m(a,b){var e=FORTUNA.UI.ticketManager;a.innerHTML="";c.addClass(a,"bet_table_holder_loading");b&&p.asyncRequest("get",b+"\x26_ajax\x3d1",{success:function(b){c.removeClass(a,"bet_table_holder_loading");a.innerHTML=b.responseText;c.getElementsByClassName("bet_table","table",a,function(a){(new FORTUNA.UI.BetTable(a,{set_onclick:!1})).enhance()});e&&e.checkAllActiveBetLinks()},failure:function(b){c.removeClass(a,"bet_table_holder_loading");a.innerHTML=b.statusText}})}function A(a,b){a=[!1,!1,!1,!1];for(var c=0;c<b.length;c++)"true"==b[c]&&(a[c]=!0);return a}function y(a,b){var e=b.row;e.expanded?(c.removeClass(e.details.tr,"visible_row"),c.removeClass(e.row,this.config.active_bet_row_cls),c.addClass(e.details.tr,"hidden_row"),e.expanded=!1):l.call(this,e,b.href);h.stopEvent(a)}function z(a){var b=this;h.delegate(a,"click",function(a){var c=this.getAttribute("data-toggle-bet");B.call(b,c,this.href);h.preventDefault(a)},"a.row_group_toggle")}function B(a,b){a=c.get("mainId-"+a);(a=c.getChildrenBy(a,function(a){return c.hasClass(a,"row_toggle")})[0])&&l.call(this,a.row,b)}function l(a,b){var e=a.row.getElementsByTagName("td"),d=c.hasClass(a.row,"cached");d||(a.details.tr||(a.details.td=document.createElement("td"),a.details.td.setAttribute("colSpan",e.length),a.details.tr=document.createElement("tr"),a.details.tr.appendChild(a.details.td),c.addClass(a.details.td,this.config.active_subgame_cls)),C.call(this,a,b));c.replaceClass(a.details.tr,"hidden_row","visible_row");c.addClass(a.row,this.config.active_bet_row_cls);d||c.insertAfter(a.details.tr,a.row);a.expanded=!0}function C(a,b){var e=this;c.addClass(a.details.td,this.config.loading_cls);b&&p.asyncRequest("GET",b+"\x26_ajax\x3d1",{success:function(b){b=b.responseText;c.removeClass(a.details.td,e.config.loading_cls);a.details.td.innerHTML=b;a.details.content=b;c.addClass(a.row,"cached");c.getElementsByClassName("bet_table","table",a.details.td,function(a){var b=new FORTUNA.UI.BetTable(a,{set_onclick:!1});b.enhance();FORTUNA.UI.betTablesObj[a.id]=b;FORTUNA.UI.betTables.push(b)});FORTUNA.UI.ticketManager.checkActiveSubgameBetLink.call(FORTUNA.UI.ticketManager,a)},failure:function(b){a.details.td.innerHTML=b.responseText;a.details.content=null}})}this.table=k;this.table_container=c.getAncestorByClassName(k,"bet_tables_holder");this.rows=[];this.toggable_rows=[];this.filterHolder=document.getElementById(k.id+"-filterHolder");this.defaultFilterLink=null;this.cancelFilterLink=document.getElementById(k.id+"-filterCancel");this.filterLinks=[];this.orderLinks={};this.isGroupedSubtable=c.hasClass(k,"bet_grouped_subtable");this.surplusItems=null;this.filterCheckboxes=document.querySelectorAll('.betTableFilterHolder input[type\x3d"checkbox"]');this.betradarWidgets={leages:null};this.betradarId=this.table_container&&this.table_container.getAttribute("data-betradarid");this.config=n.lang.merge({toggable_row_cls:"toggable_row",active_bet_row_cls:"active",active_subgame_cls:"active_subgame",loading_cls:"loading",toggler_prefix:"toggler-id-",bet_link_cls:"add_bet_link",order_link_cls:"bt_order_link",set_onclick:!0},t||{});this.enhance=function(){if(this.config.set_onclick&&null!=this.filterHolder){h.on(this.filterHolder.querySelectorAll('input[type\x3d"checkbox"]'),"change",function(a){a=a||window.event;a=a.target||a.srcElement;var b=c.getAncestorByClassName(a,"gradient_table")||c.getAncestorByClassName(a,"bet_table_top_box").parentElement,d=b.querySelector(".bet_table_top_box \x3e a");c.removeClass(d,"hidden");d=[];for(var g=b.querySelectorAll('input[type\x3d"checkbox"]'),f=0;f<g.length;f++)1==g[f].checked&&d.push(g[f]);g=b.querySelector(".sectionLink");g=g.textContent||g.innerText;for(f=0;f<d.length;f++){d[f].name==a.name&&1==a.checked?g+=d[f].value+";":d[f].name!=a.name&&(g+=d[f].value+";");var h=d[f].name,k=b.querySelectorAll('input[name\x3d"'+h+'"]');if(null!=k)for(var l=0;l<k.length;l++)k[l].checked=h==a.name?a.checked:!0}m(b.querySelector(".bet_tables_holder"),g)});var a=this.filterHolder.querySelector('.visible-filter-items input[type\x3d"checkbox"]');if(!a)return null;a.checked=!0;a=this.filterHolder.querySelector('.surplus-filter-items input[type\x3d"checkbox"]');a.checked=!0}this.rows=this.table.getElementsByTagName("tr");x.call(this,this.rows);v.call(this);u.call(this);FORTUNA.UI.initBetradarWidgets(this.betradarId)};this.clickHandler=function(a){var b=h.getTarget(a),e=this.config.bet_link_cls;c.hasClass(b,e)||(b=c.getAncestorByClassName(b,e));b&&this.betLinkClickHandler.call(this,a,b)};this.betLinkClickHandler=function(a,b){b=b.index?FORTUNA.UI.allBetLinks[b.index]:this.betLink_prepare(b);FORTUNA.UI.popupTicketWindow?(FORTUNA.UI.popupTicketWindow.FORTUNA.UI.ticketManager.addBet(a,b),FORTUNA.UI.popupTicketWindow.focus()):FORTUNA.UI.ticketManager.addBet(a,b)};this.orderByColumn=function(a){(a=this.orderLinks[a])&&m.call(this,this.table_container,a.href)};this.prepareActiveBetLinks=function(){var a=this;c.getElementsByClassName("active_bet_link","a",this.table,function(b){a.betLink_prepare(b)})};this.betLink_prepare=function(a){c.generateId(a,"betLink");var b=a.rel.split(";"),e=FORTUNA.UI.betLinkTooltip,d="update_ticket";FORTUNA.UI.popupTicketWindow&&(d="update_popup_ticket");a.href+="\x26action\x3d"+d;var g={element:a,infoId:b[0],choiceId:b[1],choice:b[2],rate:b[3],oddsId:b[4],betTitle:document.getElementById("title-"+b[0]).innerHTML,active:c.hasClass(a,"active_bet_link"),tickets:[!1,!1,!1,!1]};a.index=FORTUNA.UI.allBetLinks.length;FORTUNA.UI.allBetLinks[a.index]=g;g.active&&(g.tickets=A(a,a.title.split(";")),a.removeAttribute("title"));h.on(a,"mouseover",function(){g.active&&e.show(a,g.tickets)});h.on(a,"mouseout",function(){g.active&&e.hide()});return g}}})();
			/* /bet_table */
			/* load_bet_tables */

(function(){var b=YAHOO.util.Dom,g=YAHOO.util.Event,f=YAHOO.util.Cookie,k=YAHOO.util.Connect;$.extend(FORTUNA.UI,{allBetLinks:[],betTables:[],betComponents:{filterItemsBubble:null,activeExpandFilterLink:null,activeTable:null},betTablesObj:{},nextBetTableLoading:!1,loadBetTables:function(a){var d=this;a=b.get(a||document.body);var c=0;b.getElementsByClassName("bet_table","table",a,function(a){0===c&&(d.betComponents.filterItemsBubble=d.prepareCustomElement({id:"surplus-items-dialog",clsName:"invisible"}),d.setShowHideMethods(d.betComponents.filterItemsBubble));if(!b.hasClass(a,"no_js")){var e=new FORTUNA.UI.BetTable(a);e.enhance();d.betTablesObj[a.id]=e;d.betTables.push(e)}c++})},betTablesOrderByColumn:function(a){for(var b=this.betTables,c=0;c<b.length;c++)b[c].orderByColumn.call(b[c],a)},enhanceLoader:function(a,d){var c=FORTUNA.UI.betTables[FORTUNA.UI.betTables.length-(1==FORTUNA.UI.betTables.length?1:2)];c&&(c=c.table_container,b.getViewportHeight()+b.getDocumentScrollTop()>b.getY(c)&&this.betTableNextLoad(a,d))},betTableNextLoad:function(a,d){var c=b.get("bet_load_url"),f=b.get("load_start_value"),e=parseInt(f.value),h=b.get("nextBetTablesLoad-"+e),g=b.get("bets_loader");c=-1!==c.value.indexOf("?")?c.value+"\x26":c.value+"?";if(c=c+"start\x3d"+e+"\x26action\x3dbet_table_load\x26table_type\x3d"+d)b.removeClass(g,"hidden"),this.nextBetTableLoading||(this.nextBetTableLoading=!0,k.asyncRequest("get",c+"\x26_ajax\x3d1",{success:function(c){b.addClass(g,"hidden");h.innerHTML+=c.responseText;c=document.createElement("div");c.id="nextBetTablesLoad-"+(e+a);b.insertAfter(c,h);f.value=e+a;b.getElementsByClassName("bet_table","table",h,function(a){var b=new FORTUNA.UI.BetTable(a);b.enhance();FORTUNA.UI.betTablesObj[a.id]=b;FORTUNA.UI.betTables.push(b)});FORTUNA.UI.nextBetTableLoading=!1},failure:function(a){h.innerHTML=a.statusText;FORTUNA.UI.nextBetTableLoading=!1}}))},initIdToggling:function(){var a=this;g.on("info-ids-toggler","change",function(){a.toggleInfoIdInOffer(this)})},toggleInfoIdInOffer:function(a){a=document.getElementsByTagName("body");if(1==f.get("showInfoId"))b.removeClass(a,"show_info_id"),f.remove("showInfoId",{path:"/"});else{var d=new Date;b.addClass(a,"show_info_id");f.set("showInfoId",1,{expires:d.setMonth(d.getMonth+1),path:"/"})}},initFixedBetFilter:function(){var a=document.getElementById("betTableDateFilter"),d=this;a&&(this.betFilterTopPosition=b.getY(a),g.on(window,"scroll",function(){d.toggleFilterFixed(a)}))},toggleFilterFixed:function(a){var d=b.getElementsByClassName("box","div","main_content")[1];if(this.betFilterTopPosition<b.getDocumentScrollTop()){if(!b.hasClass(a,"fixed")){b.addClass(a,"fixed right-shadow");var c=parseInt(b.getStyle(d,"margin-top"))+parseInt(a.offsetHeight)+parseInt(b.getStyle(a,"margin-bottom"));b.setStyle(d,"margin-top",c+"px");b.setStyle(a,"width","auto")}}else b.removeClass(a,"fixed right-shadow"),c=parseInt(b.getStyle(d,"margin-top"))-parseInt(a.offsetHeight)-parseInt(b.getStyle(a,"margin-bottom")),b.setStyle(d,"margin-top",(0>c?0:c)+"px"),b.setStyle(a,"width","auto")},loadBetradarFiles:function(){YAHOO.util.Get.script("https://cs.betradar.com/ls/widgets/?/fortuna/cs/Europe:Berlin/widgetloader/widgets/whitelabel1");YAHOO.util.Get.css("/public/8f/21/e/769793_1377178_betradar_widget_livetable.css")},initBetradarWidgets:function(a){var b=parseInt(a,10);if(!b||isNaN(b)||"undefined"===typeof SRLive)return!1;this.loadBetradarLeageWidget(a)},loadBetradarLeageWidget:function(a){if(!document.getElementById("js-wc-widget-"+a)||!a)return!1;SRLive.addWidget("widgets.livetable",{tournamentId:a,enableFeedPolling:!0,promotionLegend:!0,respondToSetMatchFocus:!1,matchId:"idContainer_default",height:"800px",showTitle:!1,container:".wc-widget"})}});FORTUNA.UI.loadBetradarFiles();FORTUNA.UI.initIdToggling();FORTUNA.UI.initFixedBetFilter()})();
			/* /load_bet_tables */
			/* shadowbox_yui.js */
if(typeof YAHOO=="undefined"){throw"Unable to load Shadowbox, core YUI utilities (yahoo, dom, event, anim) not found."}var Shadowbox={};Shadowbox.lib=function(){var A=YAHOO.util.Event;var B=YAHOO.util.Dom;return{getStyle:function(D,C){return B.getStyle(D,C)},setStyle:function(F,E,G){if(typeof E!="object"){var C={};C[E]=G;E=C}for(var D in E){B.setStyle(F,D,E[D])}},get:function(C){return B.get(C)},remove:function(C){C.parentNode.removeChild(C)},getTarget:function(C){return A.getTarget(C.browserEvent||C)},preventDefault:function(C){A.preventDefault(C.browserEvent||C)},addEvent:function(E,C,D){A.addListener(E,C,D)},removeEvent:function(E,C,D){A.removeListener(E,C,D)},animate:function(C,G,F,H){var E=new YAHOO.util.Anim(C,G,F,YAHOO.util.Easing.easeOut);if(typeof H=="function"){var D=function(){E.onComplete.unsubscribe(D);H.call(E,E)};E.onComplete.subscribe(D,E,true)}E.animate()}}}()
			/* /shadowbox_yui.js */
			/* shadowbox.js */
if(typeof Shadowbox=="undefined"){throw"Unable to load Shadowbox, no base library adapter found.";}(function(){var version="1.0";var options={showLoading:true,assetURL:"",loadingImage:"images/loading.gif",animate:true,animSequence:"wh",flvPlayer:"flvplayer.swf",overlayColor:"#000",overlayOpacity:0.85,overlayBgImage:"images/overlay-85.png",listenOverlay:true,autoplayMovies:true,showMovieControls:true,resizeDuration:0.01,fadeDuration:0.01,displayNav:true,continuous:false,displayCounter:true,counterType:"default",viewportPadding:20,handleLgImages:"resize",initialHeight:480,initialWidth:640,enableKeys:true,keysClose:["c","q",27],keysNext:["n",39],keysPrev:["p",37],onOpen:function(){Shadowbox.fortunaOnOpen();},onFinish:null,onChange:null,onClose:function(){Shadowbox.fortunaOnClose();},handleUnsupported:"link",skipSetup:false,text:{cancel:"Cancel",loading:"loading",close:'<span class="shortcut">C</span>lose',next:'<span class="shortcut">N</span>ext',prev:'<span class="shortcut">P</span>revious',errors:{single:'You must install the <a href="{0}">{1}</a> browser plugin to view this content.',shared:'You must install both the <a href="{0}">{1}</a> and <a href="{2}">{3}</a> browser plugins to view this content.',either:'You must install either the <a href="{0}">{1}</a> or the <a href="{2}">{3}</a> browser plugin to view this content.'}},errors:{fla:{name:"Flash",url:"http://www.adobe.com/products/flashplayer/"},qt:{name:"QuickTime",url:"http://www.apple.com/quicktime/download/"},wmp:{name:"Windows Media Player",url:"http://www.microsoft.com/windows/windowsmedia/"},f4m:{name:"Flip4Mac",url:"http://www.flip4mac.com/wmv_download.htm"}},skin:{main:'<div id="shadowbox_overlay"></div><div id="shadowbox_container"><div id="shadowbox"><div id="shadowbox_title"><div id="shadowbox_title_inner"></div></div><div id="shadowbox_body"><div id="shadowbox_body_inner"></div><div id="shadowbox_loading"></div></div><div id="shadowbox_toolbar"><div id="shadowbox_toolbar_inner"></div></div></div></div>',loading:'<img src="{0}" alt="{1}" /><span><a href="javascript:Shadowbox.close();">{2}</a></span>',counter:'<div id="shadowbox_counter">{0}</div>',close:'<div id="shadowbox_nav_close"><a href="javascript:Shadowbox.close();">{0}</a></div>',next:'<div id="shadowbox_nav_next"><a href="javascript:Shadowbox.next();">{0}</a></div>',prev:'<div id="shadowbox_nav_previous"><a href="javascript:Shadowbox.previous();">{0}</a></div>'},ext:{img:["png","jpg","jpeg","gif","bmp"],qt:["dv","mov","moov","movie","mp4"],wmp:["asf","wm","wmv"],qtwmp:["avi","mpg","mpeg"],iframe:["asp","aspx","cgi","cfm","htm","html","pl","php","php3","php4","php5","phtml","rb","rhtml","shtml","txt","vbs"]}};var default_options=null;var SL=Shadowbox.lib;var RE={resize:/(img|swf|flv)/,overlay:/(img|iframe|html|inline)/,swf:/\.swf\s*$/i,flv:/\.flv\s*$/i,domain:/:\/\/(.*?)[:\/]/,inline:/#(.+)$/,rel:/^(light|shadow)box/i,gallery:/^(light|shadow)box\[(.*?)\]/i,unsupported:/^unsupported-(\w+)/,param:/\s*([a-z_]*?)\s*=\s*(.+)\s*/,empty:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i};var cache=[];var current_gallery;var current;var optimal_height=options.initialHeight;var optimal_width=options.initialWidth;var current_height=0;var current_width=0;var preloader;var initialized=false;var activated=false;var drag;var draggable;var overlay_img_needed;var ua=navigator.userAgent.toLowerCase();var isStrict=document.compatMode=="CSS1Compat",isOpera=ua.indexOf("opera")>-1,isIE=ua.indexOf("msie")>-1,isIE7=ua.indexOf("msie 7")>-1,isBorderBox=isIE&&!isStrict,isSafari=(/webkit|khtml/).test(ua),isSafari3=isSafari&&!!(document.evaluate),isGecko=!isSafari&&ua.indexOf("gecko")>-1,isWindows=(ua.indexOf("windows")!=-1||ua.indexOf("win32")!=-1),isMac=(ua.indexOf("macintosh")!=-1||ua.indexOf("mac os x")!=-1),isLinux=(ua.indexOf("linux")!=-1);var absolute_pos=isIE&&!isIE7;var plugins=null;if(navigator.plugins&&navigator.plugins.length){var detectPlugin=function(plugin_name){var detected=false;for(var i=0,len=navigator.plugins.length;i<len;++i){if(navigator.plugins[i].name.indexOf(plugin_name)>-1){detected=true;break;}}return detected;};var f4m=detectPlugin("Flip4Mac");var plugins={fla:detectPlugin("Shockwave Flash"),qt:detectPlugin("QuickTime"),wmp:!f4m&&detectPlugin("Windows Media"),f4m:f4m};}else{var detectPlugin=function(plugin_name){var detected=false;try{var axo=new ActiveXObject(plugin_name);if(axo){detected=true;}}catch(e){}return detected;};var plugins={fla:detectPlugin("ShockwaveFlash.ShockwaveFlash"),qt:detectPlugin("QuickTime.QuickTime"),wmp:detectPlugin("wmplayer.ocx"),f4m:false};}var apply=function(o,e){for(var p in e){o[p]=e[p];}return o;};var isLink=function(el){return typeof el.tagName=="string"&&(el.tagName.toUpperCase()=="A"||el.tagName.toUpperCase()=="AREA");};SL.getViewportHeight=function(){var height=window.innerHeight;var mode=document.compatMode;if((mode||isIE)&&!isOpera){height=isStrict?document.documentElement.clientHeight:document.body.clientHeight;}return height;};SL.getViewportWidth=function(){var width=window.innerWidth;var mode=document.compatMode;if(mode||isIE){width=isStrict?document.documentElement.clientWidth:document.body.clientWidth;}return width;};SL.getDocumentHeight=function(){var scrollHeight=isStrict?document.documentElement.scrollHeight:document.body.scrollHeight;return Math.max(scrollHeight,SL.getViewportHeight());};SL.getDocumentWidth=function(){var scrollWidth=isStrict?document.documentElement.scrollWidth:document.body.scrollWidth;return Math.max(scrollWidth,SL.getViewportWidth());};var clearOpacity=function(el){if(isIE){if(typeof el.style.filter=="string"&&(/alpha/i).test(el.style.filter)){el.style.filter="";}}else{el.style.opacity="";el.style["-moz-opacity"]="";el.style["-khtml-opacity"]="";}};var fadeIn=function(el,endingOpacity,duration,callback){if(options.animate){SL.setStyle(el,"opacity",0);el.style.visibility="visible";SL.animate(el,{opacity:{to:endingOpacity}},duration,function(){if(endingOpacity==1){clearOpacity(el);}if(typeof callback=="function"){callback();}});}else{if(endingOpacity==1){clearOpacity(el);}else{SL.setStyle(el,"opacity",endingOpacity);}el.style.visibility="visible";if(typeof callback=="function"){callback();}}};var fadeOut=function(el,duration,callback){var cb=function(){el.style.visibility="hidden";clearOpacity(el);if(typeof callback=="function"){callback();}};if(options.animate){SL.animate(el,{opacity:{to:0}},duration,cb);}else{cb();}};var appendHTML=function(el,html){el=SL.get(el);if(el.insertAdjacentHTML){el.insertAdjacentHTML("BeforeEnd",html);return el.lastChild;}if(el.lastChild){var range=el.ownerDocument.createRange();range.setStartAfter(el.lastChild);var frag=range.createContextualFragment(html);el.appendChild(frag);return el.lastChild;}else{el.innerHTML=html;return el.lastChild;}};var overwriteHTML=function(el,html){el=SL.get(el);el.innerHTML=html;return el.firstChild;};var getComputedHeight=function(el){var h=Math.max(el.offsetHeight,el.clientHeight);if(!h){h=parseInt(SL.getStyle(el,"height"),10)||0;if(!isBorderBox){h+=parseInt(SL.getStyle(el,"padding-top"),10)+parseInt(SL.getStyle(el,"padding-bottom"),10)+parseInt(fixedBorderWidth(el,"border-top-width"),10)+parseInt(fixedBorderWidth(el,"border-bottom-width"),10);}}return h;};var getComputedWidth=function(el){var w=Math.max(el.offsetWidth,el.clientWidth);if(!w){w=parseInt(SL.getStyle(el,"width"),10)||0;if(!isBorderBox){w+=parseInt(SL.getStyle(el,"padding-left"),10)+parseInt(SL.getStyle(el,"padding-right"),10)+parseInt(fixedBorderWidth(el,"border-left-width"),10)+parseInt(fixedBorderWidth(el,"border-right-width"),10);}}return w;};var getPlayerType=function(url){if(RE.img.test(url)){return"img";}var match=url.match(RE.domain);var this_domain=match?document.domain==match[1]:false;if(url.indexOf("#")>-1&&this_domain){return"inline";}var q_index=url.indexOf("?");if(q_index>-1){url=url.substring(0,q_index);}if(RE.swf.test(url)){return plugins.fla?"swf":"unsupported-swf";}if(RE.flv.test(url)){return plugins.fla?"flv":"unsupported-flv";}if(RE.qt.test(url)){return plugins.qt?"qt":"unsupported-qt";}if(RE.wmp.test(url)){if(plugins.wmp){return"wmp";}else{if(plugins.f4m){return"qt";}else{return isMac?(plugins.qt?"unsupported-f4m":"unsupported-qtf4m"):"unsupported-wmp";}}}else{if(RE.qtwmp.test(url)){if(plugins.qt){return"qt";}else{if(plugins.wmp){return"wmp";}else{return isMac?"unsupported-qt":"unsupported-qtwmp";}}}else{if(!this_domain||RE.iframe.test(url)){return"iframe";}}}return"unsupported";};var handleClick=function(ev){var link;if(isLink(this)){link=this;}else{link=SL.getTarget(ev);while(!isLink(link)&&link.parentNode){link=link.parentNode;}}Shadowbox.open(link);if(current_gallery.length){SL.preventDefault(ev);}};var setupGallery=function(obj){var copy=apply({},obj);if(!obj.gallery){current_gallery=[copy];current=0;}else{current_gallery=[];var index,ci;for(var i=0,len=cache.length;i<len;++i){ci=cache[i];if(ci.gallery){if(ci.content==obj.content&&ci.gallery==obj.gallery&&ci.title==obj.title){index=current_gallery.length;}if(ci.gallery==obj.gallery){current_gallery.push(apply({},ci));}}}if(index==null){current_gallery.unshift(copy);index=0;}current=index;}var match,r;for(var i=0,len=current_gallery.length;i<len;++i){r=false;if(current_gallery[i].type=="unsupported"){r=true;}else{if(match=RE.unsupported.exec(current_gallery[i].type)){if(options.handleUnsupported=="link"){current_gallery[i].type="html";var m;switch(match[1]){case"qtwmp":m=String.format(options.text.errors.either,options.errors.qt.url,options.errors.qt.name,options.errors.wmp.url,options.errors.wmp.name);break;case"qtf4m":m=String.format(options.text.errors.shared,options.errors.qt.url,options.errors.qt.name,options.errors.f4m.url,options.errors.f4m.name);break;default:if(match[1]=="swf"||match[1]=="flv"){match[1]="fla";}m=String.format(options.text.errors.single,options.errors[match[1]].url,options.errors[match[1]].name);}current_gallery[i]=apply(current_gallery[i],{height:160,width:320,content:'<div class="shadowbox_message">'+m+"</div>"});}else{r=true;}}else{if(current_gallery[i].type=="inline"){var match=RE.inline.exec(current_gallery[i].content);if(match){var el;if(el=SL.get(match[1])){current_gallery[i].content=el.innerHTML;}else{throw"No element found with id "+match[1];}}else{throw"No element id found for inline content";}}}}if(r){current_gallery.splice(i,1);if(i<current){--current;}--i;}}};var buildBars=function(){var link=current_gallery[current];if(!link){return;}var title_i=SL.get("shadowbox_title_inner");title_i.innerHTML=(link.title)?link.title:"";var tool_i=SL.get("shadowbox_toolbar_inner");tool_i.innerHTML="";if(options.displayNav){tool_i.innerHTML=String.format(options.skin.close,options.text.close);if(current_gallery.length>1){if(options.continuous){appendHTML(tool_i,String.format(options.skin.next,options.text.next));appendHTML(tool_i,String.format(options.skin.prev,options.text.prev));}else{if((current_gallery.length-1)>current){appendHTML(tool_i,String.format(options.skin.next,options.text.next));}if(current>0){appendHTML(tool_i,String.format(options.skin.prev,options.text.prev));}}}}if(current_gallery.length>1&&options.displayCounter){var counter="";if(options.counterType=="skip"){for(var i=0,len=current_gallery.length;i<len;++i){counter+='<a href="javascript:Shadowbox.change('+i+');"';if(i==current){counter+=' class="shadowbox_counter_current"';}counter+=">"+(i+1)+"</a>";}}else{counter=(current+1)+" of "+current_gallery.length;}appendHTML(tool_i,String.format(options.skin.counter,counter));}};var hideBars=function(callback){var title_m=getComputedHeight(SL.get("shadowbox_title"));var tool_m=0-getComputedHeight(SL.get("shadowbox_toolbar"));var title_i=SL.get("shadowbox_title_inner");var tool_i=SL.get("shadowbox_toolbar_inner");if(options.animate&&callback){SL.animate(title_i,{marginTop:{to:title_m}},0.2);SL.animate(tool_i,{marginTop:{to:tool_m}},0.2,callback);}else{SL.setStyle(title_i,"marginTop",title_m+"px");SL.setStyle(tool_i,"marginTop",tool_m+"px");}};var showBars=function(callback){var title_i=SL.get("shadowbox_title_inner");if(options.animate){if(title_i.innerHTML!=""){SL.animate(title_i,{marginTop:{to:0}},options.resizeDuration);}SL.animate(SL.get("shadowbox_toolbar_inner"),{marginTop:{to:0}},options.resizeDuration,callback);}else{if(title_i.innerHTML!=""){SL.setStyle(title_i,"margin-top","0px");}SL.setStyle(SL.get("shadowbox_toolbar_inner"),"margin-top","0px");callback();}};var resetDrag=function(){drag={x:0,y:0,start_x:null,start_y:null};};var toggleDrag=function(on){if(on){resetDrag();var styles=["position:absolute","cursor:"+(isGecko?"-moz-grab":"move")];styles.push(isIE?"background-color:#fff;filter:alpha(opacity=0)":"background-color:transparent");appendHTML("shadowbox_body_inner",'<div id="shadowbox_drag_layer" style="'+styles.join(";")+'"></div>');SL.addEvent(SL.get("shadowbox_drag_layer"),"mousedown",listenDrag);}else{var d=SL.get("shadowbox_drag_layer");if(d){SL.removeEvent(d,"mousedown",listenDrag);SL.remove(d);}}};var listenDrag=function(ev){drag.start_x=ev.clientX;drag.start_y=ev.clientY;draggable=SL.get("shadowbox_content");SL.addEvent(document,"mousemove",positionDrag);SL.addEvent(document,"mouseup",unlistenDrag);if(isGecko){SL.setStyle(SL.get("shadowbox_drag_layer"),"cursor","-moz-grabbing");}};var unlistenDrag=function(){SL.removeEvent(document,"mousemove",positionDrag);SL.removeEvent(document,"mouseup",unlistenDrag);if(isGecko){SL.setStyle(SL.get("shadowbox_drag_layer"),"cursor","-moz-grab");}};var positionDrag=function(ev){var move_y=ev.clientY-drag.start_y;drag.start_y=drag.start_y+move_y;drag.y=Math.max(Math.min(0,drag.y+move_y),current_height-optimal_height);SL.setStyle(draggable,"top",drag.y+"px");var move_x=ev.clientX-drag.start_x;drag.start_x=drag.start_x+move_x;drag.x=Math.max(Math.min(0,drag.x+move_x),current_width-optimal_width);SL.setStyle(draggable,"left",drag.x+"px");};var loadContent=function(){var obj=current_gallery[current];if(!obj){return;}buildBars();switch(obj.type){case"img":preloader=new Image();preloader.onload=function(){var h=obj.height?parseInt(obj.height,10):preloader.height;var w=obj.width?parseInt(obj.width,10):preloader.width;resizeContent(h,w,function(dims){showBars(function(){setContent({tag:"img",height:dims.i_height,width:dims.i_width,src:obj.content,style:"position:absolute"});if(dims.enableDrag&&options.handleLgImages=="drag"){toggleDrag(true);SL.setStyle(SL.get("shadowbox_drag_layer"),{height:dims.i_height+"px",width:dims.i_width+"px"});}finishContent();});});preloader.onload=function(){};};preloader.src=obj.content;break;case"swf":case"flv":case"qt":case"wmp":var markup=Shadowbox.movieMarkup(obj);resizeContent(markup.height,markup.width,function(){showBars(function(){setContent(markup);finishContent();});});break;case"iframe":var h=obj.height?parseInt(obj.height,10):SL.getViewportHeight();var w=obj.width?parseInt(obj.width,10):SL.getViewportWidth();var content={tag:"iframe",name:"shadowbox_content",height:"100%",width:"100%",frameborder:"0",marginwidth:"0",marginheight:"0",scrolling:"auto",allowTransparency:"true",style:"visibility: hidden",onload:"this.style.visibility = 'visible';"};resizeContent(h,w,function(dims){showBars(function(){setContent(content);var win=(isIE)?SL.get("shadowbox_content").contentWindow:window.frames.shadowbox_content;win.location=obj.content;finishContent();});});break;case"html":case"inline":var h=obj.height?parseInt(obj.height,10):SL.getViewportHeight();var w=obj.width?parseInt(obj.width,10):SL.getViewportWidth();var content={tag:"div",cls:"html",html:obj.content};resizeContent(h,w,function(){showBars(function(){setContent(content);finishContent();});});break;default:throw"Shadowbox cannot open content of type "+obj.type;}if(current_gallery.length>0){var next=current_gallery[current+1];if(!next){next=current_gallery[0];}if(next.type=="img"&&next.href){var preload_next=new Image();preload_next.src=next.href;}var prev=current_gallery[current-1];if(!prev){prev=current_gallery[current_gallery.length-1];}if(prev.type=="img"&&prev.href){var preload_prev=new Image();preload_prev.src=prev.href;}}};var setContent=function(obj){var id="shadowbox_content";var content=SL.get(id);if(content){switch(content.tagName.toUpperCase()){case"OBJECT":var link=current_gallery[(obj?current-1:current)];if(link.type=="wmp"&&isIE){try{shadowbox_content.controls.stop();shadowbox_content.URL="non-existent.wmv";window.shadowbox_content=function(){};}catch(e){}}else{if(link.type=="qt"&&isSafari){try{document.shadowbox_content.Stop();}catch(e){}content.innerHTML="";}}setTimeout(function(){SL.remove(content);},10);break;case"IFRAME":SL.remove(content);if(isGecko){delete window.frames[id];}break;default:SL.remove(content);}}if(obj){if(!obj.id){obj.id=id;}return appendHTML("shadowbox_body_inner",Shadowbox.createHTML(obj));}return null;};var finishContent=function(){var obj=current_gallery[current];if(!obj){return;}hideLoading(function(){listenKeyboard(true);if(options.onFinish&&typeof options.onFinish=="function"){options.onFinish(obj);}});};var resizeContent=function(height,width,callback){optimal_height=height;optimal_width=width;var resizable=RE.resize.test(current_gallery[current].type);var dims=getDimensions(optimal_height,optimal_width,resizable);if(callback){var cb=function(){callback(dims);};switch(options.animSequence){case"hw":adjustHeight(dims.height,dims.top,true,function(){adjustWidth(dims.width,true,cb);});break;case"wh":adjustWidth(dims.width,true,function(){adjustHeight(dims.height,dims.top,true,cb);});break;default:adjustWidth(dims.width,true);adjustHeight(dims.height,dims.top,true,cb);}}else{adjustWidth(dims.width,false);adjustHeight(dims.height,dims.top,false);if(options.handleLgImages=="resize"&&resizable){var content=SL.get("shadowbox_content");if(content){content.height=dims.i_height;content.width=dims.i_width;}}}};var getDimensions=function(o_height,o_width,resizable){if(typeof resizable=="undefined"){resizable=false;}var height=o_height=parseInt(o_height);var width=o_width=parseInt(o_width);var shadowbox_b=SL.get("shadowbox_body");var view_height=SL.getViewportHeight();var extra_height=parseInt(fixedBorderWidth(shadowbox_b,"border-top-width"),10)+parseInt(fixedBorderWidth(shadowbox_b,"border-bottom-width"),10)+parseInt(SL.getStyle(shadowbox_b,"margin-top"),10)+parseInt(SL.getStyle(shadowbox_b,"margin-bottom"),10)+getComputedHeight(SL.get("shadowbox_title"))+getComputedHeight(SL.get("shadowbox_toolbar"))+(2*options.viewportPadding);if((height+extra_height)>=view_height){height=view_height-extra_height;}var view_width=SL.getViewportWidth();var extra_body_width=parseInt(fixedBorderWidth(shadowbox_b,"border-left-width"),10)+parseInt(fixedBorderWidth(shadowbox_b,"border-right-width"),10)+parseInt(SL.getStyle(shadowbox_b,"margin-left"),10)+parseInt(SL.getStyle(shadowbox_b,"margin-right"),10);var extra_width=extra_body_width+(2*options.viewportPadding);if((width+extra_width)>=view_width){width=view_width-extra_width;}var enableDrag=false;var i_height=o_height;var i_width=o_width;var handle=options.handleLgImages;if(resizable&&(handle=="resize"||handle=="drag")){var change_h=(o_height-height)/o_height;var change_w=(o_width-width)/o_width;if(handle=="resize"){if(change_h>change_w){width=Math.round((o_width/o_height)*height);}else{if(change_w>change_h){height=Math.round((o_height/o_width)*width);}}i_width=width;i_height=height;}else{var link=current_gallery[current];if(link){enableDrag=link.type=="img"&&(change_h>0||change_w>0);}}}return{height:height,width:width+extra_body_width,i_height:i_height,i_width:i_width,top:((view_height-(height+extra_height))/2)+options.viewportPadding,enableDrag:enableDrag};};var centerVertically=function(){var shadowbox=SL.get("shadowbox");var scroll=document.documentElement.scrollTop;var s_top=scroll+Math.round((SL.getViewportHeight()-(shadowbox.offsetHeight||0))/2);SL.setStyle(shadowbox,"top",s_top+"px");};var adjustHeight=function(height,top,animate,callback){height=parseInt(height);current_height=height;var sbi=SL.get("shadowbox_body_inner");if(animate&&options.animate){SL.animate(sbi,{height:{to:height}},options.resizeDuration,callback);}else{SL.setStyle(sbi,"height",height+"px");if(typeof callback=="function"){callback();}}if(absolute_pos){centerVertically();SL.addEvent(window,"scroll",centerVertically);top+=document.documentElement.scrollTop;}var shadowbox=SL.get("shadowbox");if(animate&&options.animate){SL.animate(shadowbox,{top:{to:top}},options.resizeDuration);}else{SL.setStyle(shadowbox,"top",top+"px");}};var adjustWidth=function(width,animate,callback){width=parseInt(width);current_width=width;var shadowbox=SL.get("shadowbox");if(animate&&options.animate){SL.animate(shadowbox,{width:{to:width}},options.resizeDuration,callback);}else{SL.setStyle(shadowbox,"width",width+"px");if(typeof callback=="function"){callback();}}};var listenKeyboard=function(on){if(!options.enableKeys){return;}if(on){document.onkeydown=handleKey;}else{document.onkeydown="";}};var assertKey=function(valid,key,code){return(valid.indexOf(key)!=-1||valid.indexOf(code)!=-1);};var handleKey=function(e){var code=e?e.which:event.keyCode;var key=String.fromCharCode(code).toLowerCase();if(assertKey(options.keysClose,key,code)){Shadowbox.close();}else{if(assertKey(options.keysPrev,key,code)){Shadowbox.previous();}else{if(assertKey(options.keysNext,key,code)){Shadowbox.next();}}}};var toggleTroubleElements=function(on){var vis=(on?"visible":"hidden");var selects=document.getElementsByTagName("select");for(i=0,len=selects.length;i<len;++i){selects[i].style.visibility=vis;}if(FORTUNA.UTILS.ieVersion()!=-1){return;}var embeds=document.getElementsByTagName("embed");for(i=0,len=embeds.length;i<len;++i){embeds[i].style.visibility=vis;}var objects=document.getElementsByTagName("object");for(i=0,len=objects.length;i<len;++i){objects[i].style.visibility=vis;}};var showLoading=function(){if(options.showLoading){options.loadingTimeout=window.setTimeout(function(){var loading=SL.get("shadowbox_loading");loading.setAttribute("data-in-progress","true");overwriteHTML(loading,String.format(options.skin.loading,options.assetURL+options.loadingImage,options.text.loading,options.text.cancel));loading.style.visibility="visible";loading.removeAttribute("data-in-progress");window.clearTimeout(options.loadingTimeout);options.loadingTimeout=null;},1000);}};var hideLoading=function(callback){var t=current_gallery[current].type;var anim=(t=="img"||t=="html");var loading=SL.get("shadowbox_loading");var hideLoadingInterval=window.setInterval(function(){if(loading.getAttribute("data-in-progress")!="true"){if(options.loadingTimeout){window.clearTimeout(options.loadingTimeout);options.loadingTimeout=null;}if(anim){fadeOut(loading,options.fadeDuration,callback);}else{loading.style.visibility="hidden";callback();}window.clearInterval(hideLoadingInterval);}},500);};var resizeOverlay=function(){var overlay=SL.get("shadowbox_overlay");SL.setStyle(overlay,{height:"100%",width:"100%"});SL.setStyle(overlay,"height",SL.getDocumentHeight()+"px");if(!isSafari3){SL.setStyle(overlay,"width",SL.getDocumentWidth()+"px");}};var checkOverlayImgNeeded=function(){if(!(isGecko&&isMac)){return false;}for(var i=0,len=current_gallery.length;i<len;++i){if(!RE.overlay.exec(current_gallery[i].type)){return true;}}return false;};var toggleOverlay=function(callback,obj){var overlay=SL.get("shadowbox_overlay");if(overlay_img_needed==null){overlay_img_needed=checkOverlayImgNeeded();}if(obj&&obj.overlayopacity){var customOverlayOpacity=obj.overlayopacity;}if(callback){resizeOverlay();if(overlay_img_needed){SL.setStyle(overlay,{visibility:"visible",backgroundColor:"transparent",backgroundImage:"url("+options.assetURL+options.overlayBgImage+")",backgroundRepeat:"repeat",opacity:1});callback();}else{SL.setStyle(overlay,{visibility:"visible",backgroundColor:options.overlayColor,backgroundImage:"none"});fadeIn(overlay,customOverlayOpacity||options.overlayOpacity,options.fadeDuration,callback);}}else{if(overlay_img_needed){SL.setStyle(overlay,"visibility","hidden");}else{fadeOut(overlay,options.fadeDuration);}overlay_img_needed=null;}};Shadowbox.init=function(opts){if(initialized){return;}options=apply(options,opts||{});appendHTML(document.body,options.skin.main);RE.img=new RegExp(".("+options.ext.img.join("|")+")s*$","i");RE.qt=new RegExp(".("+options.ext.qt.join("|")+")s*$","i");RE.wmp=new RegExp(".("+options.ext.wmp.join("|")+")s*$","i");RE.qtwmp=new RegExp(".("+options.ext.qtwmp.join("|")+")s*$","i");RE.iframe=new RegExp(".("+options.ext.iframe.join("|")+")s*$","i");var id=null;var resize=function(){clearInterval(id);id=null;resizeOverlay();resizeContent(optimal_height,optimal_width);};SL.addEvent(window,"resize",function(){if(activated){if(id){clearInterval(id);id=null;}if(!id){id=setInterval(resize,50);}}});if(options.listenOverlay){SL.addEvent(SL.get("shadowbox_overlay"),"click",Shadowbox.close);}if(absolute_pos){SL.setStyle(SL.get("shadowbox_container"),"position","absolute");SL.setStyle("shadowbox_body","zoom",1);SL.addEvent(SL.get("shadowbox_container"),"click",function(e){var target=SL.getTarget(e);if(target.id&&target.id=="shadowbox_container"){Shadowbox.close();}});}if(!options.skipSetup){Shadowbox.setup();}initialized=true;};Shadowbox.setup=function(links,opts){if(!links){var links=[];var a=document.getElementsByTagName("a"),rel;for(var i=0,len=a.length;i<len;++i){rel=a[i].getAttribute("rel");if(rel&&RE.rel.test(rel)){links[links.length]=a[i];}}}else{if(!links.length){links=[links];}}var link;for(var i=0,len=links.length;i<len;++i){link=links[i];if(typeof link.shadowboxCacheKey=="undefined"){link.shadowboxCacheKey=cache.length;SL.addEvent(link,"click",handleClick);}cache[link.shadowboxCacheKey]=this.buildCacheObj(link,opts);}};Shadowbox.buildCacheObj=function(link,opts){var href=link.href;var o={el:link,title:link.getAttribute("title"),type:getPlayerType(href),options:apply({},opts||{}),content:href};var opt,l_opts=["title","type","height","width","gallery"];for(var i=0,len=l_opts.length;i<len;++i){opt=l_opts[i];if(typeof o.options[opt]!="undefined"){o[opt]=o.options[opt];delete o.options[opt];}}var rel=link.getAttribute("rel");if(rel){var match=rel.match(RE.gallery);if(match){o.gallery=escape(match[2]);}var params=rel.split(";");for(var i=0,len=params.length;i<len;++i){match=params[i].match(RE.param);if(match){if(match[1]=="options"){eval("o.options = apply(o.options, "+match[2]+")");}else{o[match[1]]=match[2];}}}}return o;};Shadowbox.applyOptions=function(opts){if(opts){default_options=apply({},options);options=apply(options,opts);}};Shadowbox.revertOptions=function(){if(default_options){options=default_options;default_options=null;}};Shadowbox.open=function(obj,opts){if(activated){return;}activated=true;var isLnk=isLink(obj);if(isLnk){if(typeof obj.shadowboxCacheKey=="undefined"||typeof cache[obj.shadowboxCacheKey]=="undefined"){obj=this.buildCacheObj(obj,opts);}else{obj=cache[obj.shadowboxCacheKey];}}if(!isLnk&&typeof obj.el=="object"){isLnk=isLink(obj.el);}this.fortunaOpen(obj,isLnk);this.revertOptions();if(obj.options||opts){this.applyOptions(apply(apply({},obj.options||{}),opts||{}));}setupGallery(obj);if(current_gallery.length){if(options.onOpen&&typeof options.onOpen=="function"){options.onOpen(obj);}SL.setStyle(SL.get("shadowbox"),"display","block");toggleTroubleElements(false);var dims=getDimensions(options.initialHeight,options.initialWidth);adjustHeight(dims.height,dims.top);adjustWidth(dims.width);hideBars(false);toggleOverlay(function(){SL.setStyle(SL.get("shadowbox"),"visibility","visible");showLoading();loadContent();},obj);}};Shadowbox.change=function(num){if(!current_gallery){return;}if(!current_gallery[num]){if(!options.continuous){return;}else{num=(num<0)?(current_gallery.length-1):0;}}current=num;toggleDrag(false);setContent(null);this.fortunaOpen();listenKeyboard(false);if(options.onChange&&typeof options.onChange=="function"){options.onChange(current_gallery[current]);}showLoading();hideBars(loadContent);};Shadowbox.next=function(){return this.change(current+1);};Shadowbox.previous=function(){return this.change(current-1);};Shadowbox.close=function(){if(!activated){return;}listenKeyboard(false);SL.setStyle(SL.get("shadowbox"),{display:"none",visibility:"hidden"});if(absolute_pos){SL.removeEvent(window,"scroll",centerVertically);}toggleDrag(false);setContent(null);if(preloader){preloader.onload=function(){};preloader=null;}toggleOverlay(false);toggleTroubleElements(true);if(options.onClose&&typeof options.onClose=="function"){options.onClose(current_gallery[current]);}activated=false;};Shadowbox.clearCache=function(gallery){cache2=[];for(var i=0,len=cache.length;i<len;++i){if(gallery!==undefined||cache[i].gallery!==gallery){cache2[i]=cache[i];continue;}if(cache[i].el){SL.removeEvent(cache[i].el,"click",handleClick);delete cache[i].shadowboxCacheKey;}delete cache[i];}cache=cache2;};Shadowbox.movieMarkup=function(obj){var h=obj.height?parseInt(obj.height,10):300;var w=obj.width?parseInt(obj.width,10):300;var autoplay=options.autoplayMovies;var controls=options.showMovieControls;if(obj.options){if(obj.options.autoplayMovies!=null){autoplay=obj.options.autoplayMovies;}if(obj.options.showMovieControls!=null){controls=obj.options.showMovieControls;}}var markup={tag:"object",name:"shadowbox_content"};switch(obj.type){case"swf":var dims=getDimensions(h,w,true);h=dims.height;w=dims.width;markup.type="application/x-shockwave-flash";markup.data=obj.content;markup.children=[{tag:"param",name:"movie",value:obj.content}];break;case"flv":autoplay=autoplay?"true":"false";var showicons="false";var a=h/w;if(controls){showicons="true";h+=20;}var dims=getDimensions(h,h/a,true);h=dims.height;w=(h-(controls?20:0))/a;var flashvars=["file="+obj.content,"height="+h,"width="+w,"autostart="+autoplay,"displayheight="+(h-(controls?20:0)),"showicons="+showicons,"backcolor=0x000000&amp;frontcolor=0xCCCCCC&amp;lightcolor=0x557722"];markup.type="application/x-shockwave-flash";markup.data=options.assetURL+options.flvPlayer;markup.children=[{tag:"param",name:"movie",value:options.assetURL+options.flvPlayer},{tag:"param",name:"flashvars",value:flashvars.join("&amp;")},{tag:"param",name:"allowfullscreen",value:"true"}];break;case"qt":autoplay=autoplay?"true":"false";if(controls){controls="true";h+=16;}else{controls="false";}markup.children=[{tag:"param",name:"src",value:obj.content},{tag:"param",name:"scale",value:"aspect"},{tag:"param",name:"controller",value:controls},{tag:"param",name:"autoplay",value:autoplay}];if(isIE){markup.classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B";markup.codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0";}else{markup.type="video/quicktime";markup.data=obj.content;}break;case"wmp":autoplay=autoplay?1:0;markup.children=[{tag:"param",name:"autostart",value:autoplay}];if(isIE){if(controls){controls="full";h+=70;}else{controls="none";}markup.classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6";markup.children[markup.children.length]={tag:"param",name:"url",value:obj.content};markup.children[markup.children.length]={tag:"param",name:"uimode",value:controls};}else{if(controls){controls=1;h+=45;}else{controls=0;}markup.type="video/x-ms-wmv";markup.data=obj.content;markup.children[markup.children.length]={tag:"param",name:"showcontrols",value:controls};}break;}markup.height=h;markup.width=w;return markup;};Shadowbox.createHTML=function(obj){var html="<"+obj.tag;for(var attr in obj){if(attr=="tag"||attr=="html"||attr=="children"){continue;}if(attr=="cls"){html+=' class="'+obj.cls+'"';}else{html+=" "+attr+'="'+obj[attr]+'"';}}if(RE.empty.test(obj.tag)){html+="/>\n";}else{html+=">\n";var cn=obj.children;if(cn){for(var i=0,len=cn.length;i<len;++i){html+=this.createHTML(cn[i]);}}if(obj.html){html+=obj.html;}html+="</"+obj.tag+">\n";}return html;};Shadowbox.getPlugins=function(){return plugins;};Shadowbox.getOptions=function(){return options;};Shadowbox.getCurrent=function(){return current_gallery[current];};Shadowbox.getVersion=function(){return version;};Shadowbox.fortunaOpen=function(obj,isLnk){if(obj===undefined){obj=current_gallery[current];if(!obj){return;}isLnk=(typeof obj.el=="object")&&isLink(obj.el);}var Dom=YAHOO.util.Dom;var shadowboxEl=SL.get("shadowbox");if(shadowboxEl&&obj.opacity){Dom.setStyle(shadowboxEl,"opacity",obj.opacity);}if(isLnk&&this.isLinkToFortunaTicketPreview(obj.content)){obj.options=obj.options||{};obj.options.addClass=(obj.options.addClass?(obj.options.addClass+" ticket_preview_shadowbox"):"ticket_preview_shadowbox");obj.width=890;var windowHeight=Dom.getViewportHeight();if(windowHeight<=700){obj.height=500;}else{obj.height=windowHeight-200;}if(obj.content.indexOf("shadowbox=")<0){obj.content+=(((obj.content.indexOf("?")==-1)?"?":"&")+"shadowbox=1");}}if(shadowboxEl){if(shadowboxEl.hasAttribute("class")){shadowboxEl.removeAttribute("class");}if(obj&&obj.options&&obj.options.addClass!==undefined){shadowboxEl.setAttribute("class",obj.options.addClass);delete obj.options.addClass;}}};Shadowbox.isLinkToFortunaTicketPreview=function(link){return(link&&link.indexOf("ticket_id=")>-1);};var fixedBorderWidth=function(el,style){var val=SL.getStyle(el,style);if(val=="medium"){val="0px";}return val;};Shadowbox.fortunaOnOpen=function(){var scrollbarWidth=FORTUNA.UTILS.getScrollbarsWidth();document.body.className+=" shadowbox-opened";document.body.style.marginRight=scrollbarWidth+"px";};Shadowbox.fortunaOnClose=function(){document.body.className=document.body.className.replace("shadowbox-opened","");document.body.style.marginRight="";};Shadowbox.fortunaSetDimensions=function(props){var $sb=$("#shadowbox_body_inner",parent.document);var $main=$("#shadowbox",parent.document);if(props.scrolling){$("iframe#shadowbox_content",parent.document).attr("scrolling",props.scrolling);}if(props.height){$sb.animate({height:props.height+20},100);$main.css({position:"fixed",top:"calc(50% - "+(props.height/2+10)+"px)",left:"calc(50% - "+($sb.outerWidth(true)/2)+"px)"},100);}};Shadowbox.switchKeyboardControlls=function(on){listenKeyboard(!!on);};Shadowbox.initLinksFromRoot=function(root){if(!root){return false;}if(jQuery){var $_root=$(root);$_root.find('a[rel^="shadowbox"]').each(function(){Shadowbox.setup(this);});}else{if(!root.querySelectorAll){return false;}var _links=root.querySelectorAll('a[rel^="shadowbox"]');var i=0,l=_links.length;for(i,l;i<l;i++){Shadowbox.setup(_links[i]);}}};})();Array.prototype.indexOf=Array.prototype.indexOf||function(o){for(var i=0,len=this.length;i<len;++i){if(this[i]==o){return i;}}return -1;};String.format=String.format||function(format){var args=Array.prototype.slice.call(arguments,1);return format.replace(/\{(\d+)\}/g,function(m,i){return args[i];});};
			/* /shadowbox.js */
			/* check_form_yui */

var checkForm;(function(){var g=YAHOO.util.Dom,h=YAHOO.util.Event;checkForm={invalidMsg:"Formul\u00e1\u0159 nen\u00ed vypln\u011bn spr\u00e1vn\u011b.\nPros\u00edm opravte tato pol\u00ed\u010dka:\n %err",errorMsg:"\n- %err",errors:[],invalidClass:"error",requiredClass:"required",fieldType:[],defaultValue:[],init:function(a){if(g&&h&&document.getElementById){a=a&&a.tagName&&"form"===a.tagName.toLowerCase()?[a]:document.getElementsByTagName("form");for(var b=0;b<a.length;b++)if(!g.hasClass(a[b],"skipCheck")&&!a[b].__validationInit){h.on(a[b],"submit",checkForm.checkForm);h.on(a[b],"reset",checkForm.checkForm);for(var c=checkForm.getFields(a[b]),d=0;d<c.length;d++)h.on(c[d],"blur",checkForm.checkField),h.on(c[d],"focus",checkForm.checkField),h.on(c[d],"change",checkForm.checkField);checkForm.setInitStatus(a[b],!0)}return!0}return!1},setInitStatus:function(a,b){},getFields:function(a){if(a&&a.getElementsByTagName){for(var b=[],c=a.querySelectorAll("input.required"),d=0;d<c.length;d++)if("text"==c[d].type||"password"==c[d].type||"file"==c[d].type||"checkbox"==c[d].type||"hidden"==c[d].type||"email"==c[d].type)b[b.length]=c[d];c=a.querySelectorAll("textarea.required");for(d=0;d<c.length;d++)b[b.length]=c[d];a=a.querySelectorAll("select.required");for(d=0;d<a.length;d++)b[b.length]=a[d];return b}return!1},checkForm:function(a,b,c,d){if(a&&a.tagName&&"form"==a.tagName.toLowerCase())var f=!1;else f=a,a=h.getTarget(f),"form"!=a.tagName.toLowerCase()&&(a=a.form);checkForm.errors=[];if(b||b&&0<b.length)if("string"===typeof b)checkForm.errors.push(b);else for(var e=0,g=b.length;e<g;e++)checkForm.errors.push(b[e]);b=checkForm.getFields(a);g=!0;for(e=0;e<b.length;e++)g="valid"==checkForm.checkField(b[e])&&g?!0:!1;if(g)return"undefined"!=typeof a.successFallback&&a.successFallback.call(),!0;a="";for(e=0;e<checkForm.errors.length;e++)a+=checkForm.errorMsg.replace("%err",checkForm.errors[e]);d||alert(checkForm.invalidMsg.replace("%err",a));h.stopEvent(f);return 1==c?checkForm.errors:!1},checkField:function(a){if(!a||!a.tagName){var b=a;a=h.getTarget(b)}if(a&&("input"==a.tagName.toLowerCase()||"select"==a.tagName.toLowerCase()||"textarea"==a.tagName.toLowerCase())){var c=!0,d=[];a&&a.tagName&&(d=a.className.replace(/\s+/g," ").split(" "));for(var f=0;f<d.length;f++){if(checkForm.fieldType[d[f]]){var e=checkForm.fieldType[d[f]];c&&"string"==typeof e?""!=a.value&&(c=0>a.value.search(new RegExp("^(["+e+"]){1,}$"))?!1:!0):c&&("function"==typeof e||"object"==typeof e)&&e.source?""!=a.value&&(c=0>a.value.search(e)?!1:!0):c&&"function"==typeof e&&e.prototype&&(c=e(b,a))}b&&checkForm.defaultValue[d[f]]&&(e=checkForm.defaultValue[d[f]],"focus"==b.type&&""==a.value&&(a.value=e),"blur"==b.type&&a.value==e&&(a.value=""))}c?(g.removeClass(a,checkForm.invalidClass),a.labelElement&&g.removeClass(a.labelElement,checkForm.invalidClass)):(g.addClass(a,checkForm.invalidClass),checkForm.errors[checkForm.errors.length]=checkForm.getFieldErrorMsg(a),a.labelElement&&g.addClass(a.labelElement,checkForm.invalidClass));return c?"valid":"invalid"}return!1},addFieldType:function(a,b,c){return a&&(b||c)?(b&&(checkForm.fieldType[a]=b),c&&(checkForm.defaultValue[a]=c),!0):!1},getFieldErrorMsg:function(a){if(a){if(a.checkFormErrorMsg)return a.checkFormErrorMsg;if(a.getAttribute("data-required-error"))return a.getAttribute("data-required-error");if(a.title)return a.title;if(a.id){for(var b=document.getElementsByTagName("label"),c=0;c<b.length;c++)if(b[c].attributes["for"]&&b[c].attributes["for"].value==a.id)return a.labelElement=b[c],checkForm.getNodeText(b[c]);return a.id}return a.name?a.name:a.toString()}return!1},getNodeText:function(a){var b="";if(a&&a.hasChildNodes())for(var c=0;c<a.childNodes.length;c++)b+=3==a.childNodes[c].nodeType?a.childNodes[c].nodeValue:checkForm.getNodeText(a.childNodes[c]),1==a.childNodes[c].nodeType&&"img"==a.childNodes[c].tagName.toLowerCase()&&a.childNodes[c].attributes.alt&&(b+=a.childNodes[c].attributes.alt.value);return b}};checkForm.addFieldType("required",function(a,b){return b?"select"==b.tagName.toLowerCase()?b.value?!0:!1:"input"==b.tagName.toLowerCase()&&"checkbox"==b.type?b.checked:0>b.value.search(/\S/)?!1:!0:!1});checkForm.addFieldType("numbers","0123456789");checkForm.addFieldType("integers",/^(\-)?[0-9]{1,}$/);checkForm.addFieldType("floats",/^[-+]?[0-9]+(\.[0-9]+)?$/);checkForm.addFieldType("extFloats",/^[-+]?[0-9]+((\.|,)[0-9]+)?$/);checkForm.addFieldType("ids",/^[0-9 ]{1,}$/);checkForm.addFieldType("safeChars",/^[a-zA-Z0-9_]{1,}$/);checkForm.addFieldType("loginSafeChars",/^[a-zA-Z0-9_.]{1,}$/);checkForm.addFieldType("min",function(a,b){a=b.getAttribute("data-min");return b.value&&a?parseInt(b.value,10)>=parseInt(a,10):!0});checkForm.addFieldType("max",function(a,b){a=b.getAttribute("data-max");return b.value&&a?parseInt(b.value,10)<=parseInt(a,10):!0});checkForm.addFieldType("date",function(a,b){if(!b.value)return!0;var c=b.value.split(".");a=c[0];b=c[1];c=c[2];if(!isNaN(a)||!isNaN(b)||!isNaN(c)){if(12<b||1>b||1>a)return!1;var d=31;2==b&&(d=0!=c%4||0==c%100&&0!=c%400?28:29);if(4==b||6==b||9==b||11==b)d=30;return a>d?!1:!0}return!1});checkForm.addFieldType("datetime",function(a,b){if(!b.value)return!0;var c=b.value.split(" "),d=c[0].split(".");a=d[0];b=d[1];d=d[2];var f=c[1].split(":");c=f[0];f=f[1];if(!(isNaN(a)&&isNaN(b)&&isNaN(d)&&isNaN(c)&&isNaN(f))){if(12<b||1>b||1>a)return!1;var e=31;2==b&&(e=0!=d%4||0==d%100&&0!=d%400?28:29);if(4==b||6==b||9==b||11==b)e=30;return a>e||23<c||59<f?!1:!0}return!1});checkForm.addFieldType("url",/^\w+:\/\/(([\w\+\.\-]+\b)(:\w+)@)?([/\w\+\.\-]+\b)(\/{1})?(\?[\w\+\.\-/;\&@=%]+\b)?(#[\w\-%]+\b)?$/,"http://");checkForm.addFieldType("email",/^([\w\!\#\$\%\&\*\+\-\/\=\?\^\{\}\|\~]+)((\.){1}[\w\!\#\$\%\&\*\+\-\/\=\?\^\{\}\|\~]+)*@[\w\!\#\$\%\&\*\+\-\/\=\?\^\{\}\|\~]+((\.){1}[\w\!\#\$\%\&\*\+\-\/\=\?\^\{\}\|\~]+)+$/);h.on(window,"load",checkForm.init)})();
			/* /check_form_yui */
			/* fortuna_utils */

(function(){DEBUG=!1;FORTUNA.UTILS={componentName:"FORTUNA.UTILS",roundNumber:function(a,b){b=Math.pow(10,b);return Math.round(a*b)/b},log:function(a){var b=arguments;if("undefined"!=typeof console)try{console.log.apply(console,b)}catch(d){}else DEBUG&&alert("FORTUNA.UTILS.log:\n\n"+FORTUNA.UTILS.arrayJoin(b))},arrayJoin:function(a,b){b=b||"";for(var d,c=0;c<a.length;c++)d=0===c?a[c]:d+(b+a[c]);return d},isInArray:function(a,b){inArray=!1;for(i=0;i<a.length;i++)b==a[i]&&(inArray=!0);return inArray},removeFromArray:function(a,b,d){if(0<a.length){if(d)return a.splice(parseInt(b),1),[].concat(a);d=[];for(var c=0,e=a.length;c<e;c++)a[c]!==b&&d.push(a[c]);return[].concat(d)}},editUrlParams:function(a,b,d){if("string"===typeof a){var c=String(a).split("?");a=c[0];var e=(c[1]||"").split("\x26");c={};var f=[];if("object"!==typeof b)return a;if(""!==e[0])for(var g=0,h=e.length;g<h;g++){var k=e[g].split("\x3d");c[k[0]]=k[1]}for(var l in b)e=b[l],"undefined"!==e&&null!==e&&""!==e||!0===d?c[l]=e:c[l]&&delete c[l];for(var n in c)b=n+"\x3d"+c[n],f.push(b);if(0<f.length){var m="?"+f.join("\x26");m=a+m}return m||a}},capitalizeString:function(a){for(var b,d="",c=0,e=a.length;c<e;c++)b=0===c||" "===a[c],d+=a[c][b?"toUpperCase":"toLowerCase"]();return d},trimString:function(a){a=a||"";return String.prototype.hasOwnProperty("trim")?a.trim():a.replace(/^\s+|\s+$/g,"")},Storage:{setItem:function(a,b,d){a=[].concat(b?{name:a,value:b}:a);d=!d&&"localStorage"in window;b=0;var c=a.length;for(a=a[b];b<c;b++)"string"===typeof a.name&&(d?localStorage.setItem(a.name,a.value):$.cookie(a.name,a.value,{path:"/",expires:30}))},getItem:function(a,b){a=String(a);return!b&&"localStorage"in window?localStorage.getItem(a):$.cookie(a)},removeItem:function(a,b){a=String(a);!b&&"localStorage"in window?localStorage.removeItem(a):$.cookie(a,null)}},isFirstUrlParam:function(a){a=String(a);return 0<=a.indexOf("?")?!1:!0},getClosestNumber:function(a,b,d){if(!(a&&0<=b))return null;var c=a[0],e=Math.abs(a[0]-b),f=1,g=a.length;f;for(g;f<g;f++){var h=Math.abs(a[f]-b);if(h<e){e=h;c=a[f];var k=f}}return d?k:c},normalizeNumber:function(a,b){b=parseInt(b);a=parseFloat(a).toFixed(b||2);return a=String(a).replace(".",",")},getScrollbarsWidth:function(){var a=document.createElement("p");a.style.width="100%";a.style.height="200px";var b=document.createElement("div");b.style.position="absolute";b.style.top="0px";b.style.left="0px";b.style.visibility="hidden";b.style.width="200px";b.style.height="150px";b.style.overflow="hidden";b.appendChild(a);document.body.appendChild(b);var d=a.offsetWidth;b.style.overflow="scroll";a=a.offsetWidth;d==a&&(a=b.clientWidth);document.body.removeChild(b);return d-a},isIphone:function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1},isAndroid:function(){return-1<navigator.userAgent.toLowerCase().indexOf("android")},getURLParams:function(a){a||(a=window.location.href);var b=a.substr(window.location.href.indexOf("?")+1);a={};if(b==window.location.href)return a;b=b.split("\x26");var d=b.length,c;for(c=0;c<d;c++){var e=b[c].split("\x3d");1<e.length&&(a[decodeURIComponent(e[0])]=decodeURIComponent(e[1]))}return a},ieVersion:function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,d=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=d.exec(b)&&(a=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(b=navigator.userAgent,d=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=d.exec(b)&&(a=parseFloat(RegExp.$1)));return a},isSVGSupported:function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")},isNullOrUndefined:function(a){return void 0==a},hash:function(a){var b=0,d;if(0==a.length)return b;var c=0;for(d=a.length;c<d;c++){var e=a.charCodeAt(c);b=(b<<5)-b+e;b|=0}return b},debounce:function(a,b,d){var c;return function(){var e=this,f=arguments,g=d&&!c;clearTimeout(c);c=setTimeout(function(){c=null;d||a.apply(e,f)},b);g&&a.apply(e,f)}},callFnFromString:function(a,b){if(!a||"string"!==typeof a||!b||"object"!==typeof b)return null;for(var d=Array.prototype.slice.call(arguments,2),c=a.split("."),e=c.pop(),f=0;f<c.length;f++)b=b[c[f]];(c=b[e])&&c.apply(b,d);return c},expandPlaceholders:function(a,b,d){for(var c in b)a=a.replace(new RegExp("{{"+c+"}}","g"),b[c]);d&&(a=a.replace(/\{\{*}}/g,""));return a},stripHtml:function(a){return String(a||this).replace(/<(.|\n)*?>/ig,"")},unescapeHtml:function(a){return String(a||this).replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e").replace(/&quot;/g,'"')},sanitizeString:function(a){return(a||this).unescapeHtml().stripHtml().trim().replace(/['"]/g,"").replace(/\n/g,"")},getPropertyByPath:function(a,b){return a.split(".").reduce(function(a,b){return a&&a[b]},obj)}};String.prototype.unescapeHtml=FORTUNA.UTILS.unescapeHtml;String.prototype.stripHtml=FORTUNA.UTILS.stripHtml;String.prototype.sanitize=FORTUNA.UTILS.sanitizeString;FORTUNA.components.push(FORTUNA.UTILS)})();
			/* /fortuna_utils */
			/* calendar */

(function(){var a=YAHOO.util.Dom,c=YAHOO.util.Event;FORTUNA.UI.Calendar=function(d,e){this.scope=e||window;this.element=a.get(d);this.id=a.generateId(this.element,"calendar");this.container=document.createElement("div");this.container.id=this.id+"-container";this.container.style.position="absolute";this.container.style.display="none";document.body.appendChild(this.container);this.config={title:this.element.title||"Vyberte datum:",navigator:!0,close:!0,START_WEEKDAY:1};this.calendar=new YAHOO.widget.Calendar(this.id,this.container,this.config);this.render=function(){a.addClass(this.element,"icon");a.addClass(this.element,"calendarIcon");this.localize();this.calendar.selectEvent.subscribe(this.onSelectHandler,this,!0);c.on(this.element,"focus",function(){this.show.call(this)},this,!0);this.calendar.render();this.positionCalendar()};this.show=function(){this.scope.activeCalendar&&this.scope.activeCalendar.hide();""!=this.element.value&&(this.calendar.select(this.element.value),this.calendar.render());this.scope.activeCalendar=this;this.positionCalendar();this.calendar.show()};this.hide=function(){this.calendar.hide()};this.positionCalendar=function(){var b=a.getXY(this.element);this.container.style.left=b[0]+"px";this.container.style.top=b[1]+this.element.offsetHeight+"px"};this.onSelectHandler=function(b,a){b=a[0][0];this.element.value=b[2]+"."+b[1]+"."+b[0];this.calendar.hide()};this.localize=function(){this.calendar.cfg.setProperty("DATE_FIELD_DELIMITER",".");this.calendar.cfg.setProperty("MDY_DAY_POSITION",1);this.calendar.cfg.setProperty("MDY_MONTH_POSITION",2);this.calendar.cfg.setProperty("MDY_YEAR_POSITION",3);this.calendar.cfg.setProperty("MD_DAY_POSITION",1);this.calendar.cfg.setProperty("MD_MONTH_POSITION",2);this.calendar.cfg.setProperty("MONTHS_LONG","Leden \u00danor B\u0159ezen Duben Kv\u011bten \u010cerven \u010cervenec Srpen Z\u00e1\u0159\u00ed \u0158\u00edjen Listopad Prosinec".split(" "));this.calendar.cfg.setProperty("WEEKDAYS_SHORT","Ne Po \u00dat St \u010ct P\u00e1 So".split(" "))}}})();
			/* /calendar */
			/* countdown */

(function(){var g=YAHOO.util.Dom;FORTUNA.UI.Countdown=function(a,c,d,e,b){this.element=g.get(a);this.timeRemaining=c;this.updateCallback=d;this.endCallback=e;this.interval=null;this.endTime=b&&b<this.timeRemaining?parseInt(b):0;this.temp=10};FORTUNA.UI.Countdown.prototype={run:function(){var a=this;this.interval=setInterval(function(){a.onInterval.call(a)},1E3)},onInterval:function(){var a=this.parseTime(this.timeRemaining--);this.updateCallback?this.updateCallback(this.element,a):this.element.innerHTML=[a.hours,":",a.minutes,":",a.seconds].join("");this.timeRemaining===this.endTime&&(this.stop(),this.endCallback&&this.endCallback(this.element))},parseTime:function(a){var c=Math.floor(a/31536E3);a-=31536E3*c;var d=Math.floor(a/2592E3);a-=2592E3*d;var e=Math.floor(a/86400);a-=86400*e;var b=Math.floor(a/3600);a-=3600*b;var f=Math.floor(a/60);a=Math.floor(a-60*f)-1;return{years:c,months:d,days:e,hours:b,minutes:f,seconds:a}},stop:function(){clearInterval(this.interval);this.interval=null}}})();
			/* /countdown */
			/* scrollable */

(function(){var b=YAHOO.util.Dom,d=YAHOO.util.Event;FORTUNA.UI.Scrollable=function(l,m,n,p){this.constraint_element=b.get(m);this.offsetHeightElm=b.get(n);this.scroll_callback=p.scroll_callback||function(){};this.rc_up=b.get("ticket_rc_up");this.rc_down=b.get("ticket_rc_down");this.last_scroll_top=0;this.initialize=function(a){this.element=b.get(l);this.element_height=this.element.offsetHeight;this.timeout=null;this.delay=250;d.on(window,"scroll",function(a){this.onScroll()},this,!0);this.rc_up&&this.rc_down&&d.delegate(this.constraint_element,"click",this.scroll,".ticket_rc",this,!0);a&&this.scroll()};this.onScroll=function(){this.scrollFixed()};this.restore=function(){this.element.style.top="0px"};this.scroll=function(a){a&&(d.stopEvent(a),b.get(a.target)&&b.getViewportHeight());this.scroll_callback&&this.scroll_callback(this);var c=b.getX(this.element),f=this.getY()+0;b.removeClass(this.element,"rc_down");b.removeClass(this.element,"rc_up");!0===a?this.element.style.top="0px":(new YAHOO.util.Motion(this.element,{points:{to:[c,f]}},.3)).animate()};this.scrollFixed=function(){var a=this.element;do if(b.hasClass(a,"invisible"))return!1;while(a=a.parentNode);a=this.getConstraints();var c=b.getDocumentScrollTop(),f=b.getViewportHeight()+c,h=b.getY(this.element),e=b.getY(this.rc_up),d=this.rc_up.offsetHeight,k=b.getY(this.rc_down),g=c-this.last_scroll_top;0!==g&&(b.removeClass(this.element,"rc_up"),b.removeClass(this.element,"rc_down"));0<g&&c>=k&&(b.addClass(this.element,"rc_down"),this.element.style.position="absolute",this.element.style.top=c-a.top-(k-h)+"px");0>g&&f<=e+d&&(b.addClass(this.element,"rc_up"),d=this.rc_up.offsetHeight,this.element.style.position="absolute",this.element.style.top=f-a.top-(e+d-h)+"px");this.last_scroll_top=c;this.scrollHome()};this.scrollHome=function(){var a=this.last_scroll_top<this.getConstraints().top,b=0===this.element.offsetTop;if(a&&!b)this.scroll();else return!1};this.getY=function(){var a=this.getConstraints(),c=this.element.offsetHeight,f=b.getDocumentScrollTop(),d=f+b.getViewportHeight(),e=f;f<a.top?e=a.top:f+c>d&&(e=d-c);e<a.top&&(e=a.top);e+c>a.bottom&&(e=a.bottom-c);return e};this.getConstraints=function(){var a=b.getY(this.constraint_element);return{top:a,bottom:a+this.offsetHeightElm.offsetHeight}}}})();
			/* /scrollable */
			/* bonus_js */

(function(){var f=YAHOO.util,c=f.Dom,e=f.Event,h=f.Cookie,d=FORTUNA.UI;d.Bonus=function(g,f,l){this.bonusId=f;this.bonusName=l;this.bonusType=g;this.bonusWindow=c.get(g+"-bonus-window");this.profileHolder=c.get("user-holder");this.windowControls=c.get(g+"-controlls");this.bonusWindowLater=c.get("bonus-window-minimizeit");this.bonusMinimizedLink=c.getElementsByClassName("user-bonus-minified");this.aquireBonusLink=c.getElementsByClassName("get-bonus-link","a",this.windowControls)[0];this.retensionCreate=function(){this.initControls();this._windowMinimized()||this._isBonusPopupDisabled()||this.showBonusWindow.call(this)};this._resetCheckbox=function(){c.getElementBy(function(a){return"activate"==a.name},"input",this.windowControls).checked=!0;c.removeClass(this.aquireBonusLink,"disabled")};this.acquisitionCreate=function(){c.get("registration-ok")?this.handleUseBonus():(this.initControls(),this.setBenefitId(this.bonusId),this._windowMinimized()?this._showMinimizedBonusLink():this.showBonusWindow())};this.setBenefitId=function(a){var b=c.get("reg-benefit-id");b&&a&&(b.value=a)};this.initControls=function(){var a=this;e.delegate(this.profileHolder,"click",function(b){a.showBonusWindow.call(a,b)},".user-bonus-minified");e.on(this.bonusWindowLater,"click",this.closeBonusWindow,!0,this);e.delegate(this.bonusWindow,"click",function(b){a._bonusWindowEvtHandler(b)},"*")};this._bonusWindowEvtHandler=function(a){var b=e.getTarget(a);"activate"==b.name&&this.toggleGetBonusLink(b.checked);"register"==b.name&&this.handleAcquisitionBonusCheckbox(b.checked);if(c.hasClass(b,"get-bonus-link"))switch(this.bonusType){case "retension":this.handleRetensionBonusLink(b,a);break;case "acquisition":this.handleAcquisitionBonusLink(b,a)}c.hasClass(b,"conditions-decliner")&&this.handleRetensionBonusLink(b,a);c.hasClass(b,"minimize")&&this.closeBonusWindow()};this.handleAcquisitionBonusCheckbox=function(a){var b=FORTUNA.UTILS.editUrlParams(this.aquireBonusLink.href,{use_benefits:a});this.aquireBonusLink.href=b;this.toggleGetBonusLink(a)};this.handleAcquisitionBonusLink=function(a,b){c.hasClass(a,"disabled")?e.preventDefault(b):this.closeBonusWindow()};this.handleRetensionBonusLink=function(a,b){c.hasClass(a,"disabled")||this._aquireUserBonus(a);e.preventDefault(b)};this.toggleGetBonusLink=function(a){0==a?c.addClass(this.aquireBonusLink,"disabled"):c.removeClass(this.aquireBonusLink,"disabled")};this.handleDeclineBonus=function(){this.closeBonusWindow(!1);this._hideMinimizedBonusLink()};this.handleUseBonus=function(){this.closeBonusWindow(!1);this._hideMinimizedBonusLink()};this._aquireUserBonus=function(a){var b=this;d.fetchContent(a.href+"\x26_ajax\x3d1\x26show_message\x3d1",{success:function(a){var k=FORTUNA.UTILS.trimString(a.responseText);console&&console.log&&console.log(a.status,": ",k);b.fillBonusWindowContent(k||a.statusText);c.addClass(b.bonusWindow,"bonus-activated");setTimeout(function(){b.setBonusPopupDisabled(!0);d.invalidateUserAccount.call(d);b.handleUseBonus.call(b)},4E3)},failure:function(a){console&&console.log&&console.log(a.status,": ",a.statusText);b.fillBonusWindowContent(a.status,": ",a.statusText);setTimeout(function(){d.invalidateUserAccount.call(d);b.handleUseBonus.call(b)},4E3)}})};this.showBonusWindow=function(a){a?a.target&&"#"==a.target.href&&(this._showBonusWindow(a),e.preventDefault(a)):this._showBonusWindow(a)};this._showBonusWindow=function(){var a=d.getPageHeight();this._resetCheckbox();this._hideMinimizedBonusLink();d.dialog_overlay&&this.bonusWindow&&(d.dialog_overlay.style.height=a+"px",c.addClass(d.dialog_overlay,"bonus-window"),c.removeClass([d.dialog_overlay,this.bonusWindow],"invisible"),d.centerIt(this.bonusWindow,{position:"X",fixed:!0}),$(this.bonusWindow).height("1px").height(""),this.setCookie(!1))};this.closeBonusWindow=function(a){a="string"===typeof a?a:"MINIMIZED";this._showMinimizedBonusLink();c.removeClass(d.dialog_overlay,"bonus-window");c.addClass([d.dialog_overlay,this.bonusWindow],"invisible");this.setCookie(a)};this.fillBonusWindowContent=function(a){this.bonusWindow&&(this.bonusWindow.innerHTML=a)};this._showMinimizedBonusLink=function(){c.removeClass(this.bonusMinimizedLink,"invisible");this._windowMinimized("true")};this._hideMinimizedBonusLink=function(){c.addClass(this.bonusMinimizedLink,"invisible");this._windowMinimized("false")};this.setCookie=function(a){var b=g+"_bonus_"+this.bonusId,c=a+"_"+this.bonusId,d=new Date;a?d.setDate(d.getDate()+7):d.setFullYear(d.getFullYear()-1);h.set(b,c.toUpperCase(),{path:"/",expires:d})};this._windowMinimized=function(a){if(a)this.bonusWindow.getAttribute("data-minimized")==a;else return"true"==this.bonusWindow.getAttribute("data-minimized")};this.init=function(){var a=this.bonusType+"Create";if(this.hasOwnProperty(a))this[a]()};this._isBonusPopupDisabled=function(){return h.exists("bonus_popup_disabled")};this.setBonusPopupDisabled=function(){var a=new Date;a.setMinutes(a.getMinutes()+5);h.set("bonus_popup_disabled","1",{path:"/",expires:a})}}})();
			/* /bonus_js */
			/* browserDetect */
(function(){FORTUNA.UTILS.BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS";},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=data[i].string;var dataProp=data[i].prop;this.versionSearchString=data[i].versionSearch||data[i].identity;if(dataString){if(dataString.indexOf(data[i].subString)!=-1){return data[i].identity.toUpperCase();}}else{if(dataProp){return data[i].identity.toUpperCase();}}}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(index==-1){return;}return parseFloat(dataString.substring(index+this.versionSearchString.length+1));},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],device:function(){var device=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"MOBILE":"DESKTOP";return device;}};FORTUNA.UTILS.BrowserDetect.init();})();
			/* /browserDetect */
			/* whisper */

(function(){var b=YAHOO.util.Dom,g=YAHOO.util.Event,m=YAHOO.util.Connect;FORTUNA.UI.Whisper={url:null,formEl:null,inputEl:null,containerEl:null,betItemsContainerEl:null,actionsContainerEl:null,betItemsListEl:null,actionsListEl:null,closeEl:null,showAllEl:null,timeout:500,timeoutInstance:null,running:!1,hasSearchValue:!1,lastValue:null,listItems:[],selectedItemPos:-1,arrowMoveTimestamp:null,bodyEl:null,visible:!1,init:function(){var a=this;this.formEl=b.get("id-whisper-form");this.inputEl=b.get("id-whisper-input");this.containerEl=b.get("id-whisper-container");this.betItemsContainerEl=b.get("id-whisper-bet-items-container");this.betItemsListEl=b.get("id-whisper-bet-items-list");this.actionsContainerEl=b.get("id-whisper-actions-container");this.actionsListEl=b.get("id-whisper-actions-list");this.closeEl=b.getElementsByClassName("close",null,this.containerEl)[0];this.showAllEl=b.getElementsByClassName("show-all",null,b.get("id-whisper-footer"))[0];this.formEl&&this.inputEl&&this.containerEl&&this.betItemsContainerEl&&this.betItemsListEl&&this.actionsContainerEl&&this.actionsListEl&&this.closeEl&&this.showAllEl&&(this.url=this.formEl.getAttribute("data-whisper-url"),this.hasSearchValue=!b.hasClass(this.inputEl,"valueToggle"),this.bodyEl=document.getElementsByTagName("body")[0],g.on(this.inputEl,"keyup",function(){a.processEvent(this)}),g.on(this.inputEl,"keydown",function(c){a.processOnKeyDown(c)&&g.preventDefault(c)}),g.on(this.inputEl,"focus",function(a){b.removeClass(this,"hasDefaultValue")}),g.on(this.inputEl,"blur",function(c){c=a.trimValue(a.inputEl.value);a.hasSearchValue||""!=c&&c!=a.inputEl.defaultValue||b.addClass(a.inputEl,"hasDefaultValue")}),g.on(this.closeEl,"click",function(){a.closeWhisperResults()}),g.on(this.showAllEl,"click",function(){a.formEl.submit()}),g.on(this.formEl,"submit",function(){a.requestStopped(!0)}),g.delegate(this.containerEl,"click",function(){a.redirectToItem(this)},"li"),g.delegate(this.containerEl,"mouseover",function(c){a.isAfterArrowMove()&&a.selectItem(this)},"li"),g.delegate(this.containerEl,"mouseout",function(c){a.isAfterArrowMove()&&b.removeClass(this,"hover")},"li"),g.on(this.bodyEl,"click",this.bodyClickCallback,null,this))},processEvent:function(a,c){var b=this,f=this.trimValue(a.value);if(c||this.lastValue!=f)this.deselectAll(),this.isValidValue(f)&&(this.hasSearchValue||f!=a.defaultValue)?(this.requestStopped(!0),this.timeoutInstance=setTimeout(function(){b.getWhisperResults(f)},this.timeout)):this.closeWhisperResults(!0);this.lastValue=f},trimValue:function(a){return a.replace(/^\s+|\s+$/g,"")},isValidValue:function(a){return 0<a.length&&(2<a.length||/^\d+$/.test(a))},getWhisperResults:function(a){var c=this,b=this.url+"?searchValue\x3d"+a;this.requestStarted(a)&&m.asyncRequest("GET",b,{success:function(b){if(!c.requestStopped(a))if(c.clearList(),b.responseXML){var d=b.responseXML.getElementsByTagName("result")[0];if(d)if(b=d.getElementsByTagName("messages")[0])FORTUNA.Utils.log("Errors found in whisper results",b);else{var e=d.getElementsByTagName("betItems")[0];e?(b=e.getElementsByTagName("betItem"),e=c.getXmlText(e.getElementsByTagName("count")[0])):(b=[],e=null);var f=d.getElementsByTagName("actions")[0];f?(d=f.getElementsByTagName("action"),f=c.getXmlText(f.getElementsByTagName("count")[0])):(d=[],f=null);c.fillList(b,d,e,f)}else FORTUNA.Utils.log("ResponseXML does not contain result tag in whisper results")}else FORTUNA.Utils.log("ResponseXML is missing in whisper results")},failure:function(b){c.requestStopped(a)||c.clearList()},abort:function(b){c.requestStopped(a)||c.clearList()}})},requestStarted:function(a){this.running=a;b.addClass(this.inputEl,"loading");return!0},requestStopped:function(a){if(!0!==a&&this.running!==a)return!0;this.timeoutInstance&&(clearTimeout(this.timeoutInstance),this.timeoutInstance=null);this.running=!1;b.removeClass(this.inputEl,"loading");return!1},isVisible:function(){return this.visible},showContainer:function(){this.containerEl.style.display="block";this.visible=!0},hideContainer:function(){this.containerEl.style.display="none";this.visible=!1},clearList:function(){this.hideContainer();this.betItemsContainerEl.style.display="none";this.betItemsListEl.innerHTML="";this.actionsContainerEl.style.display="none";this.actionsListEl.innerHTML=""},fillList:function(a,c,b,f){var d=!1;this.clearList();if(a&&0<a.length){d=document.createElement("ol");for(var e=0;e<a.length;e++)d.appendChild(this.createBetItemHTML(a[e]));this.betItemsListEl.appendChild(d);this.betItemsContainerEl.style.display="block";d=!0}if(c&&0<c.length){d=document.createElement("ol");for(e=0;e<c.length;e++)d.appendChild(this.createActionHTML(c[e]));this.actionsListEl.appendChild(d);this.actionsContainerEl.style.display="block";d=!0}if(d){this.listItems=this.containerEl.getElementsByTagName("li");for(e=0;e<this.listItems.length;e++)this.listItems[e].setAttribute("data-list-pos",e);this.fillCount(this.betItemsListEl,b);this.fillCount(this.actionsListEl,f);this.showContainer()}},fillCount:function(a,b){var c=document.createElement("div");c.className="whisper-count-holder";var f=document.createElement("div");c.appendChild(f);b=document.createTextNode(b);f.appendChild(b);a.appendChild(c)},getXmlText:function(a){return a?a.textContent||a.text:null},createBetItemHTML:function(a){this.getXmlText(a.getElementsByTagName("name")[0]);var c=this.getXmlText(a.getElementsByTagName("date")[0]),g=this.getXmlText(a.getElementsByTagName("time")[0]),f=this.getXmlText(a.getElementsByTagName("href")[0]),d=this.getXmlText(a.getElementsByTagName("hlName")[0]),e=this.getXmlText(a.getElementsByTagName("actionName")[0]);a=a.getElementsByTagName("sport")[0];this.getXmlText(a);var h=a.getAttribute("iconClass");a=document.createElement("li");var k=document.createElement("div");b.addClass(k,"icon whisper sport "+h);a.appendChild(k);h=document.createElement("div");k=document.createElement("div");var l=document.createElement("div");b.addClass(h,"label");b.addClass(k,"main-label");b.addClass(l,"sub-label");k.innerHTML=d;l.innerHTML=e;h.appendChild(k);h.appendChild(l);a.appendChild(h);d=document.createElement("div");e=document.createElement("div");h=document.createElement("div");b.addClass(d,"date-time");b.addClass(e,"date");b.addClass(h,"time");e.innerHTML=c;h.innerHTML=g;d.appendChild(e);d.appendChild(h);a.appendChild(d);a.setAttribute("data-href",f);b.addClass(a,"with-icon with-date-time");return a},createActionHTML:function(a){this.getXmlText(a.getElementsByTagName("name")[0]);var c=this.getXmlText(a.getElementsByTagName("href")[0]),g=this.getXmlText(a.getElementsByTagName("hlName")[0]);a=a.getElementsByTagName("sport")[0];this.getXmlText(a);var f=a.getAttribute("iconClass");a=document.createElement("li");var d=document.createElement("div");b.addClass(d,"icon whisper sport "+f);a.appendChild(d);f=document.createElement("div");b.addClass(f,"label");f.innerHTML=g;a.appendChild(f);a.setAttribute("data-href",c);b.addClass(a,"with-icon");return a},processOnKeyDown:function(a){var b=this.hasItems();switch(a.keyCode||a.which){case 40:return this.processArrowKeyEvent(!0,b);case 38:return this.processArrowKeyEvent(!1,b);case 13:return b?this.processEnterKeyEvent():!1;case 27:return b?this.processEscapeKeyEvent():!1;default:return!1}},itemsCount:function(){return this.listItems.length},hasItems:function(){return 0<this.itemsCount()},findSelectedItemPos:function(){return this.selectedItemPos},findSelectedItem:function(){var a=this.findSelectedItemPos();return 0>a?null:this.listItems[a]},selectItemByPos:function(a){0>a||a>=this.listItems.length||this.selectItem(this.listItems[a])},selectItem:function(a){this.deselectAll();a&&(this.selectedItemPos=a.getAttribute("data-list-pos"),b.addClass(a,"hover"))},deselectAll:function(){b.removeClass(this.listItems,"hover");this.selectedItemPos=-1},closeWhisperResults:function(a){this.requestStopped(!0);this.clearList();a&&this.inputEl.focus()},processEnterKeyEvent:function(){var a=this.findSelectedItem();if(!a)return!1;this.redirectToItem(a);return!0},processEscapeKeyEvent:function(){this.closeWhisperResults();return!0},processArrowKeyEvent:function(a,b){if(!b)return a?(this.processEvent(this.inputEl,!0),!0):!1;b=this.findSelectedItemPos();a?b++:b--;if(0>b)return this.deselectAll(),!0;this.selectItemByPos(b);this.moveOffsetToSelectedItem();return!0},redirectToItem:function(a){a&&(window.location.href=a.getAttribute("data-href"))},moveOffsetToSelectedItem:function(){var a=this.findSelectedItem();if(a){var c=b.getDocumentScrollLeft(),g=b.getDocumentScrollTop(),f=b.getClientHeight(),d=g+f,e=b.getY(a);a=e+a.offsetHeight;this.updateArrowMove();e<g?window.scrollTo(c,Math.max(0,e-10)):a>d&&window.scrollTo(c,Math.min(a,a-f+10))}},updateArrowMove:function(){this.arrowMoveTimestamp=(new Date).getTime()},isAfterArrowMove:function(){return!this.arrowMoveTimestamp||300<(new Date).getTime()-this.arrowMoveTimestamp?!0:!1},isInsideFormElement:function(a){if(!a)return!1;if(a.id==this.formEl.id)return!0;var c=this;return b.getAncestorBy(a,function(a){return a.id==c.formEl.id})?!0:!1},bodyClickCallback:function(a){this.isVisible()&&(a=a.target||a.srcElement)&&(this.isInsideFormElement(a)||this.closeWhisperResults())}}})();
			/* /whisper */
			/* web_messages */

(function(){var d=YAHOO.util,e=d.Dom,f=d.Connect;FORTUNA.UI.webMessages={url:null,containerClass:"site-message-container",closeClass:".close",messageClass:".site-message",repeatPeriod:6E4,delay:3E4,init:function(){var a=this;setTimeout(function(){a.repeat()},a.delay)},refresh:function(){var a=this,b=this.url+"\x26cachebuster\x3d"+(new Date).getTime();f.asyncRequest("GET",b,{success:function(b){a.updateHtml(b.responseText);a.repeat();a.hideHiddenMessages();FORTUNA.UI.showSiteMessages&&FORTUNA.UI.showSiteMessages()},failure:function(b){a.repeat()},abort:function(b){a.repeat()}})},repeat:function(){var a=this;setTimeout(function(){a.refresh()},a.repeatPeriod)},updateHtml:function(a){for(var b=e.getElementsByClassName(this.containerClass),c=0;c<b.length;c++)b[c].innerHTML=a},close:function(a){a=$(a).closest(this.messageClass);a.slideUp($.proxy(function(){FORTUNA.UI.showSiteMessages&&FORTUNA.UI.showSiteMessages();this.checkContainerEmpty()},this));this.setCookie(a.attr("id"))},initCloseButtons:function(){var a=this;$("."+this.containerClass).on("click",this.closeClass,function(b){b.preventDefault();a.close(this)})},hideHiddenMessages:function(){var a=$(this.messageClass);a.length&&a.each(function(){var a=$(this);$.cookie(a.attr("id")+"_hidden")&&"CRITICAL_ERROR"!=a.data("type")&&a.hide()});this.checkContainerEmpty()},setCookie:function(a,b){b||(b=new Date,b.setHours(b.getHours()+12));$.cookie(a+"_hidden",1,{path:"/",expires:b})},checkContainerEmpty:function(){var a=$("."+this.containerClass);0==a.height()?a.addClass("empty"):a.removeClass("empty")}}})();
			/* /web_messages */
			/* js_hp_carousel */

(function(){var l=YAHOO.util,c=l.Dom;Event=l.Event;FUtils=FORTUNA.UTILS;FORTUNA.hpCarousel={props:{autoplayInterval:5E3,thumbsScrollStep:10,thumbsScrollInterval:75,mouseInCarousel:!1,timeGapLine:!0},init:function(){this.initMainVars()&&(this.initThumbsList(),this.initDetailItemsList(),this.initScrollButtons(),this.initMousePause(),this.initTimeGapControll(),this.initCarouselAddBetLinks())},initMainVars:function(){this.detailElm=(this.carouselElm=c.get("hcarousel"))&&this.carouselElm.querySelector("div.crs-detail");this.thumbsElm=this.carouselElm&&this.carouselElm.querySelector("div.crs-thumbs");return this.carouselElm&&this.detailElm&&this.thumbsElm?(this.thumbsWrapperElm=this.carouselElm.querySelector(".crs-thumbs-container"),this.thumbsListElm=this.thumbsWrapperElm.querySelector("ul"),this.activeItem={},this.activeItem.thumb=c.getElementBy(function(a){return!c.hasClass(a,"grayscale")},"li",this.thumbsElm),this.activeItem.ord=parseInt(this.activeItem.thumb.getAttribute("data-ord")),this.activeItem.detail=document.getElementById("crs-item-"+this.activeItem.ord),!0):!1},initThumbsList:function(){this.thumbsElm&&(this.thumbsList=this.thumbsElm.getElementsByTagName("li"),this.firstItem=this.thumbsList[0],this.lastItem=this.thumbsList[this.thumbsList.length-1],this.initThumbsListWidth(),this.setThumbEvents(),this.initAutoplay())},initDetailItemsList:function(){if(this.detailElm){this.detailItemsList=this.detailElm.getElementsByTagName("li");var a=0,b,e=this.detailItemsList;a;for(e;a<e,b=this.detailItemsList[a];a++){var d=c.hasClass(b,"active")?1:0;c.setStyle(b,"opacity",d);c.removeClass(b,"hidden");d=c.getElementsByClassName("crs-item-perex","p",b);var f=c.getElementsByClassName("bt_holder","div",b),g=c.getElementsByClassName("crs-item-title","h3",b),h=c.getElementsByClassName("crs-item-content","div",b);if(0<d.length){var k=0;0<f.length&&(f=f[0],0==f.children.length&&c.addClass(f,"hidden"),k=f.offsetHeight);k=k?k:0;d=d[0];h=h[0];f=h.offsetHeight-k-(0<g.length?g[0].offsetHeight:0)-parseInt(c.getStyle(h,"padding-top"))-parseInt(c.getStyle(h,"padding-bottom"));g=parseInt(c.getStyle(d,"line-height"));f=Math.round(f/g)*g;g=c.getElementsByClassName("crs-item-perex-inner","span",d)[0];0<f&&c.setStyle(d,"height",f+"px");0<f&&f<g.offsetHeight&&c.addClass(d,"ellipsis")}this.initConnectedLinks(b)}}},initCarouselProportions:function(){this.props.carouselWidth=this.carouselElm.offsetWidth;this.props.carouselHeight=this.carouselElm.offsetHeight},initAutoplay:function(){this._prepareAutoplayControl();this.autoplayElm&&(Event.on(this.autoplayElm,"click",this.autoplaySwitch),this.startAutoplay())},_prepareAutoplayControl:function(){if(this.thumbsElm){var a=document.createElement("span"),b=FUtils.Storage.getItem("carousel_loop");a.id="crs-autoplay";a.setAttribute("data-play-title","PLAY_CARUSEL_TITLE");a.setAttribute("data-pause-title","PAUSE_CARUSEL_TITLE");var e="off"===b?c.getAttribute(a,"data-pause-title"):c.getAttribute(a,"data-play-title");"off"!==b&&c.addClass(a,"active");a.setAttribute("title",e);this.thumbsElm.appendChild(a);this.autoplayElm=a}},autoplaySwitch:function(){var a=FORTUNA.hpCarousel;c.hasClass(this,"active")?a.stopAutoplay():a.startAutoplay()},startAutoplay:function(){var a=this;a.props.autoplayFrameAnimStart=(new Date).getTime();this.autoplayInterval=setInterval(function(){a.props.autoplayFrameAnimStart=(new Date).getTime();a.autoplayActivateItem.call(a)},this.props.autoplayInterval);c.addClass(this.autoplayElm,"active")},stopAutoplay:function(){clearInterval(this.autoplayInterval);this.stopTimeGap();this.autoplayInterval=null;c.removeClass(this.autoplayElm,"active")},restartAutoplay:function(){this.stopAutoplay();this.startAutoplay()},autoplayActivateItem:function(){if(!this.props.mouseInCarousel){var a=this.activeItem.ord+1;((a=a>=this.thumbsList.length?0:a)||0===a)&&this.activateNewItem(a)}},setThumbEvents:function(){var a=this,b;Event.delegate(this.thumbsElm,"click",function(c){Event.preventDefault(c);b=this.getAttribute("data-item-id");b!=a.activeItem.ord&&(a.restartAutoplay(),a.activateNewItem.call(a,b))},"a")},activateNewItem:function(a){this.activating&&this.activating.isAnimated()&&this.activating.stop(!0);if(a||0===a)this.deactivateItem(),this.activateItem(a)},activateItem:function(a){var b=this,e=c.get("crs-item-"+a),d=c.get("crs-thumb-"+a);this.activating=FORTUNA.UI.fadeElement(e,{method:"in"},{start:function(){c.addClass(e,"active");c.removeClass(d,"grayscale");c.removeClass(e,"hidden");b.bringItemDetailToFront(e);b.scrollToThumb(d);b.stopTimeGap()},complete:function(){b.activeItem.detail=e;b.activeItem.thumb=d;b.activeItem.ord=parseInt(d.getAttribute("data-ord"));b.props.mouseInCarousel||b.startTimeGap(0);b.bringItemDetailToBack(e)}})},deactivateItem:function(a){var b=a?this.thumbsList[a]:FORTUNA.hpCarousel.activeItem.detail,e=a?this.detailItemsList[a]:FORTUNA.hpCarousel.activeItem.thumb;this.deactivating=FORTUNA.UI.fadeElement(b,{method:"out"},{start:function(){c.addClass(e,"grayscale")},complete:function(){c.removeClass(b,"active");c.addClass(b,"hidden")}})},scrollToThumb:function(a){if(!this.props.autoScroll){a=c.get(a);var b=isNaN(parseInt(this.thumbsListElm.style.left))?0:parseInt(this.thumbsListElm.style.left),e=a.offsetLeft<Math.abs(b);a.offsetLeft+a.offsetWidth>=this.thumbsWrapperElm.offsetWidth+Math.abs(b)?(this.thumbsListElm.style.left=-1*a.offsetLeft+this.thumbsWrapperElm.offsetWidth-a.offsetWidth+"px",a===this.lastItem?this.toggleThumbScrollButton(!0,!1):this.toggleThumbScrollButton(!0,!0)):e&&(this.thumbsListElm.style.left=-1*a.offsetLeft+"px",a===this.firstItem&&this.toggleThumbScrollButton(!1,!0))}},scrollThumbs:function(a){var b=this.thumbsListElm,c=this.thumbsWrapperElm.offsetWidth-b.offsetWidth,d=isNaN(parseInt(b.style.left))?0:parseInt(b.style.left),f=!0,g=!0;a?(d+=FORTUNA.hpCarousel.props.thumbsScrollStep,0<d&&(d=0,f=!1)):(d-=FORTUNA.hpCarousel.props.thumbsScrollStep,d<c&&(d=c,g=!1));b.style.left=d+"px";this.toggleThumbScrollButton(f,g)},toggleThumbScrollButton:function(a,b){var e=document.getElementById("crs-scroll-left"),d=document.getElementById("crs-scroll-right");e&&(a?c.removeClass(e,"vhidden"):c.addClass(e,"vhidden"));d&&(b?c.removeClass(d,"vhidden"):c.addClass(d,"vhidden"))},startAutoScroll:function(a){var b=this,c="left"===a.getAttribute("data-direction");this.props.autoScroll=window.setInterval(function(){b.scrollThumbs(c)},this.props.thumbsScrollInterval)},stopAutoScroll:function(){window.clearInterval(this.props.autoScroll);this.props.autoScroll=null},initScrollButtons:function(){var a=this,b=this.thumbsWrapperElm.offsetWidth<=this.thumbsListElm.offsetWidth;Event.delegate(this.thumbsElm,"mouseover",function(b,c){a.startAutoScroll(c)},".crs-scroller");Event.delegate(this.thumbsElm,"mouseout",function(b,c){a.stopAutoScroll()},".crs-scroller");this.toggleThumbScrollButton(!1,b)},initThumbsListWidth:function(){this.thumbsListElm.style.width=this.thumbsList.length*parseFloat(this.thumbsList[0].offsetWidth)+"px"},initMousePause:function(){var a=this;Event.on([this.detailElm,this.thumbsElm],"mouseover",function(b){a.props.mouseInCarousel=!0;a.stopTimeGap()});Event.on([this.detailElm,this.thumbsElm],"mouseout",function(b){b=(new Date).getTime()-a.props.autoplayFrameAnimStart;a.props.mouseInCarousel=!1;a.startTimeGap(b)})},initConnectedLinks:function(a){var b=c.getElementsByClassName("connected-links","a",a);Event.on(b,"mouseover",function(){c.addClass(b,"hover")});Event.on(b,"mouseout",function(){c.removeClass(b,"hover")})},initTimeGapControll:function(){this.props.timeGapLine=c.get("crs-timer-gap");this.props.timeGapLineWidth=0;this.startTimeGap()},startTimeGap:function(a){var b=this,c=this.props.autoplayInterval/114;a&&(remainingTime=this.props.autoplayInterval-a,a=Math.ceil(114/this.props.autoplayInterval*a),c=remainingTime/(114-a),this.props.timeGapLineWidth=a,this.props.timeGapLine.style.width=a+"%");this.props.timeGapLineInterval&&clearInterval(this.props.timeGapLineInterval);this.props.timeGapLineInterval=setInterval(function(){b.animateTimeGap()},c)},stopTimeGap:function(){clearInterval(this.props.timeGapLineInterval);this.resetTimeGap()},resetTimeGap:function(){this.props.timeGapLineWidth=0;this.props.timeGapLine.style.width="0%"},animateTimeGap:function(){this.props.timeGapLineWidth++;this.props.timeGapLine.style.width=this.props.timeGapLineWidth+"%"},initCarouselAddBetLinks:function(){var a=$("#hcarousel .col_bet a");a.on("click","span",$.proxy(this._handleAddBetLinkClick,this));a.on("mouseover","span",$.proxy(this._handleAddBetLinkMouseOver,this));a.on("mouseout","span",$.proxy(this._handleAddBetLinkMouseOut,this));this.resizeAddBetLinksLabels(a)},_handleAddBetLinkClick:function(a){a.preventDefault();$target=$(a.target);(a=this._getActiveBetLink($target))&&a.click()},_handleAddBetLinkMouseOver:function(a){a.preventDefault();$target=$(a.target);(a=this._getActiveBetLink($target))&&a.mouseover()},_handleAddBetLinkMouseOut:function(a){a.preventDefault();$target=$(a.target);(a=this._getActiveBetLink($target))&&a.mouseout()},_getActiveBetLink:function(a){var b=a.closest(".add_bet_link");if(b.length)return b;b=a.closest(".active_bet_link");return b.length?b:null},resizeAddBetLinksLabels:function(a){$(a).each(function(){var a=$(this),c=a.width(),d=a.find(".name");a=a.find(".rate");d.length&&a.length&&(a.width("auto"),a=a.outerWidth(),d.css("width",c-a+"px"),d.css("width","-moz-calc(100% - "+a+"px)"),d.css("width","-webkit-calc(100% - "+a+"px)"),d.css("width","calc(100% - "+a+"px)"))})},bringItemDetailToFront:function(a){a&&c.setStyle(a,"z-index",5)},bringItemDetailToBack:function(a){a&&c.setStyle(a,"z-index",null)}};FORTUNA.run(function(){FORTUNA.hpCarousel.init()},!0)})();
			/* /js_hp_carousel */
			/* bet_range_slider_js */

(function(){FORTUNA.UI.BetRangeSlider=function(l,e,f,g,h){var k=this;this.form=$("#"+l);this.slider=$(".slider",this.form);this.rangeValue=$(".range",this.form);this.betRateFromInput=$(".betRateFrom",this.form);this.betRateToInput=$(".betRateTo",this.form);this.sliderMax=$(".sliderMax",this.slider);this.sliderMin=$(".sliderMin",this.slider);this.tickerLeft=$(".tickLeft",this.form);this.tickerRight=$(".tickRight",this.form);this.rangeValue&&(this.range=this.rangeValue[0].value.split(";"),this.maxTick=this.range.length-1);if(this.slider||this.range||this.form)e||(e=0),f||(f=this.maxTick),this.slider.slider({range:!0,min:0,max:this.range.length-1,values:[e,f],slide:function(b,a){k.slide(a.handle,a.value)},start:function(b,a){g&&"function"==typeof g&&g(b,a)},stop:function(b,a){h&&"function"==typeof h&&h(b,a)}}),this.betRateFromInput&&this.betRateFromInput&&(this.betRateFromInput.on("blur",function(){k.changeValuesByInput()}),this.betRateToInput.on("blur",function(){k.changeValuesByInput()})),this.slide=function(b,a){b.getAttribute("data-ticker");var c=b.getAttribute("data-input"),d=$(b).hasClass("sliderMin")?a:null,e=$(b).hasClass("sliderMax")?a:null;$(".actValue",b).text(this.range[a]);$("."+c,this.form).val(this.range[a]);this._updateTickers(d,e)},this.changeValuesByInput=function(){var b=0>this.betRateFromInput.val()?0:this.betRateFromInput.val(),a=0>this.betRateToInput.val()?0:this.betRateToInput.val(),c=FORTUNA.UTILS.getClosestNumber(this.range,parseFloat(b),!0),d=FORTUNA.UTILS.getClosestNumber(this.range,parseFloat(a),!0);c=c?c:0;d=d?d:0;this.slider.slider("values",[c,d]);$(".actValue",this.sliderMin).text(b);$(".actValue",this.sliderMax).text(a);this._updateTickers(c,d)},this._updateTickers=function(b,a){b&&this.tickerLeft.val(b);a&&this.tickerRight.val(a)}}})();
			/* /bet_range_slider_js */
			/* forum_js */

(function(f){f.forum={conf:{reducedAreaRowsCount:0,enlargedAreaRowsCount:0,maxChars:3500,displayChars:100,autoRefreshTime:59,LENGTH_INDICATOR_ID:"forum-entry-length",REFRESH_TIMER_ID:"forum-refresh-timer",FORUM_TOO_LONG_CLASS:"blink-error",AJAX_INDICATOR_CLASS:"forum-ajax-indicator",AUTOREFRESH_COOKIE_NAME:"forum_auto_refresh",AUTOREFRESH_ACTIVE_CLASS:"forum-autorefresh-active",SELECTOR_LENGTH_INDICATOR:"#forum-entry-length",SELECTOR_ENTRY_HOLDER:"#forum-entry-holder",SELECTOR_ENTRY_FIELD:"#js-forum-entry",SELECTOR_EMOTICONS_HOLDER:"#form-entry-emoticons",SELECTOR_EMOTICON:".emoji",SELECTOR_RESET_BUTTON:".forum-reset-button",SELECTOR_ENTRY_TOOLS:".forum-entry-tools",SELECTOR_POSTS:"#forum-posts",SELECTOR_ENTRY_BOX:"#forum-entry-box",SELECOTR_AUTOREFRESH_HOLDER:"#forum-refresh-setting",SELECTOR_REFRESH_BUTTON:"#forum-refresh-button",SELECTOR_REFRESH_CONTROL:"#js-forum-auto-refresh",SELECTOR_REFRESH_TIMER:"#forum-refresh-timer",SELECTOR_FORUM_VARIABLES:"#forum-variables",SELECTOR_SUBMIT_BUTTON:".forum-submit-entry",SELECTOR_REPLY_LINK:".control.reply",SELECTOR_PARENT_ID:"input[name\x3dparentId]",SELECTOR_PAGE_NUMBER:"input[name\x3dpageNo]"},init:function(){this.$entryHolder=$(this.conf.SELECTOR_ENTRY_HOLDER);this.$postField=$(this.conf.SELECTOR_ENTRY_FIELD);this.$refreshHolder=$(this.conf.SELECOTR_AUTOREFRESH_HOLDER);this.$refreshButton=$(this.conf.SELECTOR_REFRESH_BUTTON);"true"===this.$postField.attr("contenteditable")&&this.initForumEntryForm();this.initPostControlsClick();this.prepareAjaxIndicator();this.prepareAutoRefresh();this.$postField.text().length&&this.$postField.data("placeholder")!==this.$postField.text().trim()||this.deactivateSubmitButton();this.initTwemoji()},initForumEntryForm:function(a){var b=FORTUNA.UTILS.getURLParams();this.prepareResizeEntryField();this.prepareCharsCounter();this.initReplyButtons();this.initFormSubmit();!a&&this.isRepliedToFavouritePost(b)&&this.moveForumEntryForm(b.postId)},initTwemoji:function(a){var b=$(this.conf.SELECTOR_EMOTICONS_HOLDER)[0],c=$(this.conf.SELECTOR_POSTS)[0],d={folder:"svg",ext:".svg"};a="object"===typeof a?a:{posts:!0,entry:!0};0<=["IPHONE/IPOD"].indexOf(FORTUNA.UTILS.BrowserDetect.OS)&&(b.innerHTML="");b&&a.entry&&(twemoji.parse(b,d),this.prepareFormIcons());c&&a.posts&&twemoji.parse(c,d)},reInitForumEntryForm:function(){this.$lengthIndicator=this.$postField=this.$entryHolder=null;this.$entryHolder=$(this.conf.SELECTOR_ENTRY_HOLDER);this.$postField=$(this.conf.SELECTOR_ENTRY_FIELD);var a=$("#f_errorMessages").html();$("#f_errorsOut").html(a);this.initForumEntryForm(!0);this.initTwemoji()},prepareAjaxIndicator:function(){if(!this.$ajaxIndicator){var a=$("\x3cdiv /\x3e").addClass(this.conf.AJAX_INDICATOR_CLASS);$(this.conf.SELECTOR_POSTS).after(a);this.$ajaxIndicator=a}},prepareFormIcons:function(){var a=$(this.conf.SELECTOR_EMOTICONS_HOLDER);if(!a.attr("disabled"))a.on("click",this.conf.SELECTOR_EMOTICON,$.proxy(this._onEmoticonClickHandler,this))},prepareResizeEntryField:function(){this.$postField.on("focusin",$.proxy(this._onEntryFieldFocusHandler,this));this.$postField.on("focusout",$.proxy(this._onEntryFieldBlurHandler,this));this.$postField.on("drop",$.proxy(this._onEntryFieldDropHandler,this));this.$entryHolder.find(this.conf.SELECTOR_RESET_BUTTON).on("click",$.proxy(function(a){this._onEntryReset(a)},this))},prepareCharsCounter:function(){this.prepareCharsLengthIndicator();this.checkCharsLength();this.$postField.on("keyup",$.proxy(this.checkCharsLength,this));this.$postField.on("blur",$.proxy(this.checkCharsLength,this))},prepareCharsLengthIndicator:function(){if(!this.$lengthIndicator){var a=$("\x3cspan /\x3e",{id:this.conf.LENGTH_INDICATOR_ID,"class":"hidden"}),b=this.getRemainingCharsCount();a.text(b);a.appendTo(this.$entryHolder.find(this.conf.SELECTOR_ENTRY_TOOLS));this.$lengthIndicator=a}},prepareAutoRefresh:function(){var a=$.cookie(this.conf.AUTOREFRESH_COOKIE_NAME),b=$(this.conf.SELECTOR_REFRESH_BUTTON),c=$("\x3cspan /\x3e",{id:this.conf.REFRESH_TIMER_ID,text:this.conf.autoRefreshTime}),d=$(this.conf.SELECTOR_REFRESH_CONTROL);b.after(c);this.autorefresh=this.autorefresh||{};this.autorefresh.$control=d;this.autorefresh.$timer=c;if(!c.length||!d.length)return!1;this.autorefresh.$control.on("change",$.proxy(this._onChangeAutoRefreshHandler,this));this.$refreshButton.on("click",$.proxy(this.resetAutoRefresh,this));"on"===a?this.startAutoRefresh():this.stopAutoRefresh()},_onChangeAutoRefreshHandler:function(a){$(a.target).is(":checked")?this.startAutoRefresh():this.stopAutoRefresh()},startAutoRefresh:function(){this.startAutoRefreshCountdown();this.autorefresh.$control.attr("checked",!0);$.cookie(this.conf.AUTOREFRESH_COOKIE_NAME,"on",{path:"/",expires:30})},startAutoRefreshCountdown:function(){var a=this.conf.autoRefreshTime,b=this.autorefresh.$timer.get(0);$(b).text(this.conf.autoRefreshTime);this.autorefresh.countdown=new FORTUNA.UI.Countdown(b,a,$.proxy(this._onAutoRefreshTic,this),$.proxy(this._onAutoRefreshEnd,this),0);this.autorefresh.countdown.run();this.$refreshHolder.hasClass(this.conf.AUTOREFRESH_ACTIVE_CLASS)||this.$refreshHolder.addClass(this.conf.AUTOREFRESH_ACTIVE_CLASS)},stopAutoRefresh:function(){this.$refreshHolder.removeClass(this.conf.AUTOREFRESH_ACTIVE_CLASS);this.autorefresh.$control.is(":checked")&&this.autorefresh.$control.attr("checked",!1);this.autorefresh.countdown&&this.autorefresh.countdown.stop&&(this.autorefresh.countdown.stop(),this.autorefresh.countdown=null);$.removeCookie(this.conf.AUTOREFRESH_COOKIE_NAME,{path:"/"})},pauseAutoRefresh:function(){this.autorefresh&&this.autorefresh.countdown&&this.autorefresh.countdown.stop()},resumeAutoRefresh:function(){this.autorefresh.countdown&&this.autorefresh.countdown&&!this.autorefresh.countdown.interval&&this.autorefresh.countdown.run()},resetAutoRefresh:function(){this.autorefresh.countdown&&(this.autorefresh.countdown.stop(),this.startAutoRefreshCountdown())},_onAutoRefreshTic:function(a,b){$(a).text(b.seconds)},_onAutoRefreshEnd:function(){$elm=this.$refreshButton;TDI.Ajax.send($elm,{end:$.proxy(function(){this.resetAutoRefresh()},this)})},_onEmoticonClickHandler:function(a){this.$postField.trigger("focusin");a=a.target.alt;this.$postField.html();this.getRemainingCharsCount()>=a.length&&(this.$postField.focus(),this.$postField[0].innerHTML+=a,cursorManager.setEndOfContenteditable(this.$postField[0]),this.scrollEntryToEnd(),this.checkCharsLength(),this.copyContenteditableToBody())},_onEntryFieldFocusHandler:function(){this.pauseAutoRefresh();this.removePlaceholderText()},_onEntryReset:function(a){this._onEntryFieldBlurHandler(!0);this.$lengthIndicator.text(this.conf.maxChars);this.addPlaceholderText(!0);this.deactivateSubmitButton();this.copyContenteditableToBody();a&&a.preventDefault()},_onEntryFieldBlurHandler:function(a){this.copyContenteditableToBody();this.resumeAutoRefresh();this.addPlaceholderText()},_onEntryFieldDropHandler:function(){var a=this;window.setTimeout(function(){var b=a.$postField.text(),c=a.$postField.data("placeholder");c&&(a.$postField.text(b.replace(c,"")),a.$postField.removeClass("visiblePlaceholder"),a.checkCharsLength())},50)},scrollEntryToEnd:function(){var a=this.$postField[0].scrollHeight-this.$postField.height();this.$postField.scrollTop(a)},getRemainingCharsCount:function(){var a=this.$postField.text().length;return this.conf.maxChars-a},checkCharsLength:function(){var a=this.getRemainingCharsCount(),b=0>=a,c=a<=this.conf.displayChars,d=this.conf.FORUM_TOO_LONG_CLASS;a<this.conf.maxChars&&!this.$postField.hasClass("visiblePlaceholder")?this.activateSubmitButton():this.deactivateSubmitButton();c?this.$lengthIndicator.removeClass("hidden"):this.$lengthIndicator.addClass("hidden");b?(a=this.$postField.text().substring(0,this.conf.maxChars),this.$lengthIndicator.addClass(d),this.$postField.text(a),a=0):this.$lengthIndicator.hasClass(d)&&this.$lengthIndicator.removeClass(d);this.$lengthIndicator.text(a)},moveForumEntryForm:function(a){var b=$("#post-"+a),c=this.$entryHolder.data("defaultForum"),d=this.$entryHolder.data("defaultTopic"),e=$(this.conf.SELECTOR_ENTRY_BOX);this.$entryHolder.length&&b.length?this._moveForumEntryFormToPost(e,b,a):this.$entryHolder.length&&e.length&&(this.$entryHolder.appendTo(e),this.$entryHolder.find('[name\x3d"parentId"]').remove(),c&&this.$entryHolder.find('[name\x3d"forumId"]').val(c),d&&this.$entryHolder.find('[name\x3d"topicId"]').val(d),this.$entryHolder.removeAttr("class"),e.removeClass("gone"))},_moveForumEntryFormToPost:function(a,b,c){var d=b.data("topic"),e=b.data("forum"),f=this.$entryHolder.find("form");a.addClass("gone");this.$entryHolder.insertAfter(b);f.find('[name\x3d"parentId"]').remove();f.append('\x3cinput type\x3d"hidden" name\x3d"parentId" value\x3d"'+c+'" /\x3e');this.$entryHolder.addClass(b.attr("class")).removeClass("post");d&&this.$entryHolder.find('[name\x3d"topicId"]').val(d);e&&this.$entryHolder.find('[name\x3d"forumId"]').val(e);this.$postField.focus();this.scrollEntryToEnd()},initReplyButtons:function(){var a=this;$(this.conf.SELECTOR_POSTS).on("click",this.conf.SELECTOR_REPLY_LINK,function(b){a.moveForumEntryForm($(this).data("post-id"));b.preventDefault()});$(this.conf.SELECTOR_ENTRY_BOX).on("click",".forum-entry-rc",function(b){a.moveForumEntryForm();b.preventDefault()})},clearEntryForm:function(){$(this.conf.SELECTOR_RESET_BUTTON).click()},_onForumEntryPostSubmit:function(a){void 0===$(this.conf.SELECTOR_PARENT_ID).val()&&$(this.conf.SELECTOR_PAGE_NUMBER).val(1);$(a).find(this.conf.SELECTOR_SUBMIT_BUTTON).removeClass("yellow").addClass("disabled").attr("disabled","disabled")},initFormSubmit:function(){var a=this;this.$entryHolder.on("submit","form",function(){a._onForumEntryPostSubmit(this)})},initPostControlsClick:function(){var a=this;$(this.conf.SELECTOR_POSTS).on("click",".control",function(b){a._onPostControlsClickDialog(b)})},copyContenteditableToBody:function(){const a=this.$postField[0].innerText.sanitize();document.getElementById("js-forum-body").innerText=a},_onPostControlsClickDialog:function(a){var b=$(a.target),c=b.data("action"),d=$(this.conf.SELECTOR_FORUM_VARIABLES).data("message-"+c);if(c)return d?window.confirm(d)&&TDI.Ajax.send(b):TDI.Ajax.send(b),a.preventDefault(),!1},activateSubmitButton:function(){var a=$(this.conf.SELECTOR_SUBMIT_BUTTON),b=a.data("color")||"yellow";a.removeAttr("disabled").removeClass("disabled").addClass(b)},deactivateSubmitButton:function(){var a=$(this.conf.SELECTOR_SUBMIT_BUTTON),b=a.data("color")||"yellow";a.attr("disabled","disabled").removeClass(b).addClass("disabled")},removePlaceholderText:function(){var a=this.$postField.text().trim(),b=this.$postField.data("placeholder");void 0==this.$postField.attr("readonly")&&a==b&&(this.$postField.text(""),this.$postField.removeClass("visiblePlaceholder"))},addPlaceholderText:function(a){var b=this.$postField.text(),c=this.$postField.data("placeholder");if(""==b||a)this.$postField.text(c),this.$postField.addClass("visiblePlaceholder")},isRepliedToFavouritePost:function(a){a=a||FORTUNA.UTILS.getURLParams();return a.displayMode&&"thread"==a.displayMode&&a.reply&&"true"==a.reply&&a.postId}};FORTUNA.run(function(){f.forum.init()})})(FORTUNA.UI);
			/* /forum_js */
			/* rs_menu */

(function(){FORTUNA.UI.rsMenu=function(q,r){var a,h,d,f,e={itemWidthCorrection:0,menuWidthCorrection:0},g=function(){l();var b=a.innerWidth()+e.menuWidthCorrection,k=0,c=!1,d,g;h.each(function(){var a=$(this),e=m(a);k+=e;k>=b?(n(a,!0,e),c=!0):(a.removeData("width"),f.before(a),d=a,g=k)});c&&void 0!==d&&g+f.width()>b&&n(d,!1);p(c)},n=function(b,a,c){void 0===c&&(c=m(b));b.data("width",c);a?b.appendTo(d):b.prependTo(d)},m=function(a){return(a.data("width")||a.width())+e.itemWidthCorrection},p=function(a){a?f.css({position:"",left:""}):f.css({position:"absolute",left:-1E4})},l=function(){var b=0;a.siblings().each(function(a,c){b+=c.offsetWidth});a.css("right",b+"px")};(function(){a=$(q);1>a.length||(l(),h=a.children("li"),d=$("\x3cul/\x3e").addClass("overflowBox"),f=$("\x3cli/\x3e").addClass("showMenuBtn").append('\x3ca href\x3d"#"\x3e\x3cdiv class\x3d"first"\x3e\x3c/div\x3e\x3cdiv\x3e\x3c/div\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/a\x3e').append(d),p(!1),h.last().after(f),e=$.extend({},e,r||{}),$(window).smartresize(function(){g()}),setTimeout(function(){g();a.addClass("rs-ready")},1E3))})()}})();FORTUNA.run(function(){FORTUNA.UI.rsMenu("#main_sub_nav",{menuWidthCorrection:"EXPLORER"==FORTUNA.UTILS.BrowserDetect.browser?0:50});FORTUNA.UI.rsMenu("#main-nav")},!0);
			/* /rs_menu */
			/* toggle_accordion_js */

(function(){FORTUNA.UI.accordionToggle={init:function(d){function e(){var a=$(this),b=a.closest(".js-toggle-item");if(!b.is(".js-expanded")){a=a.closest(".js-toggle-group");var c=a.find(".js-expanded");c&&c.is(b)?(b.removeClass("js-expanded"),b.find(".js-toggle-target").slideUp(100)):(a.find(".js-expanded").removeClass("js-expanded").find(".js-toggle-target").slideUp(100),b.addClass("js-expanded").find(".js-toggle-target").slideDown(100),a.data("active_index",a.index(b)))}}"reset"==d?$(".js-toggle-group").each(function(){var a=$(this);a.find(".js-toggle-target").slideDown(0).slideUp(0);a.find(".js-expanded").removeClass("js-expanded");a.find(".js-toggle-item").first().addClass("js-expanded").find(".js-toggle-target").slideDown(0)}):$(".js-toggle-group").each(function(){var a=$(this);a.data("accordionToggle_initialized")||(a.data("accordionToggle_initialized",!0),a.find(".js-toggle-button").on("click",e),a.find(".js-toggle-item").not(".js-expanded").find(".js-toggle-target").slideUp(0))})},reset:function(){FORTUNA.UI.accordionToggle.init("reset")}}})();$(document).ready(FORTUNA.UI.accordionToggle.init);
			/* /toggle_accordion_js */
			/* tooltip_info_bubble.js */
/* v2.0.0 */
!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=1)}([function(t,e){t.exports={bubbleElm:null,content:"",direction:"bottom",event:"hover",index:0,position:"middle",SELECTOR_BUBBLE_CLASS:"tooltip-info-bubble",DATA_POSITION:"tibPosition",DATA_DIRECTION:"tibDirection",DATA_CONTENT:"tibContent",DATA_EVENT:"tibEvent",DATA_ID:"tibId",target:null,__event:null,__visible:!1}},function(t,e,n){n(7);const i=n(2),o=n(0),r=n(3),s=n(4);!function(){window.readystate||(window.readystate=n(5));const t={instances:{}},e=function(e){const n=("object"==typeof e&&e.hasOwnProperty("querySelector")?e:document).querySelectorAll(".ti-bubble");t.instances=c(n),window.TIB||a()},a=function(){const n={initTooltips:function(t){e(t)},subscribe:function(e,n){(function(e,n){const i=t.instances[e];if(!i)throw'No tooltip with ID "'+e+'" awailable.';if(!n||!n.tagName)throw"No HTMLelement as subscriber provided.";u(i,n)}).apply(this,[e,n])}};Object.defineProperty(n,"instances",{get:function(){return t.instances}}),window.TIB=n},c=function(t){const e={};let n=0;return r(t,function(t,i){let r=d(i),s=i.dataset[o.DATA_EVENT]||o.event,a=i.dataset[o.DATA_DIRECTION]||o.direction,c=i.dataset[o.DATA_POSITION]||o.position,l=i.dataset[o.DATA_ID]||"tib-"+n++;if(e[l])throw'Tooltip with id "'+l+'" already presented, not registering \n'+i.outerHTML;if(!r)return!1;""===i.title&&i.removeAttribute("title");const f=Object.assign({},o,{direction:a,event:s,id:l,index:n,position:c,subscribers:[],target:i});e[l]=f,u(f)}),e},u=function(t,e){const n=e||t.target,o=e&&e.dataset.tibEvent||t.event;let r;switch(t.subscribers.push(n),o){case"focus":r=l.bind(t),n.addEventListener("focus",r),n.addEventListener("blur",r);break;case"hover":r=f.bind(t),n.addEventListener("mouseover",r),n.addEventListener("mouseout",r)}t.show=function(){!function(t){const e=d(t.target),n=document.createElement("div");n.className=t.SELECTOR_BUBBLE_CLASS,n.dataset.datIid=t.id,n.id="tib--"+t.id,n.innerHTML=e,s(n,t.direction,t.position),t.bubbleElm=n,document.body.appendChild(n)}(this);const t=i(this);this.target.title&&(this.target.__title=this.target.title,this.target.title=""),t.direction&&s(this.bubbleElm,t.direction,t.position),this.bubbleElm.style.top=t.top+"px",this.bubbleElm.style.left=t.left+"px",this.__visible=!0,this.bubbleElm.dataset.visible=!0},t.hide=function(){this.target.__title&&(this.target.title=this.target.__title),this.__visible=!1,this.bubbleElm.parentNode.removeChild(this.bubbleElm)}},l=function(t){"focus"===t.type?(this.__event=t.type,this.show()):(this.__event=null,this.hide())},d=function(t){return t&&t.tagName?t.dataset[o.DATA_CONTENT]||t.title:""},f=function(t){"focus"!==this.__event&&(this.__visible&&"mouseout"===t.type&&this.hide(),this.__visible||"mouseover"!==t.type||this.show())};window.readystate.interactive(e)}()},function(t,e){const n=5,i=5;let o,r,s,a,c,u,l,d,f,b;function p(t,e){const n=s.top+a;switch(t){case"left":case"right":return n+d/2-function(t){switch(t){case"start":return 0;case"middle":return u/2;case"end":return u}}(e);case"top":return n-u-o-i;case"bottom":return n+d+o+i}}function h(t,e){const n=s.left+c;switch(t){case"top":case"bottom":return n+r.left+f/2-o-function(t){switch(t){case"start":return 0;case"middle":return l/2;case"end":return l}}(e);case"right":return n+r.left+f+o+i;case"left":return n-r.left-l-o-i}}t.exports=function(t){let e;return o=function(t){const e=window.getComputedStyle(t,":before"),n=["top","left","right","bottom"];let i;for(;!i&&(i=parseFloat(e.getPropertyValue("border-"+n[0]+"-width")),n.shift(),n.length););return i}(t.bubbleElm,t.direction),r=document.body.getBoundingClientRect(),s=t.target.getBoundingClientRect(),a=window.pageYOffset||document.documentElement.scrollTop,c=window.pageXOffset||document.documentElement.scrollLeft,u=t.bubbleElm.offsetHeight,l=t.bubbleElm.offsetWidth,d=t.target.offsetHeight,f=t.target.offsetWidth,b=Math.max(document.documentElement.clientHeight,window.innerHeight),e=function(t,e){let i=e.left,r=e.top,s=t.direction,c=t.position,d=!1;switch(t.direction){case"right":(d=window.innerWidth-(i+l+o)<n)&&(i=h(s="bottom",c),r=p(s,c));break;case"left":(d=i<n/2)&&(i=h(s="bottom",c="start"),r=p(s,c));break;case"top":(d=r-a<n)&&(r=p(s="bottom",c));break;case"bottom":(d=b-(r+u+o-a)<n/2)&&(r=p(s="top",c));break;default:return{left:e.left,top:e.top,_direction:t.direction}}return{left:i,top:r,direction:s,position:c}}(t,{left:h(t.direction,t.position),top:p(t.direction,t.position)})}},function(t,e){t.exports=function(t,e,n){for(var i=0;i<t.length;i++)e.call(n,i,t[i])}},function(t,e,n){var i=n(0).SELECTOR_BUBBLE_CLASS;t.exports=function(t,e,n){var o="tib-pos-"+(e||"bottom"),r=n||t.getAttribute("data-position")||"middle",s=[i,o].join(" ");t.className=s,t.setAttribute("data-position",r)}},function(t,e,n){"use strict";var i=t.exports=n(6),o=new Function("return this")(),r="complete",s=!0,a=o.document,c=a.documentElement;!function(){if(r===a.readyState)return i.change(r);var t=!!a.addEventListener,e=t?"":"on",n=t?"addEventListener":"attachEvent",u=t?"removeEventListener":"detachEvent";if(!t&&"function"==typeof c.doScroll){try{s=!o.frameElement}catch(t){}s&&function t(){try{c.doScroll("left")}catch(e){return setTimeout(t,50)}i.change("interactive")}()}function l(t){"readystatechange"===(t=t||o.event).type&&(i.change(a.readyState),r!==a.readyState)||("load"===t.type?i.change("complete"):i.change("interactive"),("load"===t.type?o:a)[u](t.type,l,!1))}a[n](e+"DOMContentLoaded",l,!1),a[n](e+"readystatechange",l,!1),o[n](e+"load",l,!1)}()},function(t,e,n){"use strict";function i(t){return function(e,n){var i=this;return i.is(t)?setTimeout(function(){e.call(n,i.readyState)},0):(i._events[t]||(i._events[t]=[]),i._events[t].push({fn:e,context:n})),i}}function o(){this.readyState=o.UNKNOWN,this._events={}}o.states="ALL,UNKNOWN,LOADING,INTERACTIVE,COMPLETE".split(",");for(var r,s=0;s<o.states.length;s++)o[r=o.states[s]]=o.prototype[r]=s,o.prototype[r.toLowerCase()]=i(r);o.prototype.change=function(t){t=this.clean(t,!0);var e,n,i,r=0,s=this,a=s.readyState;if(a>=t)return s;for(s.readyState=t;r<o.states.length&&!(r>t);r++)if((n=o.states[r])in s._events){for(e=0;e<s._events[n].length;e++)(i=s._events[n][e]).fn.call(i.context||s,a);delete s._events[n]}return s},o.prototype.is=function(t){return this.readyState>=this.clean(t,!0)},o.prototype.clean=function(t,e){var n=typeof t;return e?"number"!==n?+o[t.toUpperCase()]||0:t:("number"===n?o.states[t]:t).toUpperCase()},o.prototype.removeAllListeners=function(){return this._events={},this},t.exports=new o},function(t,e){}]);
			/* /tooltip_info_bubble.js */
			/* live_chat_module */

(function(){function d(a){a.preventDefault();a.currentTarget.getAttribute("data-lhn-custom3");window.open(this.href,"lhnchat","left\x3d"+(screen.width-580-32)/2+",top\x3dwtop, width\x3d580,height\x3d435,toolbar\x3dno,location\x3dno,directories\x3dno,status\x3dno,menubar\x3dno,scrollbars\x3dno,copyhistory\x3dno,resizable\x3dyes")}FORTUNA.run(function(){var a=document.querySelectorAll("a.lhn-chat")||[],b=0,c=a.length;b;for(c;b<c;b++)a[b].addEventListener("click",d,!1)},!0)})();

			/* /live_chat_module */
			/* twemoji */

/*
 Copyright Twitter Inc. and other contributors. Licensed under MIT */
var twemoji=function(){function y(a,b){return"".concat(b.base,b.size,"/",a,b.ext)}function t(a,b){a=a.childNodes;for(var l=a.length,c,e;l--;)c=a[l],e=c.nodeType,3===e?b.push(c):1!==e||z.test(c.nodeName)||t(c,b);return b}function u(a){return v(0>a.indexOf(A)?a.replace(B,""):a)}function C(a,b){for(var l=t(a,[]),c=l.length,e,g,d,f,p,k,m,n,h,r;c--;){e=!1;d=document.createDocumentFragment();f=l[c];p=f.nodeValue;for(m=0;k=q.exec(p);){n=k.index;n!==m&&d.appendChild(document.createTextNode(p.slice(m,n)));k=k[0];r=u(k);m=n+k.length;if(n=b.callback(r,b)){h=new Image;h.onerror=b.onerror;h.setAttribute("draggable","false");e=b.attributes(k,r);for(g in e)e.hasOwnProperty(g)&&0!==g.indexOf("on")&&!h.hasAttribute(g)&&h.setAttribute(g,e[g]);h.className=b.className;h.alt=k;h.src=n;e=!0;d.appendChild(h)}h||d.appendChild(document.createTextNode(k));h=null}e&&(m<p.length&&d.appendChild(document.createTextNode(p.slice(m))),f.parentNode.replaceChild(d,f))}return a}function D(a,b){return w(a,function(a){var c=a,e=u(a),g=b.callback(e,b),d;if(g){c="\x3cimg ".concat('class\x3d"',b.className,'" ','draggable\x3d"false" ','alt\x3d"',a,'"',' src\x3d"',g,'"');a=b.attributes(a,e);for(d in a)a.hasOwnProperty(d)&&0!==d.indexOf("on")&&-1===c.indexOf(" "+d+"\x3d")&&(c=c.concat(" ",d,'\x3d"',a[d].replace(E,F),'"'));c=c.concat("\x3e")}return c})}function F(a){return G[a]}function H(){return null}function w(a,b){return String(a).replace(q,b)}function v(a,b){for(var f=[],c,e=0,g=0;g<a.length;)c=a.charCodeAt(g++),e?(f.push((65536+(e-55296<<10)+(c-56320)).toString(16)),e=0):55296<=c&&56319>=c?e=c:f.push(c.toString(16));return f.join(b||"-")}var f={base:"https://twemoji.maxcdn.com/2/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(a){a="string"===typeof a?parseInt(a,16):a;if(65536>a)return x(a);a-=65536;return x(55296+(a>>10),56320+(a&1023))},toCodePoint:v},onerror:function(){this.parentNode&&this.parentNode.replaceChild(document.createTextNode(this.alt),this)},parse:function(a,b){b&&"function"!==typeof b||(b={callback:b});var l=b.callback||y,c="function"===typeof b.attributes?b.attributes:H,e="string"===typeof b.base?b.base:f.base,g=b.ext||f.ext,d;(d=b.folder)||(d=b.size||f.size,d="number"===typeof d?d+"x"+d:d);return("string"===typeof a?D:C)(a,{callback:l,attributes:c,base:e,ext:g,size:d,className:b.className||f.className,onerror:b.onerror||f.onerror})},replace:w,test:function(a){q.lastIndex=0;a=q.test(a);q.lastIndex=0;return a}},G={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;","'":"\x26#39;",'"':"\x26quot;"},q=/\ud83d[\udc68-\udc69](?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92])|(?:\ud83c[\udfcb\udfcc]|\ud83d\udd75|\u26f9)(?:\ufe0f|\ud83c[\udffb-\udfff])\u200d[\u2640\u2642]\ufe0f|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd37-\udd39\udd3d\udd3e])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|(?:[\u0023\u002a\u0030-\u0039])\ufe0f?\u20e3|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1c\udd1e\udd26\udd30\udd33-\udd39\udd3d\udd3e]|[\u270a\u270b])(?:\ud83c[\udffb-\udfff]|)|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud800\udc00|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a-\udc6d\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef6]|\ud83e[\udd10-\udd17\udd1d\udd20-\udd25\udd27\udd3a\udd3c\udd40-\udd45\udd47-\udd4b\udd50-\udd5e\udd80-\udd91\uddc0]|[\u23e9-\u23ec\u23f0\u23f3\u2640\u2642\u2695\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a]|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u00a9\u00ae\u203c\u2049\u2122\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2694\u2696\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))/g,B=/\uFE0F/g,A=String.fromCharCode(8205),E=/[&<>'"]/g,z=/IFRAME|NOFRAMES|NOSCRIPT|SCRIPT|SELECT|STYLE|TEXTAREA|[a-z]/,x=String.fromCharCode;return f}();
			/* /twemoji */
			/* stretchable_iframe */

(function(){function c(){$("iframe.stretch").each(function(a,b){a=$(b);b=parseInt(a.attr("width"));var c=parseInt(a.attr("height"));a.css({width:"100%"});var d=a.width();a.css({height:d/b*c+"px"})})}FORTUNA&&$&&$(document).ready(function(){c();var a="resize";"function"==typeof $.prototype.smartresize&&(a="smartresize");var b=$(window);b[a].call(b,c)})})();
			/* /stretchable_iframe */
			/* responsible_gaming_js */

FORTUNA.UI.ResponsibleGaming={userLoginTime:function(c,d){if(d){if(!c||window.isRunningSeconds)return;window.isRunningSeconds=!0}else{if(!c||window.isRunning)return;window.isRunning=!0}var f=$(c).data("time"),l=$.cookie("loginTime"),g=f-l,h=d?500:3E4;window.setInterval($.proxy(function(){g+=h;var a=new Date(g),e=a.getTimezoneOffset()/60,b=["\u010cas od p\u0159ihl\u00e1\u0161en\u00ed:"],f=a.getSeconds(),k=a.getMinutes();a=a.getHours()+e;e=parseInt(a/24,10);0<e&&b.push(e+"d");0<a&&b.push(a+"h");(!d||0<k)&&b.push(k+"m");d&&b.push(f+"SEC_SYM");c.innerHTML=b.join(" ")},this),h)}};
			/* /responsible_gaming_js */
			/* new_window_openers_js */

(function(){function d(a,b){if("function"==typeof b)$("body").on("click",a,function(a){b(a,this)})}var c={".js-help-link":function(a,b){a.preventDefault();return!window.open(b.href,"_blank","width\x3d850,height\x3d550,scrollbars\x3d1")},".js-android-download":function(a,b){a.preventDefault();if(a=window.open("","_blank",FORTUNA.UTILS.expandPlaceholders("width\x3d{{width}},height\x3d{{height}},top\x3d{{top}},left\x3d{{left}},scrollbars\x3d{{scrollbars}}",{width:498,height:700,top:window.screenY+a.pageY-(void 0!==window.pageYOffset?window.pageYOffset:"CSS1Compat"===(document.compatMode||"")?document.documentElement.scrollTop:document.body.scrollTop)-350,left:window.screenX+a.pageX-(void 0!==window.pageXOffset?window.pageXOffset:"CSS1Compat"===(document.compatMode||"")?document.documentElement.scrollLeft:document.body.scrollLeft)-249,scrollbars:"yes"})))a.resizeTo(498,700),a.location.href=b.href;return!a},".js-new-opener-tab":function(a,b){window&&window.opener&&(a.preventDefault(),window.opener.open(b.href,"_blank",""),"true"==b.getAttribute("data-focus-current-after-open")&&window.focus())},".js-casino-game-link":function(a,b){b=$(a.target).closest("a");if(b.length&&b.attr("href"))return a.preventDefault(),window.open(b.attr("href"),"_blank",FORTUNA.UTILS.expandPlaceholders("width\x3d{{width}},height\x3d{{height}}",{width:983,height:667}))}};$(document).ready(function(){for(var a in c)d(a,c[a])})})();
			/* /new_window_openers_js */
			/* fortuna_ui_bottom_info */

(function(b){var c=YAHOO.util.Event;FORTUNA.UI_BOTTOM_INFO={componentName:"FORTUNA.UI_BOTTOM_INFO",hideTimeout:7E3,elm:null,elmMainContainer:null,elmFixed:null,domready:function(){this.elm=b("#js-self-limits-info-wrapper");this.elmFixed=b("#js-self-limits-info-wrapper-fixed");this.elmMainContainer=b("#main_content");0<this.elm.length&&this.initLimitInfo();0<this.elmFixed.length&&this.initLimitInfoFixed()},load:function(){},repositionLimitInfo:function(){var a=this.elmMainContainer.offset().left-b(window).scrollLeft(),c=this.elmMainContainer.width();this.elm.css({left:a});this.elm.css({width:c})},initLimitInfo:function(){var a=this;a.repositionLimitInfo();setTimeout(function(){a.elm.addClass("info-box-bottom-hidden")},a.hideTimeout);b(window).scroll(function(){a.repositionLimitInfo()});b(window).resize(function(){a.repositionLimitInfo()})},initLimitInfoFixed:function(){var a=this;setTimeout(function(){a.elmFixed.addClass("info-box-bottom-hidden")},a.hideTimeout)}};FORTUNA.components.push(FORTUNA.UI_BOTTOM_INFO);c.onDOMReady(function(){FORTUNA.UI_BOTTOM_INFO.domready()},!0,FORTUNA);c.on(window,"load",function(){FORTUNA.UI_BOTTOM_INFO.load()},!0,FORTUNA)})(jQuery);
			/* /fortuna_ui_bottom_info */
			/* early_cashout_js */

(function(){var f=FORTUNA.UTILS,k=(window.parent&&window.parent.ET?window.parent.ET:window.ET).ModalDialog,e=window.parent?window.parent.Shadowbox:e;FORTUNA.UI.EarlyCashout={SELECTORS:{SUMMARY:".early-cashout-summary",BUTTON_RELOAD:".button.reload",BUTTON_CASHOUT:".button.cashout",BUTTON_CLOSE:".button.close-dialog",BUTTON_ACCEPT:".button.accept",ACCEPT_CHANGES:".accept-changes",ACCEPT_CHANGES_CHECKBOX:"input[type\x3dcheckbox]",BUTTONS_HOLDER:".buttons",POPUP:"#early-cashout-popup, #early-cashout-popup-shim",MESSAGES:".messages",RESOLVE_URL_HOLDER:".resolve-url-holder",DENIED_REASON:".early-cashout-denied-reason",PREFERENCES:"#js-preferences"},CLASSES:{AJAX_RUNNING:"running",DISABLED:"disabled",HIDDEN:"hidden",NO_CLOSE:"no-close",LIVE:"live"},AUTHORIZATION_INTERVAL:5E3,LIVE_DELAY_TIMEOUT:7E3,LIVE_DELAY_ENABLED:!1,init:function(){this._initEarlyCashoutRefreshButton();this._initEarlyCashoutButton()},_clearPreviousModalDialogs:function(){$(this.SELECTORS.popup).remove();window.parent&&window.parent.$(this.SELECTORS.POPUP).remove();this._modalDialog=null},_openEarlyCashoutPopup:function(a){this._modalDialog||this._initializeModalDialog();this._modalDialog.open({contents:a,closeable:1});e&&e.switchKeyboardControlls&&e.switchKeyboardControlls(!1)},closeEarlyCashoutPopup:function(a){$(a).hasClass(this.CLASSES.DISABLED)||(this._modalDialog.close(),e?e.switchKeyboardControlls&&e.switchKeyboardControlls(!0):window.location.reload())},_initializeModalDialog:function(){var a=this;this._modalDialog=new k({id:"early-cashout-popup",closeOnShimClick:!1});this._modalDialog.$dialog.on("click",this.SELECTORS.BUTTON_CLOSE,function(b){b.preventDefault();a.closeEarlyCashoutPopup(b.target)});this._modalDialog.$dialog.on("click",this.SELECTORS.BUTTON_ACCEPT,function(b){b.preventDefault();a._confirmEarlyCashout(b.target)})},_initEarlyCashoutRefreshButton:function(){$(this.SELECTORS.SUMMARY+" "+this.SELECTORS.BUTTON_RELOAD).on("click",$.proxy(function(a){this._refreshEarlyCashoutButtonValue(a)},this))},_initEarlyCashoutButton:function(){$(this.SELECTORS.SUMMARY).on("click",this.SELECTORS.BUTTON_CASHOUT,$.proxy(function(a){this._clearPreviousModalDialogs();this._openCashoutConfirmDialog(a)},this))},_refreshEarlyCashoutButtonValue:function(a){if(a){a.preventDefault();var b=this,c=$(a.target).closest(this.SELECTORS.BUTTON_RELOAD);c.hasClass(this.CLASSES.AJAX_RUNNING)||(a=c.data("ajax-url"))&&$.ajax({url:a,dataType:"xml",beforeSend:function(){c.addClass(b.CLASSES.AJAX_RUNNING)},success:function(a){b._handleRefreshResponse(c,a)},error:function(a,b,c){f.log(b+" - "+c)},complete:function(){c.removeClass(b.CLASSES.AJAX_RUNNING)}})}},_openCashoutConfirmDialog:function(a){if(a){a.preventDefault();var b=this,c=$(a.target);c.hasClass(this.CLASSES.DISABLED)||(a=c.data("ajax-url"),c=c.data("early-cashout-value"),a&&(a=f.editUrlParams(a,{value:c}),$.ajax({url:a,dataType:"html",success:function(a){b._openEarlyCashoutPopup(a)},error:function(a,b,c){f.log(b+" - "+c)}})))}},_handleRefreshResponse:function(a,b){a=a.parents(this.SELECTORS.SUMMARY);var c=a.find(this.SELECTORS.BUTTON_CASHOUT);b=$(b);var d=c.data("active-class");switch(b.find("status").text().toUpperCase()){case "OK":c.html(b.find("label").text()).data("early-cashout-value",b.find("value").text()).removeClass(this.CLASSES.DISABLED).addClass(d);this._updateTicketPartContent("#bets-on-ticket",b.find("betsOnTicket").text());this._updateTicketPartContent("#bottom-info",b.find("bottomInfo").text(),!0);this._updateReason();break;case "DISABLED":c.text(b.find("label").text()).data("early-cashout-value",null).removeClass(d).addClass(this.CLASSES.DISABLED);this._updateTicketPartContent("#bets-on-ticket",b.find("betsOnTicket").text());this._updateTicketPartContent("#bottom-info",b.find("bottomInfo").text(),!0);this._updateReason(b.find("reason").text());break;case "ERROR_INVALID_USER":a.remove(),$(".early-cashout-help").remove()}},_updateTicketPartContent:function(a,b,c){if(b&&0<b.length)$(a)[c?"replaceWith":"html"](b)},_updateReason:function(a){var b=$(this.SELECTORS.SUMMARY),c=$(this.SELECTORS.DENIED_REASON);a&&(b.length?b.find("td:first-child").append($(a)):$(".summary_table_box table").append($(a)));c.remove()},_confirmEarlyCashout:function(a){var b=$(a).closest(this.SELECTORS.BUTTON_ACCEPT);if(!b.hasClass(this.CLASSES.AJAX_RUNNING)&&!b.hasClass(this.CLASSES.DISABLED)){var c=b.data("ajax-url");if(c)if(a=this._modalDialog.$contents.find(this.SELECTORS.ACCEPT_CHANGES+" "+this.SELECTORS.ACCEPT_CHANGES_CHECKBOX),c=f.editUrlParams(c,{ignore_changes:a.is(":checked")}),b.hasClass(this.CLASSES.LIVE)&&this.LIVE_DELAY_ENABLED){var d=this;this._disableEarlyCashoutPopupControlls(b);this._toggleModalDialogCloseButton(!1);window.setTimeout(function(){d._doSellTicketRequest(c,b)},this.LIVE_DELAY_TIMEOUT)}else this._doSellTicketRequest(c,b)}},_doSellTicketRequest:function(a,b){var c=this;$.ajax({url:a,dataType:"html",beforeSend:function(){c._disableEarlyCashoutPopupControlls(b);c._toggleModalDialogCloseButton(!1);c._hideError()},success:function(a){c._handleEarlyCashoutSellResponse(b,a)},error:function(a,h,g){c._handleEarlyCashoutSellCommunicationError(b,h,g)}})},_resolveEarlyCashout:function(a,b){var c=this,d=$(b).closest(this.SELECTORS.BUTTON_ACCEPT);a=$("\x3cdiv\x3e"+a+"\x3c/div\x3e").find(this.SELECTORS.RESOLVE_URL_HOLDER).data("resolve-url");(a=f.editUrlParams(a,{_ts:(new Date).getTime()}))&&$.ajax({url:a,dataType:"html",success:function(a){c._handleEarlyCashoutSellResponse(d,a)},error:function(a,b,e){c._handleEarlyCashoutSellCommunicationError(d,b,e)}})},_disableEarlyCashoutPopupControlls:function(a){var b=this._modalDialog.$contents.find(this.SELECTORS.ACCEPT_CHANGES);b.addClass("disabled");b.find(this.SELECTORS.ACCEPT_CHANGES_CHECKBOX).attr("readonly","readonly").attr("disabled","disabled");this._modalDialog.$contents.find(this.SELECTORS.BUTTON_CLOSE).addClass(this.CLASSES.DISABLED);a.hasClass(this.CLASSES.AJAX_RUNNING)||(b=a.text(),a.html("\x3cspan\x3e\x3c/span\x3e"+a.data("running-text")),a.data("running-text",b));a.addClass(this.CLASSES.AJAX_RUNNING)},_disableSellTicketButton:function(a){this._toggleModalDialogCloseButton(!0);this._enableEarlyCashoutPopupControlls(a);a.addClass(this.CLASSES.DISABLED).removeClass(a.data("active-class"));a=$(this.SELECTORS.SUMMARY+" "+this.SELECTORS.BUTTON_CASHOUT);a.text(a.data("label-disabled")).data("early-cashout-value",null).removeClass(a.data("active-class")).addClass(this.CLASSES.DISABLED)},_enableEarlyCashoutPopupControlls:function(a){var b=this._modalDialog.$contents.find(this.SELECTORS.ACCEPT_CHANGES),c=a.text();b.removeClass("disabled");b.find(this.SELECTORS.ACCEPT_CHANGES_CHECKBOX).attr("readonly",null).attr("disabled",null);a.removeClass(this.CLASSES.AJAX_RUNNING);a.html("\x3cspan\x3e\x3c/span\x3e"+a.data("running-text"));a.data("running-text",c);this._modalDialog.$contents.find(this.SELECTORS.BUTTON_CLOSE).removeClass(this.CLASSES.DISABLED)},_handleEarlyCashoutSellResponse:function(a,b){-1<b.indexOf("AJAX:OK")?this._doAfterSellSuccess(b):-1<b.indexOf("AJAX:VALUE_CHANGED")?this._doAfterSellValueChanged(b):-1<b.indexOf("AJAX:ERROR_UNRESOLVED")?this._doAfterSellUnresolved(b,a):-1<b.indexOf("AJAX:ERROR_AUTHORIZATION")?this._doAfterSellUnresolved(b,a):-1<b.indexOf("AJAX:ERROR_DELAYING")?this._doAfterSellDelaying(b,a):-1<b.indexOf("AJAX:ERROR_ERROR")?this._doAfterSellRejected(b,a):-1<b.indexOf("AJAX:ERROR_TIMED_OUT")?this._doAfterSellRejected(b,a):-1<b.indexOf("AJAX:ERROR_UNKNOWN")?this._handleEarlyCashoutSellCommunicationError(a):this._doAfterSellUnknownState(b,a)},_handleEarlyCashoutSellCommunicationError:function(a,b,c){var d=a.data("communication-error"),e=$('\x3cdiv class\x3d"message error-text"\x3e\x3c/div\x3e'),g=this._modalDialog.$contents.find(this.SELECTORS.MESSAGES).html(e);b&&c&&(d+="\x3c!-- "+b+" - "+c+" --\x3e");e.html(d);g.html(e);g.removeClass(this.CLASSES.HIDDEN);this._disableSellTicketButton(a)},_hideError:function(){this._modalDialog.$contents.find(this.SELECTORS.ERROR_TEXT).addClass(this.CLASSES.HIDDEN)},_setMessage:function(a){this._modalDialog.$contents.find(this.SELECTORS.MESSAGES).html(a)},_doAfterSellSuccess:function(a){var b=this;window.parent&&window.parent.FORTUNA&&window.parent.FORTUNA.UI&&window.parent.FORTUNA.UI.invalidateUserAccount?window.parent.FORTUNA.UI.invalidateUserAccount({success:function(){b._doAfterEarlyCashoutSellComplete(a)}}):this._showSellCompleteDialog(a)},_doAfterSellUnresolved:function(a,b){this._setMessage(a);this._toggleModalDialogCloseButton(!1);window.setTimeout($.proxy(function(){this._resolveEarlyCashout(a,b)},this),this.AUTHORIZATION_INTERVAL)},_doAfterSellDelaying:function(a,b){this._setMessage(a);this._toggleModalDialogCloseButton(!1);window.setTimeout($.proxy(function(){this._resolveEarlyCashout(a,b)},this),this.AUTHORIZATION_INTERVAL)},_doAfterSellUnknownState:function(a,b){this._toggleModalDialogCloseButton(!0);this._setMessage(a);this._enableEarlyCashoutPopupControlls(b)},_doAfterSellRejected:function(a,b){this._setMessage(a);this._disableSellTicketButton(b)},_doAfterSellValueChanged:function(a){this._toggleModalDialogCloseButton(!0);this._modalDialog.$contents.html(a)},_doAfterEarlyCashoutSellComplete:function(a){function b(){var b=$("#sidebar_tikets_list",d.document).attr("href");c._showSellCompleteDialog(a);c._reloadTicket(!0,!1);b&&c._reloadRightSidebar(d,b)}var c=this,d=window.parent&&window!=window.parent?window.parent:window,h=$(this.SELECTORS.PREFERENCES).attr("data-set-ticket-url");d.$.ajax({url:h,success:function(a){var c=d.$("#tickets-table");c.length?(a=d.$("#ticket-list-kind").data("value"),a=f.editUrlParams(d.location.href,{_ajax:1,action:"update_ticket_list",kind:a}),$.ajax({url:a,dataType:"html",success:function(a){console.log("Table with tickets reloaded!");c.html(a);e.clearCache("tickets");e.setup();b()}})):b()}})},_reloadRightSidebar:function(a,b){a||(a=window);if(!b)return!1;a.TDI.Ajax.Request.send(b)},_reloadTicket:function(a,b){(a&&FORTUNA&&FORTUNA.UI&&FORTUNA.UI.TicketPreview&&FORTUNA.UI.TicketPreview.isInShadowbox&&FORTUNA.UI.TicketPreview.isInShadowbox()||b&&(!window.parent||window==window.parent))&&window.location.reload()},_toggleModalDialogCloseButton:function(a){a?this._modalDialog.$close.removeClass(this.CLASSES.HIDDEN):this._modalDialog.$close.addClass(this.CLASSES.HIDDEN)},reinitializeModalDialog:function(){if(window.parent&&window.parent!=window&&window.parent.$("html").hasClass("ie9")){var a=window.parent.$("#early-cashout-popup");a.off("click",".button.close-dialog");a.on("click",".button.close-dialog",function(b){b.preventDefault();a.remove();window.parent.$("#early-cashout-popup-shim").remove()})}},_showSellCompleteDialog:function(a){this._toggleModalDialogCloseButton(!0);this._modalDialog.$contents.html(a)}}})();
			/* /early_cashout_js */
			/* tracking_js */

function _classCallCheck(b,a){if(!(b instanceof a))throw new TypeError("Cannot call a class as a function");}var LinkTracker=function(){function b(){_classCallCheck(this,b)}b.getFtnIdent=function(){if(window.FortunaTracking&&window.FortunaTracking.fetchUserDetails)return window.FortunaTracking.fetchUserDetails().personalId};b.trackNavBarClick=function(a,c){a={event:c,category:a.target.text,userID:b.getFtnIdent()};this.sendEvent(a)};b.trackArticle=function(a){a={event:"info",article:a,userID:b.getFtnIdent()};this.sendEvent(a)};b.trackHelp=function(a){a={event:"help",article:a,userID:b.getFtnIdent()};this.sendEvent(a)};b.trackDepositBtn=function(){var a={event:"myAccountDepositclick",button:"deposit",buttonLocation:"maDropdown",userID:b.getFtnIdent()};this.sendEvent(a)};b.initHelpTracking=function(){FORTUNA&&FORTUNA.run(function(){var a=document.querySelector(".faq_list"),c=a.querySelectorAll(".answer");YAHOO.util.Event.delegate(a,"click",function(a){a=a.target&&a.target.text.trim();return b.trackHelp(a)},"a");c.forEach(function(a){if(null!==a.getAttribute("style"))return a=(a=a.parentElement.querySelector(".FAQOpener a"))?a.text.trim():"",b.trackHelp(a)})},!0)};b.sendEvent=function(a){dataLayer&&"function"===dataLayer.push&&dataLayer.push(JSON.stringify(a))};return b}();FORTUNA&&FORTUNA.run(function(){document.querySelectorAll(" a");document.querySelectorAll(" a");var b=document.querySelector("#user-menu .donation-yellow");YAHOO.util.Event.delegate("#main-nav","click",function(a){return LinkTracker.trackNavBarClick(a,"navBar")},"a");YAHOO.util.Event.delegate("#main_sub_nav","click",function(a){return LinkTracker.trackNavBarClick(a,"subNavBar")},"a");b&&b.addEventListener("click",function(){LinkTracker.trackDepositBtn()})},!0);
			/* /tracking_js */
